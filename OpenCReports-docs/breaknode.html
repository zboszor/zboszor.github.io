<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.14. Break</title><link rel="stylesheet" type="text/css" href="https://www.postgresql.org/media/css/docs-complete.css" /><link rev="made" href="zboszor@gmail.com" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="breaksnode.html" title="8.13. Breaks" /><link rel="next" href="outputnode.html" title="8.15. Output" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">8.14. Break</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="breaksnode.html" title="8.13. Breaks">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="xmldescriptor.html" title="Chapter 8. Report XML description">Up</a></td><th width="60%" align="center">Chapter 8. Report XML description</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="OpenCReports 0.8.11 Manual">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="outputnode.html" title="8.15. Output">Next</a></td></tr></table><hr /></div><div class="sect1" id="BREAKNODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.14. Break <a href="#BREAKNODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="breaknode.html#BREAKATTS">8.14.1. Break attributes</a></span></dt><dt><span class="sect2"><a href="breaknode.html#BREAKSUBSECS">8.14.2. Break subsections</a></span></dt><dt><span class="sect2"><a href="breaknode.html#BREAKSEXAMPLE">8.14.3. A complete break example</a></span></dt></dl></div><p>
			This node describes one
			<code class="literal">&lt;Break&gt;</code>.
			</p><pre class="programlisting">&lt;Break ... &gt;
    &lt;BreakHeader&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/BreakHeader&gt;
    &lt;BreakFooter&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/BreakFooter&gt;
    &lt;BreakFields&gt;
        &lt;BreakField /&gt;
        ...
    &lt;/BreakFields&gt;
&lt;/Break&gt;</pre><p>
		</p><p>
			The order in which <code class="literal">Break</code> nodes are listed
			matters for two reasons.
		</p><p>
			The primary reason is that break fields are
			hierarchical. The break fields listed earlier
			are higher in the hierarchy. If a break field
			earlier in the list triggers, all subsequent
			break fields also trigger implicitly.
		</p><p>
			The second reason is a consequence of the
			previous one: emitting the
			<a class="xref" href="breaknode.html#BREAKHEADERNODE" title="8.14.2.1. BreakHeader">BreakHeader</a>s
			occur in the order of the list.
			For logical reasons,
			<a class="xref" href="breaknode.html#BREAKFOOTERNODE" title="8.14.2.2. BreakFooter">BreakFooter</a>s
			are in reverse order.
		</p><div class="sect2" id="BREAKATTS"><div class="titlepage"><div><div><h3 class="title">8.14.1. Break attributes <a href="#BREAKATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="BREAKNAME"><div class="titlepage"><div><div><h4 class="title">8.14.1.1. Name <a href="#BREAKNAME" class="id_link">#</a></h4></div></div></div><p>
					The name of the break. It must be
					unique in the list of breaks for
					the parent <code class="literal">&lt;Report&gt;</code> node.
					</p><pre class="programlisting">&lt;Break name="break1" /&gt;</pre><p>
				</p></div><div class="sect3" id="BREAKHNP"><div class="titlepage"><div><div><h4 class="title">8.14.1.2. Header on new page <a href="#BREAKHNP" class="id_link">#</a></h4></div></div></div><p>
					After a break boundary, the header starts on a new page.
					Accepted in two variants:
					</p><pre class="programlisting">&lt;Break headernewpage="yes" /&gt;
&lt;Break newpage="yes" /&gt;</pre><p>
				</p><p>
					The <code class="literal">newpage="yes"</code> variant is
					parsed but ignored in RLIB.
				</p></div><div class="sect3" id="BREAKSB"><div class="titlepage"><div><div><h4 class="title">8.14.1.3. Suppress break header and footer for blank break fields <a href="#BREAKSB" class="id_link">#</a></h4></div></div></div><p>
					Suppress break header and footer in case
					any of the break fields' values are either
					<code class="literal">NULL</code> or an empty string,
					if the break field is of the string type.
					</p><pre class="programlisting">&lt;Break suppressblank="yes" /&gt;</pre><p>
				</p></div></div><div class="sect2" id="BREAKSUBSECS"><div class="titlepage"><div><div><h3 class="title">8.14.2. Break subsections <a href="#BREAKSUBSECS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="BREAKHEADERNODE"><div class="titlepage"><div><div><h4 class="title">8.14.2.1. BreakHeader <a href="#BREAKHEADERNODE" class="id_link">#</a></h4></div></div></div><p>
					The break header is printed before the new data row
					if it causes a break, i.e. the values in the set of
					break fields changed from one row to the next.
					It contains an <a class="xref" href="outputnode.html" title="8.15. Output">Output node</a> child node.
					</p><pre class="programlisting">&lt;BreakHeader&gt;
    &lt;Output&gt;
        ...
    &lt;/Output&gt;
&lt;/BreakHeader&gt;</pre><p>
				</p></div><div class="sect3" id="BREAKFOOTERNODE"><div class="titlepage"><div><div><h4 class="title">8.14.2.2. BreakFooter <a href="#BREAKFOOTERNODE" class="id_link">#</a></h4></div></div></div><p>
					The break header is printed after the previous data row
					if it causes a break, i.e. the values in the set of
					break fields changed from one row to the next. Also
					before the first row in the data set.
					It contains an <a class="xref" href="outputnode.html" title="8.15. Output">Output node</a> child node.
					</p><pre class="programlisting">&lt;BreakHeader&gt;
    &lt;Output&gt;
        ...
    &lt;/Output&gt;
&lt;/BreakHeader&gt;</pre><p>
				</p></div><div class="sect3" id="BREAFIELDS"><div class="titlepage"><div><div><h4 class="title">8.14.2.3. BreakFields <a href="#BREAFIELDS" class="id_link">#</a></h4></div></div></div><p>
					The break fields node contains one or more
					<a class="xref" href="breaknode.html#BREAKFIELD" title="8.14.2.3.1. BreakField">BreakField</a> children nodes.
					</p><pre class="programlisting">&lt;BreakFields&gt;
    &lt;BreakField ... /&gt;
    ...
&lt;/BreakFields&gt;</pre><p>
				</p><div class="sect4" id="BREAKFIELD"><div class="titlepage"><div><div><h5 class="title">8.14.2.3.1. BreakField <a href="#BREAKFIELD" class="id_link">#</a></h5></div></div></div><p>
						The break field node only has one attribute and
						contains no child nodes.
						</p><pre class="programlisting">&lt;BreakField value="..."/&gt;</pre><p>
					</p><p>
						The sole attribute in
						<code class="literal">&lt;BreakField&gt;</code> is
						<code class="literal">&lt;value&gt;</code> where the
						expression watched for changes is declared.
						See <a class="xref" href="expressions.html" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
					</p><p>
						There must be at least one
						<code class="literal">&lt;BreakField&gt;</code> node
						listed. When more than one break fields
						are listed, then all of them are watched
						for value changes. If any of them changes,
						a break boundary occurs for the break.
					</p></div></div></div><div class="sect2" id="BREAKSEXAMPLE"><div class="titlepage"><div><div><h3 class="title">8.14.3. A complete break example <a href="#BREAKSEXAMPLE" class="id_link">#</a></h3></div></div></div><p>
				This XML part below shows a complete example of
				nested breaks based on the real life example
				mentioned in <a class="xref" href="groupingdata.html" title="6.1. Grouping data">Section 6.1</a>.
				</p><pre class="programlisting">&lt;Report&gt;

    &lt;Breaks&gt;

        &lt;Break&gt;

            &lt;BreakHeader&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;field value="query1.department" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakHeader&gt;

            &lt;BreakFooter&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal&gt;End of &lt;/literal&gt;
                        &lt;field value="query1.department" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakFooter&gt;

            &lt;BreakFields&gt;
                &lt;BreakField value="query1.department" /&gt;
            &lt;/BreakFields&gt;

        &lt;/Break&gt;

        &lt;Break&gt;

            &lt;BreakHeader&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal width="30" /&gt;
                        &lt;field value="query1.paygrade" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakHeader&gt;

            &lt;BreakFooter&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal width="30" /&gt;
                        &lt;literal&gt;End of &lt;/literal&gt;
                        &lt;field value="query1.paygrade" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakFooter&gt;

            &lt;BreakFields&gt;
                &lt;BreakField value="query1.paygrade" /&gt;
            &lt;/BreakFields&gt;

        &lt;/Break&gt;

    &lt;/Breaks&gt;

    &lt;Detail&gt;

        &lt;FieldHeaders&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal width="60" /&gt;
                    &lt;literal&gt;Employee name&lt;/literal&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/FieldHeaders&gt;

        &lt;FieldDetails&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal width="60" /&gt;
                    &lt;field value="query1.employee" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/FieldDetails&gt;

    &lt;Detail&gt;

&lt;/Report&gt;</pre><p>
			</p><p>
				Assuming that <a class="xref" href="ocrpttopxml.html#SIZEUNIT" title="8.2.1. Size unit attribute">Size unit attribute</a> is set to
				<code class="literal">points</code>, the indentation would be
				30 and 60 points for certain elements (see the empty
				<code class="literal">&lt;literal&gt;</code>s) and the result
				would look like this:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
							Before the first row on every page, the contents
							of <code class="literal">&lt;FieldHeaders&gt;</code> is
							printed.
						</p></li><li class="listitem"><p>
							Before the first row, the contents of
							<code class="literal">&lt;BreakHeader&gt;</code>
							is printed for every break declared in
							the <code class="literal">&lt;Report&gt;</code> in
							the order of their declaration.
						</p></li><li class="listitem"><p>
							The contents of
							<code class="literal">&lt;FieldDetails&gt;</code>
							is printed for the current row. Repeat until
							a value change is observed between
							adjacent rows for a break's expression.
							In this case, the employees are printed
							in one block that are in the current paygrade
							category and working at the current department.
						</p></li><li class="listitem"><p>
							When a value change happened between
							adjacent rows for a break's expression,
							then this break and every break declared after
							it triggers. For every triggering breaks,
							their <code class="literal">&lt;BreakFooter&gt;</code>
							is printed in the reverse order of their
							declaration. This is done using the
							<span class="emphasis"><em>previous row</em></span>, so if any data
							used from the row or derived from it (e.g. a
							variable) and is to be displayed in the footer,
							it will be valid for the break range that just
							ended.
						</p></li><li class="listitem"><p>
							Before the new row, the contents of
							<code class="literal">&lt;BreakHeader&gt;</code>
							is printed for every break that just triggered.
							For example, the department's name is not
							printed if only the paygrade category changed
							in the same department from the one row to
							the next.
						</p></li><li class="listitem"><p>
							Repeat from step 3 until there are no more
							data rows.
						</p></li></ol></div><p>
			</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="breaksnode.html" title="8.13. Breaks">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="xmldescriptor.html" title="Chapter 8. Report XML description">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="outputnode.html" title="8.15. Output">Next</a></td></tr><tr><td width="40%" align="left" valign="top">8.13. Breaks </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="OpenCReports 0.8.11 Manual">Home</a></td><td width="40%" align="right" valign="top"> 8.15. Output</td></tr></table></div></body></html>