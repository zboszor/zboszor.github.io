<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>OpenCReports 0.8.3 Manual</title><link rel="stylesheet" type="text/css" href="https://www.postgresql.org/media/css/docs-complete.css" /><link rev="made" href="zboszor@gmail.com" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /></head><body id="docContent" class="container-fluid col-10"><div class="book" id="id-1"><div class="titlepage"><div><div><h1 class="title">OpenCReports 0.8.3 Manual</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Zoltán</span> <span class="surname">Böszörményi</span></h3></div></div><div><p class="copyright">Copyright © 2019-2023 Zoltán Böszörményi</p></div><div><div class="legalnotice" id="id-1.1.5"><div class="blockquote"><blockquote class="blockquote"><p>
					Permission is granted to copy, distribute and/or modify this document
					under the terms of the GNU Free Documentation License, Version 1.2
					or any later version published by the Free Software Foundation;
					with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
					Texts.  A copy of the license is included in the section entitled "GNU
					Free Documentation License".
				</p></blockquote></div></div></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="chapter"><a href="#INTRODUCTION">1. Introduction and concepts</a></span></dt><dd><dl><dt><span class="sect1"><a href="#RLIB">1.1. The predecessor: RLIB</a></span></dt><dt><span class="sect1"><a href="#CONCEPTS">1.2. Concepts</a></span></dt><dt><span class="sect1"><a href="#PLANNED">1.3. OpenCReports planned features</a></span></dt></dl></dd><dt><span class="chapter"><a href="#XMLDESCRIPTOR">2. Report XML description</a></span></dt><dd><dl><dt><span class="sect1"><a href="#DESCSTRUCT">2.1. XML description structure</a></span></dt><dt><span class="sect1"><a href="#OCRPTTOPXML">2.2. OpenCReport element</a></span></dt><dt><span class="sect1"><a href="#SEARCHPATHS">2.3. Paths</a></span></dt><dt><span class="sect1"><a href="#DATASOURCES">2.4. Datasources</a></span></dt><dt><span class="sect1"><a href="#QUERIES">2.5. Queries</a></span></dt><dt><span class="sect1"><a href="#PARTS">2.6. Report parts</a></span></dt><dt><span class="sect1"><a href="#PARTROW">2.7. Part row</a></span></dt><dt><span class="sect1"><a href="#PARTCOL">2.8. Part column</a></span></dt><dt><span class="sect1"><a href="#REPORT">2.9. Report</a></span></dt><dt><span class="sect1"><a href="#LOADEDREPORT">2.10. Loaded report</a></span></dt><dt><span class="sect1"><a href="#VARIABLESNODE">2.11. Variables</a></span></dt><dt><span class="sect1"><a href="#VARIABLENODE">2.12. Variable</a></span></dt><dt><span class="sect1"><a href="#BREAKSNODE">2.13. Breaks</a></span></dt><dt><span class="sect1"><a href="#BREAKNODE">2.14. Break</a></span></dt><dt><span class="sect1"><a href="#OUTPUTNODE">2.15. Output</a></span></dt><dt><span class="sect1"><a href="#LINENODE">2.16. Line</a></span></dt><dt><span class="sect1"><a href="#TEXTELEMNODE">2.17. Text element</a></span></dt><dt><span class="sect1"><a href="#HLINENODE">2.18. HorizontalLine</a></span></dt><dt><span class="sect1"><a href="#IMAGENODE">2.19. Image</a></span></dt><dt><span class="sect1"><a href="#IMAGEENDNODE">2.20. Image end</a></span></dt><dt><span class="sect1"><a href="#COLORSPEC">2.21. Color specification</a></span></dt></dl></dd><dt><span class="chapter"><a href="#EXPRESSIONS">3. Expressions in OpenCReports</a></span></dt><dd><dl><dt><span class="sect1"><a href="#EXPRINTRO">3.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#CONSTANTS">3.2. Constants</a></span></dt><dt><span class="sect1"><a href="#PRECALCEXPR">3.3. Precalculated expressions</a></span></dt><dt><span class="sect1"><a href="#IDENTIFIERS">3.4. Identifiers</a></span></dt><dt><span class="sect1"><a href="#OPSANDFUNC">3.5. Operators and functions</a></span></dt><dt><span class="sect1"><a href="#LISTOFFUNCS">3.6. Alphabetical list of functions</a></span></dt></dl></dd><dt><span class="chapter"><a href="#BREAKS">4. Report breaks</a></span></dt><dd><dl><dt><span class="sect1"><a href="#GROUPINGDATA">4.1. Grouping data</a></span></dt><dt><span class="sect1"><a href="#REPORTBREAKS">4.2. Report breaks in OpenCReports</a></span></dt></dl></dd><dt><span class="chapter"><a href="#VARIABLES">5. Report variables</a></span></dt><dd><dl><dt><span class="sect1"><a href="#USERVARINTRO">5.1. Introduction to report variables</a></span></dt><dt><span class="sect1"><a href="#EXPRVAR">5.2. Expression variables</a></span></dt><dt><span class="sect1"><a href="#USERVARSIMPLE">5.3. Variable types for simple statistics</a></span></dt><dt><span class="sect1"><a href="#CUSTOMVAR">5.4. Custom variables</a></span></dt><dt><span class="sect1"><a href="#PRECALCVAR">5.5. Precalculated variables</a></span></dt><dt><span class="sect1"><a href="#USERVARRESET">5.6. Resetting a variable on break boundaries</a></span></dt></dl></dd><dt><span class="chapter"><a href="#FORMATTING">6. Formatting</a></span></dt><dd><dl><dt><span class="sect1"><a href="#FORMATTINGFUNCS">6.1. Formatting functions</a></span></dt><dt><span class="sect1"><a href="#FORMATSTRINGS">6.2. Format strings</a></span></dt><dt><span class="sect1"><a href="#LEGACYFORMATSTRINGS">6.3. Legacy format strings</a></span></dt><dt><span class="sect1"><a href="#NEWFORMATSTRINGS">6.4. New style format strings</a></span></dt><dt><span class="sect1"><a href="#NEWFORMATSTRINGSGEN2">6.5. Second generation new style format strings</a></span></dt></dl></dd><dt><span class="chapter"><a href="#C-API-REFERENCE">7. C language API reference</a></span></dt><dd><dl><dt><span class="sect1"><a href="#C_HEADER">7.1. Header file</a></span></dt><dt><span class="sect1"><a href="#HIGHLEVELAPI">7.2. High level C API</a></span></dt><dt><span class="sect1"><a href="#LOWLEVELAPI">7.3. Low level C API</a></span></dt></dl></dd><dt><span class="chapter"><a href="#PHP-API-REFERENCE">8. PHP language API reference</a></span></dt><dd><dl><dt><span class="sect1"><a href="#PHPMODULE">8.1. The OpenCReports PHP module</a></span></dt><dt><span class="sect1"><a href="#MAINCLASS">8.2. The OpenCReport class</a></span></dt><dt><span class="sect1"><a href="#PHPHIGHLEVELAPI">8.3. High level PHP API</a></span></dt><dt><span class="sect1"><a href="#PHPLOWLEVELAPI">8.4. Low level PHP API</a></span></dt><dt><span class="sect1"><a href="#PHPDSCLASS">8.5. The OpenCReport\Datasource class</a></span></dt><dt><span class="sect1"><a href="#PHPQUERYCLASS">8.6. The OpenCReport\Query class</a></span></dt><dt><span class="sect1"><a href="#PHPQUERYRESULTCLASS">8.7. The OpenCReport\QueryResult class</a></span></dt><dt><span class="sect1"><a href="#PHPEXPRCLASS">8.8. The OpenCReport\Expr class</a></span></dt><dt><span class="sect1"><a href="#PHPRESULTCLASS">8.9. The OpenCReport\Result class</a></span></dt><dt><span class="sect1"><a href="#PHPPARTCLASS">8.10. The OpenCReport\Part class</a></span></dt><dt><span class="sect1"><a href="#PHPPARTROWCLASS">8.11. The OpenCReport\Row class</a></span></dt><dt><span class="sect1"><a href="#PHPPARTCOLCLASS">8.12. The OpenCReport\Column class</a></span></dt><dt><span class="sect1"><a href="#PHPREPORTCLASS">8.13. The OpenCReport\Report class</a></span></dt><dt><span class="sect1"><a href="#PHPVARIABLECLASS">8.14. The OpenCReport\Variable class</a></span></dt><dt><span class="sect1"><a href="#PHPBREAKCLASS">8.15. The OpenCReport\Break class</a></span></dt><dt><span class="sect1"><a href="#PHPOUTPUTCLASS">8.16. The OpenCReport\Output class</a></span></dt><dt><span class="sect1"><a href="#PHPLINECLASS">8.17. The OpenCReport\Line class</a></span></dt><dt><span class="sect1"><a href="#PHPHLINECLASS">8.18. The OpenCReport\HorizontalLine class</a></span></dt><dt><span class="sect1"><a href="#PHPIMAGECLASS">8.19. The OpenCReport\Image class</a></span></dt><dt><span class="sect1"><a href="#PHPTEXTCLASS">8.20. The OpenCReport\Text class</a></span></dt><dt><span class="sect1"><a href="#PHPRLIBCOMPAT">8.21. RLIB compatibility API</a></span></dt></dl></dd><dt><span class="chapter"><a href="#EXAMPLES">9. Examples</a></span></dt><dd><dl><dt><span class="sect1"><a href="#EXAMPLE1">9.1. Simple report example</a></span></dt><dt><span class="sect1"><a href="#EXAMPLE2">9.2. Simple report example with data access in code</a></span></dt><dt><span class="sect1"><a href="#EXAMPLE3">9.3. Colors, images, horizontal lines and fonts</a></span></dt><dt><span class="sect1"><a href="#EXAMPLE4">9.4. Report variables and breaks</a></span></dt></dl></dd><dt><span class="chapter"><a href="#LICENSE">10. GNU Free Documentation License</a></span></dt></dl></div><div class="chapter" id="INTRODUCTION"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Introduction and concepts</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#RLIB">1.1. The predecessor: RLIB</a></span></dt><dt><span class="sect1"><a href="#CONCEPTS">1.2. Concepts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#WHATISAREPGEN">1.2.1. What is a report generator?</a></span></dt><dt><span class="sect2"><a href="#XMLBASEDDESC">1.2.2. XML based report description</a></span></dt><dt><span class="sect2"><a href="#COMPREHENSIVEAPI">1.2.3. Comprehensive API for report creation</a></span></dt><dt><span class="sect2"><a href="#STRICTPARSER">1.2.4. Strict expression parser</a></span></dt><dt><span class="sect2"><a href="#EXPROPT">1.2.5. Expression optimization</a></span></dt><dt><span class="sect2"><a href="#REPVARS">1.2.6. Report variables</a></span></dt><dt><span class="sect2"><a href="#SETOFFUNCS">1.2.7. Extensive and extensible set of functions</a></span></dt><dt><span class="sect2"><a href="#UTF8STRINGS">1.2.8. UTF-8 string handling</a></span></dt><dt><span class="sect2"><a href="#HIGHPRECNUMERICS">1.2.9. High precision numeric data type</a></span></dt><dt><span class="sect2"><a href="#DATETIMETYPES">1.2.10. Datetime and interval data types</a></span></dt><dt><span class="sect2"><a href="#AUTOCONV">1.2.11. Automatic input data conversion</a></span></dt><dt><span class="sect2"><a href="#ALIGNMENTS">1.2.12. Versatile field alignment and multi-row fields</a></span></dt><dt><span class="sect2"><a href="#REPBREAKS">1.2.13. Report breaks</a></span></dt><dt><span class="sect2"><a href="#MULTICOLREP">1.2.14. Multi-column reports</a></span></dt><dt><span class="sect2"><a href="#LAYOUTDETAILS">1.2.15. Layout details</a></span></dt><dt><span class="sect2"><a href="#OUTPUTFORMATS">1.2.16. Multiple output formats</a></span></dt><dt><span class="sect2"><a href="#UNITTESTS">1.2.17. Extensive set of unit tests</a></span></dt><dt><span class="sect2"><a href="#STDDEPS">1.2.18. Standard Linux dependencies</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PLANNED">1.3. OpenCReports planned features</a></span></dt><dd><dl><dt><span class="sect2"><a href="#GRAPHS">1.3.1. Graph and chart support in HTML and PDF output</a></span></dt><dt><span class="sect2"><a href="#VISUALEDITOR">1.3.2. Visual editor for report XML descriptions</a></span></dt></dl></dd></dl></div><div class="sect1" id="RLIB"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.1. The predecessor: RLIB <a href="#RLIB" class="id_link">#</a></h2></div></div></div><p>
			The idea to write <a class="ulink" href="https://github.com/zboszor/OpenCReports" target="_top">OpenCReports</a>
			started with my getting acqauinted with <a class="ulink" href="https://github.com/SICOM/rlib" target="_top">RLIB</a>
			in 2005 and working with it (and on it) for a very long time,
			with the original implementors finally losing interest in
			developing RLIB further. This was around 2018. Even the
			original documentation site for RLIB was retired. But
			thanks to the Internet Archive,
			<a class="ulink" href="https://web.archive.org/web/20131116192438/http://newrlib.sicom.com/~rlib/index.php/Main_Page" target="_top">it may still be read</a>
		</p><p>
			To overcome some of the shortcomings seen in RLIB,
			its <span class="emphasis"><em>ideas</em></span> were used for a completely
			new implementation with high level of compatibility
			to the original.
		</p><p>
			RLIB is a report generator library, so is OpenCReports.
			In this documentation, a lot of references contain
			comparisons to RLIB.
		</p><p>
			The name OpenCReports came from the fact that it's
			implemented in the C programming language in an
			open way, and using a free software license.
		</p></div><div class="sect1" id="CONCEPTS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.2. Concepts <a href="#CONCEPTS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#WHATISAREPGEN">1.2.1. What is a report generator?</a></span></dt><dt><span class="sect2"><a href="#XMLBASEDDESC">1.2.2. XML based report description</a></span></dt><dt><span class="sect2"><a href="#COMPREHENSIVEAPI">1.2.3. Comprehensive API for report creation</a></span></dt><dt><span class="sect2"><a href="#STRICTPARSER">1.2.4. Strict expression parser</a></span></dt><dt><span class="sect2"><a href="#EXPROPT">1.2.5. Expression optimization</a></span></dt><dt><span class="sect2"><a href="#REPVARS">1.2.6. Report variables</a></span></dt><dt><span class="sect2"><a href="#SETOFFUNCS">1.2.7. Extensive and extensible set of functions</a></span></dt><dt><span class="sect2"><a href="#UTF8STRINGS">1.2.8. UTF-8 string handling</a></span></dt><dt><span class="sect2"><a href="#HIGHPRECNUMERICS">1.2.9. High precision numeric data type</a></span></dt><dt><span class="sect2"><a href="#DATETIMETYPES">1.2.10. Datetime and interval data types</a></span></dt><dt><span class="sect2"><a href="#AUTOCONV">1.2.11. Automatic input data conversion</a></span></dt><dt><span class="sect2"><a href="#ALIGNMENTS">1.2.12. Versatile field alignment and multi-row fields</a></span></dt><dt><span class="sect2"><a href="#REPBREAKS">1.2.13. Report breaks</a></span></dt><dt><span class="sect2"><a href="#MULTICOLREP">1.2.14. Multi-column reports</a></span></dt><dt><span class="sect2"><a href="#LAYOUTDETAILS">1.2.15. Layout details</a></span></dt><dt><span class="sect2"><a href="#OUTPUTFORMATS">1.2.16. Multiple output formats</a></span></dt><dt><span class="sect2"><a href="#UNITTESTS">1.2.17. Extensive set of unit tests</a></span></dt><dt><span class="sect2"><a href="#STDDEPS">1.2.18. Standard Linux dependencies</a></span></dt></dl></div><div class="sect2" id="WHATISAREPGEN"><div class="titlepage"><div><div><h3 class="title">1.2.1. What is a report generator? <a href="#WHATISAREPGEN" class="id_link">#</a></h3></div></div></div><p>
				A report generator uses a tabular data source, which contains
				rows and columns of data. The columns have labels or names.
				(An SQL database query is such a tabular data source.)
				It also uses some kind of description that specifies how
				to display the data. The input data is transformed into
				various output formats, some for human viewing, some for
				further machine processing. Such output formats may be PDF,
				HTML, XML, plain text or CSV.
			</p></div><div class="sect2" id="XMLBASEDDESC"><div class="titlepage"><div><div><h3 class="title">1.2.2. XML based report description <a href="#XMLBASEDDESC" class="id_link">#</a></h3></div></div></div><p>
				The XML file format is widely used. It can describe
				structured data in a hierarchy with names for its
				sections or "nodes".
			</p><p>
				OpenCReports uses an RLIB-compatible report description
				with extensions. See <a class="xref" href="#XMLDESCRIPTOR" title="Chapter 2. Report XML description">XML description</a> and the
				<a class="ulink" href="https://web.archive.org/web/20131116192438/http://newrlib.sicom.com/~rlib/index.php/Main_Page" target="_top">RLIB documentation</a>
			</p></div><div class="sect2" id="COMPREHENSIVEAPI"><div class="titlepage"><div><div><h3 class="title">1.2.3. Comprehensive API for report creation <a href="#COMPREHENSIVEAPI" class="id_link">#</a></h3></div></div></div><p>
				The <a class="xref" href="#LOWLEVELAPI" title="7.3. Low level C API">Low level C API</a> allows creating a report purely
				via program code. The <a class="xref" href="#HIGHLEVELAPI" title="7.2. High level C API">High level C API</a> allows loading
				an XML report description that contains all details
				about the report, including database access. Mixing
				the high and low level APIs allows a balance anywhere
				between the two extremes. For example, load the report
				description, which contains the complete layout, and pass
				database access details via program code. RLIB's API and
				report description allowed neither extremes, it relied on
				the report description to provide the layout, with the
				data access added from programming code.
			</p></div><div class="sect2" id="STRICTPARSER"><div class="titlepage"><div><div><h3 class="title">1.2.4. Strict expression parser <a href="#STRICTPARSER" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports uses a Flex/Bison based expression parser.
				The expression grammar doesn't allow buggy expressions.
				See the <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> chapter.
			</p><p>
				RLIB's expression parser was a custom implementation
				which was slightly fragile and forgiving. For example,
				it allowed unclosed parentheses at the end of an
				expression.
			</p></div><div class="sect2" id="EXPROPT"><div class="titlepage"><div><div><h3 class="title">1.2.5. Expression optimization <a href="#EXPROPT" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports does some expression optimization
				to reduce runtime cost of computing expression
				values. For example, in <code class="literal">a*2/3</code>
				the part <code class="literal">2/3</code> is two constants
				in a division. This is precomputed into a single
				constant as an optimization.
			</p><p>
				RLIB didn't contain automatic optimizations.
				It relied on manual optimizations, like using
				<a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a>.
			</p></div><div class="sect2" id="REPVARS"><div class="titlepage"><div><div><h3 class="title">1.2.6. Report variables <a href="#REPVARS" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports supports standard report variables
				for calculating sums, minimum, maximum and average values
				or custom defined ones. See <a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a>
			</p></div><div class="sect2" id="SETOFFUNCS"><div class="titlepage"><div><div><h3 class="title">1.2.7. Extensive and extensible set of functions <a href="#SETOFFUNCS" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports has many operators and functions to
				be used in expressions. See <a class="xref" href="#OPSANDFUNC" title="3.5. Operators and functions">Operators and functions</a>
				in the <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> chapter.
			</p><p>
				In fact, OpenCReports has all the operators and
				functions that RLIB also had, with many additions.
			</p><p>
				Custom functions can also be added to a report by
				programming code. Custom functions may override stock
				functions.
			</p></div><div class="sect2" id="UTF8STRINGS"><div class="titlepage"><div><div><h3 class="title">1.2.8. UTF-8 string handling <a href="#UTF8STRINGS" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports exclusively uses UTF-8 for strings.
				Input data must be in UTF-8 and output formats
				also use UTF-8.
			</p><p>
				RLIB could have been built with or without UTF-8 support.
				The build that disabled UTF-8 support relied on
				single byte character set encodings and conversion
				between them. That wasn't always reliable. Since that
				time, multibyte character encodings have won.
			</p></div><div class="sect2" id="HIGHPRECNUMERICS"><div class="titlepage"><div><div><h3 class="title">1.2.9. High precision numeric data type <a href="#HIGHPRECNUMERICS" class="id_link">#</a></h3></div></div></div><p>
				For historic record, RLIB was designed for the US
				and slower machines. It used a fixed point numeric
				representation. For the US, with its strong currency
				and prices expressed in low numbers, this was an
				acceptable design decision. But for countries, whose
				currencies are a few orders of magnitude weaker and
				conversely, the prices are similarly higher, the fixed
				point numeric value range was easily overflown, leading
				to wrong data in the report output.
			</p><p>
				Another potential problem with the fixed point numeric
				representation was that converting numbers from the
				input data to this internal representation always and
				unconditionally rounded down. This can be demonstrated
				with a carefully constructed (small) data set that would
				add up exactly to 100% both on paper and with using the
				IEEE-754 <code class="literal">double</code> data type, it would
				only add up to 99.99% with RLIB's internal numeric
				representation.
			</p><p>
				To avoid these kind of problems, OpenCReports uses
				GNU MPFR floating point values with 256-bit precision
				by default. This allows storing very large and very small
				numbers. E.g. this allows computations even with late
				stage
				<a class="ulink" href="https://en.wikipedia.org/wiki/Hyperinflation" target="_top">hyperinflation</a>
				prices.
				See <a class="xref" href="#NUMERICCONSTANTS" title="3.2.2. Numeric constants">Numeric constants</a> in
				the <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> chapter and the
				<a class="xref" href="#NUMERICTUNING" title="7.3.1. Numeric behavior related functions">Numeric behavior related functions</a> part in the
				<a class="xref" href="#LOWLEVELAPI" title="7.3. Low level C API">Low level C API</a> chapter.
			</p></div><div class="sect2" id="DATETIMETYPES"><div class="titlepage"><div><div><h3 class="title">1.2.10. Datetime and interval data types <a href="#DATETIMETYPES" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports differentiates between timestamp and
				time interval data types, with the latter allowing
				adding or subtracting a custom time period to and from
				timestamp data. See <a class="xref" href="#DATETIMECONSTANTS" title="3.2.4. Datetime constants">Datetime constants</a>
				in the <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> chapter.
			</p></div><div class="sect2" id="AUTOCONV"><div class="titlepage"><div><div><h3 class="title">1.2.11. Automatic input data conversion <a href="#AUTOCONV" class="id_link">#</a></h3></div></div></div><p>
				For maximum portability, databases provide their
				data in strings. They also provide metadata that
				describes the data type of every column in the
				data record.
			</p><p>
				RLIB relied on explicit data conversion functions,
				like <code class="literal">val()</code> and
				<code class="literal">stodt()</code>.
			</p><p>
				OpenCReports discovers the columns' data type
				and applies the conversion automatically. For
				RLIB compatibility, the conversion functions
				pass through values as is if they are already
				converted. For example, the <code class="literal">val()</code>
				function accepts an operand with both string and
				numeric data types. In the former case the conversion
				to numeric is performed, but if the operand is
				already numeric, no further conversion takes place.
				This is user friendly in two aspects: the conversion
				function is not necessary when implementing a new
				report, and an already existing RLIB report (that
				contains such conversion functions for the input data)
				may be used as is.
			</p></div><div class="sect2" id="ALIGNMENTS"><div class="titlepage"><div><div><h3 class="title">1.2.12. Versatile field alignment and multi-row fields <a href="#ALIGNMENTS" class="id_link">#</a></h3></div></div></div><p>
				In the report output, fields may have a fixed width in
				which they are displayed. Some field values are longer
				that the field width. When displaying them in a single
				row, fields may be left-, right- or center-aligned.
				With the PDF output, this means pixel-perfect alignment
				with the parts of the field value that don't fit masked
				off visually. RLIB aligned the data actually truncated
				to fit into the field width.
			</p><p>
				Fields longer than the designated width may be wrapped
				either at word or character boundaries. This way, they
				become multi-row fields. RLIB called them "memo" fields
				and the XML report description in OpenCReports also
				uses the same naming for the flags dealing with this
				detail. Multi-row fields are configurable regading word
				or character wrapping, or they may be limited to print
				only a certain amount of lines. Memo fields can break
				over column or page boundaries.
			</p><p>
				OpenCReports have some differences from RLIB regards to
				memo fields.
			</p><p>
				Thanks to Pango rendering, when using character wrapping,
				hyphenation is done.
			</p><p>
				The second extension over RLIB is that
				<code class="literal">justified</code> alignment can also be
				used for multi-line fields. This is also thanks to
				Pango. When <code class="literal">justified</code> alignment is
				used, all lines but the last are justified. Therefore,
				<code class="literal">justified</code> alignment is equivalent to
				<code class="literal">left</code> alignment for single line fields.
			</p></div><div class="sect2" id="REPBREAKS"><div class="titlepage"><div><div><h3 class="title">1.2.13. Report breaks <a href="#REPBREAKS" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports supports report breaks defined on arbitrary
				expressions. Breaks occur when the expression value
				changes, when stepping from one data set row to the next.
				See <a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a> and <a class="xref" href="#BREAKSNODE" title="2.13. Breaks">Breaks</a>
			</p></div><div class="sect2" id="MULTICOLREP"><div class="titlepage"><div><div><h3 class="title">1.2.14. Multi-column reports <a href="#MULTICOLREP" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports, just like RLIB, supports both single-column
				and multi-column report layout.
			</p><p>
				If a report is "narrow", so more columns would fit on
				the same page, the report may be set to use multiple
				columns on the same page.
			</p></div><div class="sect2" id="LAYOUTDETAILS"><div class="titlepage"><div><div><h3 class="title">1.2.15. Layout details <a href="#LAYOUTDETAILS" class="id_link">#</a></h3></div></div></div><p>
				In RLIB, sizing of layout details are a mix of units,
				making it harder to design the report layout:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							field widths and report heights are in
							number of characters
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							width of lines are in points (1/72th inch)
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							width of gaps between columns of a
							multi-column report is in inches
						</p></li></ul></div><p>
			</p><p>
				OpenCReports faithfully reimplements these
				for compatibility.
			</p><p>
				However, there are problems with field widths
				calculated in number of characters. Widths using
				a 12 point font is not the same as widths using
				a 20 point font. Also, font width and height are
				usually not identical. Some fonts are lean, with
				their width smaller than their height. RLIB expected
				that fonts are using the same character width and
				height. For this reason, RLIB only supported a small
				variety of monospace fonts.
			</p><p>
				Also, character widths for proportional fonts differ.
				Field width expressed in number of characters cannot
				be exact when using  proportional fonts. For this reason,
				RLIB didn't support proportional fonts at all.
			</p><p>
				OpenCReports extended upon these ideas, so individual
				fields in a text line may use custom font settings
				while keeping the field width calculation identical
				to RLIB, which ends with the font parameters set for
				the text line. In OpenCReports, the fields' custom font
				settings (font name and size) don't influence the field
				width. Using this method, OpenCReports may use proportional
				fonts even with using the RLIB compatible size settings.
			</p><p>
				On top of that, OpenCReports also has a new, consistent
				size calculation method where everything is measured in
				points.
			</p></div><div class="sect2" id="OUTPUTFORMATS"><div class="titlepage"><div><div><h3 class="title">1.2.16. Multiple output formats <a href="#OUTPUTFORMATS" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports supports several output formats:
				PDF, HTML, CSV, TXT, XML and JSON.
			</p><p>
				By using the excellent drawing possibilities of
				Cairo coupled with Pango for text rendering,
				OpenCReports supports generating the report in
				PDF format. PDF is the definitive output format
				in OpenCReports, as in it supports every feature
				described in <a class="xref" href="#XMLDESCRIPTOR" title="Chapter 2. Report XML description">XML description</a>, such as
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							page breaks (PDF is a multi-page format)
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							all four page margins: top, bottom, left, right
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							column breaks, multi-column reports
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							report column width and height
						</p></li></ul></div><p>
			</p><p>
				When using the HTML output format, OpenCReports
				attempts to imitate the PDF drawing capabilities
				using CSS. However, there are inevitable differences.
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							The HTML output doesn't support page breaks.
							HTML is rendered as a continuous flow of text
							and other elements. As a consequence,
							<code class="literal">r.pageno</code> and
							<code class="literal">r.totpages</code> are both 1
							for the whole output.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							HTML output doesn't support column breaks.
							As a consequence, a multi-column report layout
							is rendered differently from PDF.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							When a data row's column does not fit into the
							width specified by the page margins or the
							report column's width, it is rendered in the
							remaining width differently from PDF. While PDF
							uses the whole field width to render the data
							field contents and uses bounding box to clip
							the invisible part, CSS uses the remaining width
							specified by either the margins or the report
							column width to render the field. Left, right
							and center alignment of the field is done
							according to the remaining width for the field.
						</p></li></ul></div><p>
			</p><p>
				When rendering field data wider than their
				field widths, both the PDF and the HTML output drivers
				use clipping (bounding box) to hide parts of the
				field, fitting them into the designated area
				<span class="emphasis"><em>visually</em></span>. Actual field data is
				not truncated. In some viewer applications
				(e.g. in Poppler based PDF viewers) a visibly
				truncated field's whole text can be selected,
				copied and pasted elsewhere to be viewed in its
				entirety. Field data in HTML behave the same way
				in browsers.
			</p><p>
				OpenCReports also supports CSV, XML and JSON as
				output formats that don't truncate field data.
				These are plaintext formats with their own internal
				format. CSV is usually used for importing into office
				applications or databases. In general, these formats
				are used in applications where loss of data may
				not be tolerated. These formats don't support page or
				column breaks. CSV does not have a way to express
				multiple inner reports in a table in the same report run.
			</p><p>
				OpenCReports also supports TXT (plaintext) as output
				format, that approximates RLIB's TXT output.
				This format may truncate field data because it expects
				monospace font and character based field widths;
				and fields in this format cannot be presented separately
				like in other formats. The TXT format doesn't support
				page or column breaks. Its rendering ignores font name
				and font size settings and renders everything internally
				using a monospace font at 12 point font size.
			</p></div><div class="sect2" id="UNITTESTS"><div class="titlepage"><div><div><h3 class="title">1.2.17. Extensive set of unit tests <a href="#UNITTESTS" class="id_link">#</a></h3></div></div></div><p>
				The unit tests ensure that OpenCReports' features keep
				working when adding new features or fixes. Units tests
				exercise many aspects of the high and low level API,
				report description handling, runtime behavior and output
				generation.
			</p></div><div class="sect2" id="STDDEPS"><div class="titlepage"><div><div><h3 class="title">1.2.18. Standard Linux dependencies <a href="#STDDEPS" class="id_link">#</a></h3></div></div></div><p>
				OpenCReports uses
				<a class="ulink" href="https://gitlab.gnome.org/GNOME/libxml2/-/wikis/home" target="_top">LibXML2</a>,
				<a class="ulink" href="https://juliastrings.github.io/utf8proc/" target="_top">utf8proc</a>,
				<a class="ulink" href="https://www.mpfr.org" target="_top">MPFR</a>,
				<a class="ulink" href="http://packages.qa.debian.org/libp/libpaper.html" target="_top">libpaper</a>,
				<a class="ulink" href="https://github.com/rgamble/libcsv" target="_top">libcsv</a>,
				<a class="ulink" href="http://lloyd.github.com/yajl/" target="_top">yajl</a>,
				<a class="ulink" href="https://www.cairographics.org" target="_top">Cairo</a>,
				<a class="ulink" href="https://pango.gnome.org" target="_top">Pango</a>,
				<a class="ulink" href="https://wiki.gnome.org/Projects/LibRsvg" target="_top">librsvg2</a>,
				<a class="ulink" href="https://gitlab.gnome.org/GNOME/gdk-pixbuf" target="_top">gdk-pixbuf2</a>,
				<a class="ulink" href="https://www.postgresql.org" target="_top">PostgreSQL</a>,
				<a class="ulink" href="https://mariadb.com" target="_top">MariaDB</a>
				and
				<a class="ulink" href="http://www.unixodbc.org" target="_top">unixODBC</a>.
			</p><p>
				For running the unit tests,
				<a class="ulink" href="https://www.ghostscript.com" target="_top">Ghostscript</a>
				and <code class="literal">compare</code> from
				<a class="ulink" href="https://imagemagick.org" target="_top">Imagemagick</a>
				are also needed.
			</p><p>
				<code class="literal">xmllint</code>, <code class="literal">xsltproc</code>
				and <code class="literal">fop</code> are used to generate the
				documentation.
			</p></div></div><div class="sect1" id="PLANNED"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.3. OpenCReports planned features <a href="#PLANNED" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#GRAPHS">1.3.1. Graph and chart support in HTML and PDF output</a></span></dt><dt><span class="sect2"><a href="#VISUALEDITOR">1.3.2. Visual editor for report XML descriptions</a></span></dt></dl></div><div class="sect2" id="GRAPHS"><div class="titlepage"><div><div><h3 class="title">1.3.1. Graph and chart support in HTML and PDF output <a href="#GRAPHS" class="id_link">#</a></h3></div></div></div><p>
				Currently Gantt chart and various graph types (like
				barchart, pie chart and their various subtypes) are
				not supported.
			</p></div><div class="sect2" id="VISUALEDITOR"><div class="titlepage"><div><div><h3 class="title">1.3.2. Visual editor for report XML descriptions <a href="#VISUALEDITOR" class="id_link">#</a></h3></div></div></div><p>
				There are other report generators on the market with
				nice GUIs to create the report visually.
			</p></div></div></div><div class="chapter" id="XMLDESCRIPTOR"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Report XML description</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#DESCSTRUCT">2.1. XML description structure</a></span></dt><dd><dl><dt><span class="sect2"><a href="#XMLNOTES">2.1.1. Notes about XML syntax and attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#OCRPTTOPXML">2.2. OpenCReport element</a></span></dt><dd><dl><dt><span class="sect2"><a href="#SIZEUNIT">2.2.1. Size unit attribute</a></span></dt><dt><span class="sect2"><a href="#NOQUERYSHOWNODATA">2.2.2. No query show NoData</a></span></dt><dt><span class="sect2"><a href="#REPORTHEIGHTAFTERLAST">2.2.3. Report height after last</a></span></dt><dt><span class="sect2"><a href="#XMLFOLLOWERMATCHSINGLE">2.2.4. Follower match single</a></span></dt><dt><span class="sect2"><a href="#PRECBITS">2.2.5. Precision bits</a></span></dt><dt><span class="sect2"><a href="#ROUNDINGMODE">2.2.6. Rounding mode</a></span></dt><dt><span class="sect2"><a href="#LOCALE">2.2.7. Locale</a></span></dt><dt><span class="sect2"><a href="#XLATESETTINGS">2.2.8. Translation settings</a></span></dt></dl></dd><dt><span class="sect1"><a href="#SEARCHPATHS">2.3. Paths</a></span></dt><dt><span class="sect1"><a href="#DATASOURCES">2.4. Datasources</a></span></dt><dd><dl><dt><span class="sect2"><a href="#MARIADBDS">2.4.1. MariaDB (MySQL) database connection</a></span></dt><dt><span class="sect2"><a href="#POSTGRESQLDS">2.4.2. PostgreSQL database connection</a></span></dt><dt><span class="sect2"><a href="#ODBCDS">2.4.3. ODBC database connection</a></span></dt><dt><span class="sect2"><a href="#CSVDS">2.4.4. CSV file datasource</a></span></dt><dt><span class="sect2"><a href="#JSONDS">2.4.5. JSON file datasource</a></span></dt><dt><span class="sect2"><a href="#XMLDS">2.4.6. XML file datasource</a></span></dt><dt><span class="sect2"><a href="#ARRAYDS">2.4.7. Array datasource</a></span></dt><dt><span class="sect2"><a href="#COMMONDSPROPS">2.4.8. Common datasource properties</a></span></dt></dl></dd><dt><span class="sect1"><a href="#QUERIES">2.5. Queries</a></span></dt><dd><dl><dt><span class="sect2"><a href="#SQLQUERIES">2.5.1. SQL queries for SQL datasources</a></span></dt><dt><span class="sect2"><a href="#FILEQUERIES">2.5.2. Queries for file based datasources</a></span></dt><dt><span class="sect2"><a href="#ARRAYQUERIES">2.5.3. Queries for array based datasources</a></span></dt><dt><span class="sect2"><a href="#FOLLOWERQUERIES">2.5.4. Follower queries</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PARTS">2.6. Report parts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PARTATTRIBS">2.6.1. Part attributes</a></span></dt><dt><span class="sect2"><a href="#PARTSUBSECS">2.6.2. Part subsections</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PARTROW">2.7. Part row</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PARTROWATTS">2.7.1. Part row attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PARTCOL">2.8. Part column</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PARTCOLATTS">2.8.1. Part column attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#REPORT">2.9. Report</a></span></dt><dd><dl><dt><span class="sect2"><a href="#REPORTATTRIBS">2.9.1. Report attributes</a></span></dt><dt><span class="sect2"><a href="#REPSUBSECS">2.9.2. Report subsections</a></span></dt></dl></dd><dt><span class="sect1"><a href="#LOADEDREPORT">2.10. Loaded report</a></span></dt><dd><dl><dt><span class="sect2"><a href="#LREPATTS">2.10.1. Loaded Report attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#VARIABLESNODE">2.11. Variables</a></span></dt><dt><span class="sect1"><a href="#VARIABLENODE">2.12. Variable</a></span></dt><dd><dl><dt><span class="sect2"><a href="#VARATTS">2.12.1. Variable attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#BREAKSNODE">2.13. Breaks</a></span></dt><dt><span class="sect1"><a href="#BREAKNODE">2.14. Break</a></span></dt><dd><dl><dt><span class="sect2"><a href="#BREAKATTS">2.14.1. Break attributes</a></span></dt><dt><span class="sect2"><a href="#BREAKSUBSECS">2.14.2. Break subsections</a></span></dt></dl></dd><dt><span class="sect1"><a href="#OUTPUTNODE">2.15. Output</a></span></dt><dd><dl><dt><span class="sect2"><a href="#OUTPUTATTS">2.15.1. Output attributes</a></span></dt><dt><span class="sect2"><a href="#OUTPUTSUBSECS">2.15.2. Output subsections</a></span></dt></dl></dd><dt><span class="sect1"><a href="#LINENODE">2.16. Line</a></span></dt><dd><dl><dt><span class="sect2"><a href="#LINEATTS">2.16.1. Line attributes</a></span></dt><dt><span class="sect2"><a href="#LINESUBSECS">2.16.2. Line subsections</a></span></dt></dl></dd><dt><span class="sect1"><a href="#TEXTELEMNODE">2.17. Text element</a></span></dt><dd><dl><dt><span class="sect2"><a href="#TEXTELEMATTS">2.17.1. Text element attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#HLINENODE">2.18. HorizontalLine</a></span></dt><dd><dl><dt><span class="sect2"><a href="#HLINEATTS">2.18.1. HorizontalLine attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#IMAGENODE">2.19. Image</a></span></dt><dd><dl><dt><span class="sect2"><a href="#IMAGEATTS">2.19.1. Image attributes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#IMAGEENDNODE">2.20. Image end</a></span></dt><dt><span class="sect1"><a href="#COLORSPEC">2.21. Color specification</a></span></dt></dl></div><div class="sect1" id="DESCSTRUCT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.1. XML description structure <a href="#DESCSTRUCT" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#XMLNOTES">2.1.1. Notes about XML syntax and attributes</a></span></dt></dl></div><p>
			<a class="ulink" href="https://github.com/zboszor/OpenCReports" target="_top">OpenCReports</a>
			uses an
			<a class="ulink" href="https://github.com/SICOM/rlib" target="_top">RLIB</a>-compatible
			report description with extensions.
		</p><p>
			The report XML description, like all XML files start with
			declaring that it's an XML file and the optional declaration
			of the Document Type Definition that the XML file can be
			checked against. For an OpenCReports report description,
			the first two lines are:
			</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE OpenCReport SYSTEM "opencreport.dtd"&gt;</pre><p>
			The DTD file <code class="literal">opencreport.dtd</code> can be
			found in the sources of OpenCReports
			<a class="ulink" href="https://github.com/zboszor/OpenCReports/blob/main/opencreport.dtd" target="_top">here</a>.
		</p><p>
			After the XML header lines, a fully specified report
			description looks like this:
			</p><pre class="programlisting">&lt;OpenCReport&gt;
    &lt;Datasources&gt;
        ...
    &lt;/Datasources&gt;
    &lt;Queries&gt;
        ...
    &lt;/Queries&gt;
    &lt;Part&gt;
        &lt;pr&gt;
            &lt;pd&gt;
                &lt;Report&gt;
                    ...
                &lt;/Report&gt;
            &lt;/pd&gt;
        &lt;/pr&gt;
    &lt;/Part&gt;
&lt;/OpenCReport&gt;</pre><p>
			or like this:
			</p><pre class="programlisting">&lt;OpenCReport&gt;
    &lt;Datasources&gt;
        ...
    &lt;/Datasources&gt;
    &lt;Queries&gt;
        ...
    &lt;/Queries&gt;
    &lt;Report&gt;
        ...
    &lt;/Report&gt;
&lt;/OpenCReport&gt;</pre><p>
		</p><p>
			The XML sections <a class="xref" href="#DATASOURCES" title="2.4. Datasources">Datasources</a>
			and <a class="xref" href="#QUERIES" title="2.5. Queries">Queries</a> are optional in the XML
			description. They can be substituted by program code
			using the datasource and query related calls in the
			<a class="xref" href="#LOWLEVELAPI" title="7.3. Low level C API">Low level C API</a>, similarly to RLIB.
		</p><p>
			For RLIB compatibility, a report description may start
			with either <code class="literal">&lt;Part&gt;</code> or
			<code class="literal">&lt;Report&gt;</code> as the toplevel node.
			In this case, there's no other way to add datasources
			and queries, but through program code, like the
			<a class="xref" href="#LOWLEVELAPI" title="7.3. Low level C API">Low level C API</a>.
		</p><p>
			Since XML files are hierarchical with a single toplevel
			node with child nodes, multiple
			<code class="literal">&lt;Report&gt;</code>s were only possible
			if using <code class="literal">&lt;Part&gt;</code> as the
			toplevel node with all the nodes having to be spelled
			out between <code class="literal">&lt;Part&gt;</code> and
			<code class="literal">&lt;Report&gt;</code>. With
			<code class="literal">&lt;OpenCReport&gt;</code> being the
			toplevel node, multiple <code class="literal">&lt;Report&gt;</code>
			child nodes can be used without the parent
			<code class="literal">&lt;Part&gt;</code> node.
		</p><div class="sect2" id="XMLNOTES"><div class="titlepage"><div><div><h3 class="title">2.1.1. Notes about XML syntax and attributes <a href="#XMLNOTES" class="id_link">#</a></h3></div></div></div><p>
				Most (if not all) XML attributes in the report
				description file are handled with the expression
				parser (see <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>), with fallback
				to literal strings if the the location of expression
				wouldn't allow identifier references at that location.
			</p><p>
				For example, the datasource name may be declared this way:
				</p><pre class="programlisting">&lt;Datasource name="mysource" ... /&gt;</pre><p>
				where the name is a literal string. Or this way:
				</p><pre class="programlisting">&lt;Datasource name="'mysource'" ... /&gt;</pre><p>
				where the name is a string expression. (Note the
				extra quotes.) Or even this way:
				</p><pre class="programlisting">&lt;Datasource name="&amp;quot;mysource&amp;quot;" ... /&gt;</pre><p>
				where name is a string expression which uses the
				<code class="literal">"</code> double quote character which
				must be "escaped" according to XML rules. This last
				variant is less readable than the first two.
				Nevertheless, it is usable and it works, so machine
				generated XML files may also be used.
			</p><p>
				The first form is a regular XML string value.
				Since expression parsing would find that
				<code class="literal">mysource</code> is an identifier
				which may be a query column name and this is not
				a valid place for a query reference, the non-parsed
				string value is used.
			</p><p>
				The second form is a single quoted OpenCReports
				string constant. The parsed string constant's
				value is used.
			</p><p>
				The third form is a double quoted OpenCReports
				string constant, but in XML the double quote
				character must be substituted with
				<code class="literal">&amp;quot;</code> because they are
				reserved for quoting the attribute values.
				The parsed string constant's value is used.
				(This substitution is called "string escaping"
				and various other formats require some kind of
				substutition for reserved characters.)
			</p><p>
				To make the XML easier to read, the second form
				is recommended because it still allows
				embedding the single quote character inside
				a string (see <a class="xref" href="#XMLDESCRIPTOR" title="Chapter 2. Report XML description">XML description</a>)
				in case e.g. a strong password contains this.
				For security-by-obscurity, the third form may
				be used because it is harder to read. For all
				special characters that should be escaped in
				XML, see
				<a class="ulink" href="https://stackoverflow.com/a/46637835/290085" target="_top">Simplified XML Escaping</a>.
			</p></div></div><div class="sect1" id="OCRPTTOPXML"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.2. OpenCReport element <a href="#OCRPTTOPXML" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#SIZEUNIT">2.2.1. Size unit attribute</a></span></dt><dt><span class="sect2"><a href="#NOQUERYSHOWNODATA">2.2.2. No query show NoData</a></span></dt><dt><span class="sect2"><a href="#REPORTHEIGHTAFTERLAST">2.2.3. Report height after last</a></span></dt><dt><span class="sect2"><a href="#XMLFOLLOWERMATCHSINGLE">2.2.4. Follower match single</a></span></dt><dt><span class="sect2"><a href="#PRECBITS">2.2.5. Precision bits</a></span></dt><dt><span class="sect2"><a href="#ROUNDINGMODE">2.2.6. Rounding mode</a></span></dt><dt><span class="sect2"><a href="#LOCALE">2.2.7. Locale</a></span></dt><dt><span class="sect2"><a href="#XLATESETTINGS">2.2.8. Translation settings</a></span></dt></dl></div><p>
			The toplevel <code class="literal">&lt;OpenCReport&gt;</code>
			element controls some global settings and serves
			as the topmost XML element for child elements.
		</p><div class="sect2" id="SIZEUNIT"><div class="titlepage"><div><div><h3 class="title">2.2.1. Size unit attribute <a href="#SIZEUNIT" class="id_link">#</a></h3></div></div></div><p>
				The <code class="literal">size_unit</code> attribute
				specifies report behaviour for size related
				settings:
				</p><pre class="programlisting">&lt;OpenCReport size_unit="rlib"&gt;
&lt;OpenCReport size_unit="points"&gt;</pre><p>
			</p><p>
				Default is <code class="literal">rlib</code>
				which is the legacy RLIB behavior, with the
				known inconsistency in size related settings:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							width for <code class="literal">field</code> and
							<code class="literal">literal</code> (see
							<a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>) are in
							number of characters. This is influenced
							by the font size set in either
							<a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>,
							<a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a> or
							<a class="xref" href="#LINEFONTSIZE" title="2.16.1.2. Font size">Line font size</a>.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							height for <a class="xref" href="#PARTCOL" title="2.8. Part column">Part column</a>
							is measured in number of characters
							influenced by <a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							height for <a class="xref" href="#REPORT" title="2.9. Report">Report</a>
							is measured in number of characters
							influenced by <a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>
							and <a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a>
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							width of horizontal lines and the
							optional border width around reports
							are specified in points
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							gaps between columns of multi-column
							reports is measured in inches
						</p></li></ul></div><p>
			</p><p>
				Note that the default setting (as in RLIB)
				only ever expected monospace fonts that have the
				same width for every character. It also expected that
				the character height is identical to the character
				width. The latter detail is false for many monospace
				fonts, i.e. their height is usually greater than
				their width.
			</p><p>
				With proportional fonts (where the width of
				characters depend on their image, i.e. an "i" is
				thinner than an "m") width of text fields cannot
				reliably be set in "number of characters" because
				it's not an exact value. There is a workaround for
				this in <code class="literal">OpenCReports</code> but it's
				an over-engineered solution and isn't available
				in RLIB so it's not backward compatible either.
				But it's there if someone wants to port reports
				from RLIB and only make superficial changes.
				See <a class="xref" href="#TEXTELEMWIDTH" title="2.17.1.4. Width">Text element width</a>.
			</p><p>
				When <code class="literal">size_unit</code> is set to
				<code class="literal">points</code>, all size related
				settings in the report are in points,
				a.k.a. 1/72th inch. Straightforward and consistent.
			</p></div><div class="sect2" id="NOQUERYSHOWNODATA"><div class="titlepage"><div><div><h3 class="title">2.2.2. No query show NoData <a href="#NOQUERYSHOWNODATA" class="id_link">#</a></h3></div></div></div><p>
				This controls whether <a class="xref" href="#NODATANODE" title="2.9.2.8. Alternate output for no data">NoData node</a>
				is shown when the report's <a class="xref" href="#QUERYATTR" title="2.10.1.2. Query">Query attribute</a>
				is set to a non-existing query name.
				</p><pre class="programlisting">&lt;OpenCReport noquery_show_nodata="yes"&gt;
&lt;OpenCReport noquery_show_nodata="no"&gt;</pre><p>
			</p><p>
				Default is <code class="literal">true</code> when
				<code class="literal">OpenCReport</code> is the toplevel node,
				<code class="literal">false</code> when either
				<code class="literal">&lt;Part&gt;</code> or <code class="literal">&lt;Report&gt;</code>
				is the toplevel node for RLIB compatibility.
				See <a class="xref" href="#NODATANODE" title="2.9.2.8. Alternate output for no data">NoData node</a>.
			</p></div><div class="sect2" id="REPORTHEIGHTAFTERLAST"><div class="titlepage"><div><div><h3 class="title">2.2.3. Report height after last <a href="#REPORTHEIGHTAFTERLAST" class="id_link">#</a></h3></div></div></div><p>
				It controls whether report height is applied
				after the last <code class="literal">&lt;Report&gt;</code>
				in the <code class="literal">&lt;pd&gt;</code> node.
				</p><pre class="programlisting">&lt;OpenCReport report_height_after_last="yes"&gt;
&lt;OpenCReport report_height_after_last="no"&gt;</pre><p>
			</p><p>
				Default is <code class="literal">false</code>.
			</p></div><div class="sect2" id="XMLFOLLOWERMATCHSINGLE"><div class="titlepage"><div><div><h3 class="title">2.2.4. Follower match single <a href="#XMLFOLLOWERMATCHSINGLE" class="id_link">#</a></h3></div></div></div><p>
				When set to <code class="literal">false</code>, N:1 followers behave
				fully like <code class="literal">LEFT OUTER JOIN</code> in SQL,
				with duplicating data from the primary query if multiple
				matching rows exist in followers. When set to
				<code class="literal">true</code>, only the first matching row is used.
				The latter approximates the RLIB implementation.
				</p><pre class="programlisting">&lt;OpenCReport follower_match_single="yes"&gt;
&lt;OpenCReport follower_match_single="no"&gt;</pre><p>
			</p><p>
				Default is <code class="literal">false</code>, unless the report XML
				descriptor uses either <code class="literal">&lt;Part&gt;</code> or
				<code class="literal">&lt;Report&gt;</code> as the toplevel XML node.
				In the latter case, this attribute is automatically set
				to <code class="literal">true</code>.
			</p></div><div class="sect2" id="PRECBITS"><div class="titlepage"><div><div><h3 class="title">2.2.5. Precision bits <a href="#PRECBITS" class="id_link">#</a></h3></div></div></div><p>
				This controls the precision for numeric computations.
				</p><pre class="programlisting">&lt;OpenCReport precision_bits="256"&gt;</pre><p>
			</p><p>
				Default is <code class="literal">256</code>.
			</p></div><div class="sect2" id="ROUNDINGMODE"><div class="titlepage"><div><div><h3 class="title">2.2.6. Rounding mode <a href="#ROUNDINGMODE" class="id_link">#</a></h3></div></div></div><p>
				This controls the rounding mode for numeric computations.
				Possible values are:
				<code class="literal">nearest</code>,
				<code class="literal">to_minus_inf</code>,
				<code class="literal">to_inf</code>,
				<code class="literal">to_zero</code>,
				<code class="literal">away_from_zero</code>, or
				<code class="literal">faithful</code>.
				</p><pre class="programlisting">&lt;OpenCReport rounding_mode="nearest"&gt;
&lt;OpenCReport rounding_mode="to_minus_inf"&gt;
&lt;OpenCReport rounding_mode="to_inf"&gt;
&lt;OpenCReport rounding_mode="to_zero"&gt;
&lt;OpenCReport rounding_mode="away_from_zero"&gt;
&lt;OpenCReport rounding_mode="faithful"&gt;</pre><p>
			</p><p>
				Default is <code class="literal">nearest</code>.
				According to the MPFR documentation,
				<code class="literal">faithful</code> is experimental.
			</p></div><div class="sect2" id="LOCALE"><div class="titlepage"><div><div><h3 class="title">2.2.7. Locale <a href="#LOCALE" class="id_link">#</a></h3></div></div></div><p>
				This controls the language settings, like the decimal
				separator, weekday names, month names and similar.
				This setting is also used as the language of translation.
				</p><pre class="programlisting">&lt;OpenCReport locale="de_DE"&gt;</pre><p>
			</p><p>
				Default is <code class="literal">C</code> locale which
				approximates US English.
			</p></div><div class="sect2" id="XLATESETTINGS"><div class="titlepage"><div><div><h3 class="title">2.2.8. Translation settings <a href="#XLATESETTINGS" class="id_link">#</a></h3></div></div></div><p>
				These two settings control the translation.
				</p><pre class="programlisting">&lt;OpenCReport
    translation_domain="mydomain"
    translation_directory="/path/to/translation/files"&gt;</pre><p>
			</p><p>
				Translation is based on GNU Gettext.
				A subdirectory tree is expected under the specified
				translation directory in the form of
				<code class="literal">locale/LC_MESSAGES</code> (e.g.:
				<code class="literal">de_DE/LC_MESSAGES</code>) with
				<code class="literal">mydomain.mo</code> files in them.
				These <code class="literal">.mo</code> files contain translated
				messages for a given language.
			</p></div></div><div class="sect1" id="SEARCHPATHS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.3. Paths <a href="#SEARCHPATHS" class="id_link">#</a></h2></div></div></div><p>
			Some report descriptiom elements (like
			<code class="literal">&lt;load&gt;</code> and
			<code class="literal">&lt;Image&gt;</code>, see
			<a class="xref" href="#LOADEDREPORT" title="2.10. Loaded report">Loaded report</a> and <a class="xref" href="#IMAGENODE" title="2.19. Image">Image node</a>)
			reference files. By default, these files must
			be in the same directory as the report XML
			description file, or in the current working
			directory for the application using OpenCReports.
			To lift this limitation, and allow organizing files
			in a more logical manner, a search path or
			multiple search paths may be added.
			For files referenced with relative paths, the
			search paths will be used in their order of
			declaration. Search paths and the relative file
			path are concatenated together to form an absolute
			path. The first successful absolute file path
			match will be used in the element referencing
			the file.
		</p><p>
			Search paths are in the following format:
			</p><pre class="programlisting">&lt;Paths&gt;
    &lt;Path value="/absolute/path" /&gt;
    ...
&lt;/Paths&gt;</pre><p>
		</p></div><div class="sect1" id="DATASOURCES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.4. Datasources <a href="#DATASOURCES" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#MARIADBDS">2.4.1. MariaDB (MySQL) database connection</a></span></dt><dt><span class="sect2"><a href="#POSTGRESQLDS">2.4.2. PostgreSQL database connection</a></span></dt><dt><span class="sect2"><a href="#ODBCDS">2.4.3. ODBC database connection</a></span></dt><dt><span class="sect2"><a href="#CSVDS">2.4.4. CSV file datasource</a></span></dt><dt><span class="sect2"><a href="#JSONDS">2.4.5. JSON file datasource</a></span></dt><dt><span class="sect2"><a href="#XMLDS">2.4.6. XML file datasource</a></span></dt><dt><span class="sect2"><a href="#ARRAYDS">2.4.7. Array datasource</a></span></dt><dt><span class="sect2"><a href="#COMMONDSPROPS">2.4.8. Common datasource properties</a></span></dt></dl></div><p>
			Datasources in OpenCReports are either database
			connections, or accessors (mini-drivers) for data
			files in certain formats.
		</p><p>
			Datasource descriptions are in the following format:
			</p><pre class="programlisting">&lt;Datasources&gt;
    &lt;Datasource name="mysource" type="..." ... /&gt;
&lt;/Datasources&gt;</pre><p>
		</p><p>
			A report may have multiple datasources, i.e.
			the description may list multiple
			<code class="literal">&lt;Datasource&gt;</code> lines.
		</p><p>
			Datasources must have unique names in a report and
			their type may be:
			<code class="literal">mariadb</code> (or <code class="literal">mysql</code>),
			<code class="literal">postgresql</code>, <code class="literal">odbc</code>,
			<code class="literal">csv</code>, <code class="literal">json</code>,
			<code class="literal">xml</code> or <code class="literal">array</code>.
		</p><div class="sect2" id="MARIADBDS"><div class="titlepage"><div><div><h3 class="title">2.4.1. MariaDB (MySQL) database connection <a href="#MARIADBDS" class="id_link">#</a></h3></div></div></div><p>
				A MariaDB database connection may be declared in three
				ways. Either by using the database host and port,
				the database name, user name and password directly:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="mariadb"
    host="..." port="..."
    dbname="..." user="..." password="..." /&gt;</pre><p>
				or alternatively, instead of the host and port,
				specifying the UNIX Domain Socket file for
				a local connection if it's not in the standard
				location:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="mariadb"
    unix_socket="..."
    dbname="..." user="..." password="..." /&gt;</pre><p>
				or moving these details out to an external
				configuration file in an INI file format:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="mariadb"
    optionfile="myconn.cnf" group="myconn" /&gt;</pre><p>
			</p><p>
				In the second case, the configuration file <code class="literal">myconn.cnf</code>
				would contain something like this:
				</p><pre class="programlisting">[myconn]
!include /etc/my.cnf
database=mydb
user=myuser
#password=
#host=
#port=
#unix_socket=</pre><p>
				Please note that the INI group name <code class="literal">[myconn]</code>
				matches <code class="literal">group="myconn"</code> in the above
				datasource declaration.
			</p><p>
				The database name and user name are mandatory. The
				user password is optional, depending on the database
				security authentication setup.
			</p><p>
				The database host and port, or the socket file location
				are all optional. Without these, a local connection is
				attempted using the default settings. If the host name
				is specified but the port isn't, the remote host is
				used on the default port (as known by the local MariaDB
				database client library).
			</p></div><div class="sect2" id="POSTGRESQLDS"><div class="titlepage"><div><div><h3 class="title">2.4.2. PostgreSQL database connection <a href="#POSTGRESQLDS" class="id_link">#</a></h3></div></div></div><p>
				A PostgreSQL database connection may be declared in three
				ways. Either by using the database host and port,
				the database name, user name and password directly:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="postgresql"
    host="..." port="..."
    dbname="..." user="..." password="..." /&gt;</pre><p>
				or alternatively, instead of the host and port,
				specifying the UNIX Domain Socket file for
				a local connection if it's not in the standard
				location:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="postgresql"
    unix_socket="..."
    dbname="..." user="..." password="..." /&gt;</pre><p>
				or using a so called connection string:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="postgresql"
    connstr="..." /&gt;</pre><p>
			</p><p>
				For the connection string format, see the
				<a class="ulink" href="https://www.postgresql.org/docs" target="_top">PostgreSQL documentation</a>.
			</p><p>
				The database name and user name are mandatory. The
				user password is optional, depending on the database
				security authentication setup.
			</p><p>
				The database host and port, or the socket file location
				are all optional. Without these, a local connection is
				attempted using the default settings. If the host name
				is specified but the port isn't, the remote host is
				used on the default port (as known by the local PostgreSQL
				database client library).
			</p></div><div class="sect2" id="ODBCDS"><div class="titlepage"><div><div><h3 class="title">2.4.3. ODBC database connection <a href="#ODBCDS" class="id_link">#</a></h3></div></div></div><p>
				The above described MariaDB and PostgreSQL database
				connection types are using their respective client
				libraries. There is a more generic way, i.e. ODBC.
				ODBC was invented by Microsoft in the 1990s for Windows.
				See
				<a class="ulink" href="https://docs.microsoft.com/en-us/sql/odbc/microsoft-open-database-connectivity-odbc" target="_top">Microsoft Open Database Connectivity (ODBC)</a>
				In their solution, there's an abstract client library
				and individual database drivers adhere to the APIs
				offered by ODBC toplevel library. Since then, UNIX and
				UNIX-like systems also gained their ODBC client libraries
				in two different implementations, both of which are
				supported by OpenCReports:
				<a class="ulink" href="https://www.unixodbc.org" target="_top">unixODBC</a>
				and
				<a class="ulink" href="https://www.iodbc.org" target="_top">iODBC</a>.
			</p><p>
				An ODBC database setup is done a differently. There are
				two system-wide configuration files. The first one is
				<code class="literal">odbcinst.ini</code> that lists the database
				drivers installed into the system. The second one is
				<code class="literal">odbc.ini</code> which references the first
				one and lists pre-defined database connections. These
				database connections are named. In ODBC speak, these
				are called Data Source Names or DSNs. The DSNs specify
				the low level connection parameters, like the database
				host and port, and optionally the user name and
				password, too.
			</p><p>
				Thus, an ODBC database connection may be declared in two
				ways. The first way is by using the DSN name, and
				optionally the user name and password:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="odbc"
    dbname="..." user="..." password="..." /&gt;</pre><p>
				In this case, the <code class="literal">dbname</code> attribute
				is not the low level database name, but the ODBC
				abstract DSN name.
			</p><p>
				There's also a way to use the so called connection string
				which contain the same connection information:
				</p><pre class="programlisting">&lt;Datasource
    name="mysource" type="odbc"
    connstr="..." /&gt;</pre><p>
			</p><p>
				For the connection string format, see the
				<a class="ulink" href="https://www.connectionstrings.com/" target="_top">public examples</a>.
			</p></div><div class="sect2" id="CSVDS"><div class="titlepage"><div><div><h3 class="title">2.4.4. CSV file datasource <a href="#CSVDS" class="id_link">#</a></h3></div></div></div><p>
				CSV ("Comma Separated Values") is a simple tabulated
				file format. Every line must have the same number of
				columns, for which the values are separated by commas.
				The first line in the file contains the column names.
			</p><p>
				A CSV file datasource is declared very simply:
				</p><pre class="programlisting">&lt;Datasource name="mysource" type="'csv'" /&gt;</pre><p>
				In this case, the actual CSV file is not declared,
				only that a "query" using a CSV file will be listed
				later under <code class="literal">&lt;Queries&gt;</code>.
			</p><p>
				This datasource is less smart than others, in that
				is cannot specify data type for columns. Every column
				is assumed to be a string, regardless if the values
				themselves are quoted or not in the file. Data
				conversion functions must be used, like
				<code class="literal">val()</code>, <code class="literal">stodt()</code>
				or <code class="literal">interval()</code>.
			</p></div><div class="sect2" id="JSONDS"><div class="titlepage"><div><div><h3 class="title">2.4.5. JSON file datasource <a href="#JSONDS" class="id_link">#</a></h3></div></div></div><p>
				Similarly to CSV, the JSON file datasource is also declared
				very simply:
				</p><pre class="programlisting">&lt;Datasource name="mysource" type="'json'" /&gt;</pre><p>
				In this case, the actual JSON file is not declared,
				only that a "query" using a JSON file will be listed
				later under <code class="literal">&lt;Queries&gt;</code>.
			</p><p>
				A JSON file datasource is expected in this format:
				</p><pre class="programlisting">{
    "columns": ["colname1", ... ],
    "coltypes": ["type", ... ],
    "rows": [
	    { "colname1": value1, ...  },
        ...
    ]
}</pre><p>
			</p><p>
				The JSON file is expected to list the column
				names in a string array called <code class="literal">columns</code>.
			</p><p>
				The column types are optionally listed in the string
				array called <code class="literal">coltypes</code>. If they are
				listed, the <code class="literal">coltypes</code> array must have
				the same number of strings as the <code class="literal">columns</code>
				array. The types may be <code class="literal">string</code>,
				<code class="literal">number</code> or <code class="literal">datatime</code>.
				If the column type array is missing, then all data
				values are assumed to be strings and data conversion
				functions must be used, like <code class="literal">val()</code>,
				<code class="literal">stodt()</code> or <code class="literal">interval()</code>.
			</p><p>
				The rows are listed in an array called <code class="literal">rows</code>
				and column data values for each row are in a collection
				with data names from the <code class="literal">columns</code> and
				data types from the <code class="literal">coltypes</code> arrays.
			</p></div><div class="sect2" id="XMLDS"><div class="titlepage"><div><div><h3 class="title">2.4.6. XML file datasource <a href="#XMLDS" class="id_link">#</a></h3></div></div></div><p>
				Similarly to CSV and JSON, the XML file datasource is also declared
				very simply:
				</p><pre class="programlisting">&lt;Datasource name="mysource" type="'xml'" /&gt;</pre><p>
				In this case, the actual XML file is not declared,
				only that a "query" using an XML file will be listed
				later under <code class="literal">&lt;Queries&gt;</code>.
			</p><p>
				An XML file datasource is expected in this format:
				</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;data&gt;
    &lt;rows&gt;
        &lt;row&gt;
            &lt;col&gt;value&lt;/col&gt;
            ...
        &lt;/row&gt;
        ...
    &lt;/rows&gt;
    &lt;fields&gt;
        &lt;field&gt;column1&lt;/field&gt;
        ...
    &lt;/fields&gt;
    &lt;coltypes&gt;
        &lt;col&gt;type1&lt;/col&gt;
        ...
    &lt;/coltypes&gt;
&lt;/data&gt;</pre><p>
				The XML section names <code class="literal">&lt;data&gt;</code>,
				<code class="literal">&lt;rows&gt;</code> and
				<code class="literal">&lt;fields&gt;</code>
				are the same as they were in RLIB for its XML data
				source. The order of <code class="literal">&lt;rows&gt;</code>
				and <code class="literal">&lt;fields&gt;</code> is not important.
				But the order of field names in <code class="literal">&lt;fields&gt;</code>
				must match the column value order in each
				<code class="literal">&lt;row&gt;</code>.
			</p><p>
				The section &lt;coltypes&gt; is new in OpenCReports and
				is optional. If it's present, then it must list
				the data types in the same order as the section
				<code class="literal">&lt;fields&gt;</code>.
				The types may be <code class="literal">string</code>,
				<code class="literal">number</code> or <code class="literal">datatime</code>.
				If this section is not present, all values are assumed
				to be strings and data conversion functions must be
				used, like <code class="literal">val()</code>, <code class="literal">stodt()</code>
				or <code class="literal">interval()</code>.
			</p></div><div class="sect2" id="ARRAYDS"><div class="titlepage"><div><div><h3 class="title">2.4.7. Array datasource <a href="#ARRAYDS" class="id_link">#</a></h3></div></div></div><p>
				Arrays are global in-memory structures in the
				application that should be accessible to the
				OpenCReports library. For example, when using
				the C programming language, global non-static
				symbols are visible to libraries if the application
				is compiled with <code class="literal">-rdynamic</code>.
			</p><p>
				Similarly to file based datasources, the array
				datasource is declared very simply:
				</p><pre class="programlisting">&lt;Datasource name="mysource" type="'array'" /&gt;</pre><p>
				In this case, the actual array is not declared,
				only that a "query" using an array will be listed
				later under <code class="literal">&lt;Queries&gt;</code>.
			</p><p>
				A C array is declared in this format:
				</p><pre class="programlisting">const char *array[ROWS + 1][COLUMNS] = {
    { "column1", ... },
    { "value1",  ... },
    ...
};</pre><p>
				The array is declared as a two-dimensional array of
				C strings. The first row of the array is the column
				names, <code class="literal">[ROWS + 1]</code> in the array
				declaration accounts for the title row.
			</p><p>
				All rows have the same number of columns. Column values
				may be NULL, in which case they will be treated the same
				as SQL NULLs in SQL query results.
			</p><p>
				Optionally, a column types array is declared
				separately:
				</p><pre class="programlisting">#include &lt;opencreport.h&gt;

const enum ocrpt_result_type coltypes[COLUMNS] = {
    ...
};</pre><p>
				If this array is present, it must have the same number
				of <code class="literal">COLUMNS</code> as the matching data
				array. The <code class="literal">enum ocrpt_result_type</code>
				usable in data array type declaration are
				<code class="literal">OCRPT_RESULT_STRING</code>,
				<code class="literal">OCRPT_RESULT_NUMBER</code> and
				<code class="literal">OCRPT_RESULT_DATETIME</code>. 
			</p></div><div class="sect2" id="COMMONDSPROPS"><div class="titlepage"><div><div><h3 class="title">2.4.8. Common datasource properties <a href="#COMMONDSPROPS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="DSENCODING"><div class="titlepage"><div><div><h4 class="title">2.4.8.1. Encoding <a href="#DSENCODING" class="id_link">#</a></h4></div></div></div><p>
					OpenCReports expects strings in UTF-8 encoding.
					However, some datasources may use a different
					encoding. To use and display strings from the
					datasource, an internal conversion to UTF-8 is
					needed. To perform this correctly, the datasource
					encoding must be set.
					</p><pre class="programlisting">&lt;Datasource
    name="mysource"
    ...
    encoding="ISO-8859-2" /&gt;</pre><p>
				</p></div></div></div><div class="sect1" id="QUERIES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.5. Queries <a href="#QUERIES" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#SQLQUERIES">2.5.1. SQL queries for SQL datasources</a></span></dt><dt><span class="sect2"><a href="#FILEQUERIES">2.5.2. Queries for file based datasources</a></span></dt><dt><span class="sect2"><a href="#ARRAYQUERIES">2.5.3. Queries for array based datasources</a></span></dt><dt><span class="sect2"><a href="#FOLLOWERQUERIES">2.5.4. Follower queries</a></span></dt></dl></div><p>
			Queries in OpenCReports are SQL queries for database
			connections, or data files files in certain formats.
			The queries are declared like this:
			</p><pre class="programlisting">&lt;Queries&gt;
    &lt;Query name="..." ... /&gt;
    ...
&lt;/Queries&gt;</pre><p>
		</p><div class="sect2" id="SQLQUERIES"><div class="titlepage"><div><div><h3 class="title">2.5.1. SQL queries for SQL datasources <a href="#SQLQUERIES" class="id_link">#</a></h3></div></div></div><p>
				SQL queries for MariaDB, PostgreSQL and ODBC
				datasources may be declared two ways, either
				as the XML value for <code class="literal">&lt;Query&gt;</code>:
				</p><pre class="programlisting">&lt;Query
    name="myquery"
    datasource="mysource"&gt;
SELECT * FROM some_table
&lt;/Query&gt;</pre><p>
				or as the <code class="literal">value</code> attribute:
				</p><pre class="programlisting">&lt;Query
    name="myquery"
    datasource="mysource"
    value="SELECT * FROM some_table" /&gt;</pre><p>
			</p><p>
				Note, that the XML attribute <code class="literal">datasource="..."</code>
				must match a previously declared datasource.
			</p><p>
				The SQL query can be any <code class="literal">SELECT</code>
				statement.
			</p><div class="sect3" id="SQLDSNOTES"><div class="titlepage"><div><div><h4 class="title">2.5.1.1. Special note for SQL datasources <a href="#SQLDSNOTES" class="id_link">#</a></h4></div></div></div><p>
					The database client libraries for MariaDB,
					PostgreSQL and ODBC return all the query rows
					from the database server at once by default.
					As such, it is possible that a long query result
					doesn't fit into the computer memory.
				</p><p>
					The report needs to traverse the query result twice
					to pre-compute "delayed" values (see
					<a class="xref" href="#PRECALCEXPR" title="3.3. Precalculated expressions">precalculated</a> and
					<a class="xref" href="#PRECALCVAR" title="5.5. Precalculated variables">Precalculated variables</a>),
					so it needs to be able to rewind the data set
					once it was read to the end.
				</p><p>
					The alternative API in MariaDB to load the rows one by
					one doesn't allow rewinding, so it's not usable
					for the report's purposes.
				</p><p>
					It is only PostgreSQL that allows using an
					<span class="emphasis"><em>SQL cursor</em></span> as a standalone entity,
					i.e. outside SQL procedures as defined by the SQL
					standard. This PostgreSQL extension to the standard
					allows saving memory in such a way that it allows
					processing very long queries. Behind the scenes,
					a <code class="literal">WITH HOLD</code> cursor is used and
					1024 rows are loaded in one go from the server.
				</p></div></div><div class="sect2" id="FILEQUERIES"><div class="titlepage"><div><div><h3 class="title">2.5.2. Queries for file based datasources <a href="#FILEQUERIES" class="id_link">#</a></h3></div></div></div><p>
				Queries for CSV, XML and JSON datasources may
				be declared two ways. Either as the XML value for
				<code class="literal">&lt;Query&gt;</code>:
				</p><pre class="programlisting">&lt;Query
    name="myquery"
    datasource="mysource"
&gt;xmldata.xml&lt;/Query&gt;</pre><p>
					or as the <code class="literal">value</code> attribute:
					</p><pre class="programlisting">&lt;Query
    name="myquery"
    datasource="mysource"
    value="'xmldata.xml'" /&gt;</pre><p>
			</p><p>
				Notes:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							The XML attribute <code class="literal">datasource="..."</code>
							must match a previously declared datasource.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							It is recommended that the <code class="literal">value="..."</code>
							form is used, since it's not ensured that
							whitespace before or after the file name
							is trimmed in the first variant if the XML
							is "beautified". The file name that the
							OpenCReports library receives must be correct
							in order to use it.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							The declaration must specify a file in the
							correct format for the datasource type.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							The optional type declaration for columns
							in the XML and JSON file formats, or for CSV,
							the complete lack of it can be supplemented
							with a memory array using the optional
							<code class="literal">coltypes="..."</code> and
							<code class="literal">cols="..."</code> attributes.
							For details, see the <a class="xref" href="#ARRAYQUERIES" title="2.5.3. Queries for array based datasources">Array queries</a>.
						</p></li></ul></div><p>
			</p></div><div class="sect2" id="ARRAYQUERIES"><div class="titlepage"><div><div><h3 class="title">2.5.3. Queries for array based datasources <a href="#ARRAYQUERIES" class="id_link">#</a></h3></div></div></div><p>
				Queries for array datasources may be declared two ways.
				Either as the XML value for
				<code class="literal">&lt;Query&gt;</code>:
				</p><pre class="programlisting">&lt;Query
    name="myquery"
    datasource="mysource"
    coltypes="'coltypes'"
    rows="30"
    cols="6"
&gt;array&lt;/Query&gt;</pre><p>
					or as the <code class="literal">value</code> attribute:
					</p><pre class="programlisting">&lt;Query
    name="myquery"
    datasource="mysource"
    value="'array'"
    coltypes="'coltypes'"
    rows="30"
    cols="6" /&gt;</pre><p>
			</p><p>
				Notes:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							The XML attribute <code class="literal">datasource="..."</code>
							must match a previously declared datasource.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							It is recommended that the <code class="literal">value="..."</code>
							form is used, since it's not ensured that
							whitespace before or after the symbol name
							is trimmed in the first variant if the XML
							is "beautified". The symbol name that the
							OpenCReports library receives must be correct
							in order to use it. The array name must match
							the correct global symbol name. The library
							discovers this symbol using the
							<a class="xref" href="#ARRAYDISCOVERYFUNC" title="7.3.3.36. API specific array discovery function">Array discovery function</a>, by
							default via <code class="literal">dlsym()</code>.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							Similarly to the array symbol name, the
							<code class="literal">coltypes="..."</code> array name
							must match the correct global symbol name.
							The library discovers this symbol using the
							<a class="xref" href="#ARRAYDISCOVERYFUNC" title="7.3.3.36. API specific array discovery function">Array discovery function</a>, by
							default via <code class="literal">dlsym()</code>.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							The value for <code class="literal">cols</code>
							must match the second dimension of the
							data array. It may be omitted if the
							<a class="xref" href="#ARRAYDISCOVERYFUNC" title="7.3.3.36. API specific array discovery function">Array discovery function</a> is smarter
							than the default implementation and returns
							the arrays' dimensions.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							The value for <code class="literal">rows</code>
							must match the number of data rows in the array,
							excluding the title row. I.e. it must be one less
							than the first dimension of the array. It may be
							omitted if the
							<a class="xref" href="#ARRAYDISCOVERYFUNC" title="7.3.3.36. API specific array discovery function">Array discovery function</a> is smarter
							than the default implementation and returns the
							arrays' dimensions.
						</p></li></ul></div><p>
			</p><p>
				Failing to fulfill the above may cause crashes
				or wrong data to be used in the report.
			</p></div><div class="sect2" id="FOLLOWERQUERIES"><div class="titlepage"><div><div><h3 class="title">2.5.4. Follower queries <a href="#FOLLOWERQUERIES" class="id_link">#</a></h3></div></div></div><p>
				Multiple queries may be declared. But by default,
				only the first one is actually used by a report.
			</p><p>
				Secondary queries may be associated with the
				primary query as so called "follower" queries.
				Any query may be a follower to the primary query.
			</p><p>
				There are two kinds of follower queries:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							regular, or basic follower queries, and
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							so called N:1 (N-to-one) followers in RLIB
							speak.
						</p></li></ul></div><p>
			</p><div class="sect3" id="FOLLOWERQ"><div class="titlepage"><div><div><h4 class="title">2.5.4.1. Regular follower queries <a href="#FOLLOWERQ" class="id_link">#</a></h4></div></div></div><p>
					A follower query is run along the primary query and
					their rows are laid out side by side. The first row
					of the follower query is assigned the first row of the
					primary query. The second row of the follower query
					is assigned to the second row of the primary query,
					and so on. The number of rows of the complete data
					set is determined by the primary query. If the
					follower query runs out of rows before the primary,
					the columns values will be presented as SQL NULLs.
				</p><p>
					This is similar to using <code class="literal">LEFT OUTER JOIN</code>
					and using <code class="literal">ROWNUM</code> in Oracle or
					the <code class="literal">row_number()</code> SQL function
					in PostgreSQL as the matching value between the
					primary query and the follower query.
				</p><p>
					A regular follower query is declared by adding
					the <code class="literal">follower_for="..."</code> attribute.
					The value for <code class="literal">follower_for="..."</code>
					is the <code class="literal">name</code> of a previously
					declared query. Example:
					</p><pre class="programlisting">&lt;Query
    name="myquery1"
    datasource="mysource1"
    value="'SELECT * FROM table1'" /&gt;

&lt;Query
    name="myquery2"
    datasource="mysource2"
    value="'SELECT * FROM table1'"
    follower_for="myquery1" /&gt;</pre><p>
				</p><p>
					In this example, two queries of two different
					datasources are used. This is one of the advantages
					of using follower queries, i.e. data from different
					databases may be used. Nowadays, with foreign
					queries implemented in e.g. PostgreSQL, its use
					case is more limited.
				</p></div><div class="sect3" id="N1FOLLOWERQ"><div class="titlepage"><div><div><h4 class="title">2.5.4.2. N:1 follower queries <a href="#N1FOLLOWERQ" class="id_link">#</a></h4></div></div></div><p>
					An N:1 follower query, for all intents and
					purposes, is the right side query in a
					<code class="literal">LEFT OUTER JOIN</code> query, with
					the primary query on the left side. Rows of the
					main query and the follower query are matched
					according to the boolean expression specified
					with the <code class="literal">follower_expr="..."</code>
					attribute. Example:
					</p><pre class="programlisting">&lt;Query
    name="myquery1"
    datasource="mysource1"
    value="'SELECT * FROM table1'" /&gt;

&lt;Query
    name="myquery2"
    datasource="mysource2"
    value="'SELECT * FROM table1'"
    follower_for="myquery1"
    follower_expr="myquery1.id = myquery2.id" /&gt;</pre><p>
				</p></div></div></div><div class="sect1" id="PARTS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.6. Report parts <a href="#PARTS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PARTATTRIBS">2.6.1. Part attributes</a></span></dt><dt><span class="sect2"><a href="#PARTSUBSECS">2.6.2. Part subsections</a></span></dt></dl></div><p>
			A report XML may contain multiple actual reports.
			Such a <code class="literal">&lt;Part&gt;</code> may be
			under the toplevel <code class="literal">&lt;OpenCReport&gt;</code>
			node, in which case multiple report parts may exist
			in the same XML, or it may be the toplevel node of
			the XML. In the latter case, only a single
			<code class="literal">&lt;Part&gt;</code>	may exist in the XML.
			</p><pre class="programlisting">&lt;Part&gt;
    &lt;pr&gt;
        &lt;pd&gt;
            &lt;Report&gt;
                ...
            &lt;/Report&gt;
            ...
        &lt;/pd&gt;
        ...
    &lt;/pr&gt;
    ...
&lt;/Part&gt;</pre><p>
		</p><p>
			A report <code class="literal">&lt;Part&gt;</code> may consist
			multiple reports, arranged in
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
						rows (<code class="literal">&lt;pr&gt;</code>),
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						columns in rows (<code class="literal">&lt;pd&gt;</code>), and
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						reports (<code class="literal">&lt;Report&gt;</code>) arranged
						vertically in a column.
					</p></li></ul></div><p>
		</p><p>
			The rows and columns in rows do not form a grid as rows are
			independent of each other. E.g. one row may contain two columns,
			the next one may contain three, the next one may contain one.
			It is completely freeform.
		</p><p>
			This allows very complex report layouts.
			One possible application of such a complex layout is printed forms.
		</p><div class="sect2" id="PARTATTRIBS"><div class="titlepage"><div><div><h3 class="title">2.6.1. Part attributes <a href="#PARTATTRIBS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PARTFONTNAME"><div class="titlepage"><div><div><h4 class="title">2.6.1.1. Font name <a href="#PARTFONTNAME" class="id_link">#</a></h4></div></div></div><p>
					The font name attribute specifies the font
					for the report part's global scope. It can be
					overridden by child nodes for their scope.
					It may be specified in two forms, the first one
					is the preferred name, the second is for RLIB
					compatibility:
					</p><pre class="programlisting">&lt;Part font_name="Arial"&gt;
&lt;Part fontName="Arial"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_name</code>
					is used.
				</p><p>
					Default font name is <code class="literal">Courier</code>.
				</p></div><div class="sect3" id="PARTFONTSIZE"><div class="titlepage"><div><div><h4 class="title">2.6.1.2. Font size <a href="#PARTFONTSIZE" class="id_link">#</a></h4></div></div></div><p>
					The font size attribute specifies the font size
					for the report part's global scope. It can be
					overridden by child nodes for their scope.
					It may be specified in two forms, the first one
					is the preferred name, the second is for RLIB
					compatibility:
					</p><pre class="programlisting">&lt;Part font_size="10"&gt;
&lt;Part fontSize="10"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_size</code>
					is used.
				</p><p>
					Default font size is 12.
				</p></div><div class="sect3" id="PARTSIZEUNIT"><div class="titlepage"><div><div><h4 class="title">2.6.1.3. Size unit <a href="#PARTSIZEUNIT" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> in
					<code class="literal">&lt;OpenCReport&gt;</code> when
					<code class="literal">&lt;Part&gt;</code> is the toplevel node.
					</p><pre class="programlisting">&lt;Part size_unit="default"&gt;
&lt;Part size_unit="rlib"&gt;
&lt;Part size_unit="points"&gt;</pre><p>
				</p><p>
					When <code class="literal">&lt;OpenCReport&gt;</code> is the
					toplevel node in the XML, this attribute for
					<code class="literal">&lt;Part&gt;</code> is ignored.
				</p></div><div class="sect3" id="NQSND"><div class="titlepage"><div><div><h4 class="title">2.6.1.4. No query show NoData attribute <a href="#NQSND" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#NOQUERYSHOWNODATA" title="2.2.2. No query show NoData">No query show NoData attribute</a> in
					<code class="literal">&lt;OpenCReport&gt;</code> when
                    <code class="literal">&lt;Part&gt;</code> is the toplevel node.
					</p><pre class="programlisting">noquery_show_nodata="yes"
noquery_show_nodata="no"</pre><p>
				</p><p>
					See default in <a class="xref" href="#NOQUERYSHOWNODATA" title="2.2.2. No query show NoData">No query show NoData attribute</a>
					See also <a class="xref" href="#NODATANODE" title="2.9.2.8. Alternate output for no data">NoData node</a>.
				</p></div><div class="sect3" id="RHAL"><div class="titlepage"><div><div><h4 class="title">2.6.1.5. Report height after last attribute <a href="#RHAL" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#REPORTHEIGHTAFTERLAST" title="2.2.3. Report height after last">Report height after last attribute</a> in
					<code class="literal">&lt;OpenCReport&gt;</code> when
					<code class="literal">&lt;Part&gt;</code> is the toplevel node.
					</p><pre class="programlisting">report_height_after_last="yes"
report_height_after_last="no"</pre><p>
				</p><p>
					See default in <a class="xref" href="#REPORTHEIGHTAFTERLAST" title="2.2.3. Report height after last">Report height after last attribute</a>
					See also <a class="xref" href="#NODATANODE" title="2.9.2.8. Alternate output for no data">NoData node</a>.
				</p></div><div class="sect3" id="PARTPAGEORIENTATION"><div class="titlepage"><div><div><h4 class="title">2.6.1.6. Orientation <a href="#PARTPAGEORIENTATION" class="id_link">#</a></h4></div></div></div><p>
					Page orientation for the whole
					<code class="literal">&lt;Part&gt;</code>.
					</p><pre class="programlisting">&lt;Part orientation="portrait"&gt;
&lt;Part orientation="landscape"&gt;</pre><p>
				</p><p>
					Default is portrait orientation.
				</p></div><div class="sect3" id="MARGINSETTINGS"><div class="titlepage"><div><div><h4 class="title">2.6.1.7. Margin settings <a href="#MARGINSETTINGS" class="id_link">#</a></h4></div></div></div><p>
					Margin settings for the page for the whole
					<code class="literal">&lt;Part&gt;</code>. Individual
					settings exist for the top, bottom, left and
					right margins of the page. Every setting
					exist in two forms: the RLIB compatible
					"lowerCamelCase" variant and the all lowercase
					with underscore. The lowecase-with-underscore
					variants are the preferred ones.
					</p><pre class="programlisting">&lt;Part top_margin="0.2"&gt;
&lt;Part topMargin="0.2"&gt;
&lt;Part bottom_margin="0.2"&gt;
&lt;Part bottomMargin="0.2"&gt;
&lt;Part left_margin="0.2"&gt;
&lt;Part leftMargin="0.2"&gt;
&lt;Part right_margin="0.2"&gt;
&lt;Part rightMargin="0.2"&gt;</pre><p>
				</p><p>
					When <code class="literal">size_unit="rlib"</code> is in effect
					(the default case) the margin unit is inches.
					The margin unit is points (1/72th inches) when
					<code class="literal">size_unit="points"</code> is in effect.
				</p><p>
					Default values for the top, bottom, left and right
					margins are all 0.2, regardless of the unit.
				</p><p>
					Note that <code class="literal">rightMargin</code> didn't exist
					in RLIB.
				</p></div><div class="sect3" id="PAPERTYPE"><div class="titlepage"><div><div><h4 class="title">2.6.1.8. Paper type <a href="#PAPERTYPE" class="id_link">#</a></h4></div></div></div><p>
					Paper type (implicitly: page size) for the whole
					<code class="literal">&lt;Part&gt;</code>. It exists in
					two forms: the RLIB compatible "lowerCamelCase"
					variant and the all lowercase with underscore.
					The lowecase-with-underscore variant is preferred.
					</p><pre class="programlisting">&lt;Part paper_type="A4"&gt;
&lt;Part paperType="A4"&gt;</pre><p>
				</p><p>
					Default value is the current system paper type
					that <a class="ulink" href="http://packages.qa.debian.org/libp/libpaper.html" target="_top">libpaper</a>
					uses. E.g. if the system is set to US English,
					the default paper type is implicitly
					<code class="literal">letter</code>. In most of Europe,
					the default paper type is <code class="literal">A4</code>
				</p><p>
					The paper type can be specified in either lower case
					or upper case, both are accepted.
				</p></div><div class="sect3" id="PARTITER"><div class="titlepage"><div><div><h4 class="title">2.6.1.9. Iterations <a href="#PARTITER" class="id_link">#</a></h4></div></div></div><p>
					The same <code class="literal">&lt;Part&gt;</code> may be
					executed multiple times.
					</p><pre class="programlisting">&lt;Part iterations="3"&gt;</pre><p>
				</p><p>
					Default value is 1.
				</p><p>
					Note that <code class="literal">&lt;Part&gt;</code>s and
					every iteration of one starts on a new page.
				</p></div><div class="sect3" id="PARTSUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.6.1.10. Suppress <a href="#PARTSUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					Report parts may be suppressed.
					</p><pre class="programlisting">&lt;Part suppress="yes"&gt;
&lt;Part suppress="val(m.suppress_part)"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">false</code>,
					i.e. no suppression.
				</p><p>
					The expression for <code class="literal">suppress</code>
					must be a constant expression. An environment
					variable (since it can't - or shouldn't - change
					during the report execution) is considered
					constant. See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p></div><div class="sect3" id="SUPPRESSPAGEHEADERFIRSTPAGE"><div class="titlepage"><div><div><h4 class="title">2.6.1.11. Suppress page header on the first page <a href="#SUPPRESSPAGEHEADERFIRSTPAGE" class="id_link">#</a></h4></div></div></div><p>
					The <code class="literal">&lt;PageHeader&gt;</code> section
					(see <a class="xref" href="#PAGEHEADER" title="2.6.2.1. Page header">Page header</a> below)
					for <code class="literal">&lt;Part&gt;</code> may be
					suppressed on the first page.
					</p><pre class="programlisting">&lt;Part suppressPageHeaderFirstPage="yes"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">no</code>.
				</p><p>
					Note that this suppression applies only to
					the first page of the complete result (e.g. PDF)
					and not to the first page of an iteration, which
					may fall on a later page of the result.  
				</p></div></div><div class="sect2" id="PARTSUBSECS"><div class="titlepage"><div><div><h3 class="title">2.6.2. Part subsections <a href="#PARTSUBSECS" class="id_link">#</a></h3></div></div></div><p>
				As described in <a class="xref" href="#PARTS" title="2.6. Report parts">Report parts</a>,
				a <code class="literal">&lt;Part&gt;</code> may contain
				one or more report rows (<code class="literal">&lt;pr&gt;</code>)
				which in turn may contain one or more columns
				(<code class="literal">&lt;pr&gt;</code>). See
				<a class="xref" href="#PARTROW" title="2.7. Part row">Part row</a> and <a class="xref" href="#PARTCOL" title="2.8. Part column">Part column</a>.
			</p><div class="sect3" id="PAGEHEADER"><div class="titlepage"><div><div><h4 class="title">2.6.2.1. Page header <a href="#PAGEHEADER" class="id_link">#</a></h4></div></div></div><p>
					This is the description of the page header.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
					The same node can be used as a child of
					<code class="literal">&lt;Report&gt;</code>, see
					the difference in <a class="xref" href="#REPORTPAGEHEADER" title="2.9.2.1. Page header">Report page header</a>
					</p><pre class="programlisting">&lt;Part&gt;
    &lt;PageHeader&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/PageHeader&gt;
&lt;/Part&gt;</pre><p>					
				</p></div><div class="sect3" id="PAGEFOOTER"><div class="titlepage"><div><div><h4 class="title">2.6.2.2. Page footer <a href="#PAGEFOOTER" class="id_link">#</a></h4></div></div></div><p>
					This is the description of the page footer.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
					The same node can be used as a child of
					<code class="literal">&lt;Report&gt;</code>, see
					the difference in <a class="xref" href="#REPORTPAGEFOOTER" title="2.9.2.2. Page footer">Report page footer</a>
					</p><pre class="programlisting">&lt;Part&gt;
    &lt;PageFooter&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/PageFooter&gt;
&lt;/Part&gt;</pre><p>					
				</p></div><div class="sect3" id="PARTROW0"><div class="titlepage"><div><div><h4 class="title">2.6.2.3. Part row <a href="#PARTROW0" class="id_link">#</a></h4></div></div></div><p>
					See <a class="xref" href="#PARTROW" title="2.7. Part row">Part row</a>.
					</p><pre class="programlisting">&lt;Part&gt;
    &lt;pr&gt;
        &lt;pd&gt;
            ...
        &lt;/pd&gt;
    &lt;/pr&gt;
&lt;/Part&gt;</pre><p>
				</p><div class="sect4" id="PARTROWSUBSECS"><div class="titlepage"><div><div><h5 class="title">2.6.2.3.1. Part row subsections <a href="#PARTROWSUBSECS" class="id_link">#</a></h5></div></div></div><p>
						There's only one node type which is a
						subsection of <code class="literal">&lt;Part&gt;</code>.
						See <a class="xref" href="#PARTCOL" title="2.8. Part column">Part column</a>.
					</p></div></div></div></div><div class="sect1" id="PARTROW"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.7. Part row <a href="#PARTROW" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PARTROWATTS">2.7.1. Part row attributes</a></span></dt></dl></div><p>
			A part row (<code class="literal">&lt;pr&gt;</code>) may
			contain one or more <a class="xref" href="#PARTCOL" title="2.8. Part column">Part column</a>s
			(<code class="literal">&lt;pd&gt;</code>) which are layed out
			side by side horizontally. The longest running column
			will control the height of the row. The next row will
			be continuous from that vertical page position.
		</p><div class="sect2" id="PARTROWATTS"><div class="titlepage"><div><div><h3 class="title">2.7.1. Part row attributes <a href="#PARTROWATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PARTROWLAYOUT"><div class="titlepage"><div><div><h4 class="title">2.7.1.1. Layout <a href="#PARTROWLAYOUT" class="id_link">#</a></h4></div></div></div><p>
					The <code class="literal">layout</code> attribute exists mainly
					for RLIB compatibility, it's ignored.
					It accepts two values: <code class="literal">flow</code> and
					<code class="literal">fixed</code>.
					</p><pre class="programlisting">&lt;pr layout="flow"&gt;
&lt;pr layout="fixed"&gt;</pre><p>
				</p></div><div class="sect3" id="PARTROWNEWPAGE"><div class="titlepage"><div><div><h4 class="title">2.7.1.2. New page <a href="#PARTROWNEWPAGE" class="id_link">#</a></h4></div></div></div><p>
					The <code class="literal">newpage</code> attribute controls
					whether the part row starts from the point where
					the previous row in the same part ended, or it
					should start on a new page.
					</p><pre class="programlisting">&lt;pr newpage="yes"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">no</code>
				</p></div><div class="sect3" id="PARTROWSUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.7.1.3. Suppress <a href="#PARTROWSUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					Report rows may be suppressed.
					</p><pre class="programlisting">&lt;pr suppress="yes"&gt;
&lt;pr suppress="val(m.suppress_row)"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">false</code>,
					i.e. no suppression.
				</p><p>
					The expression for <code class="literal">suppress</code>
					must be a constant expression. An environment
					variable (since it can't - or shouldn't - change
					during the report execution) is considered
					constant. See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p></div></div></div><div class="sect1" id="PARTCOL"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.8. Part column <a href="#PARTCOL" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PARTCOLATTS">2.8.1. Part column attributes</a></span></dt></dl></div><p>
			A part column (<code class="literal">&lt;pd&gt;</code>) may
			contain one or more <a class="xref" href="#REPORT" title="2.9. Report">Report</a>s
			(<code class="literal">&lt;Report&gt;</code>) which are layed
			out vertically in this column continuously.
		</p><p>
			Such a report may be inlined:
			</p><pre class="programlisting">&lt;Part&gt;
    &lt;pr&gt;
        &lt;pd&gt;
            &lt;Report&gt;
                ...
            &lt;/Report&gt;
        &lt;/pd&gt;
    &lt;/pr&gt;
&lt;/Part&gt;</pre><p>
		</p><p>
			A report may also be loaded from a separate file.
			For details, see <a class="xref" href="#LOADEDREPORT" title="2.10. Loaded report">Loaded report</a>.
			</p><pre class="programlisting">&lt;Part&gt;
    &lt;pr&gt;
        &lt;pd&gt;
            &lt;load ... /&gt;
        &lt;/pd&gt;
    &lt;/pr&gt;
&lt;/Part&gt;</pre><p>
		</p><div class="sect2" id="PARTCOLATTS"><div class="titlepage"><div><div><h3 class="title">2.8.1. Part column attributes <a href="#PARTCOLATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PARTCOLWIDTH"><div class="titlepage"><div><div><h4 class="title">2.8.1.1. Width <a href="#PARTCOLWIDTH" class="id_link">#</a></h4></div></div></div><p>
					Width of the part column.
					</p><pre class="programlisting">&lt;pd width="60"&gt;</pre><p>
				</p><p>
					When <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">rlib</code> (the default),
					the column width is measured in characters,
					which is controlled by <a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>.
					Note, that the font width and height may differ,
					depending on the font face controlled by
					<a class="xref" href="#PARTFONTNAME" title="2.6.1.1. Font name">Part font name</a>. Width is computed
					from the font width.
				</p><p>
					When <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">points</code>, width is measured
					in points.
				</p><p>
					Columns without explicitly specified width are
					dynamically sized according to
					<a class="xref" href="#PAPERTYPE" title="2.6.1.8. Paper type">Paper type</a>,
					<a class="xref" href="#MARGINSETTINGS" title="2.6.1.7. Margin settings">Margin settings</a>
					and columns with explicitly specified width.
				</p><p>
					Columns that exceed the total page width
					(according to <a class="xref" href="#PAPERTYPE" title="2.6.1.8. Paper type">Paper type</a> and
					<a class="xref" href="#MARGINSETTINGS" title="2.6.1.7. Margin settings">Margin settings</a>) will be shown
					partially, or won't be shown at all.
				</p></div><div class="sect3" id="PARTCOLHEIGHT"><div class="titlepage"><div><div><h4 class="title">2.8.1.2. Height <a href="#PARTCOLHEIGHT" class="id_link">#</a></h4></div></div></div><p>
					Height of the part column.
					</p><pre class="programlisting">&lt;pd height="120"&gt;</pre><p>
				</p><p>
					When <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">rlib</code> (the default),
					the column height is measured in characters,
					which is controlled by <a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>.
					Note, that the font width and height may differ,
					depending on the font face controlled by
					<a class="xref" href="#PARTFONTNAME" title="2.6.1.1. Font name">Part font name</a>. Column height is
					computed from the font height.
				</p><p>
					When <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">points</code>, height is measured
					in points.
				</p><p>
					Report details in this part column are layed out
					up to the specified height. See
					<a class="xref" href="#REPORTHEIGHT" title="2.9.1.9. Height">Report height</a> for further explanation.
				</p><p>
					Note, that OpenCReports allows fixed height
					columns to break over page boundaries. This is a
					deviation from RLIB.
				</p></div><div class="sect3" id="PDBORDERWIDTH"><div class="titlepage"><div><div><h4 class="title">2.8.1.3. Border width <a href="#PDBORDERWIDTH" class="id_link">#</a></h4></div></div></div><p>
					Border width around the part column.
					It is measured in points.
					</p><pre class="programlisting">&lt;pd border_width="2"&gt;</pre><p>
				</p><p>
					When set, a rectangle around the part column
					will be drawn. The width of outline of the
					rectangle is measured in points.
				</p><p>
					This is a deviation from RLIB where the width
					of the outline was a fixed 0.1 points and an
					inner margin (all of top, bottom, left and right)
					inside the column border was used.
				</p><p>
					If the column breaks over a page boundary,
					the border will be drawn the column parts
					on every page. 
				</p></div><div class="sect3" id="PDBORDERCOLOR"><div class="titlepage"><div><div><h4 class="title">2.8.1.4. Border color <a href="#PDBORDERCOLOR" class="id_link">#</a></h4></div></div></div><p>
					When <code class="literal">border_width</code> is set,
					this color is used to draw the border rectangle.
					</p><pre class="programlisting">&lt;pd border_color="'blue'"&gt;</pre><p>
				</p><p>
					See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p></div><div class="sect3" id="DETAILCOLUMNS"><div class="titlepage"><div><div><h4 class="title">2.8.1.5. Detail columns <a href="#DETAILCOLUMNS" class="id_link">#</a></h4></div></div></div><p>
					Inner <code class="literal">&lt;Report&gt;</code>s
					are layed out in one or more columns.
					</p><pre class="programlisting">&lt;pd detail_columns="3"&gt;</pre><p>
				</p><p>
					Default value is 1.
				</p></div><div class="sect3" id="COLUMNPADDING"><div class="titlepage"><div><div><h4 class="title">2.8.1.6. Column padding <a href="#COLUMNPADDING" class="id_link">#</a></h4></div></div></div><p>
					When <code class="literal">detail_columns</code>
					is set to higher than 1, inner padding
					between the detail columns may be specified.
					</p><pre class="programlisting">&lt;pd column_pad="0.2"&gt;</pre><p>
				</p><p>
					Default value is 0, i.e. no padding.
				</p><p>
					The unit of padding is inches if
					<a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">rlib</code> (default), points
					otherwise.
				</p></div><div class="sect3" id="PARTCOLSUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.8.1.7. Suppress <a href="#PARTCOLSUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					Report columns may be suppressed.
					</p><pre class="programlisting">&lt;pd suppress="yes"&gt;
&lt;pd suppress="val(m.suppress_column)"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">false</code>,
					i.e. no suppression.
				</p><p>
					The expression for <code class="literal">suppress</code>
					must be a constant expression. An environment
					variable (since it can't - or shouldn't - change
					during the report execution) is considered
					constant. See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p></div></div></div><div class="sect1" id="REPORT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.9. Report <a href="#REPORT" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#REPORTATTRIBS">2.9.1. Report attributes</a></span></dt><dt><span class="sect2"><a href="#REPSUBSECS">2.9.2. Report subsections</a></span></dt></dl></div><p>
			This section may occur in a wider context or
			standalone in an XML description file.
		</p><p>
			Example XML skeleton structure with
			<code class="literal">&lt;OpenCReport&gt;</code> as
			the toplevel node:
			</p><pre class="programlisting">&lt;OpenCReport&gt;
    &lt;Part&gt;
        &lt;pr&gt;
            &lt;pd&gt;
                &lt;Report&gt;
                    ...
                &lt;/Report&gt;
            &lt;/pd&gt;
        &lt;/pr&gt;
    &lt;/Part&gt;
&lt;/OpenCReport&gt;</pre><p>
		</p><p>
			Example XML skeleton structure with
			<code class="literal">&lt;Part&gt;</code> as
			the toplevel node:
			</p><pre class="programlisting">&lt;Part&gt;
    &lt;pr&gt;
        &lt;pd&gt;
            &lt;Report&gt;
                ...
            &lt;/Report&gt;
        &lt;/pd&gt;
    &lt;/pr&gt;
&lt;/Part&gt;</pre><p>
		</p><p>
			Example XML skeleton structure with
			a standalone <code class="literal">&lt;Report&gt;</code> node:
			</p><pre class="programlisting">&lt;Report&gt;
    ...
&lt;/Report&gt;</pre><p>
		</p><p>
			When <code class="literal">&lt;Report&gt;</code> is the
			toplevel node, parent nodes for
			<code class="literal">&lt;Part&gt;</code>, <code class="literal">&lt;pr&gt;</code>
			and <code class="literal">&lt;pd&gt;</code> are implicitly
			created. Subsections and many attributes specific to
			these parent nodes can be used as shortcuts in the
			<code class="literal">&lt;Report&gt;</code> node.
		</p><div class="sect2" id="REPORTATTRIBS"><div class="titlepage"><div><div><h3 class="title">2.9.1. Report attributes <a href="#REPORTATTRIBS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="REPORTFONTNAME"><div class="titlepage"><div><div><h4 class="title">2.9.1.1. Font name <a href="#REPORTFONTNAME" class="id_link">#</a></h4></div></div></div><p>
					The font name attribute specifies the font
					for the report's scope. It can be overridden by
					child nodes for their scope.
					It may be specified in two forms, the first one
					is the preferred name, the second is for RLIB
					compatibility:
					</p><pre class="programlisting">&lt;Report font_name="Arial"&gt;
&lt;Report fontName="Arial"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_name</code>
					is used.
				</p><p>
					Default font name is what's set for
					<a class="xref" href="#PARTFONTNAME" title="2.6.1.1. Font name">Part font name</a>, or
					<code class="literal">Courier</code> if both are unset.
				</p></div><div class="sect3" id="REPORTFONTSIZE"><div class="titlepage"><div><div><h4 class="title">2.9.1.2. Font size <a href="#REPORTFONTSIZE" class="id_link">#</a></h4></div></div></div><p>
					The font size attribute specifies the font size
					for the report's scope. It can be overridden by
					child nodes for their scope.
					It may be specified in two forms, the first one
					is the preferred name, the second is for RLIB
					compatibility:
					</p><pre class="programlisting">&lt;Report font_size="10"&gt;
&lt;Report fontSize="10"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_size</code>
					is used.
				</p><p>
					Default font name is what's set for
					<a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>, or
					<code class="literal">12</code> if both are unset.
				</p></div><div class="sect3" id="REPSIZEUNIT"><div class="titlepage"><div><div><h4 class="title">2.9.1.3. Size unit <a href="#REPSIZEUNIT" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> in
					<code class="literal">&lt;OpenCReport&gt;</code> when
					<code class="literal">&lt;Report&gt;</code> is the toplevel node.
					</p><pre class="programlisting">&lt;Report size_unit="default"&gt;
&lt;Report size_unit="rlib"&gt;
&lt;Report size_unit="points"&gt;</pre><p>
				</p><p>
					When <code class="literal">&lt;OpenCReport&gt;</code> or
					<code class="literal">&lt;Part&gt;</code> is the toplevel
					node in the report XML description, this attribute
					for <code class="literal">&lt;Report&gt;</code> is ignored.
				</p></div><div class="sect3" id="NQSND1"><div class="titlepage"><div><div><h4 class="title">2.9.1.4. No query show NoData attribute <a href="#NQSND1" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#NOQUERYSHOWNODATA" title="2.2.2. No query show NoData">No query show NoData attribute</a> in
					<code class="literal">&lt;OpenCReport&gt;</code> when
                    <code class="literal">&lt;Report&gt;</code> is the toplevel node.
					</p><pre class="programlisting">&lt;Report noquery_show_nodata="yes"&gt;
&lt;Report noquery_show_nodata="no&gt;</pre><p>
				</p><p>
					See default in <a class="xref" href="#NOQUERYSHOWNODATA" title="2.2.2. No query show NoData">No query show NoData attribute</a>
					See also <a class="xref" href="#NODATANODE" title="2.9.2.8. Alternate output for no data">NoData node</a>.
				</p></div><div class="sect3" id="RHAL1"><div class="titlepage"><div><div><h4 class="title">2.9.1.5. Report height after last attribute <a href="#RHAL1" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#REPORTHEIGHTAFTERLAST" title="2.2.3. Report height after last">Report height after last attribute</a> in
					<code class="literal">&lt;OpenCReport&gt;</code> when
					<code class="literal">&lt;Part&gt;</code> is the toplevel node.
					</p><pre class="programlisting">&lt;Report report_height_after_last="yes"&gt;
&lt;Report report_height_after_last="no"&gt;</pre><p>
				</p><p>
					See default in <a class="xref" href="#REPORTHEIGHTAFTERLAST" title="2.2.3. Report height after last">Report height after last attribute</a>
					See also <a class="xref" href="#NODATANODE" title="2.9.2.8. Alternate output for no data">NoData node</a>.
				</p></div><div class="sect3" id="ORIENTATION"><div class="titlepage"><div><div><h4 class="title">2.9.1.6. Orientation <a href="#ORIENTATION" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#PARTPAGEORIENTATION" title="2.6.1.6. Orientation">Part page orientation</a>
					for the implicitly created parent
					<code class="literal">&lt;Part&gt;</code> node when
					<code class="literal">&lt;Report&gt;</code> is standalone.
					</p><pre class="programlisting">&lt;Report orientation="portrait"&gt;
&lt;Report orientation="landscape"&gt;</pre><p>
				</p><p>
					Default is portrait orientation.
				</p><p>
					This setting for <code class="literal">&lt;Report&gt;</code>
					is ignored when there is a parent
					<code class="literal">&lt;Part&gt;</code> node
					in the XML description.
				</p></div><div class="sect3" id="MARGINSETTINGS1"><div class="titlepage"><div><div><h4 class="title">2.9.1.7. Margin settings <a href="#MARGINSETTINGS1" class="id_link">#</a></h4></div></div></div><p>
					Shortcuts for <a class="xref" href="#MARGINSETTINGS" title="2.6.1.7. Margin settings">Margin settings</a>
					for the implicitly created parent
					<code class="literal">&lt;Part&gt;</code> node. Individual
					settings exist for the top, bottom, left and
					right margins of the page. Every setting
					exist in two forms: the RLIB compatible
					"lowerCamelCase" variant and the all lowercase
					with underscore. The lowecase-with-underscore
					variants are the preferred ones.
					</p><pre class="programlisting">&lt;Report top_margin="0.2"&gt;
&lt;Report topMargin="0.2"&gt;
&lt;Report bottom_margin="0.2"&gt;
&lt;Report bottomMargin="0.2"&gt;
&lt;Report left_margin="0.2"&gt;
&lt;Report leftMargin="0.2"&gt;
&lt;Report right_margin="0.2"&gt;
&lt;Report rightMargin="0.2"&gt;</pre><p>
				</p><p>
					When <code class="literal">size_unit="rlib"</code> is in effect
					(the default case) the margin unit is inches.
					The margin unit is points (1/72th inches) when
					<code class="literal">size_unit="points"</code> is in effect.
				</p><p>
					Default values for the top, bottom, left and right
					margins are all 0.2, regardless of the unit.
				</p><p>
					Note that <code class="literal">rightMargin</code> didn't exist
					in RLIB.
				</p><p>
					These settings for <code class="literal">&lt;Report&gt;</code>
					are ignored when there is a parent
					<code class="literal">&lt;Part&gt;</code> node
					in the XML description.
				</p></div><div class="sect3" id="PAPERTYPE1"><div class="titlepage"><div><div><h4 class="title">2.9.1.8. Paper type <a href="#PAPERTYPE1" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#PAPERTYPE" title="2.6.1.8. Paper type">Paper type</a>
					for the implicitly created parent
					<code class="literal">&lt;Part&gt;</code> node. It exists in
					two forms: the RLIB compatible "lowerCamelCase"
					variant and the all lowercase with underscore.
					The lowecase-with-underscore variant is preferred.
					</p><pre class="programlisting">&lt;Part paper_type="A4"&gt;
&lt;Part paperType="A4"&gt;</pre><p>
				</p><p>
					Default value is the current system paper type
					that <a class="ulink" href="http://packages.qa.debian.org/libp/libpaper.html" target="_top">libpaper</a>
					uses. E.g. if the system is set to US English,
					the default paper type is implicitly
					<code class="literal">letter</code>. In most of Europe,
					the default paper type is <code class="literal">A4</code>
				</p><p>
					The paper type can be specified in either lower case
					or upper case, both are accepted.
				</p><p>
					This setting for <code class="literal">&lt;Report&gt;</code>
					is ignored when there is a parent
					<code class="literal">&lt;Part&gt;</code> node
					in the XML description.
				</p></div><div class="sect3" id="REPORTHEIGHT"><div class="titlepage"><div><div><h4 class="title">2.9.1.9. Height <a href="#REPORTHEIGHT" class="id_link">#</a></h4></div></div></div><p>
					Height of the report.
					</p><pre class="programlisting">&lt;Report height="120"&gt;</pre><p>
				</p><p>
					When <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">rlib</code> (the default),
					the report height is measured in characters,
					which is controlled by <a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a>.
					Note, that the font width and height may differ,
					depending on the font face controlled by
					<a class="xref" href="#REPORTFONTNAME" title="2.9.1.1. Font name">Report font name</a>. Report height is
					computed from the font height.
				</p><p>
					When <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">points</code>, height is measured
					in points.
				</p><p>
					Report details are layed out up to the
					specified height. If the report would run longer
					than the specified height, it gets truncated.
					When the report fits in the specified height,
					the next report's starts with the remaining height
					added as padding before it.
				</p><p>
					If the <code class="literal">&lt;Report&gt;</code> is the last
					one in the <code class="literal">&lt;pd&gt;</code> node, then
					the report may or may not be padded with the remaining
					height, depending on the
					<a class="xref" href="#REPORTHEIGHTAFTERLAST" title="2.2.3. Report height after last">Report height after last attribute</a>.
				</p><p>
					If height is unset for the parent
					<code class="literal">&lt;pd&gt;</code> node, it is expanded
					with this vertical padding.
				</p><p>
					In case height is set for both the parent
					<code class="literal">&lt;pd&gt;</code> node and the
					<code class="literal">&lt;Report&gt;</code> nodes in it,
					the height value for <code class="literal">&lt;pd&gt;</code>
					is applied first. It would limit the displayed
					rows in whichever <code class="literal">&lt;Report&gt;</code> node
					is terminated by it. Subsequent
					<code class="literal">&lt;Report&gt;</code> nodes would
					no be displayed in that <code class="literal">&lt;pd&gt;</code>
					node.
				</p><p>
					Note, that OpenCReports allows fixed-height
					reports to break over page boundaries.
					This is a deviation from RLIB.
				</p></div><div class="sect3" id="REPORTITER"><div class="titlepage"><div><div><h4 class="title">2.9.1.10. Iterations <a href="#REPORTITER" class="id_link">#</a></h4></div></div></div><p>
					The same <code class="literal">&lt;Report&gt;</code> may be
					executed multiple times.
					</p><pre class="programlisting">&lt;Report iterations="3"&gt;</pre><p>
				</p><p>
					Default value is 1.
				</p></div><div class="sect3" id="REPORTSUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.9.1.11. Suppress <a href="#REPORTSUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					Reports may be suppressed.
					</p><pre class="programlisting">&lt;Report suppress="yes"&gt;
&lt;Report suppress="val(m.suppress_report)"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">false</code>,
					i.e. no suppression.
				</p><p>
					The expression for <code class="literal">suppress</code>
					must be a constant expression. An environment
					variable (since it can't - or shouldn't - change
					during the report execution) is considered
					constant. See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p></div><div class="sect3" id="SPH"><div class="titlepage"><div><div><h4 class="title">2.9.1.12. Suppress page header on the first page <a href="#SPH" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#SUPPRESSPAGEHEADERFIRSTPAGE" title="2.6.1.11. Suppress page header on the first page">Suppress page header on the first page</a>
					in the implicitly created parent
					<code class="literal">&lt;Part&gt;</code> node when
					<code class="literal">&lt;Report&gt;</code> is the
					toplevel node.
					</p><pre class="programlisting">&lt;Report suppressPageHeaderFirstPage="yes"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">no</code>.
				</p><p>
					This setting for <code class="literal">&lt;Report&gt;</code>
					is ignored when there is a parent
					<code class="literal">&lt;Part&gt;</code> node
					in the XML description.
				</p></div><div class="sect3" id="REPORTQUERYNAME"><div class="titlepage"><div><div><h4 class="title">2.9.1.13. Query <a href="#REPORTQUERYNAME" class="id_link">#</a></h4></div></div></div><p>
					Set the primary query name for <code class="literal">&lt;Report&gt;</code>
					from the list of <a class="xref" href="#QUERIES" title="2.5. Queries">Queries</a>.
					</p><pre class="programlisting">&lt;Report query="query1"&gt;</pre><p>
				</p><p>
					Default value is unset, i.e. use the first
					query from the list of <a class="xref" href="#QUERIES" title="2.5. Queries">Queries</a>.
				</p></div><div class="sect3" id="REPORTFHPRIORITY"><div class="titlepage"><div><div><h4 class="title">2.9.1.14. Field header priority <a href="#REPORTFHPRIORITY" class="id_link">#</a></h4></div></div></div><p>
					Set the field header priority for the report versus
					break (header and footer) priority. This setting
					selects which report detail is encompassing the other.
					</p><pre class="programlisting">&lt;Report field_header_priority="low"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">high</code>. In this
					mode, the field header is printed on the top of every
					page of the report and break headers and footers are
					encompassed by it. The default is chosen for RLIB
					compatibility.
				</p><p>
					When this setting is <code class="literal">low</code>,
					field headers are handled with lower priority
					compared to break headers and footers. In this
					mode, a break header is followed by the field header,
					then data rows (field details), followed by the break
					footer. This brings the field header closer to the field
					details.
				</p></div><div class="sect3" id="BW"><div class="titlepage"><div><div><h4 class="title">2.9.1.15. Border width <a href="#BW" class="id_link">#</a></h4></div></div></div><p>
					This is a shortcut for <a class="xref" href="#PDBORDERWIDTH" title="2.8.1.3. Border width">Part column border width</a>
					for the implicitly created <code class="literal">&lt;pd&gt;</code>
					node when <code class="literal">&lt;Report&gt;</code> is standalone.
					It is measured in points.
					</p><pre class="programlisting">&lt;Report border_width="2"&gt;</pre><p>
				</p><p>
					When set, a rectangle around the part column
					(in this case, around the single report in the
					part column) will be drawn. The width of outline
					of the rectangle is measured in points.
				</p><p>
					This is a deviation from RLIB where the width
					of the outline was a fixed 0.1 points and an
					inner margin (all of top, bottom, left and right)
					inside the column border was used. Also, this shortcut
					didn't exist in RLIB, the <code class="literal">&lt;pd&gt;</code>
					node had to be present.
				</p><p>
					If the report (column) breaks over a page boundary,
					the border will be drawn the column parts
					on every page. 
				</p><p>
					This setting for <code class="literal">&lt;Report&gt;</code>
					is ignored when there is a parent
					<code class="literal">&lt;pd&gt;</code> node.
				</p></div><div class="sect3" id="BC"><div class="titlepage"><div><div><h4 class="title">2.9.1.16. Border color <a href="#BC" class="id_link">#</a></h4></div></div></div><p>
					This is a shortcut for <a class="xref" href="#PDBORDERCOLOR" title="2.8.1.4. Border color">Part column border color</a>
					for the implicitly created <code class="literal">&lt;pd&gt;</code>
					node when <code class="literal">&lt;Report&gt;</code> is standalone.
					When <code class="literal">border_width</code> is set,
					this color is used to draw the border rectangle.
					</p><pre class="programlisting">&lt;Report border_color="'blue'"&gt;</pre><p>
				</p><p>
					See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p></div><div class="sect3" id="DCOLS"><div class="titlepage"><div><div><h4 class="title">2.9.1.17. Detail columns <a href="#DCOLS" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#DETAILCOLUMNS" title="2.8.1.5. Detail columns">Detail columns</a>
					in the implicitly created parent
					<code class="literal">&lt;pd&gt;</code> when
					<code class="literal">&lt;Parent&gt;</code> is the
					toplevel node.
					</p><pre class="programlisting">&lt;Report detail_columns="3"&gt;</pre><p>
				</p><p>
					Default value is 1.
				</p><p>
					This setting for <code class="literal">&lt;Parent&gt;</code>
					is ignored when there is a parent
					<code class="literal">&lt;pd&gt;</code> node in the report
					XML description.
				</p></div><div class="sect3" id="CPADDING"><div class="titlepage"><div><div><h4 class="title">2.9.1.18. Column padding <a href="#CPADDING" class="id_link">#</a></h4></div></div></div><p>
					Shortcut for <a class="xref" href="#COLUMNPADDING" title="2.8.1.6. Column padding">Column padding</a>
					in the implicitly created parent
					<code class="literal">&lt;pd&gt;</code> node when
					<code class="literal">&lt;Parent&gt;</code> is the
					toplevel node.
					</p><pre class="programlisting">&lt;Report column_pad="0.2"&gt;</pre><p>
				</p><p>
					Default value is 0, i.e. no padding.
				</p><p>
					The unit of padding is inches if
					<a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">rlib</code> (default), points
					otherwise.
				</p></div></div><div class="sect2" id="REPSUBSECS"><div class="titlepage"><div><div><h3 class="title">2.9.2. Report subsections <a href="#REPSUBSECS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="REPORTPAGEHEADER"><div class="titlepage"><div><div><h4 class="title">2.9.2.1. Page header <a href="#REPORTPAGEHEADER" class="id_link">#</a></h4></div></div></div><p>
					This may be seen as a shortcut for
					<a class="xref" href="#PAGEHEADER" title="2.6.2.1. Page header">Page header</a> in the implicitly
					created <code class="literal">&lt;Part&gt;</code>
					node when <code class="literal">&lt;Report&gt;</code> is standalone.
					Except that report expressions are allowed when
					it's a child node of <code class="literal">&lt;Report&gt;</code>
					instead of <code class="literal">&lt;Part&gt;</code>.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;PageHeader&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/PageHeader&gt;
&lt;/Part&gt;</pre><p>
				</p><p>
					This subsection for <code class="literal">&lt;Report&gt;</code>
					is ignored when there is a page header section
					defined for the <code class="literal">&lt;Part&gt;</code> node,
					either in the <code class="literal">&lt;Part&gt;</code> node
					itself or in a previous child <code class="literal">&lt;Report&gt;</code>
					node for the same <code class="literal">&lt;Part&gt;</code>.
					A warning is issued in this case.
				</p></div><div class="sect3" id="REPORTPAGEFOOTER"><div class="titlepage"><div><div><h4 class="title">2.9.2.2. Page footer <a href="#REPORTPAGEFOOTER" class="id_link">#</a></h4></div></div></div><p>
					This may be seen as a shortcut for
					<a class="xref" href="#PAGEFOOTER" title="2.6.2.2. Page footer">Page footer</a> in the implicitly
					created <code class="literal">&lt;Part&gt;</code>
					node when <code class="literal">&lt;Report&gt;</code> is standalone.
					Except that report expressions are allowed when
					it's a child node of <code class="literal">&lt;Report&gt;</code>
					instead of <code class="literal">&lt;Part&gt;</code>.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;PageFooter&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/PageFooter&gt;
&lt;/Part&gt;</pre><p>					
				</p><p>
					This subsection for <code class="literal">&lt;Report&gt;</code>
					is ignored when there is a page footer section
					defined for the <code class="literal">&lt;Part&gt;</code> node,
					either in the <code class="literal">&lt;Part&gt;</code> node
					itself or in a previous child <code class="literal">&lt;Report&gt;</code>
					node for the same <code class="literal">&lt;Part&gt;</code>.
					A warning is issued in this case.
				</p></div><div class="sect3" id="REPHEADER"><div class="titlepage"><div><div><h4 class="title">2.9.2.3. Report header <a href="#REPHEADER" class="id_link">#</a></h4></div></div></div><p>
					This is the description of the report header that is
					emitted at the start of the report.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;ReportHeader&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/ReportHeader&gt;
&lt;/Part&gt;</pre><p>
				</p></div><div class="sect3" id="REPFOOTER"><div class="titlepage"><div><div><h4 class="title">2.9.2.4. Report footer <a href="#REPFOOTER" class="id_link">#</a></h4></div></div></div><p>
					This is the description of the report footer that is
					emitted at the end of the report.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;ReportFooter&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/ReportFooter&gt;
&lt;/Part&gt;</pre><p>					
				</p></div><div class="sect3" id="REPVARS1"><div class="titlepage"><div><div><h4 class="title">2.9.2.5. Variables <a href="#REPVARS1" class="id_link">#</a></h4></div></div></div><p>
					This section describes the
					<a class="xref" href="#VARIABLESNODE" title="2.11. Variables">Variables</a> in the report.
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable ... /&gt;
        ...
    &lt;/Variables&gt;
&lt;/Part&gt;</pre><p>
				</p></div><div class="sect3" id="BREAKS1"><div class="titlepage"><div><div><h4 class="title">2.9.2.6. Breaks <a href="#BREAKS1" class="id_link">#</a></h4></div></div></div><p>
					This section describes the
					<a class="xref" href="#BREAKSNODE" title="2.13. Breaks">Breaks</a> in the report.
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;Breaks&gt;
        &lt;Break ... &gt;
            ...
        &lt;/Break&gt;
        ...
    &lt;/Breaks&gt;
&lt;/Part&gt;</pre><p>
				</p></div><div class="sect3" id="DETAILNODE"><div class="titlepage"><div><div><h4 class="title">2.9.2.7. Detail <a href="#DETAILNODE" class="id_link">#</a></h4></div></div></div><p>
					This section describes the tabular details of the report.
					There are two subsections in this node, both contain
					an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;Detail&gt;
        &lt;FieldHeaders&gt;
            &lt;Output&gt;
                ...
            &lt;/Output&gt;
        &lt;/FieldHeaders&gt;
        &lt;FieldDetails&gt;
            &lt;Output&gt;
                ...
            &lt;/Output&gt;
        &lt;/FieldDetails&gt;
    &lt;/Detail&gt;
&lt;/Part&gt;</pre><p>
				</p><p>
					<code class="literal">&lt;FieldHeaders&gt;</code> is used
					to describe the header for data rows.
				</p><p>
					<code class="literal">&lt;FieldDetails&gt;</code> is used
					to show data that is derived from the current data row
					produced by the report query.
				</p></div><div class="sect3" id="NODATANODE"><div class="titlepage"><div><div><h4 class="title">2.9.2.8. Alternate output for no data <a href="#NODATANODE" class="id_link">#</a></h4></div></div></div><p>
					This section describes the alternate output of the report
					when the query has no data rows, or there is no such
					query name defined that's set in
					<a class="xref" href="#REPORTQUERYNAME" title="2.9.1.13. Query">Report query name</a>.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
				</p><p>
					This section may be declared in two ways. One way is to
					spell out the <code class="literal">&lt;Alternate&gt;</code> node:
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;Alternate&gt;
        &lt;NoData&gt;
            &lt;Output&gt;
                ...
            &lt;/Output&gt;
        &lt;/NoData&gt;
    &lt;/Alternate&gt;
&lt;/Part&gt;</pre><p>
				</p><p>
					The other way is without the
					<code class="literal">&lt;Alternate&gt;</code> node:
					</p><pre class="programlisting">&lt;Report&gt;
    &lt;NoData&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/NoData&gt;
&lt;/Part&gt;</pre><p>
				</p><p>
					When the <a class="xref" href="#REPORTQUERYNAME" title="2.9.1.13. Query">Report query name</a>
					does not exist in in the global list of
					<a class="xref" href="#QUERIES" title="2.5. Queries">Queries</a> and the
					<a class="xref" href="#NOQUERYSHOWNODATA" title="2.2.2. No query show NoData">No query show NoData attribute</a> is set, then
					the <code class="literal">&lt;NoData&gt;</code> section
					is not displayed.
				</p></div></div></div><div class="sect1" id="LOADEDREPORT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.10. Loaded report <a href="#LOADEDREPORT" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#LREPATTS">2.10.1. Loaded Report attributes</a></span></dt></dl></div><p>
			It is like an inline report, but the
			<a class="xref" href="#REPORT" title="2.9. Report">Report</a> is loaded from
			a different file.
		</p><div class="sect2" id="LREPATTS"><div class="titlepage"><div><div><h3 class="title">2.10.1. Loaded Report attributes <a href="#LREPATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="LREPFNAME"><div class="titlepage"><div><div><h4 class="title">2.10.1.1. File name <a href="#LREPFNAME" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">&lt;load name="report1.xml" /&gt;</pre><p>
				</p></div><div class="sect3" id="QUERYATTR"><div class="titlepage"><div><div><h4 class="title">2.10.1.2. Query <a href="#QUERYATTR" class="id_link">#</a></h4></div></div></div><p>
					The <code class="literal">query</code> attribute overrides
					the same attribute of <code class="literal">&lt;Report&gt;</code>.
					This way, the report in the separate file can be reused
					for a different data set.
					</p><pre class="programlisting">&lt;load query="query1" /&gt;</pre><p>
				</p><p>
					When the <a class="xref" href="#NOQUERYSHOWNODATA" title="2.2.2. No query show NoData">No query show NoData attribute</a> is set and the
					<a class="xref" href="#REPORTQUERYNAME" title="2.9.1.13. Query">Report query name</a> is set to
					a non-existing name in the global list of
					<a class="xref" href="#QUERIES" title="2.5. Queries">Queries</a>, the
					<code class="literal">&lt;NoData&gt;</code> section
					is not displayed.
				</p></div><div class="sect3" id="LREPITER"><div class="titlepage"><div><div><h4 class="title">2.10.1.3. Iterations <a href="#LREPITER" class="id_link">#</a></h4></div></div></div><p>
					The <code class="literal">iterations</code> attribute overrides
					the same attribute of <code class="literal">&lt;Report&gt;</code>.
					</p><pre class="programlisting">&lt;load iterations="5" /&gt;</pre><p>
				</p></div></div></div><div class="sect1" id="VARIABLESNODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.11. Variables <a href="#VARIABLESNODE" class="id_link">#</a></h2></div></div></div><p>
			This is the parent node for individual
			<code class="literal">&lt;Variable&gt;</code> nodes
			that describe each variable.
			</p><pre class="programlisting">&lt;Variables&gt;
    &lt;Variable ... /&gt;
    ...
&lt;/Variables&gt;</pre><p>
		</p></div><div class="sect1" id="VARIABLENODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.12. Variable <a href="#VARIABLENODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#VARATTS">2.12.1. Variable attributes</a></span></dt></dl></div><p>
			This node describes one
			<code class="literal">&lt;Variable&gt;</code> node.
			It has no children nodes, only attributes.
			</p><pre class="programlisting">&lt;Variable ... /&gt;</pre><p>
		</p><div class="sect2" id="VARATTS"><div class="titlepage"><div><div><h3 class="title">2.12.1. Variable attributes <a href="#VARATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="VARNAME"><div class="titlepage"><div><div><h4 class="title">2.12.1.1. Name <a href="#VARNAME" class="id_link">#</a></h4></div></div></div><p>
					The name of the variable. It must be
					unique in the list of variables for
					the parent <code class="literal">&lt;Report&gt;</code> node.
					</p><pre class="programlisting">&lt;Variable name="var1" /&gt;</pre><p>
				</p></div><div class="sect3" id="VARVALUE"><div class="titlepage"><div><div><h4 class="title">2.12.1.2. Value <a href="#VARVALUE" class="id_link">#</a></h4></div></div></div><p>
					The "value" of the variable, or rather,
					the expression from which the value is
					computed. Variables' values are computed
					for every data row produced by the report
					query. The expression may therefore reference
					field names of queries that are declared
					in the XML description or in programming code.
					</p><pre class="programlisting">&lt;Variable value="q1.field1 + 2 * q2.field2" /&gt;</pre><p>
				</p></div><div class="sect3" id="VARTYPE"><div class="titlepage"><div><div><h4 class="title">2.12.1.3. Type <a href="#VARTYPE" class="id_link">#</a></h4></div></div></div><p>
					The type of the variable. Several variable
					types exist:
					</p><pre class="programlisting">&lt;Variable value="q1.field" type="expression"/&gt;

&lt;Variable value="q1.field" type="count"/&gt;
&lt;Variable value="q1.field" type="countall"/&gt;

&lt;Variable value="q1.field" type="sum"/&gt;

&lt;Variable value="q1.field" type="average"/&gt;
&lt;Variable value="q1.field" type="averageall"/&gt;

&lt;Variable value="q1.field" type="highest"/&gt;
&lt;Variable value="q1.field" type="lowest"/&gt;

&lt;Variable value="q1.field" type="custom"/&gt;</pre><p>
				</p><p>
					Default type is <code class="literal">expression</code>,
					this is just a shortcut for the value expression
					that saves both typing and time to generate the
					report.
				</p><p>
					The <code class="literal">count</code> and
					<code class="literal">countall</code> variable
					types count the number of expression
					results for the data set. The former
					leaves out NULL values, the latter includes them.
					This is equivalent to COUNT(field) and COUNT(*)
					in SQL.
				</p><p>
					The <code class="literal">sum</code> variable type
					sums the non-NULL values of the expression
					results for the data set.
				</p><p>
					The <code class="literal">average</code> and
					<code class="literal">averageall</code> variable types
					are combinations of <code class="literal">sum</code>
					and either <code class="literal">count</code> or
					<code class="literal">countall</code>. They take the value
					computed for each data row, add them together,
					and divide by the number of values. The result
					of <code class="literal">average</code> and
					<code class="literal">averageall</code> may differ if
					there is NULL data in the result set.
				</p><p>
					The <code class="literal">highest</code> and
					<code class="literal">lowest</code> variable types
					return the highest and the lowest values
					for the data set, respectively.
				</p><p>
					All of the above pre-defined variables types
					work on numeric data.
				</p><p>
					The <code class="literal">custom</code> variable type
					allow arbitrary user variables if the
					predefined types are not enough, for example,
					when the base type needs to be something else
					then a number. See below.
				</p></div><div class="sect3" id="CUSTOMVARATTRS"><div class="titlepage"><div><div><h4 class="title">2.12.1.4. Custom variable attributes <a href="#CUSTOMVARATTRS" class="id_link">#</a></h4></div></div></div><p>
					These attributes below define a custom variable.
					A base expression, up to two intermediary expressions
					and one result expression may be defined, together
					with the expression type.
					</p><pre class="programlisting">&lt;Variable
    baseexpr="..."
    intermedexpr="..."
    intermed2expr="..."
    resultexpr="..."
    basetype="..."
    type="custom"/&gt;</pre><p>
				</p><p>
					<code class="literal">baseexpr</code>, <code class="literal">intermedexpr</code>,
					<code class="literal">intermed2expr</code> and <code class="literal">resultexpr</code>
					are <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><p>
					Iterative or recursive variables can use
					<a class="xref" href="#EXPRSELF" title="3.4.3.2.7. Expression self reference">Expression self reference</a>.
				</p><p>
					Possible values for <code class="literal">basetype</code> are
					<code class="literal">number</code>, <code class="literal">string</code>
					or <code class="literal">datetime</code>.
				</p><p>
					It's the user's responsibility to use expressions
					valid for the base type. Failing that, the result
					value will be an appropriate error message.
				</p><p>
					Note that the <code class="literal">baseexpr</code> attribute
					is an alias for <code class="literal">value</code>.
				</p></div><div class="sect3" id="RESETONBREAK"><div class="titlepage"><div><div><h4 class="title">2.12.1.5. Reset on break <a href="#RESETONBREAK" class="id_link">#</a></h4></div></div></div><p>
					A variable may reset on break boundaries to the
					<code class="literal">baseexpr</code> value. See
					<a class="xref" href="#BREAKNODE" title="2.14. Break">Break node</a> and <a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a>
					</p><pre class="programlisting">&lt;Variable resetonbreak="break1" /&gt;</pre><p>
				</p><p>
					Default is unset, i.e. no reset on a break.
				</p></div><div class="sect3" id="PRECALCVARATTR"><div class="titlepage"><div><div><h4 class="title">2.12.1.6. Precalculate (delayed) <a href="#PRECALCVARATTR" class="id_link">#</a></h4></div></div></div><p>
					A variable may work two ways. One is to generate an
					immediate value that is either derived from the current
					row, or derived from the current and previous rows.
					Say, for a variable of the <code class="literal">average</code>
					type, the value of the variable for the 5th row
					is the average value of the base expression of the
					first 5 rows.
				</p><p>
					The other way is <a class="xref" href="#PRECALCVAR" title="5.5. Precalculated variables">Precalculated variables</a>,
					that are derived from either the last data row or
					all rows, and supply that value for every data row.
					The attribute is accepted under two names:
					</p><pre class="programlisting">&lt;Variable precalculate="yes" /&gt;
&lt;Variable delayed="yes" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">no</code>.
				</p><p>
					<code class="literal">precalculate="yes"</code> (or
					<code class="literal">delayed="yes"</code> may be combined
					with <code class="literal">resetonbreak="..."</code>.
					In this case, a precalculated value is
					computed for the break periods separately.
				</p><p>
					Precalculated variables may be used to show values in
					<code class="literal">&lt;ReportHeader&gt;</code>,
					<code class="literal">&lt;ReportFooter&gt;</code>,
					<code class="literal">&lt;FieldHeaders&gt;</code>,
					<code class="literal">&lt;FieldDetails&gt;</code>,
					<code class="literal">&lt;BreakHeader&gt;</code> and
					<code class="literal">&lt;BreakFooter&gt;</code>
					but not in
					<code class="literal">&lt;PageHeader&gt;</code> and
					<code class="literal">&lt;PageFooter&gt;</code>.
					The reason for this is that the former headers,
					footers and details are in
					<code class="literal">&lt;Report&gt;</code> scope with a query.
					On the other hand, the latter two are in
					<code class="literal">&lt;Part&gt;</code> scope that don't know
					about queries.
				</p></div></div></div><div class="sect1" id="BREAKSNODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.13. Breaks <a href="#BREAKSNODE" class="id_link">#</a></h2></div></div></div><p>
			This is the parent node for individual
			<code class="literal">&lt;Break&gt;</code> nodes
			that describe each break. See <a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a>
			</p><pre class="programlisting">&lt;Breaks&gt;
    &lt;Break ... /&gt;
    ...
&lt;/Break&gt;</pre><p>
		</p></div><div class="sect1" id="BREAKNODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.14. Break <a href="#BREAKNODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#BREAKATTS">2.14.1. Break attributes</a></span></dt><dt><span class="sect2"><a href="#BREAKSUBSECS">2.14.2. Break subsections</a></span></dt></dl></div><p>
			This node describes one
			<code class="literal">&lt;Break&gt;</code>.
			</p><pre class="programlisting">&lt;Break ... &gt;
    &lt;BreakHeader&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/BreakHeader&gt;
    &lt;BreakFooter&gt;
        &lt;Output&gt;
            ...
        &lt;/Output&gt;
    &lt;/BreakFooter&gt;
    &lt;BreakFields&gt;
        &lt;BreakField /&gt;
        ...
    &lt;/BreakFields&gt;
&lt;/Break&gt;</pre><p>
		</p><div class="sect2" id="BREAKATTS"><div class="titlepage"><div><div><h3 class="title">2.14.1. Break attributes <a href="#BREAKATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="BREAKNAME"><div class="titlepage"><div><div><h4 class="title">2.14.1.1. Name <a href="#BREAKNAME" class="id_link">#</a></h4></div></div></div><p>
					The name of the break. It must be
					unique in the list of breaks for
					the parent <code class="literal">&lt;Report&gt;</code> node.
					</p><pre class="programlisting">&lt;Break name="break1" /&gt;</pre><p>
				</p></div><div class="sect3" id="BREAKNP"><div class="titlepage"><div><div><h4 class="title">2.14.1.2. Newpage <a href="#BREAKNP" class="id_link">#</a></h4></div></div></div><p>
					Accepted as part of RLIB compatibility.
					Not implemented. (Same as in RLIB.)
					</p><pre class="programlisting">&lt;Break newpage="yes" /&gt;</pre><p>
				</p></div><div class="sect3" id="BREAKHNP"><div class="titlepage"><div><div><h4 class="title">2.14.1.3. Header on new page <a href="#BREAKHNP" class="id_link">#</a></h4></div></div></div><p>
					Moves the </p><pre class="programlisting">&lt;BreakHeader&gt;</pre><p>
					to a new page.
					</p><pre class="programlisting">&lt;Break headernewpage="yes" /&gt;</pre><p>
				</p></div><div class="sect3" id="BREAKSB"><div class="titlepage"><div><div><h4 class="title">2.14.1.4. Suppress break header and footer for blank break fields <a href="#BREAKSB" class="id_link">#</a></h4></div></div></div><p>
					Suppress break header and footer in case
					any of the break fields are either <code class="literal">NULL</code> value
					or an empty string, if the break field is of the string type.
					</p><pre class="programlisting">&lt;Break suppressblank="yes" /&gt;</pre><p>
				</p></div></div><div class="sect2" id="BREAKSUBSECS"><div class="titlepage"><div><div><h3 class="title">2.14.2. Break subsections <a href="#BREAKSUBSECS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="BREAKHEADERNODE"><div class="titlepage"><div><div><h4 class="title">2.14.2.1. BreakHeader <a href="#BREAKHEADERNODE" class="id_link">#</a></h4></div></div></div><p>
					The break header is emitted before the new data row
					if there's a change for the values in the set of
					break fields.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a> child node.
					</p><pre class="programlisting">&lt;BreakHeader&gt;
    &lt;Output&gt;
        ...
    &lt;/Output&gt;
&lt;/BreakHeader&gt;</pre><p>
				</p></div><div class="sect3" id="BREAKFOOTERNODE"><div class="titlepage"><div><div><h4 class="title">2.14.2.2. BreakFooter <a href="#BREAKFOOTERNODE" class="id_link">#</a></h4></div></div></div><p>
					The break header is emitted after the previous data row
					if there's a change for the values in the set of
					break fields.
					It contains an <a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a> child node.
					</p><pre class="programlisting">&lt;BreakHeader&gt;
    &lt;Output&gt;
        ...
    &lt;/Output&gt;
&lt;/BreakHeader&gt;</pre><p>
				</p></div><div class="sect3" id="BREAFIELDS"><div class="titlepage"><div><div><h4 class="title">2.14.2.3. BreakFields <a href="#BREAFIELDS" class="id_link">#</a></h4></div></div></div><p>
					The break fields node contains one or more
					<a class="xref" href="#BREAKFIELD" title="2.14.2.3.1. BreakField">BreakField</a> children nodes.
					</p><pre class="programlisting">&lt;BreakFields&gt;
    &lt;BreakField ... /&gt;
    ...
&lt;/BreakFields&gt;</pre><p>
				</p><div class="sect4" id="BREAKFIELD"><div class="titlepage"><div><div><h5 class="title">2.14.2.3.1. BreakField <a href="#BREAKFIELD" class="id_link">#</a></h5></div></div></div><p>
						The break field node only has one attribute and
						contains no child nodes.
						</p><pre class="programlisting">&lt;BreakField value="..."/&gt;</pre><p>
					</p><p>
						The sole attribute in
						<code class="literal">&lt;BreakField&gt;</code> is
						<code class="literal">&lt;value&gt;</code> where the
						expression watched for changes is declared.
						See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
					</p><p>
						There must be at least one
						<code class="literal">&lt;BreakField&gt;</code> node
						listed. When mode than one break fields
						are listed, then all of them are watched
						for changes.
					</p><p>
						The order in which they are listed matters
						for two reasons.
					</p><p>
						The primary reason is that break fields are
						hierarchical. The break fields listed earlier
						are higher in the hierarchy. If a break field
						earlier in the list triggers, all subsequent
						break fields also trigger implicitly.
					</p><p>
						The second reason is a consequence of the
						previous one: emitting the
						<a class="xref" href="#BREAKHEADERNODE" title="2.14.2.1. BreakHeader">BreakHeader</a>s
						occur in the order of the list.
						For logical reasons,
						<a class="xref" href="#BREAKFOOTERNODE" title="2.14.2.2. BreakFooter">BreakFooter</a>s
						are in reverse order.
					</p></div></div></div></div><div class="sect1" id="OUTPUTNODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.15. Output <a href="#OUTPUTNODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#OUTPUTATTS">2.15.1. Output attributes</a></span></dt><dt><span class="sect2"><a href="#OUTPUTSUBSECS">2.15.2. Output subsections</a></span></dt></dl></div><p>
			The <code class="literal">&lt;Output&gt;</code> node is used
			by many previously mentioned sections. This is the
			generic node that described how details are displayed
			in reports.
		</p><div class="sect2" id="OUTPUTATTS"><div class="titlepage"><div><div><h3 class="title">2.15.1. Output attributes <a href="#OUTPUTATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="OUTPSUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.15.1.1. Suppress <a href="#OUTPSUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					Output nodes may be suppressed as a whole.
					</p><pre class="programlisting">&lt;Output suppress="yes"&gt;
&lt;Output suppress="val(m.suppress_output)"&gt;</pre><p>
				</p><p>
					If it's in a report's
					<code class="literal">&lt;FieldDetails&gt;</code> node,
					the suppression may depend on query data.
					See <a class="xref" href="#DETAILNODE" title="2.9.2.7. Detail">Detail node</a> and
					<a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
					</p><pre class="programlisting">&lt;Output suppress="query1.suppress_row"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">false</code>,
					i.e. no suppression.
				</p></div></div><div class="sect2" id="OUTPUTSUBSECS"><div class="titlepage"><div><div><h3 class="title">2.15.2. Output subsections <a href="#OUTPUTSUBSECS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="OUTPLINE"><div class="titlepage"><div><div><h4 class="title">2.15.2.1. Line <a href="#OUTPLINE" class="id_link">#</a></h4></div></div></div><p>
					A line containing text elements of varying widths.
					See <a class="xref" href="#LINENODE" title="2.16. Line">Line node</a>.
					</p><pre class="programlisting">&lt;Output&gt;
    &lt;Line&gt;
        ...
    &lt;/Line&gt;
&lt;/Output</pre><p>
				</p></div><div class="sect3" id="OUTPHLINE"><div class="titlepage"><div><div><h4 class="title">2.15.2.2. HorizontalLine <a href="#OUTPHLINE" class="id_link">#</a></h4></div></div></div><p>
					A horizontal line.
					See <a class="xref" href="#HLINENODE" title="2.18. HorizontalLine">HorizontalLine node</a>.
					</p><pre class="programlisting">&lt;Output&gt;
    &lt;HorizontalLine ... /&gt;
&lt;/Output</pre><p>
				</p></div><div class="sect3" id="OUTPIMG"><div class="titlepage"><div><div><h4 class="title">2.15.2.3. Image <a href="#OUTPIMG" class="id_link">#</a></h4></div></div></div><p>
					An image.
					See <a class="xref" href="#IMAGENODE" title="2.19. Image">Image node</a>.
					</p><pre class="programlisting">&lt;Output&gt;
    &lt;Image ... /&gt;
&lt;/Output</pre><p>
				</p></div><div class="sect3" id="OUTPIMGEND"><div class="titlepage"><div><div><h4 class="title">2.15.2.4. Image end <a href="#OUTPIMGEND" class="id_link">#</a></h4></div></div></div><p>
					Terminator for a previous image.
					See <a class="xref" href="#IMAGEENDNODE" title="2.20. Image end">ImageEnd node</a>.
					</p><pre class="programlisting">&lt;Output&gt;
    &lt;ImageEnd/&gt;
&lt;/Output</pre><p>
				</p></div></div></div><div class="sect1" id="LINENODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.16. Line <a href="#LINENODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#LINEATTS">2.16.1. Line attributes</a></span></dt><dt><span class="sect2"><a href="#LINESUBSECS">2.16.2. Line subsections</a></span></dt></dl></div><p>
			A line containing text elements of varying widths.
			</p><pre class="programlisting">&lt;Output&gt;
    &lt;Line&gt;
        ...
    &lt;/Line&gt;
&lt;/Output</pre><p>
		</p><div class="sect2" id="LINEATTS"><div class="titlepage"><div><div><h3 class="title">2.16.1. Line attributes <a href="#LINEATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="LINEFONTNAME"><div class="titlepage"><div><div><h4 class="title">2.16.1.1. Font name <a href="#LINEFONTNAME" class="id_link">#</a></h4></div></div></div><p>
					The font name attribute specifies the font
					for the line's scope. It can be overridden
					by child nodes for their scope.
					It may be specified in two forms, the first one
					is the preferred name, the second is for RLIB
					compatibility:
					</p><pre class="programlisting">&lt;Line font_name="Arial"&gt;
&lt;Line fontName="Arial"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_name</code>
					is used.
				</p><p>
					Default font name is what's set (in decreasing priority)
					in <a class="xref" href="#REPORTFONTNAME" title="2.9.1.1. Font name">Report font name</a> or
					<a class="xref" href="#PARTFONTNAME" title="2.6.1.1. Font name">Part font name</a>. If none of them is set,
					it's <code class="literal">Courier</code>.
				</p></div><div class="sect3" id="LINEFONTSIZE"><div class="titlepage"><div><div><h4 class="title">2.16.1.2. Font size <a href="#LINEFONTSIZE" class="id_link">#</a></h4></div></div></div><p>
					The font size attribute specifies the font size
					for the line's scope. It can be overridden by
					child nodes for their scope. It may be specified
					in two forms, the first one is the preferred name,
					the second is for RLIB compatibility:
					</p><pre class="programlisting">&lt;Line font_size="10"&gt;
&lt;Line fontSize="10"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_size</code>
					is used.
				</p><p>
					Default font name is what's set (in decreasing priority)
					in <a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a> or
					<a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>. If none of them is set,
					it's <code class="literal">12</code>.
				</p></div><div class="sect3" id="LINEBOLDATTR"><div class="titlepage"><div><div><h4 class="title">2.16.1.3. Bold font <a href="#LINEBOLDATTR" class="id_link">#</a></h4></div></div></div><p>
					Whether the line elements use bold font.
					</p><pre class="programlisting">&lt;Line bold="yes"&gt;</pre><p>
				</p><p>
					Default is <code class="literal">false</code>.
				</p></div><div class="sect3" id="LINEITALICATTR"><div class="titlepage"><div><div><h4 class="title">2.16.1.4. Italic font <a href="#LINEITALICATTR" class="id_link">#</a></h4></div></div></div><p>
					Whether the line elements use italic font.
					It is accepted in two forms:
					</p><pre class="programlisting">&lt;Line italic="yes"&gt;
&lt;Line italics="yes"&gt;</pre><p>
				</p><p>
					Default is <code class="literal">false</code>.
				</p></div><div class="sect3" id="LINESUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.16.1.5. Suppress <a href="#LINESUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					Text lines may be suppressed. If the parent
					<code class="literal">&lt;Output&gt;</code> node is in
					<code class="literal">&lt;FieldDetails&gt;</code>, the
					expression may be derived from a query field.
					</p><pre class="programlisting">&lt;Line suppress="yes"&gt;
&lt;Line suppress="val(m.suppress_line)"&gt;
&lt;Line suppress="query1.suppress_line"&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">false</code>,
					i.e. no suppression.
				</p></div><div class="sect3" id="LINETEXTCOLOR"><div class="titlepage"><div><div><h4 class="title">2.16.1.6. Text color <a href="#LINETEXTCOLOR" class="id_link">#</a></h4></div></div></div><p>
					This color is used to render text. It's accepted
					with both American and  British spelling.
					</p><pre class="programlisting">&lt;Line color="'blue'"&gt;
&lt;Line colour="'blue'"&gt;</pre><p>
				</p><p>
					Default is <code class="literal">black</code>.
					See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p></div><div class="sect3" id="LINEBGCOLOR"><div class="titlepage"><div><div><h4 class="title">2.16.1.7. Background color <a href="#LINEBGCOLOR" class="id_link">#</a></h4></div></div></div><p>
					This color is used to render the background
					rectangle under the text. It's accepted
					with both American and  British spelling.
					</p><pre class="programlisting">&lt;Line bgcolor="'blue'"&gt;
&lt;Line bgcolour="'blue'"&gt;</pre><p>
				</p><p>
					Default is <code class="literal">white</code>.
					See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p></div></div><div class="sect2" id="LINESUBSECS"><div class="titlepage"><div><div><h3 class="title">2.16.2. Line subsections <a href="#LINESUBSECS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="LINETXTELEM"><div class="titlepage"><div><div><h4 class="title">2.16.2.1. Text element <a href="#LINETXTELEM" class="id_link">#</a></h4></div></div></div><p>
					Two variants are accepted.
					</p><pre class="programlisting">&lt;Line&gt;
    &lt;field value="expression..." ... /&gt;
&lt;/Line&gt;</pre><p> and
					</p><pre class="programlisting">&lt;Line&gt;
    &lt;literal ... &gt;Literal text&lt;/literal&gt;
&lt;/Line&gt;</pre><p>
				</p><p>
					See the <a class="xref" href="#TEXTELEMNODE" title="2.17. Text element">Text element node</a> below.
				</p></div><div class="sect3" id="LINEIMG"><div class="titlepage"><div><div><h4 class="title">2.16.2.2. Image element <a href="#LINEIMG" class="id_link">#</a></h4></div></div></div><p>
					An <code class="literal">&lt;Image&gt;</code> is accepted
					as a line element.
					</p><pre class="programlisting">&lt;Line&gt;
    &lt;Image value="expression..." ... /&gt;
&lt;/Line&gt;</pre><p>
				</p><p>
					See the <a class="xref" href="#IMAGENODE" title="2.19. Image">Image node</a> below.
				</p></div></div></div><div class="sect1" id="TEXTELEMNODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.17. Text element <a href="#TEXTELEMNODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#TEXTELEMATTS">2.17.1. Text element attributes</a></span></dt></dl></div><p>
			Two variants are accepted.
			</p><pre class="programlisting">&lt;Line&gt;
    &lt;field value="expression..." ... /&gt;
&lt;/Line&gt;</pre><p> and
			</p><pre class="programlisting">&lt;Line&gt;
    &lt;literal ... &gt;Literal text&lt;/literal&gt;
&lt;/Line&gt;</pre><p>
		</p><p>
			Neither <code class="literal">field</code> nor
			<code class="literal">literal</code> have child nodes,
			only attributes or XML values.
		</p><p>
			The two variants are interchangeable, see
			<a class="xref" href="#ELEMVALUEATTR" title="2.17.1.1. Value">Text element value</a> below.
		</p><div class="sect2" id="TEXTELEMATTS"><div class="titlepage"><div><div><h3 class="title">2.17.1. Text element attributes <a href="#TEXTELEMATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="ELEMVALUEATTR"><div class="titlepage"><div><div><h4 class="title">2.17.1.1. Value <a href="#ELEMVALUEATTR" class="id_link">#</a></h4></div></div></div><p>
					The value of the text element. It's accepted in two
					ways: in the <code class="literal">value</code> attribute or as
					the XML value for the <code class="literal">field</code> and
					<code class="literal">literal</code> nodes.
					</p><pre class="programlisting">&lt;Line&gt;
    &lt;field value="'This text'" /&gt;
    &lt;field&gt;This text&lt;/field&gt;
    &lt;literal value="'This text'" /&gt;
    &lt;literal&gt;This text&lt;/literal&gt;
&lt;/Line&gt;</pre><p>
				</p><p>
					The value is parsed as an expression
					from the <code class="literal">value</code> attribute.
					See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><p>
					On the other hand, the value is taken as a literal
					string from the XML value in the second and fourth
					examples above.
				</p></div><div class="sect3" id="TEXTELEMDELAYED"><div class="titlepage"><div><div><h4 class="title">2.17.1.2. Delayed (precalculated) value <a href="#TEXTELEMDELAYED" class="id_link">#</a></h4></div></div></div><p>
					This setting indicates whether the value is
					"precalculated", i.e. the value for the last
					row in the data set is used, or it would be
					the actual value for the current row in the
					data set.
					</p><pre class="programlisting">&lt;field delayed="yes" /&gt;
&lt;field precalculate="yes" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">false</code>.
				</p><p>
					This setting is only applicable for
					line elements in the
					<a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a> node in
					<code class="literal">&lt;ReportHeader&gt;</code>,
					<code class="literal">&lt;ReportFooter&gt;</code>,
					<code class="literal">&lt;Fieldheaders&gt;</code>
					<code class="literal">&lt;FieldDetails&gt;</code>,
					since they are the ones under the
					<code class="literal">&lt;Report&gt;</code> scope
					with a query.
				</p><p>
					Note that in <code class="literal">OpenCReports</code>,
					an expression may mix references to precalculated
					variables with non-precalculated variables and
					query field references. The result will use the
					precalculated value only for the precalculated
					variables. Other references will use values derived
					from the current row in the data set.
					This is an extension over RLIB.
				</p></div><div class="sect3" id="FORMATATTR"><div class="titlepage"><div><div><h4 class="title">2.17.1.3. Format string <a href="#FORMATATTR" class="id_link">#</a></h4></div></div></div><p>
					The format string is used to format the
					<code class="literal">value</code> to be displayed
					in the generated output. For example, to
					print a number with two decimal places:
					</p><pre class="programlisting">&lt;field value="3" format="'%.2d'" /&gt;</pre><p>
				</p><p>
					The format string is expected to be a string
					so quoting around it is needed.
				</p><p>
					See <a class="xref" href="#FORMATTING" title="Chapter 6. Formatting">Formatting data</a> for details.
				</p></div><div class="sect3" id="TEXTELEMWIDTH"><div class="titlepage"><div><div><h4 class="title">2.17.1.4. Width <a href="#TEXTELEMWIDTH" class="id_link">#</a></h4></div></div></div><p>
					The field width.
					</p><pre class="programlisting">&lt;field value="3" format="'%.2d'" width="6" /&gt;</pre><p>
				</p><p>
					Default is unset, i.e. the field width
					is implicitly set to the rendered width (in points)
					of the field's formatted value as text, using the
					font name and font size of the field.
				</p><p>
					When the field is the last one in the
					<code class="literal">&lt;Line&gt;</code>, then its width
					will be the remaining page or column width.
				</p><p>
					If set, the width's unit depends on the
					<a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
				</p><p>
					When the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">rlib</code>, the field width is measured
					in number of characters.
				</p><p>
					The character width is queried from the font set by
					<a class="xref" href="#LINEFONTNAME" title="2.16.1.1. Font name">Line font name</a> and
					<a class="xref" href="#LINEFONTSIZE" title="2.16.1.2. Font size">Line font size</a>,
					<a class="xref" href="#REPORTFONTNAME" title="2.9.1.1. Font name">Report font name</a> and
					<a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a>, or
					<a class="xref" href="#PARTFONTNAME" title="2.6.1.1. Font name">Part font name</a> and
					<a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>
					in decreasing order of precedence.
				</p><p>
					<a class="xref" href="#TEXTELEMFONTNAME" title="2.17.1.8. Font name">Text element font name</a> and
					<a class="xref" href="#TEXTELEMFONTSIZE" title="2.17.1.9. Font size">Text element font size</a> DO NOT influence
					the font width used to determine the field width.
				</p><p>
					This allows using uniquely set font name and size for
					individual text elements, including proportional
					fonts.
				</p><p>
					When using different font names or font sizes for
					different text elements in the same
					<code class="literal">&lt;Line&gt;</code>, the text elements
					are aligned vertically so all text elements are
					rendered on the same typographic baseline.
				</p></div><div class="sect3" id="TEXTELEMALIGN"><div class="titlepage"><div><div><h4 class="title">2.17.1.5. Alignment <a href="#TEXTELEMALIGN" class="id_link">#</a></h4></div></div></div><p>
					It specifies the alignment for the text element.
					It works in accordance with the
					<a class="xref" href="#TEXTELEMWIDTH" title="2.17.1.4. Width">Text element width</a>, i.e. the field's
					formatted value (as text) is aligned inside the
					specified field width.
					</p><pre class="programlisting">&lt;field value="3" format="'%.2d'"
      width="6" align="'center' /"&gt;</pre><p>
				</p><p>
					The alignment values may be
					<code class="literal">left</code>,
					<code class="literal">right</code>,
					<code class="literal">center</code> or
					<code class="literal">justified</code>.
				</p><p>
					Justified alignment is like left alignment,
					but for a multi-line field all lines but the
					last are justified. This is best used With
					the default word wrapping. In this case,
					the spacing between words is enlarged.
					<code class="literal">justified</code> and
					<code class="literal">left</code> behave the same
					for regular single-line fields.
				</p><p>
					Default is <code class="literal">left</code>.
				</p><p>
					<code class="literal">OpenCReports</code> decoupled
					the data from displaying it. For example,
					with the PDF output, the text element is not
					truncated to the element width. Instead,
					pixel perfect alignment is used together
					with masking the parts of the value with
					a bounding box. This is a deviation from
					RLIB where data was approximately truncated,
					because it was designed with monospace fonts
					in mind, and widths were specified in number
					of characters.
				</p></div><div class="sect3" id="TEXTCOLOR"><div class="titlepage"><div><div><h4 class="title">2.17.1.6. Text color <a href="#TEXTCOLOR" class="id_link">#</a></h4></div></div></div><p>
					This color is used to render text. It's accepted
					with both American and  British spelling.
					</p><pre class="programlisting">&lt;Line color="'blue'"&gt;
&lt;Line colour="'blue'"&gt;</pre><p>
				</p><p>
					Default is what's set for <a class="xref" href="#LINENODE" title="2.16. Line">Line node</a>,
					otherwise <code class="literal">black</code>.
					See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p></div><div class="sect3" id="TEXTBGCOLOR"><div class="titlepage"><div><div><h4 class="title">2.17.1.7. Background color <a href="#TEXTBGCOLOR" class="id_link">#</a></h4></div></div></div><p>
					This color is used to render the background
					rectangle under the text. It's accepted
					with both American and  British spelling.
					</p><pre class="programlisting">&lt;Line bgcolor="'blue'"&gt;
&lt;Line bgcolour="'blue'"&gt;</pre><p>
				</p><p>
					Default is <code class="literal">white</code>.
					See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p></div><div class="sect3" id="TEXTELEMFONTNAME"><div class="titlepage"><div><div><h4 class="title">2.17.1.8. Font name <a href="#TEXTELEMFONTNAME" class="id_link">#</a></h4></div></div></div><p>
					The font name attribute specifies the font
					for the text element's scope.
					It may be specified in two forms, the first one
					is the preferred name, the second is for RLIB
					compatibility:
					</p><pre class="programlisting">&lt;Part font_name="Arial"&gt;
&lt;Part fontName="Arial"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_name</code>
					is used.
				</p><p>
					Default font name is <code class="literal">Courier</code>.
				</p></div><div class="sect3" id="TEXTELEMFONTSIZE"><div class="titlepage"><div><div><h4 class="title">2.17.1.9. Font size <a href="#TEXTELEMFONTSIZE" class="id_link">#</a></h4></div></div></div><p>
					The font size attribute specifies the font size
					for the text element's scope.
					It may be specified in two forms, the first one
					is the preferred name, the second is for RLIB
					compatibility:
					</p><pre class="programlisting">&lt;Part font_size="10"&gt;
&lt;Part fontSize="10"&gt;</pre><p>
				</p><p>
					If both forms are specified, <code class="literal">font_size</code>
					is used.
				</p><p>
					Default font size is 12.
				</p></div><div class="sect3" id="TEXTBOLD"><div class="titlepage"><div><div><h4 class="title">2.17.1.10. Bold font <a href="#TEXTBOLD" class="id_link">#</a></h4></div></div></div><p>
					Whether the text element uses bold font.
					It overrides the <a class="xref" href="#LINEBOLDATTR" title="2.16.1.3. Bold font">Line bold attribute</a>
					for this text element.
					</p><pre class="programlisting">&lt;field bold="yes" /&gt;</pre><p>
				</p><p>
					Default is what's set for
					<a class="xref" href="#LINEBOLDATTR" title="2.16.1.3. Bold font">Line bold attribute</a>.
					<code class="literal">false</code> if both are unset.
				</p></div><div class="sect3" id="TEXTITALIC"><div class="titlepage"><div><div><h4 class="title">2.17.1.11. Italic font <a href="#TEXTITALIC" class="id_link">#</a></h4></div></div></div><p>
					Whether the text element uses italic font.
					It overrides the <a class="xref" href="#LINEITALICATTR" title="2.16.1.4. Italic font">Line italic attribute</a>
					for this text element.
					It is accepted in two forms:
					</p><pre class="programlisting">&lt;field italic="yes" /&gt;
&lt;field italics="yes" /&gt;</pre><p>
				</p><p>
					Default is what's set for
					<a class="xref" href="#LINEITALICATTR" title="2.16.1.4. Italic font">Line italic attribute</a>.
					<code class="literal">false</code> if both are unset.
				</p></div><div class="sect3" id="WEBLINK"><div class="titlepage"><div><div><h4 class="title">2.17.1.12. Web link <a href="#WEBLINK" class="id_link">#</a></h4></div></div></div><p>
					This attribute adds a weblink to the text element.
					E.g. clicking on this text element in the generated
					PDF will open a browser with the website.
					</p><pre class="programlisting">&lt;field value="'This is my website'"
       link="'https://github.com/zboszor/OpenCReports'" /&gt;</pre><p>
				</p><p>
					Default is no weblink.
				</p></div><div class="sect3" id="MEMO"><div class="titlepage"><div><div><h4 class="title">2.17.1.13. Multi-line (memo) field <a href="#MEMO" class="id_link">#</a></h4></div></div></div><p>
					This attribute allows breaking long text fields
					to multiple lines according to the 
					<a class="xref" href="#TEXTELEMWIDTH" title="2.17.1.4. Width">Text element width</a>.
					</p><pre class="programlisting">&lt;field value="'This is a long text...'"
       width="12" memo="yes" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">false</code>, i.e. the field
					is rendered on a single line.
				</p><p>
					Every line of the text element (regardless if it's a memo
					field or not) is aligned according to
					<a class="xref" href="#TEXTELEMALIGN" title="2.17.1.5. Alignment">Text element alignment</a>.
				</p></div><div class="sect3" id="MEMOWRAP"><div class="titlepage"><div><div><h4 class="title">2.17.1.14. Multi-line field wrapping <a href="#MEMOWRAP" class="id_link">#</a></h4></div></div></div><p>
					This attribute allows wrapping multi-line
					text at characters as opposed to words.
					</p><pre class="programlisting">&lt;field value="'This is a long text...'"
       width="12" memo="yes" memo_wrap_chars="yes" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">false</code>, i.e. the field
					is wrapped at word boundaries.
				</p><p>
					In <code class="literal">OpenCReports</code>, character
					wrapping adds hyphenation, thanks to Pango rendering.
					This is a deviation from RLIB.
				</p></div><div class="sect3" id="MEMOROWLIMIT"><div class="titlepage"><div><div><h4 class="title">2.17.1.15. Multi-line field row limit <a href="#MEMOROWLIMIT" class="id_link">#</a></h4></div></div></div><p>
					This attribute allows limiting multi-line
					text with a maximum row number.
					</p><pre class="programlisting">&lt;field value="'This is a long text...'"
       width="12" memo="yes" memo_max_lines="20" /&gt;</pre><p>
				</p><p>
					Default is no limit.
				</p><p>
					In <code class="literal">OpenCReports</code>, character
					wrapping adds hyphenation, thanks to Pango rendering.
					This is a deviation from RLIB.
				</p></div><div class="sect3" id="TEXTXLATE"><div class="titlepage"><div><div><h4 class="title">2.17.1.16. Translation <a href="#TEXTXLATE" class="id_link">#</a></h4></div></div></div><p>
					This attribute allows the text element to
					be translated to a different language.
					</p><pre class="programlisting">&lt;field value="'This is a field'"
       translate="yes" /&gt;</pre><p>
				</p><p>
					The expression result for <code class="literal">translate</code>
					must be numeric (boolean).
				</p><p>
					For translations to work, the translation settings
					and the language (locale) must be correctly set up.
				</p><p>
					OpenCReports will attempt to translate
					both the format string and the text element's
					value. For example, if the format string
					has a translated variant in the translations,
					then this formatted result will be translated:
					</p><pre class="programlisting">&lt;field value="q.apples"
       format="'You have %d apples.'"
       translate="yes" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">no</code>.
				</p><p>
					And alternative way is to use the translation
					functions directly in the field expression.
					See <a class="xref" href="#TRANSLATEFUNC" title="3.6.90. translate()">translate()</a>
					and <a class="xref" href="#TRANSLATE2FUNC" title="3.6.91. translate2()">translate2()</a>.
					When using them, the <code class="literal">translate="yes"</code>
					attribute is not needed.
				</p></div><div class="sect3" id="TEXTCOLID"><div class="titlepage"><div><div><h4 class="title">2.17.1.17. Column number <a href="#TEXTCOLID" class="id_link">#</a></h4></div></div></div><p>
					This attribute is accepted for RLIB compatibility,
					but it's unused.
					</p><pre class="programlisting">&lt;field value="'This is a long text...'"
       col="3" /&gt;</pre><p>
				</p></div></div></div><div class="sect1" id="HLINENODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.18. HorizontalLine <a href="#HLINENODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#HLINEATTS">2.18.1. HorizontalLine attributes</a></span></dt></dl></div><p>
			A horizontally drawn line.
			</p><pre class="programlisting">&lt;Output&gt;
    &lt;HorizontalLine ... /&gt;
&lt;/Output</pre><p>
		</p><div class="sect2" id="HLINEATTS"><div class="titlepage"><div><div><h3 class="title">2.18.1. HorizontalLine attributes <a href="#HLINEATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="HLINEWIDTH"><div class="titlepage"><div><div><h4 class="title">2.18.1.1. Line width <a href="#HLINEWIDTH" class="id_link">#</a></h4></div></div></div><p>
					The line width is measured in points,
					regardless of the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
					</p><pre class="programlisting">&lt;HorizontalLine size="3" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">1.0</code>
				</p></div><div class="sect3" id="HLINEINDENT"><div class="titlepage"><div><div><h4 class="title">2.18.1.2. Indentation <a href="#HLINEINDENT" class="id_link">#</a></h4></div></div></div><p>
					Extra indentation for the line.
					It is measured in points,
					regardless of the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
					</p><pre class="programlisting">&lt;HorizontalLine indent="15" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">0.0</code>
				</p></div><div class="sect3" id="HLINELENGTH"><div class="titlepage"><div><div><h4 class="title">2.18.1.3. Length <a href="#HLINELENGTH" class="id_link">#</a></h4></div></div></div><p>
					The line length.
					</p><pre class="programlisting">&lt;HorizontalLine length="150" /&gt;</pre><p>
				</p><p>
					The line length unit depends on the
					<a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
					When set to <code class="literal">rlib</code>,
					it is measured in number of characters.
					The is influenced by <a class="xref" href="#HLINEFONTSIZE" title="2.18.1.4. Font size">HorizontalLine font size</a>,
					<a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a> and
					<a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a> in decreasing order,
					which in turn is influenced by
					<a class="xref" href="#REPORTFONTNAME" title="2.9.1.1. Font name">Report font name</a> and
					<a class="xref" href="#PARTFONTNAME" title="2.6.1.1. Font name">Part font name</a> in decreasing order.
				</p><p>
					When <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
					<code class="literal">points</code>, the line length
					is measured in points.
				</p><p>
					Default is unset, i.e. the line is drawn across
					the page width.
				</p></div><div class="sect3" id="HLINEFONTSIZE"><div class="titlepage"><div><div><h4 class="title">2.18.1.4. Font size <a href="#HLINEFONTSIZE" class="id_link">#</a></h4></div></div></div><p>
					An extra knob to influence line length computation.
					See <a class="xref" href="#HLINELENGTH" title="2.18.1.3. Length">HorizontalLine length</a>.
					It is accepted in two forms, <code class="literal">font_size</code>
					is the preferred one, the other is accepted for
					RLIB compatibility:
					</p><pre class="programlisting">&lt;HorizontalLine font_size="14" /&gt;
&lt;HorizontalLine fontSize="14" /&gt;</pre><p>
				</p><p>
					Default is unset, i.e. only
					<a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a> and
                    <a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a> would contribute
					to the horizontal line width computation.
				</p></div><div class="sect3" id="HLINESUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.18.1.5. Suppress <a href="#HLINESUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					Horizontal lines may be suppressed. If the parent
					<code class="literal">&lt;Output&gt;</code> node is in
					<code class="literal">&lt;FieldDetails&gt;</code>, the
					expression may be derived from a query field.
					</p><pre class="programlisting">&lt;HorizontalLine suppress="yes /"&gt;
&lt;HorizontalLine suppress="val(m.suppress_hline)" /&gt;
&lt;HorizontalLine suppress="query1.suppress_hline" /&gt;</pre><p>
				</p><p>
					Default value is <code class="literal">false</code>,
					i.e. no suppression.
				</p></div><div class="sect3" id="HLINECOLOR"><div class="titlepage"><div><div><h4 class="title">2.18.1.6. Line color <a href="#HLINECOLOR" class="id_link">#</a></h4></div></div></div><p>
					This color is used to render text. It's accepted
					with both American and  British spelling.
					For RLIB compatibility, it is also accepted
					as <code class="literal">bgcolor</code>, with both
					American and  British spelling.
					</p><pre class="programlisting">&lt;HorizontalLine color="'blue'" /&gt;
&lt;HorizontalLine colour="'blue'" /&gt;
&lt;HorizontalLine bgcolor="'blue'" /&gt;
&lt;HorizontalLine bgcolour="'blue'" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">black</code>.
					See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p></div></div></div><div class="sect1" id="IMAGENODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.19. Image <a href="#IMAGENODE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#IMAGEATTS">2.19.1. Image attributes</a></span></dt></dl></div><p>
			An image to draw on the page, either on its own
			which controls indentation for subsequent elements:
			</p><pre class="programlisting">&lt;Output&gt;
    &lt;Image ... /&gt;
&lt;/Output</pre><p>
			or as a line element:
			</p><pre class="programlisting">&lt;Output&gt;
    &lt;Line ... &gt;
        &lt;Image ... /&gt;
    &lt;Line/&gt;
&lt;/Output</pre><p>
		</p><p>
			After a valid (standalone) image specification,
			subsequent <a class="xref" href="#LINENODE" title="2.16. Line">Line node</a>s and
			<a class="xref" href="#HLINENODE" title="2.18. HorizontalLine">HorizontalLine node</a>s are indented
			by the image width in the same
			<code class="literal">&lt;Output&gt;</code> node,
			or until an <code class="literal">&lt;ImageEnd&gt;</code>
			node is encountered in that
			<code class="literal">&lt;Output&gt;</code> node.
		</p><div class="sect2" id="IMAGEATTS"><div class="titlepage"><div><div><h3 class="title">2.19.1. Image attributes <a href="#IMAGEATTS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="IMAGEFNAME"><div class="titlepage"><div><div><h4 class="title">2.19.1.1. File name <a href="#IMAGEFNAME" class="id_link">#</a></h4></div></div></div><p>
					The file name of the image.

					</p><pre class="programlisting">&lt;Image value="'filename.jpg'" /&gt;</pre><p>
				</p><p>
					Default is unset. It makes the
					<code class="literal">Image</code> not shown.
				</p></div><div class="sect3" id="IMAGESUPPRESS"><div class="titlepage"><div><div><h4 class="title">2.19.1.2. Suppress <a href="#IMAGESUPPRESS" class="id_link">#</a></h4></div></div></div><p>
					The image may be suppressed.
					</p><pre class="programlisting">&lt;Image value="'filename.jpg'"
       suppress="yes" /&gt;
&lt;Image value="'filename.jpg'"
       suppress="m.suppress_image" /&gt;
&lt;Image value="'filename.jpg'"
       suppress="query1.suppress_image" /&gt;</pre><p>
				</p><p>
					Default is <code class="literal">false</code>,
					i.e. no suppression.
				</p></div><div class="sect3" id="IMAGETYPE"><div class="titlepage"><div><div><h4 class="title">2.19.1.3. Type <a href="#IMAGETYPE" class="id_link">#</a></h4></div></div></div><p>
					Accepted for RLIB compatibility.
					</p><pre class="programlisting">&lt;Image value="'filename.jpg'"
       type="'jpg'" /&gt;</pre><p>
				</p><p>
					Default is unset, i.e. autodetect.
				</p><p>
					Various image formats are supported
					with autodetection via <code class="literal">gdk-pixbuf</code>.
					SVG (Scalable Vector Graphics) is supported
					via <code class="literal">librsvg</code>.
				</p></div><div class="sect3" id="IMAGEWIDTH"><div class="titlepage"><div><div><h4 class="title">2.19.1.4. Width <a href="#IMAGEWIDTH" class="id_link">#</a></h4></div></div></div><p>
					Image width, measured in points regardless of
					the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
					</p><pre class="programlisting">&lt;Image value="'filename.jpg'"
       width="100" /&gt;</pre><p>
				</p><p>
					Default is unset. The image would not be shown,
					unless both width and height are set.
				</p><p>
					When the image is used as a line element,
					this setting is ignored. Instead, the
					image is automatically scaled according to
					the line height.
				</p></div><div class="sect3" id="IMAGEHEIGHT"><div class="titlepage"><div><div><h4 class="title">2.19.1.5. Height <a href="#IMAGEHEIGHT" class="id_link">#</a></h4></div></div></div><p>
					Image height, measured in points regardless of
					the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
					</p><pre class="programlisting">&lt;Image value="'filename.jpg'"
       height="100" /&gt;</pre><p>
				</p><p>
					Default is unset. The image would not be shown,
					unless both width and height are set.
				</p><p>
					When the image is used as a line element,
					this setting is ignored. Instead, the
					image is automatically scaled according to
					the line height.
				</p></div><div class="sect3" id="IMAGETEXTWIDTH"><div class="titlepage"><div><div><h4 class="title">2.19.1.6. Text width <a href="#IMAGETEXTWIDTH" class="id_link">#</a></h4></div></div></div><p>
					When the image is used as a line element, this
					is the width in which the image is shown.
					Its unit is subject to the <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>,
					by default it's measured in text character
					width for the parent <code class="literal">&lt;Line&gt;</code>.
					This setting is only used when the image is a
					line element. Two variants are accepted:
					</p><pre class="programlisting">&lt;Image value="'filename.jpg'"
       text_width="8" /&gt;

&lt;Image value="'filename.jpg'"
       textWidth="8" /&gt;</pre><p>
				</p><p>
					Default is 0. As a result, the image would be
					0 points wide, i.e. not shown.
				</p><p>
					This setting is ignored when the image is used
					as an output subsection.
				</p></div><div class="sect3" id="IMAGEBGCOLOR"><div class="titlepage"><div><div><h4 class="title">2.19.1.7. Background color <a href="#IMAGEBGCOLOR" class="id_link">#</a></h4></div></div></div><p>
					Image background color. When the image is a line
					element, then the width in which it's shown may
					be wider than the scaled image width. Or possibly,
					the image is vector graphics (SVG) and there is no
					background defined in the image file. Or the image
					file contains transparency (i.e. PNG). The color
					background will be shown around the image or where
					there are transparent pixels.
					</p><pre class="programlisting">&lt;Image value="'filename.jpg'"
       bgcolor="'red'" /&gt;</pre><p>
				</p><p>
					Default is unset, i.e. white.
				</p></div><div class="sect3" id="IMAGEALIGN"><div class="titlepage"><div><div><h4 class="title">2.19.1.8. Alignment <a href="#IMAGEALIGN" class="id_link">#</a></h4></div></div></div><p>
					Image alignment. When the image is a line
					element, then the width in which it's shown may
					be wider than the scaled image width. The image
					then may be aligned. <code class="literal">left</code>,
					<code class="literal">right</code> and <code class="literal">center</code>
					are accepted.
					</p><pre class="programlisting">&lt;Image value="'filename.jpg'"
       align="'center'" /&gt;</pre><p>
				</p><p>
					Default is left alignment.
				</p><p>
					This setting is ignored when the image is used
					as an output subsection.
				</p></div></div></div><div class="sect1" id="IMAGEENDNODE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.20. Image end <a href="#IMAGEENDNODE" class="id_link">#</a></h2></div></div></div><p>
			Terminator for a previous image.
			This node doesn't have any attributes or
			child nodes. Its purpose is to reset
			indentation caused by a previous
			<a class="xref" href="#IMAGENODE" title="2.19. Image">Image node</a>.
			</p><pre class="programlisting">&lt;Output&gt;
    &lt;ImageEnd/&gt;
&lt;/Output</pre><p>
		</p></div><div class="sect1" id="COLORSPEC"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.21. Color specification <a href="#COLORSPEC" class="id_link">#</a></h2></div></div></div><p>
			Colors may be specified by HTML notation.
			This contains six hexadecimal digits, representing
			RGB (red, green, blue) values between 0 and 255
			for each color component, prefixed by the
			<code class="literal">#</code> character.
			</p><pre class="programlisting">&lt;Line bgcolor="'#ffff00'" ... &gt;
&lt;HorizontalLine color="'#ff00ff'" ... &gt;</pre><p>
		</p><p>
			Colors may also be specified by hexadecimal notation.
			This contains six hexadecimal digits, representing
			RGB (red, green, blue) values between 0 and 255
			for each color component, prefixed by
			<code class="literal">0x</code>.
			</p><pre class="programlisting">&lt;Line bgcolor="'0xffff00'" ... &gt;
&lt;HorizontalLine color="'0xff00ff'" ... &gt;</pre><p>
		</p><p>
			Color names may also be specified by name.
			The following color names are supported for RLIB compatibility.
			Color names are matched in a case-insensitive way.
		</p><p>
			<span class="inlinemediaobject"><img src="images/namedcolors.svg" align="middle" /></span>
		</p></div></div><div class="chapter" id="EXPRESSIONS"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Expressions in OpenCReports</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#EXPRINTRO">3.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#CONSTANTS">3.2. Constants</a></span></dt><dd><dl><dt><span class="sect2"><a href="#STRINGLITERALS">3.2.1. String literals</a></span></dt><dt><span class="sect2"><a href="#NUMERICCONSTANTS">3.2.2. Numeric constants</a></span></dt><dt><span class="sect2"><a href="#BOOLCONSTANTS">3.2.3. Boolean constants</a></span></dt><dt><span class="sect2"><a href="#DATETIMECONSTANTS">3.2.4. Datetime constants</a></span></dt><dt><span class="sect2"><a href="#CONSTEXPR">3.2.5. Constant expressions</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PRECALCEXPR">3.3. Precalculated expressions</a></span></dt><dt><span class="sect1"><a href="#IDENTIFIERS">3.4. Identifiers</a></span></dt><dd><dl><dt><span class="sect2"><a href="#IDENTNAMES">3.4.1. Identifier names</a></span></dt><dt><span class="sect2"><a href="#QUERYIDENTS">3.4.2. Query field identifiers</a></span></dt><dt><span class="sect2"><a href="#SPECIDDOMAINS">3.4.3. Special purpose identifier domains</a></span></dt></dl></dd><dt><span class="sect1"><a href="#OPSANDFUNC">3.5. Operators and functions</a></span></dt><dd><dl><dt><span class="sect2"><a href="#TERNARYOP">3.5.1. Ternary operator</a></span></dt><dt><span class="sect2"><a href="#LOGICALOPS">3.5.2. Logical operators with two operands</a></span></dt><dt><span class="sect2"><a href="#BITWISEOPS">3.5.3. Bitwise operators with two operands</a></span></dt><dt><span class="sect2"><a href="#EQNEOPS">3.5.4. Equality and inequality comparison operators</a></span></dt><dt><span class="sect2"><a href="#CMPOPS">3.5.5. Other comparison operators</a></span></dt><dt><span class="sect2"><a href="#SHIFTOPS">3.5.6. Bitwise shifts</a></span></dt><dt><span class="sect2"><a href="#ADDSUBOPS">3.5.7. Addition and subtraction</a></span></dt><dt><span class="sect2"><a href="#MULDIVMODOPS">3.5.8. Multiplication, division and modulo (remainder)</a></span></dt><dt><span class="sect2"><a href="#POWOP">3.5.9. Power-of operator</a></span></dt><dt><span class="sect2"><a href="#FACTOP">3.5.10. Factorial operator</a></span></dt><dt><span class="sect2"><a href="#UNARYPREFIXOPS">3.5.11. Unary plus and minus, logical and bitwise NOT, prefix increment and decrement</a></span></dt><dt><span class="sect2"><a href="#POSTFIXOPS">3.5.12. Postfix increment and decrement</a></span></dt><dt><span class="sect2"><a href="#FUNCCALLS">3.5.13. Function calls and implicit multiplication</a></span></dt><dt><span class="sect2"><a href="#PARENS">3.5.14. Parentheses</a></span></dt><dt><span class="sect2"><a href="#TOKMATCHANDPREC">3.5.15. Token matching, precendence and syntax errors</a></span></dt></dl></dd><dt><span class="sect1"><a href="#LISTOFFUNCS">3.6. Alphabetical list of functions</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ABSFUNC">3.6.1. abs()</a></span></dt><dt><span class="sect2"><a href="#ACOSFUNC">3.6.2. acos()</a></span></dt><dt><span class="sect2"><a href="#ADDFUNC">3.6.3. add()</a></span></dt><dt><span class="sect2"><a href="#ANDFUNC">3.6.4. and()</a></span></dt><dt><span class="sect2"><a href="#ASINFUNC">3.6.5. asin()</a></span></dt><dt><span class="sect2"><a href="#ATANFUNC">3.6.6. atan()</a></span></dt><dt><span class="sect2"><a href="#BRROWNUMFUNC">3.6.7. brrownum()</a></span></dt><dt><span class="sect2"><a href="#CEILFUNC">3.6.8. ceil()</a></span></dt><dt><span class="sect2"><a href="#CHGDATEOFFUNC">3.6.9. chgdateof()</a></span></dt><dt><span class="sect2"><a href="#CHGTIMEOFFUNC">3.6.10. chgtimeof()</a></span></dt><dt><span class="sect2"><a href="#CONCATFUNC">3.6.11. concat()</a></span></dt><dt><span class="sect2"><a href="#COSFUNC">3.6.12. cos()</a></span></dt><dt><span class="sect2"><a href="#COTFUNC">3.6.13. cot()</a></span></dt><dt><span class="sect2"><a href="#CSCFUNC">3.6.14. csc()</a></span></dt><dt><span class="sect2"><a href="#DATEFUNC">3.6.15. date()</a></span></dt><dt><span class="sect2"><a href="#DATEOFFUNC">3.6.16. dateof()</a></span></dt><dt><span class="sect2"><a href="#DAYFUNC">3.6.17. day()</a></span></dt><dt><span class="sect2"><a href="#DECFUNC">3.6.18. dec()</a></span></dt><dt><span class="sect2"><a href="#DIMFUNC">3.6.19. dim()</a></span></dt><dt><span class="sect2"><a href="#DIVFUNC">3.6.20. div()</a></span></dt><dt><span class="sect2"><a href="#DTOSFUNC">3.6.21. dtos()</a></span></dt><dt><span class="sect2"><a href="#DTOSFFUNC">3.6.22. dtosf()</a></span></dt><dt><span class="sect2"><a href="#EQFUNC">3.6.23. eq()</a></span></dt><dt><span class="sect2"><a href="#ERRORFUNC">3.6.24. error()</a></span></dt><dt><span class="sect2"><a href="#EXPFUNC">3.6.25. exp()</a></span></dt><dt><span class="sect2"><a href="#EXP10FUNC">3.6.26. exp10()</a></span></dt><dt><span class="sect2"><a href="#EXP2FUNC">3.6.27. exp2()</a></span></dt><dt><span class="sect2"><a href="#EVALFUNC">3.6.28. eval()</a></span></dt><dt><span class="sect2"><a href="#FACTORIALFUNC">3.6.29. factorial()</a></span></dt><dt><span class="sect2"><a href="#FLOORFUNC">3.6.30. floor()</a></span></dt><dt><span class="sect2"><a href="#FMODFUNC">3.6.31. fmod()</a></span></dt><dt><span class="sect2"><a href="#FORMATFUNC">3.6.32. format()</a></span></dt><dt><span class="sect2"><a href="#FXPVALFUNC">3.6.33. fxpval()</a></span></dt><dt><span class="sect2"><a href="#GEFUNC">3.6.34. ge()</a></span></dt><dt><span class="sect2"><a href="#GETTIMEINSECSFUNC">3.6.35. gettimeinsecs()</a></span></dt><dt><span class="sect2"><a href="#GTFUNC">3.6.36. gt()</a></span></dt><dt><span class="sect2"><a href="#IIFFUNC">3.6.37. iif()</a></span></dt><dt><span class="sect2"><a href="#INCFUNC">3.6.38. inc()</a></span></dt><dt><span class="sect2"><a href="#INTERVALFUNC">3.6.39. interval()</a></span></dt><dt><span class="sect2"><a href="#ISNULLFUNC">3.6.40. isnull()</a></span></dt><dt><span class="sect2"><a href="#LANDFUNC">3.6.41. land()</a></span></dt><dt><span class="sect2"><a href="#LEFUNC">3.6.42. le()</a></span></dt><dt><span class="sect2"><a href="#LEFTFUNC">3.6.43. left()</a></span></dt><dt><span class="sect2"><a href="#LNFUNC">3.6.44. ln()</a></span></dt><dt><span class="sect2"><a href="#LNOTFUNC">3.6.45. lnot()</a></span></dt><dt><span class="sect2"><a href="#LOGFUNC">3.6.46. log()</a></span></dt><dt><span class="sect2"><a href="#LOG10FUNC">3.6.47. log10()</a></span></dt><dt><span class="sect2"><a href="#LOG2FUNC">3.6.48. log2()</a></span></dt><dt><span class="sect2"><a href="#LORFUNC">3.6.49. lor()</a></span></dt><dt><span class="sect2"><a href="#LOWERFUNC">3.6.50. lower()</a></span></dt><dt><span class="sect2"><a href="#LTFUNC">3.6.51. lt()</a></span></dt><dt><span class="sect2"><a href="#MIDFUNC">3.6.52. mid()</a></span></dt><dt><span class="sect2"><a href="#MODFUNC">3.6.53. mod()</a></span></dt><dt><span class="sect2"><a href="#MONTHFUNC">3.6.54. month()</a></span></dt><dt><span class="sect2"><a href="#MULFUNC">3.6.55. mul()</a></span></dt><dt><span class="sect2"><a href="#NEFUNC">3.6.56. ne()</a></span></dt><dt><span class="sect2"><a href="#NOTFUNC">3.6.57. not()</a></span></dt><dt><span class="sect2"><a href="#NOWFUNC">3.6.58. now()</a></span></dt><dt><span class="sect2"><a href="#NULLFUNC">3.6.59. null()</a></span></dt><dt><span class="sect2"><a href="#NULLDTFUNC">3.6.60. nulldt()</a></span></dt><dt><span class="sect2"><a href="#NULLNFUNC">3.6.61. nulln()</a></span></dt><dt><span class="sect2"><a href="#NULLSFUNC">3.6.62. nulls()</a></span></dt><dt><span class="sect2"><a href="#ORFUNC">3.6.63. or()</a></span></dt><dt><span class="sect2"><a href="#POWFUNC">3.6.64. pow()</a></span></dt><dt><span class="sect2"><a href="#PREVVALFUNC">3.6.65. prevval()</a></span></dt><dt><span class="sect2"><a href="#PRINTFFUNC">3.6.66. printf()</a></span></dt><dt><span class="sect2"><a href="#PROPERFUNC">3.6.67. proper()</a></span></dt><dt><span class="sect2"><a href="#RANDOMFUNC">3.6.68. random()</a></span></dt><dt><span class="sect2"><a href="#REMAINDERFUNC">3.6.69. remainder()</a></span></dt><dt><span class="sect2"><a href="#RIGHTFUNC">3.6.70. right()</a></span></dt><dt><span class="sect2"><a href="#RINTFUNC">3.6.71. rint()</a></span></dt><dt><span class="sect2"><a href="#ROUNDFUNC">3.6.72. round()</a></span></dt><dt><span class="sect2"><a href="#ROWNUMFUNC">3.6.73. rownum()</a></span></dt><dt><span class="sect2"><a href="#SECFUNC">3.6.74. sec()</a></span></dt><dt><span class="sect2"><a href="#SETTIMEINSECSFUNC">3.6.75. settimeinsecs()</a></span></dt><dt><span class="sect2"><a href="#SHLFUNC">3.6.76. shl()</a></span></dt><dt><span class="sect2"><a href="#SHRFUNC">3.6.77. shr()</a></span></dt><dt><span class="sect2"><a href="#SINFUNC">3.6.78. sin()</a></span></dt><dt><span class="sect2"><a href="#SQRFUNC">3.6.79. sqr()</a></span></dt><dt><span class="sect2"><a href="#SQRTFUNC">3.6.80. sqrt()</a></span></dt><dt><span class="sect2"><a href="#STDWIYFUNC">3.6.81. stdwiy()</a></span></dt><dt><span class="sect2"><a href="#STODFUNC">3.6.82. stod()</a></span></dt><dt><span class="sect2"><a href="#STODTFUNC">3.6.83. stodt()</a></span></dt><dt><span class="sect2"><a href="#STODTSQLFUNC">3.6.84. stodtsql()</a></span></dt><dt><span class="sect2"><a href="#STRFUNC">3.6.85. str()</a></span></dt><dt><span class="sect2"><a href="#STRLENFUNC">3.6.86. strlen()</a></span></dt><dt><span class="sect2"><a href="#SUBFUNC">3.6.87. sub()</a></span></dt><dt><span class="sect2"><a href="#TANFUNC">3.6.88. tan()</a></span></dt><dt><span class="sect2"><a href="#TIMEOFFUNC">3.6.89. timeof()</a></span></dt><dt><span class="sect2"><a href="#TRANSLATEFUNC">3.6.90. translate()</a></span></dt><dt><span class="sect2"><a href="#TRANSLATE2FUNC">3.6.91. translate2()</a></span></dt><dt><span class="sect2"><a href="#TRUNCFUNC">3.6.92. trunc()</a></span></dt><dt><span class="sect2"><a href="#TSTODFUNC">3.6.93. tstod()</a></span></dt><dt><span class="sect2"><a href="#UMINUSFUNC">3.6.94. uminus()</a></span></dt><dt><span class="sect2"><a href="#UPPERFUNC">3.6.95. upper()</a></span></dt><dt><span class="sect2"><a href="#VALFUNC">3.6.96. val()</a></span></dt><dt><span class="sect2"><a href="#WIYFUNC">3.6.97. wiy()</a></span></dt><dt><span class="sect2"><a href="#WIY1FUNC">3.6.98. wiy1()</a></span></dt><dt><span class="sect2"><a href="#WIYOFUNC">3.6.99. wiyo()</a></span></dt><dt><span class="sect2"><a href="#XORFUNC">3.6.100. xor()</a></span></dt><dt><span class="sect2"><a href="#YEARFUNC">3.6.101. year()</a></span></dt></dl></dd></dl></div><div class="sect1" id="EXPRINTRO"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.1. Introduction <a href="#EXPRINTRO" class="id_link">#</a></h2></div></div></div><p>
			There are four data types in OpenCReports:
			<code class="literal">numeric</code>, <code class="literal">string</code>,
			<code class="literal">datetime</code> and <code class="literal">error</code>.
			Expressions can return any of these types.
		</p><p>
			A <code class="literal">numeric</code> expression's result is
			a number. It uses high numeric precision. Most functions
			and operators deal with numbers.
		</p><p>
			A <code class="literal">string</code> expression's result is a
			string. Strings can be concatenated or otherwise processed
			by string functions.
		</p><p>
			A <code class="literal">datetime</code> expression may store a date,
			a time (with or without timezone) or both. Also, it may store
			a time interval, e.g. <code class="literal">2 months</code> that can be
			added to or subtracted from another <code class="literal">datetime</code>
			value.
		</p><p>
			An <code class="literal">error</code> expression is a special case of
			strings: it stores a string literal (which is an error message)
			but it cannot be further processed by functions or operators.
			Instead, an error is propagated up from subexpressions to
			the final result of the expression.
		</p></div><div class="sect1" id="CONSTANTS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.2. Constants <a href="#CONSTANTS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#STRINGLITERALS">3.2.1. String literals</a></span></dt><dt><span class="sect2"><a href="#NUMERICCONSTANTS">3.2.2. Numeric constants</a></span></dt><dt><span class="sect2"><a href="#BOOLCONSTANTS">3.2.3. Boolean constants</a></span></dt><dt><span class="sect2"><a href="#DATETIMECONSTANTS">3.2.4. Datetime constants</a></span></dt><dt><span class="sect2"><a href="#CONSTEXPR">3.2.5. Constant expressions</a></span></dt></dl></div><div class="sect2" id="STRINGLITERALS"><div class="titlepage"><div><div><h3 class="title">3.2.1. String literals <a href="#STRINGLITERALS" class="id_link">#</a></h3></div></div></div><p>
				String literals in OpenCReports can be either single or double quoted.
				Some examples:
				</p><pre class="programlisting">"apple"
’apple’
"I’ve eaten an apple"
’This an "apple".’</pre><p>
				The values of these strings are:
				</p><pre class="programlisting">apple
apple
I’ve eaten an apple
This an "apple".</pre><p>
				We can see how the other quoting character can be used as part
				of the string value.
			</p><p>
				String literals can also use BASIC language style double quoting
				to embed a single quoting character used for quoting the string
				itself:
				</p><pre class="programlisting">’apple’’’
’apple’’pear’
’apple’’’’pear’
"apple"""
"apple""pear"
"apple""""pear"</pre><p>			
				The values of these strings are:
				</p><pre class="programlisting">apple’
apple’pear
apple’’pear
apple"
apple"pear
apple""pear</pre><p>
			</p><p>
				String literals can also use C language string continuation if
				there's at least one whitespace character (space, TAB or new line)
				between doubled quoting characters. String continuation can also
				switch quoting characters without whitespace between quoting.
				</p><pre class="programlisting">"apple" "pear"
"apple" ’pear’
"apple"’pear’</pre><p>
				The value of all these strings is:
				</p><pre class="programlisting">applepear</pre><p>
			</p></div><div class="sect2" id="NUMERICCONSTANTS"><div class="titlepage"><div><div><h3 class="title">3.2.2. Numeric constants <a href="#NUMERICCONSTANTS" class="id_link">#</a></h3></div></div></div><p>
				Numeric values in OpenCReports are handled with GNU MPFR with
				arbitrary precision, by default 256 bits. This allows for
				very high precision, i.e. very long numbers. This is good
				for directly using e.g. arbitrary precision
				<code class="literal">numeric</code> type columns from PostgreSQL.
			</p><p>
				Numeric constants can be integer or fractional numbers with or
				without the so called <span class="emphasis"><em>e-notation</em></span> or
				scientific notation. Some examples:
				</p><pre class="programlisting">1
1.234
1e4
1e-4
1.234e-5</pre><p>
				E-notation means that that number preceding the letter "e" or
				"E" is multiplied by ten to the power of the number after the
				letter "e" or "E", the latter being an integer value. The
				values of the above examples are:
				</p><pre class="programlisting">1
1.234
10000
0.0001
0.00001234</pre><p>
			</p><p>
				Numbers greater than 0 and less than 1 can be written with
				or without the leading zero.
				</p><pre class="programlisting">0.123
.123</pre><p>
			</p></div><div class="sect2" id="BOOLCONSTANTS"><div class="titlepage"><div><div><h3 class="title">3.2.3. Boolean constants <a href="#BOOLCONSTANTS" class="id_link">#</a></h3></div></div></div><p>
				Boolean constants evalutate to numeric constans
				<code class="literal">1</code> and <code class="literal">0</code>.
				The boolean constants are:
				</p><pre class="programlisting">yes
no
true
false</pre><p>
			</p></div><div class="sect2" id="DATETIMECONSTANTS"><div class="titlepage"><div><div><h3 class="title">3.2.4. Datetime constants <a href="#DATETIMECONSTANTS" class="id_link">#</a></h3></div></div></div><p>
				There are no datetime constants per se, although expressions
				like <code class="literal">stodt('1980-06-30 16:00:00')</code> (i.e.
				function calls with constant arguments that result in a
				<code class="literal">datetime</code> value) implicitly turn into
				constants through expression optimization.
			</p></div><div class="sect2" id="CONSTEXPR"><div class="titlepage"><div><div><h3 class="title">3.2.5. Constant expressions <a href="#CONSTEXPR" class="id_link">#</a></h3></div></div></div><p>
				Constant expressions are ones that contain
				constant values (of any type) and operators
				or functions.
			</p></div></div><div class="sect1" id="PRECALCEXPR"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.3. Precalculated expressions <a href="#PRECALCEXPR" class="id_link">#</a></h2></div></div></div><p>
			Due to the possibility of precalculated variables
			expressions, reports are actually run (and layed out)
			twice. The second run uses the precalculated values
			from the first run. Because of this,
			<code class="literal">OpenCReports</code> allows mixing precalculated
			<a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a> and non-precalculated
			variables and subexpressions in the same expression.
			The result is intuitively expected.
		</p><p>
			The actual report output is generated in the second run.
		</p></div><div class="sect1" id="IDENTIFIERS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.4. Identifiers <a href="#IDENTIFIERS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#IDENTNAMES">3.4.1. Identifier names</a></span></dt><dt><span class="sect2"><a href="#QUERYIDENTS">3.4.2. Query field identifiers</a></span></dt><dt><span class="sect2"><a href="#SPECIDDOMAINS">3.4.3. Special purpose identifier domains</a></span></dt></dl></div><p>
			Expressions may reference query column names, environment
			variables, internal variables and user defined
			<a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a>.
			These references are called <span class="emphasis"><em>identifiers</em></span>.
			Their values are evaluated during the report execution.
		</p><div class="sect2" id="IDENTNAMES"><div class="titlepage"><div><div><h3 class="title">3.4.1. Identifier names <a href="#IDENTNAMES" class="id_link">#</a></h3></div></div></div><p>
				Identifiers are in the format <code class="literal">domain.identifier</code>
				where the domain name or the dot are optional.
			</p><p>
				OpenCReports is using UTF-8 encoding even in identifier
				names. Accented characters are accepted as identifiers.
			</p><p>
				Valid names for <code class="literal">domain</code> and
				<code class="literal">identifier</code> may start with an underscore
				or UTF-8 letters and may contain underscore, UTF-8 letters
				and numbers in subsequent characters.
			</p></div><div class="sect2" id="QUERYIDENTS"><div class="titlepage"><div><div><h3 class="title">3.4.2. Query field identifiers <a href="#QUERYIDENTS" class="id_link">#</a></h3></div></div></div><p>
				Any valid identifier is by default a query column
				reference, with or without the domain name. Examples:
				</p><pre class="programlisting">field_name
field_name5
myquery1.field_name
oszlop_név
lekérdezés.oszlop_név</pre><p>
				By the way, in the above example,
				<code class="literal">oszlop_név</code> means
				<code class="literal">field_name</code>, and
				<code class="literal">lekérdezés.oszlop_név</code> means
				<code class="literal">query.field_name</code> in Hungarian.
				The accented characters are a courtesy of UTF-8.
			</p><p>
				Query field identifiers in expressions are matched
				during expression resolution. If the domain name
				is specified, a query with that name must be present
				in the report, either as the main query or as a
				follower query. If the domain name is not specified,
				the field names of the main query and all the follower
				queries are matched with the expression.
			</p><p>
				For exceptions (and exceptions from under the exceptions!),
				see below.
			</p></div><div class="sect2" id="SPECIDDOMAINS"><div class="titlepage"><div><div><h3 class="title">3.4.3. Special purpose identifier domains <a href="#SPECIDDOMAINS" class="id_link">#</a></h3></div></div></div><p>
				Some domain names carry special meaning for the report.
			</p><div class="sect3" id="ENVIDENTS"><div class="titlepage"><div><div><h4 class="title">3.4.3.1. Environment variables <a href="#ENVIDENTS" class="id_link">#</a></h4></div></div></div><p>
					Domain <code class="literal">m</code> indicates the domain
					of environment variables. The nature of environment
					variables depend on the languange binding. In C,
					it's the variables in the operating environment.
					In PHP, they are simply global PHP variables. Example:
					</p><pre class="programlisting">m.current_date</pre><p>
				</p><p>
					Since such a setting is controlled outside the report,
					and for the duration of running the report, its value
					cannot (or <span class="emphasis"><em>shouldn't</em></span>) change,
					environment variable references are treated as constants
					and are optimized as constant at the start of the report
					execution.
				</p><p>
					Environment variables can't change during report
					execution in single threaded applications,
					<span class="emphasis"><em>but they can in multi-threaded ones</em></span>.
					By optimizing environment variables into constants
					in expressions instead of querying the environment
					every time the same expression is evaluated,
					potential data races (that may result in inconsistent
					results) are eliminated or reduced.
				</p></div><div class="sect3" id="INTERNALVARIDENTS"><div class="titlepage"><div><div><h4 class="title">3.4.3.2. Internal report variables <a href="#INTERNALVARIDENTS" class="id_link">#</a></h4></div></div></div><p>
					Domain <code class="literal">r</code> indicates the domain
					of internal report variables.
				</p><div class="sect4" id="CURRPAGE"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.1. Current page number <a href="#CURRPAGE" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.pageno</pre><p>
						The current page of the report is maintained by
						the report layout and is intertwined with running
						a report. For example, if an expression is evaluated
						on page 4 of the report, and happens to reference
						the current page number variable, then this variable
						will have the value 4 in the result.
					</p></div><div class="sect4" id="TOTPAGES"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.2. Total number of pages <a href="#TOTPAGES" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.totpages</pre><p>
						This variable carries the total number of pages
						in the report. Its value is maintained by the
						report. This variable is inherently
						<a class="xref" href="#PRECALCEXPR" title="3.3. Precalculated expressions">precalculated</a>.
					</p></div><div class="sect4" id="LINENO"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.3. Line number <a href="#LINENO" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.lineno</pre><p>
						This variable is an alias to the
						<code class="literal">rownum()</code> function, i.e.
						it is the current row (line) number in the data set.
					</p><p>
						Being an alias means that the variable is replaced by
						the <code class="literal">rownum()</code> function call in the
						grammar. Please, be aware, that functions may be
						overridden by user defined functions. If
						<code class="literal">rownum()</code> is overridden, then it will
						be called with zero arguments by the grammar transformation,
						which may or may not work for the user defined function
						and the variable will not work as intended.
					</p></div><div class="sect4" id="DETAILCOUNT"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.4. Detail count <a href="#DETAILCOUNT" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.detailcnt</pre><p>
						This variable works similarly to the row number
						counter, e.g. <code class="literal">rownum()</code> or
						<code class="literal">r.lineno</code>, except it restarts
						from 1 at every <code class="literal">&lt;FieldHeaders&gt;</code>.
					</p><p>
						With the default behaviour of
						<code class="literal">&lt;Breaks&gt;</code> vs
						<code class="literal">&lt;FieldHeaders&gt;</code>,
						i.e. when <code class="literal">&lt;FieldHeaders&gt;</code>
						is printed on the top of every page,
						<code class="literal">r.detailcnt</code> works as a per page
						line count value.
					</p><p>
						When <code class="literal">&lt;Report field_header_priority="low"&gt;</code>
						is used, the effect may be more emphasized because
						the value of this variable is reset more often.
					</p></div><div class="sect4" id="FIELDVAL"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.5. Field value <a href="#FIELDVAL" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.value</pre><p>
						The report field description has an expression for its
						value in the  form of
						<code class="literal">&lt;field value="..." /&gt;</code>.
						It also has supplementary expressions, like the
						foreground and background colors, the format string,
						and others.
					</p><p>
						The supplementary expressions may reference the field
						value, without having to type out the field expression
						multiple times.
					</p><p>
						Using <code class="literal">r.value</code> also helps reducing
						the report runtime because the value expression is not
						computed multiple times. This is a manual
						optimization.
					</p><p>
						Referencing <code class="literal">r.value</code> is only possible
						for supplementary expressions for the same field
						description, i.e. other XML attributes for a
						<code class="literal">&lt;field value="..." .../&gt;</code>
						line. This variable cannot cross-reference other
						field descriptions, or anything not in the same scope.
						For this purpose, there are user
						<a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a>.
					</p></div><div class="sect4" id="OUTPUTFORMATNAME"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.6. Report output format value <a href="#OUTPUTFORMATNAME" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.format</pre><p>
						This variable returns the current output format
						name as a string. For example: <code class="literal">PDF</code>,
						<code class="literal">HTML</code>, etc.
					</p></div><div class="sect4" id="EXPRSELF"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.7. Expression self reference <a href="#EXPRSELF" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.self</pre><p>
						This variable references the previous result of
						the expression. It is used in iterative expressions,
						like in user-defined <a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a>.
						It can be used in any user defined expression.
					</p></div><div class="sect4" id="USERVARSUBEXPR"><div class="titlepage"><div><div><h5 class="title">3.4.3.2.8. Subexpressions of user-defined variables <a href="#USERVARSUBEXPR" class="id_link">#</a></h5></div></div></div><p>
						</p><pre class="programlisting">r.baseexpr
r.intermedexpr
r.intermed2expr</pre><p>
						These variables are references for the three
						subexpressions that potentially make up a
						user-defined custom variable. The expressions in
						order are: base expression, intermediary expressions
						one and two. Their evaluation order is the same
						as in the order they are mentioned here.
					</p><p>
						Actually, there's a fourth subexpression that exists
						in every user defined variable, namely the result
						expression. It's reference is simply the user variable
						reference, see <a class="xref" href="#USERVARIABLES" title="3.4.3.3. User defined variables">User defined variables</a>.
						See also <a class="xref" href="#CUSTOMVARATTRS" title="2.12.1.4. Custom variable attributes">Custom variable attributes</a>.
					</p><p>
						For example, a running average over a data series
						needs two intermediary expressions: one for
						the sum of the values, the other for the number
						of values in the series. The result is the
						sum of values divided by the number of values.
					</p><p>
						Their usage is only valid when declaring a custom
						user defined variable.
					</p></div></div><div class="sect3" id="USERVARIABLES"><div class="titlepage"><div><div><h4 class="title">3.4.3.3. User defined variables <a href="#USERVARIABLES" class="id_link">#</a></h4></div></div></div><p>
					Domain <code class="literal">v</code> signifies user defined
					report variables, which can be used in breaks or
					to shortcut expressions. Example:
					</p><pre class="programlisting">v.my_variable
					</pre><p>
				</p></div><div class="sect3" id="QUOTEDIDENTS"><div class="titlepage"><div><div><h4 class="title">3.4.3.4. Quoted and dot-prefixed identifiers <a href="#QUOTEDIDENTS" class="id_link">#</a></h4></div></div></div><p>
					Both <code class="literal">domain</code> and <code class="literal">identifier</code>
					names may be quoted or unquoted. Quoting names allow using
					semi-reserved and reserved words as identifiers and also
					allow special characters in identifier names. Examples:
					</p><pre class="programlisting">query.field_name1
query."field_name2"
query."field with space in the name"
"query2".field_name3
"query2"."and"
					</pre><p>
				</p></div><div class="sect3" id="DOTPREFIXEDIDENTS"><div class="titlepage"><div><div><h4 class="title">3.4.3.5. Dot-prefixed identifiers <a href="#DOTPREFIXEDIDENTS" class="id_link">#</a></h4></div></div></div><p>
					A dot-prefixed identifier is one where the domain name
					is not specified, but the identifier name is prefixed
					with a dot. Examples:
					</p><pre class="programlisting">.field_name
."field_name"
					</pre><p>
				</p><p>
					Semi-reserved words are the boolean constants. They can be used
					as identifiers with dot-prefixed identifier names without
					a domain name and without quoting:
					</p><pre class="programlisting">.yes
.no
.true
.false
yes.no
					</pre><p>
					The above unquoted identifiers are equivalent with
					these quoted ones below:
					</p><pre class="programlisting">."yes"
."no"
."true"
."false"
"yes"."no"
					</pre><p>
				</p><p>
					Operator names are reserved words, e.g. <code class="literal">and</code>
					and <code class="literal">or</code>. They cannot be used with dot-prefixed
					operator names without quoting, as it would cause an
					expression syntax error. But they can be used as quoted
					identifiers, in case you would want to use such a query name
					and column name:
					</p><pre class="programlisting">."and"
."or"
"and"."or"
					</pre><p>
				</p></div><div class="sect3" id="QUOTEDINTERNALDOMAINS"><div class="titlepage"><div><div><h4 class="title">3.4.3.6. Quoted special purpose identifier domains <a href="#QUOTEDINTERNALDOMAINS" class="id_link">#</a></h4></div></div></div><p>
					When identifier domains are quoted, they lose their special
					meaning and the identifiers become query field identifiers.
					Of course, in this case, such a query name must exist and
					the query must have a field name specified in the identifier.
					Examples:
					</p><pre class="programlisting">"m".current_date
"r".totpages
"v".my_variable
					</pre><p>
				</p></div></div></div><div class="sect1" id="OPSANDFUNC"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.5. Operators and functions <a href="#OPSANDFUNC" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#TERNARYOP">3.5.1. Ternary operator</a></span></dt><dt><span class="sect2"><a href="#LOGICALOPS">3.5.2. Logical operators with two operands</a></span></dt><dt><span class="sect2"><a href="#BITWISEOPS">3.5.3. Bitwise operators with two operands</a></span></dt><dt><span class="sect2"><a href="#EQNEOPS">3.5.4. Equality and inequality comparison operators</a></span></dt><dt><span class="sect2"><a href="#CMPOPS">3.5.5. Other comparison operators</a></span></dt><dt><span class="sect2"><a href="#SHIFTOPS">3.5.6. Bitwise shifts</a></span></dt><dt><span class="sect2"><a href="#ADDSUBOPS">3.5.7. Addition and subtraction</a></span></dt><dt><span class="sect2"><a href="#MULDIVMODOPS">3.5.8. Multiplication, division and modulo (remainder)</a></span></dt><dt><span class="sect2"><a href="#POWOP">3.5.9. Power-of operator</a></span></dt><dt><span class="sect2"><a href="#FACTOP">3.5.10. Factorial operator</a></span></dt><dt><span class="sect2"><a href="#UNARYPREFIXOPS">3.5.11. Unary plus and minus, logical and bitwise NOT, prefix increment and decrement</a></span></dt><dt><span class="sect2"><a href="#POSTFIXOPS">3.5.12. Postfix increment and decrement</a></span></dt><dt><span class="sect2"><a href="#FUNCCALLS">3.5.13. Function calls and implicit multiplication</a></span></dt><dt><span class="sect2"><a href="#PARENS">3.5.14. Parentheses</a></span></dt><dt><span class="sect2"><a href="#TOKMATCHANDPREC">3.5.15. Token matching, precendence and syntax errors</a></span></dt></dl></div><p>
			OpenCReports expressions can use several operators and functions.
			The operator precedence is mostly as expected from the C
			programming language. One notable exception is implicit
			multiplication. The precedence classes are as below,
			in increasing order of precedence.
		</p><div class="sect2" id="TERNARYOP"><div class="titlepage"><div><div><h3 class="title">3.5.1. Ternary operator <a href="#TERNARYOP" class="id_link">#</a></h3></div></div></div><p>
				The ternary operator is as in the C language:
				</p><pre class="programlisting">expression1 ? expression2 : expression3
				</pre><p>
				It's evaluated as follows: if the value of numeric
				<code class="literal">expression1</code> is <code class="literal">true</code>
				(i.e. non-zero), then the result is the <code class="literal">expression2</code>,
				otherwise it's <code class="literal">expression3</code>.
				Type of <code class="literal">expression2</code> and
				<code class="literal">expression3</code> may differ, i.e. the
				result type will be the type of the underlying expression
				but it can result in runtime errors.
			</p></div><div class="sect2" id="LOGICALOPS"><div class="titlepage"><div><div><h3 class="title">3.5.2. Logical operators with two operands <a href="#LOGICALOPS" class="id_link">#</a></h3></div></div></div><p>
				Logical OR can be written as <code class="literal">||</code> or
				<code class="literal">or</code>. Example: <code class="literal">a || b</code>
			</p><p>
				Logical AND can be written as <code class="literal">&amp;&amp;</code> or
				<code class="literal">and</code>. Logical AND has precedence over OR.
				Example: <code class="literal">a &amp;&amp; b</code>
			</p></div><div class="sect2" id="BITWISEOPS"><div class="titlepage"><div><div><h3 class="title">3.5.3. Bitwise operators with two operands <a href="#BITWISEOPS" class="id_link">#</a></h3></div></div></div><p>
			The bitwise operators in this precedence class and in their
			increasing order of precedence are:
			bitwise OR (<code class="literal">|</code>) and
            bitwise AND (<code class="literal">&amp;</code>).
			</p></div><div class="sect2" id="EQNEOPS"><div class="titlepage"><div><div><h3 class="title">3.5.4. Equality and inequality comparison operators <a href="#EQNEOPS" class="id_link">#</a></h3></div></div></div><p>
				The equality comparison operator can be written as
				<code class="literal">=</code> or <code class="literal">==</code>.
			</p><p>
				The inequality comparison operator can be written as
				<code class="literal">&lt;&gt;</code> or <code class="literal">!=</code>.
			</p><div class="sect3" id="VECTEQNEOPS"><div class="titlepage"><div><div><h4 class="title">3.5.4.1. Equality and inequality comparison operators on vectors <a href="#VECTEQNEOPS" class="id_link">#</a></h4></div></div></div><p>
					Vector equality and inequality comparisons
					have the same precedence as scalar comparisons.
					These are not vectors in the mathematical sense,
					but a comma separated list of scalars inside
					brackets (<code class="literal">[ ... ]</code>), with
					<code class="literal">op</code> being any of the above
					operators:
					</p><pre class="programlisting">[ expa1, expa2, ... ] op [ expb1, expb2, ... ]</pre><p>
				</p><p>
					Such comparisons are expanded into a logic operator
					form:
					</p><pre class="programlisting">(expa1 op expb1) and (expa2 op expb2) and ...</pre><p>
				</p><p>
					Please, note that because of the mechanical conversion
					from the vector form to the expanded logic operator form,
					the following two lines have different meaning:
					</p><pre class="programlisting">not ([ expa1, expa2, ... ] = [ expb1, expb2, ... ])
					[ expa1, expa2, ... ] != [ expb1, expb2, ... ]</pre><p>
				</p></div></div><div class="sect2" id="CMPOPS"><div class="titlepage"><div><div><h3 class="title">3.5.5. Other comparison operators <a href="#CMPOPS" class="id_link">#</a></h3></div></div></div><p>
				Less-than (<code class="literal">&lt;</code>),
				less-or-equal (<code class="literal">&lt;=</code>),
				greater-than (<code class="literal">&gt;</code>) and
				greater-or-equal (<code class="literal">&gt;=</code>).
			</p><div class="sect3" id="VECTCMPOPS"><div class="titlepage"><div><div><h4 class="title">3.5.5.1. Other comparison operators on vectors <a href="#VECTCMPOPS" class="id_link">#</a></h4></div></div></div><p>
					Vector comparisons using <code class="literal">&lt;</code>,
					<code class="literal">&gt;</code>, etc. operators have
					the same precedence as their scalar counterpart.
					These are also expanded into the logic form, see
					<a class="xref" href="#VECTEQNEOPS" title="3.5.4.1. Equality and inequality comparison operators on vectors">Section 3.5.4.1</a> above.
				</p></div></div><div class="sect2" id="SHIFTOPS"><div class="titlepage"><div><div><h3 class="title">3.5.6. Bitwise shifts <a href="#SHIFTOPS" class="id_link">#</a></h3></div></div></div><p>
				Bitwise shift left (<code class="literal">a &gt;&gt; b</code>) and
				bitwise shift right (<code class="literal">a &lt;&lt; b</code>).
			</p></div><div class="sect2" id="ADDSUBOPS"><div class="titlepage"><div><div><h3 class="title">3.5.7. Addition and subtraction <a href="#ADDSUBOPS" class="id_link">#</a></h3></div></div></div><p>
				<code class="literal">a + b</code> and <code class="literal">a - b</code>.
			</p></div><div class="sect2" id="MULDIVMODOPS"><div class="titlepage"><div><div><h3 class="title">3.5.8. Multiplication, division and modulo (remainder) <a href="#MULDIVMODOPS" class="id_link">#</a></h3></div></div></div><p>
				<code class="literal">a * b</code>, <code class="literal">a / b</code> and
				<code class="literal">a % b</code>.
			</p></div><div class="sect2" id="POWOP"><div class="titlepage"><div><div><h3 class="title">3.5.9. Power-of operator <a href="#POWOP" class="id_link">#</a></h3></div></div></div><p>
				<code class="literal">a ^ b</code> works as a-to-the-power-of-b.
			</p></div><div class="sect2" id="FACTOP"><div class="titlepage"><div><div><h3 class="title">3.5.10. Factorial operator <a href="#FACTOP" class="id_link">#</a></h3></div></div></div><p>
				<code class="literal">a!</code>, the '!' sign used as postfix operator.
			</p></div><div class="sect2" id="UNARYPREFIXOPS"><div class="titlepage"><div><div><h3 class="title">3.5.11. Unary plus and minus, logical and bitwise NOT, prefix increment and decrement <a href="#UNARYPREFIXOPS" class="id_link">#</a></h3></div></div></div><p>
				Unary plus (<code class="literal">+a</code>), unary minus (<code class="literal">-a</code>),
				logical NOT (<code class="literal">!a</code>, '!' used as prefix operator),
				bitwise NOT (<code class="literal">~a</code>), prefix increment (<code class="literal">++a</code>)
				and prefix decrement (<code class="literal">--a</code>).
			</p></div><div class="sect2" id="POSTFIXOPS"><div class="titlepage"><div><div><h3 class="title">3.5.12. Postfix increment and decrement <a href="#POSTFIXOPS" class="id_link">#</a></h3></div></div></div><p>
				Postfix increment (<code class="literal">a++</code>) and decrement
				(<code class="literal">a--</code>).
			</p></div><div class="sect2" id="FUNCCALLS"><div class="titlepage"><div><div><h3 class="title">3.5.13. Function calls and implicit multiplication <a href="#FUNCCALLS" class="id_link">#</a></h3></div></div></div><p>
				Function calls execute a function on operands:
				<code class="literal">function(operand[, ...])</code>. A function name
				is a single word known by OpenCReports at the time of parsing,
				either as a built-in function, or a user-supplied one.
				The function name cannot have a leading dot or be a
				domain-qualified identifier.
			</p><p>
				Implicit multiplication is when two distinct operands are in
				juxtaposition, in other words they are written side by side
				without any whitespace. In this case, there is an implied
				multiplication between them that acts with higher precedence
				than regular multiplication or division. Implicit multiplication
				is applicable in these situations:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
							A numeric constant juxtaposed with an identifier,
							the numeric constant is the on the left side.
							</p><pre class="programlisting">2x</pre><p>
						</p></li><li class="listitem"><p>
							A numeric constant juxtaposed with an expression inside
							parentheses. The constant can be on either side of the
							expression.
							</p><pre class="programlisting">2(a+b)
(a+b)2</pre><p>
						</p></li><li class="listitem"><p>
							An identifier juxtaposed with an expression inside
							parentheses, the identifier is on the left side of the
							expression.
							</p><pre class="programlisting">x(a+b)</pre><p>
						</p><p>
							This is only treated as implicit
							multiplication if the identifier name is not known as
							a function name at the time of parsing and there is
							a single expression inside the parentheses.
							No expressions, a single expression with a known function
							name as the identifier, or a series of comma delimited
							series of expressions are treated as a function call and
							the function call validity is checked against the number
							of operands, with a potential parser error. If there's
							an ambiguity between function names and identifiers
							provided by data sources, it can be avoided by using
							dot-prefixed or dot-prefixed and quoted identifiers,
							or fully qualified identifiers in the form of
							<code class="literal">query.identifier</code>.
						</p></li><li class="listitem"><p>
							An expression inside parentheses juxtaposed with an identifier
							on the right side.
							</p><pre class="programlisting">(a+b)a</pre><p>
						</p></li><li class="listitem"><p>
							Two expressions inside parentheses juxtaposed with each other.
							</p><pre class="programlisting">(a+b)(c+d)</pre><p>
						</p></li></ul></div><p>
			</p><p>
				Implicit multiplication is NOT applicable in these situations,
				besides the exceptions already explained above:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
							An identifier juxtaposed with a numeric constant,
							the numeric constant is the on the right side.
							</p><pre class="programlisting">x2</pre><p>
						</p><p>
							Since an identifier name may include digits as the
							second and subsequent characters, the numeric
							constant, or at least its integer part is simply
							recognized as part of the identifier name itself
							according to the token matching. This can also result
							in syntax errors when not handled with care.
						</p></li><li class="listitem"><p>
							An identifier juxtaposed with another identifier.
							</p><pre class="programlisting">ab</pre><p>
						</p><p>
							The reason is the same as in the preceding case:
							there is only a single identifier according to
							token matching.
						</p></li></ul></div><p>
			</p></div><div class="sect2" id="PARENS"><div class="titlepage"><div><div><h3 class="title">3.5.14. Parentheses <a href="#PARENS" class="id_link">#</a></h3></div></div></div><p>
				Parenthesized expressions are always computed first.
			</p></div><div class="sect2" id="TOKMATCHANDPREC"><div class="titlepage"><div><div><h3 class="title">3.5.15. Token matching, precendence and syntax errors <a href="#TOKMATCHANDPREC" class="id_link">#</a></h3></div></div></div><p>
				Expression parsing works on two levels: token matching (the
				job of Flex) and applying grammar (the job of Bison).
				Token matching breaks up the expression string into tokens
				in a greedy way: without whitepace delimiters, the longest
				possible token is chosen.
			</p><p>
				This may lead to slight confusion when coupled with
				implicit multiplication. For example, the expression
				<code class="literal">2e-1e</code> is broken up into two tokens:
				<code class="literal">2e-1</code> juxtaposed with
				<code class="literal">e</code>. The first token is interpreted as
				a numeric constant using <span class="emphasis"><em>e-notation</em></span>
				(so that it will mean <code class="literal">2 * 10^(-1)</code>) and
				the second is the identifier <code class="literal">e</code>, leading
				to the meaning <code class="literal">0.2 * e</code>. This is
				unambiguous for the computer, but can be somewhat confusing
				to the the user reading or writing expressions. To avoid
				any confusion, don't use implicit multiplication and use
				whitespace and parentheses gratituously.
			</p><p>
				Expression parsing handles precedence and whitespaces.
				For example, these below do not mean the same thing:
				</p><pre class="programlisting">a++ + ++b
a+++++b
				</pre><p>
				The former is obvious, but the latter may be a little
				surprising: <code class="literal">(a++)++ + b</code>, but not when
				considering precedence and the Flex lexer behaviour to
				match the the longest known token first. In this case,
				to make the expression unambiguous, whitespace or parenthesis
				should be used. Another ambiguous example:
				</p><pre class="programlisting">a++b
				</pre><p>
				The above may be interpreted as <code class="literal">a + +b</code>
				but since no whitespace is used, Flex is free to interpret
				it as <code class="literal">a++ b</code>, because <code class="literal">++</code>
				is longer than <code class="literal">+</code>, so the former is matched
				first as an operator token. This is a syntax error and
				expression parsing throws an error for it.
			</p></div></div><div class="sect1" id="LISTOFFUNCS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.6. Alphabetical list of functions <a href="#LISTOFFUNCS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#ABSFUNC">3.6.1. abs()</a></span></dt><dt><span class="sect2"><a href="#ACOSFUNC">3.6.2. acos()</a></span></dt><dt><span class="sect2"><a href="#ADDFUNC">3.6.3. add()</a></span></dt><dt><span class="sect2"><a href="#ANDFUNC">3.6.4. and()</a></span></dt><dt><span class="sect2"><a href="#ASINFUNC">3.6.5. asin()</a></span></dt><dt><span class="sect2"><a href="#ATANFUNC">3.6.6. atan()</a></span></dt><dt><span class="sect2"><a href="#BRROWNUMFUNC">3.6.7. brrownum()</a></span></dt><dt><span class="sect2"><a href="#CEILFUNC">3.6.8. ceil()</a></span></dt><dt><span class="sect2"><a href="#CHGDATEOFFUNC">3.6.9. chgdateof()</a></span></dt><dt><span class="sect2"><a href="#CHGTIMEOFFUNC">3.6.10. chgtimeof()</a></span></dt><dt><span class="sect2"><a href="#CONCATFUNC">3.6.11. concat()</a></span></dt><dt><span class="sect2"><a href="#COSFUNC">3.6.12. cos()</a></span></dt><dt><span class="sect2"><a href="#COTFUNC">3.6.13. cot()</a></span></dt><dt><span class="sect2"><a href="#CSCFUNC">3.6.14. csc()</a></span></dt><dt><span class="sect2"><a href="#DATEFUNC">3.6.15. date()</a></span></dt><dt><span class="sect2"><a href="#DATEOFFUNC">3.6.16. dateof()</a></span></dt><dt><span class="sect2"><a href="#DAYFUNC">3.6.17. day()</a></span></dt><dt><span class="sect2"><a href="#DECFUNC">3.6.18. dec()</a></span></dt><dt><span class="sect2"><a href="#DIMFUNC">3.6.19. dim()</a></span></dt><dt><span class="sect2"><a href="#DIVFUNC">3.6.20. div()</a></span></dt><dt><span class="sect2"><a href="#DTOSFUNC">3.6.21. dtos()</a></span></dt><dt><span class="sect2"><a href="#DTOSFFUNC">3.6.22. dtosf()</a></span></dt><dt><span class="sect2"><a href="#EQFUNC">3.6.23. eq()</a></span></dt><dt><span class="sect2"><a href="#ERRORFUNC">3.6.24. error()</a></span></dt><dt><span class="sect2"><a href="#EXPFUNC">3.6.25. exp()</a></span></dt><dt><span class="sect2"><a href="#EXP10FUNC">3.6.26. exp10()</a></span></dt><dt><span class="sect2"><a href="#EXP2FUNC">3.6.27. exp2()</a></span></dt><dt><span class="sect2"><a href="#EVALFUNC">3.6.28. eval()</a></span></dt><dt><span class="sect2"><a href="#FACTORIALFUNC">3.6.29. factorial()</a></span></dt><dt><span class="sect2"><a href="#FLOORFUNC">3.6.30. floor()</a></span></dt><dt><span class="sect2"><a href="#FMODFUNC">3.6.31. fmod()</a></span></dt><dt><span class="sect2"><a href="#FORMATFUNC">3.6.32. format()</a></span></dt><dt><span class="sect2"><a href="#FXPVALFUNC">3.6.33. fxpval()</a></span></dt><dt><span class="sect2"><a href="#GEFUNC">3.6.34. ge()</a></span></dt><dt><span class="sect2"><a href="#GETTIMEINSECSFUNC">3.6.35. gettimeinsecs()</a></span></dt><dt><span class="sect2"><a href="#GTFUNC">3.6.36. gt()</a></span></dt><dt><span class="sect2"><a href="#IIFFUNC">3.6.37. iif()</a></span></dt><dt><span class="sect2"><a href="#INCFUNC">3.6.38. inc()</a></span></dt><dt><span class="sect2"><a href="#INTERVALFUNC">3.6.39. interval()</a></span></dt><dt><span class="sect2"><a href="#ISNULLFUNC">3.6.40. isnull()</a></span></dt><dt><span class="sect2"><a href="#LANDFUNC">3.6.41. land()</a></span></dt><dt><span class="sect2"><a href="#LEFUNC">3.6.42. le()</a></span></dt><dt><span class="sect2"><a href="#LEFTFUNC">3.6.43. left()</a></span></dt><dt><span class="sect2"><a href="#LNFUNC">3.6.44. ln()</a></span></dt><dt><span class="sect2"><a href="#LNOTFUNC">3.6.45. lnot()</a></span></dt><dt><span class="sect2"><a href="#LOGFUNC">3.6.46. log()</a></span></dt><dt><span class="sect2"><a href="#LOG10FUNC">3.6.47. log10()</a></span></dt><dt><span class="sect2"><a href="#LOG2FUNC">3.6.48. log2()</a></span></dt><dt><span class="sect2"><a href="#LORFUNC">3.6.49. lor()</a></span></dt><dt><span class="sect2"><a href="#LOWERFUNC">3.6.50. lower()</a></span></dt><dt><span class="sect2"><a href="#LTFUNC">3.6.51. lt()</a></span></dt><dt><span class="sect2"><a href="#MIDFUNC">3.6.52. mid()</a></span></dt><dt><span class="sect2"><a href="#MODFUNC">3.6.53. mod()</a></span></dt><dt><span class="sect2"><a href="#MONTHFUNC">3.6.54. month()</a></span></dt><dt><span class="sect2"><a href="#MULFUNC">3.6.55. mul()</a></span></dt><dt><span class="sect2"><a href="#NEFUNC">3.6.56. ne()</a></span></dt><dt><span class="sect2"><a href="#NOTFUNC">3.6.57. not()</a></span></dt><dt><span class="sect2"><a href="#NOWFUNC">3.6.58. now()</a></span></dt><dt><span class="sect2"><a href="#NULLFUNC">3.6.59. null()</a></span></dt><dt><span class="sect2"><a href="#NULLDTFUNC">3.6.60. nulldt()</a></span></dt><dt><span class="sect2"><a href="#NULLNFUNC">3.6.61. nulln()</a></span></dt><dt><span class="sect2"><a href="#NULLSFUNC">3.6.62. nulls()</a></span></dt><dt><span class="sect2"><a href="#ORFUNC">3.6.63. or()</a></span></dt><dt><span class="sect2"><a href="#POWFUNC">3.6.64. pow()</a></span></dt><dt><span class="sect2"><a href="#PREVVALFUNC">3.6.65. prevval()</a></span></dt><dt><span class="sect2"><a href="#PRINTFFUNC">3.6.66. printf()</a></span></dt><dt><span class="sect2"><a href="#PROPERFUNC">3.6.67. proper()</a></span></dt><dt><span class="sect2"><a href="#RANDOMFUNC">3.6.68. random()</a></span></dt><dt><span class="sect2"><a href="#REMAINDERFUNC">3.6.69. remainder()</a></span></dt><dt><span class="sect2"><a href="#RIGHTFUNC">3.6.70. right()</a></span></dt><dt><span class="sect2"><a href="#RINTFUNC">3.6.71. rint()</a></span></dt><dt><span class="sect2"><a href="#ROUNDFUNC">3.6.72. round()</a></span></dt><dt><span class="sect2"><a href="#ROWNUMFUNC">3.6.73. rownum()</a></span></dt><dt><span class="sect2"><a href="#SECFUNC">3.6.74. sec()</a></span></dt><dt><span class="sect2"><a href="#SETTIMEINSECSFUNC">3.6.75. settimeinsecs()</a></span></dt><dt><span class="sect2"><a href="#SHLFUNC">3.6.76. shl()</a></span></dt><dt><span class="sect2"><a href="#SHRFUNC">3.6.77. shr()</a></span></dt><dt><span class="sect2"><a href="#SINFUNC">3.6.78. sin()</a></span></dt><dt><span class="sect2"><a href="#SQRFUNC">3.6.79. sqr()</a></span></dt><dt><span class="sect2"><a href="#SQRTFUNC">3.6.80. sqrt()</a></span></dt><dt><span class="sect2"><a href="#STDWIYFUNC">3.6.81. stdwiy()</a></span></dt><dt><span class="sect2"><a href="#STODFUNC">3.6.82. stod()</a></span></dt><dt><span class="sect2"><a href="#STODTFUNC">3.6.83. stodt()</a></span></dt><dt><span class="sect2"><a href="#STODTSQLFUNC">3.6.84. stodtsql()</a></span></dt><dt><span class="sect2"><a href="#STRFUNC">3.6.85. str()</a></span></dt><dt><span class="sect2"><a href="#STRLENFUNC">3.6.86. strlen()</a></span></dt><dt><span class="sect2"><a href="#SUBFUNC">3.6.87. sub()</a></span></dt><dt><span class="sect2"><a href="#TANFUNC">3.6.88. tan()</a></span></dt><dt><span class="sect2"><a href="#TIMEOFFUNC">3.6.89. timeof()</a></span></dt><dt><span class="sect2"><a href="#TRANSLATEFUNC">3.6.90. translate()</a></span></dt><dt><span class="sect2"><a href="#TRANSLATE2FUNC">3.6.91. translate2()</a></span></dt><dt><span class="sect2"><a href="#TRUNCFUNC">3.6.92. trunc()</a></span></dt><dt><span class="sect2"><a href="#TSTODFUNC">3.6.93. tstod()</a></span></dt><dt><span class="sect2"><a href="#UMINUSFUNC">3.6.94. uminus()</a></span></dt><dt><span class="sect2"><a href="#UPPERFUNC">3.6.95. upper()</a></span></dt><dt><span class="sect2"><a href="#VALFUNC">3.6.96. val()</a></span></dt><dt><span class="sect2"><a href="#WIYFUNC">3.6.97. wiy()</a></span></dt><dt><span class="sect2"><a href="#WIY1FUNC">3.6.98. wiy1()</a></span></dt><dt><span class="sect2"><a href="#WIYOFUNC">3.6.99. wiyo()</a></span></dt><dt><span class="sect2"><a href="#XORFUNC">3.6.100. xor()</a></span></dt><dt><span class="sect2"><a href="#YEARFUNC">3.6.101. year()</a></span></dt></dl></div><p>
			Most functions below operate in this way, unless noted otherwise:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
						numeric and bitwise functions with more than two operands
						take their first operand and perform the same operation
						using the second, third, etc. operands repeatedly.
					</p></li><li class="listitem"><p>
						if any of the operands is an error (resulting from
						runtime processing of a subexpression), then the
						result will use the exact error of the first operand
						that is an error.
					</p></li><li class="listitem"><p>
						if any of the operands is NULL (e.g. the data source
						is SQL and the field value is SQL NULL) then the
						result will also be NULL.
					</p></li><li class="listitem"><p>
						Boolean logic functions treat their operands with
						0 being false and anything else (even fractions less
						than 0.5) as true.
					</p></li><li class="listitem"><p>
						Bitwise functions treat their operands as 64-bit
						numeric values, with rounding if they are fractions.
					</p></li><li class="listitem"><p>
						String arithmetics operate on UTF-8 encoded strings
						and count in number of UTF-8 characters instead of
						byte length.
					</p></li></ul></div><p>
		</p><div class="sect2" id="ABSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.1. abs() <a href="#ABSFUNC" class="id_link">#</a></h3></div></div></div><p>
				Absolute value. Operator <code class="literal">|...|</code>
				is a shortcut for this function.
				It takes one numeric operand.
			</p></div><div class="sect2" id="ACOSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.2. acos() <a href="#ACOSFUNC" class="id_link">#</a></h3></div></div></div><p>
				Arc-cosine function. It takes one numeric operand.
			</p></div><div class="sect2" id="ADDFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.3. add() <a href="#ADDFUNC" class="id_link">#</a></h3></div></div></div><p>
				Addition. Operator <code class="literal">+</code> is a shortcut for
				this function. It takes two or more operands of the same
				type, with all of them being either numeric or string.
				For string operands, it is equivalent with concatenation,
				i.e. <code class="literal">concat()</code> below.
			</p></div><div class="sect2" id="ANDFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.4. and() <a href="#ANDFUNC" class="id_link">#</a></h3></div></div></div><p>
				Bitwise AND. Operator <code class="literal">&amp;</code> is a shortcut for
				this function. It takes two or more numeric operands.
			</p></div><div class="sect2" id="ASINFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.5. asin() <a href="#ASINFUNC" class="id_link">#</a></h3></div></div></div><p>
				Arc-sine function. It takes one numeric operand.
			</p></div><div class="sect2" id="ATANFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.6. atan() <a href="#ATANFUNC" class="id_link">#</a></h3></div></div></div><p>
				Arc-tangent function. It takes one numeric operand.
			</p></div><div class="sect2" id="BRROWNUMFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.7. brrownum() <a href="#BRROWNUMFUNC" class="id_link">#</a></h3></div></div></div><p>
				Current row number of a break since it was last triggered.
				It takes one string operand which is the name of the break.
				The row number restarts from 1 at every break boundary.
			</p></div><div class="sect2" id="CEILFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.8. ceil() <a href="#CEILFUNC" class="id_link">#</a></h3></div></div></div><p>
				Rounds its operand to the next higher or equal integer.
				It takes one numeric operands.
			</p></div><div class="sect2" id="CHGDATEOFFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.9. chgdateof() <a href="#CHGDATEOFFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes two datetime operands.
				Changes the date part of the first operand to
				the date part of the second operand.
			</p></div><div class="sect2" id="CHGTIMEOFFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.10. chgtimeof() <a href="#CHGTIMEOFFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes two datetime operands.
				Changes the time part of the first operand to
				the date part of the second operand.
			</p></div><div class="sect2" id="CONCATFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.11. concat() <a href="#CONCATFUNC" class="id_link">#</a></h3></div></div></div><p>
				String concatenation. It takes two or more string operands.
			</p></div><div class="sect2" id="COSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.12. cos() <a href="#COSFUNC" class="id_link">#</a></h3></div></div></div><p>
				Cosine function. It takes one numeric operand.
			</p></div><div class="sect2" id="COTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.13. cot() <a href="#COTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Cotangent function. It takes one numeric operand.
			</p></div><div class="sect2" id="CSCFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.14. csc() <a href="#CSCFUNC" class="id_link">#</a></h3></div></div></div><p>
				Cosecant function. It takes one numeric operand.
			</p></div><div class="sect2" id="DATEFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.15. date() <a href="#DATEFUNC" class="id_link">#</a></h3></div></div></div><p>
				Returns the current date. It takes zero operands.
			</p></div><div class="sect2" id="DATEOFFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.16. dateof() <a href="#DATEOFFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand.
				It returns date part of the datetime operand.
			</p></div><div class="sect2" id="DAYFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.17. day() <a href="#DAYFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand.
				It returns the day of month value as a number.
			</p></div><div class="sect2" id="DECFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.18. dec() <a href="#DECFUNC" class="id_link">#</a></h3></div></div></div><p>
				Decrement by one. It takes one numeric operand.
				The operator <code class="literal">++</code> is the shortcut for it,
				either in prefix or postfix uses.
			</p></div><div class="sect2" id="DIMFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.19. dim() <a href="#DIMFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand. Given the year and month
				values of the datetime, this function returns the
				number of days in the month. E.g. for February in a leap
				year, it returns 29.
			</p></div><div class="sect2" id="DIVFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.20. div() <a href="#DIVFUNC" class="id_link">#</a></h3></div></div></div><p>
				Division. Operator <code class="literal">/</code> is a shortcut for
				this function. It takes two or more numeric operands.
				The way it works is: take the first operand and divide
				it by the second and subsequent operands in sequence.
			</p></div><div class="sect2" id="DTOSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.21. dtos() <a href="#DTOSFUNC" class="id_link">#</a></h3></div></div></div><p>
				Datetime to string. It takes one datetime operand.
				The date part of the datetime is formatted according
				to the date format of the currently set locale.
			</p></div><div class="sect2" id="DTOSFFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.22. dtosf() <a href="#DTOSFFUNC" class="id_link">#</a></h3></div></div></div><p>
				Datetime to formatted string. It takes two operands:
				one datetime and one string. It takes the second (string)
				operand as a format string and formats the datetime
				value according to the format string.
				If the second operand is NULL or empty string,
				this function behaves like <code class="literal">dtos()</code>.
				Otherwise it behaves like <code class="literal">format()</code>
				with the operands reversed.
			</p></div><div class="sect2" id="EQFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.23. eq() <a href="#EQFUNC" class="id_link">#</a></h3></div></div></div><p>
				Equivalence. Operator <code class="literal">=</code> and <code class="literal">==</code>
				are a shortcuts for this function. It takes two operands of
				the same type: numeric, string or datetime.
				The result is numeric value 1 or 0, if the two operands are
				equal or non-equal, respectively.
			</p></div><div class="sect2" id="ERRORFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.24. error() <a href="#ERRORFUNC" class="id_link">#</a></h3></div></div></div><p>
				Returns an artificially generated error. It takes one
				string operand. The result will use the string operand's
				value as error message. Good for unit testing OpenCReports
				as done in the <code class="literal">ocrpt_expr_test</code> example.
			</p></div><div class="sect2" id="EXPFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.25. exp() <a href="#EXPFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one numeric operand and returns the exponential 
				of the operand.
			</p></div><div class="sect2" id="EXP10FUNC"><div class="titlepage"><div><div><h3 class="title">3.6.26. exp10() <a href="#EXP10FUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one numeric operand and returns 10 to the power
				of the operand.
			</p></div><div class="sect2" id="EXP2FUNC"><div class="titlepage"><div><div><h3 class="title">3.6.27. exp2() <a href="#EXP2FUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one numeric operand and returns 2 to the power
				of the operand.
			</p></div><div class="sect2" id="EVALFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.28. eval() <a href="#EVALFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one string operand, which must be an expression
				string. The expression is parsed. If it's correct, it is
				inserted into the parent expression in place of the
				function call. If there is a syntax error, the error is
				re-thrown for the main expression.
			</p><p>
				This is a pseudo-function. The grammar detects its usage
				and converts the embedded expression string into a regular
				subexpression, like if it was inside parenthesis in the
				parent expression contents. This allows the subexpression
				to be optimized in the parent expression context.
			</p><p>
				Fox example, the expression <code class="literal">3 * eval('1 + 2')</code>
				is optimized into the numeric constant <code class="literal">9</code>.
			</p><p>
				Note, that the grammar transformation only takes place if
				there is no user defined function with the same name.
				In this case, the user defined function is used.
			</p></div><div class="sect2" id="FACTORIALFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.29. factorial() <a href="#FACTORIALFUNC" class="id_link">#</a></h3></div></div></div><p>
				Factorial function. It takes one numeric operand.
				The postfix operator <code class="literal">!</code> is the alias for
				this function.
			</p></div><div class="sect2" id="FLOORFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.30. floor() <a href="#FLOORFUNC" class="id_link">#</a></h3></div></div></div><p>
				Rounds its operand to the next lower or equal integer.
				It takes one numeric operands.
			</p></div><div class="sect2" id="FMODFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.31. fmod() <a href="#FMODFUNC" class="id_link">#</a></h3></div></div></div><p>
				The result to the value of <code class="literal">x - ny</code>
				(<code class="literal">x</code> and <code class="literal">y</code> being
				its two numeric operands), rounded according to the
				report rounding mode set via <code class="literal">ocrpt_set_rounding_mode()</code>,
				where <code class="literal">n</code> is the integer quotient of
				<code class="literal">x</code> divided by <code class="literal">y</code>,
				<code class="literal">n</code> is rounded toward zero.
				It takes two numeric operands.
			</p></div><div class="sect2" id="FORMATFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.32. format() <a href="#FORMATFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes two operands, the first operand is of any type,
				the second operand is a string. This function formats
				the first value according to the second operand as a
				format string. If the first operand doesn't match the
				expected type in the format string, an error is returned.
			</p><p>
				It an RLIB compatibility function and is a special case
				of the <code class="literal">printf()</code> function.
				See also <a class="xref" href="#FORMATTING" title="Chapter 6. Formatting">Formatting data</a>
			</p></div><div class="sect2" id="FXPVALFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.33. fxpval() <a href="#FXPVALFUNC" class="id_link">#</a></h3></div></div></div><p>
				Compatibility function for RLIB. It takes two operands.
				The type of the first operand may be string containing
				a numeric value or numeric. If it's a string, then it will
				be converted to numeric first. The type of the second operand
				is numeric. The function divides the value of the first
				operand with 10 to the power of the value of the second
				operand. One use case is that if the data contains prices
				in cents, then <code class="literal">fxpval(data, 2)</code> puts the
				decimal separator to the correct place.
			</p></div><div class="sect2" id="GEFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.34. ge() <a href="#GEFUNC" class="id_link">#</a></h3></div></div></div><p>
				Greater-or-equal. It takes two operands of the same type,
				which can be either numeric, string or datetime operands.
				The operator <code class="literal">&gt;=</code> is the shortcut for
				this function.
			</p></div><div class="sect2" id="GETTIMEINSECSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.35. gettimeinsecs() <a href="#GETTIMEINSECSFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand. It converts the time part
				of the datetime to seconds elapsed from 00:00:00.
			</p></div><div class="sect2" id="GTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.36. gt() <a href="#GTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Greater-than. It takes two operands of the same type,
				which can be either numeric, string or datetime operands.
				The operator <code class="literal">&gt;</code> is the shortcut for
				this function.
			</p></div><div class="sect2" id="IIFFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.37. iif() <a href="#IIFFUNC" class="id_link">#</a></h3></div></div></div><p>
				Trinary function. It takes three operands of which the first one
				is numeric, the second and third operands can be of any type.
				If the first operand is non-zero (i.e.: "true") then
				the result will be the value of the second operand,
				else it will be the third operand.
				The trinary operator <code class="literal">exp1 ? exp2 : exp3</code>
				is the shortcut for this function.
			</p></div><div class="sect2" id="INCFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.38. inc() <a href="#INCFUNC" class="id_link">#</a></h3></div></div></div><p>
				Increment by one. It takes one numeric operand.
				The operator <code class="literal">--</code> is the shortcut for it,
				either in prefix or postfix uses.
			</p></div><div class="sect2" id="INTERVALFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.39. interval() <a href="#INTERVALFUNC" class="id_link">#</a></h3></div></div></div><p>
				Convert the parameter(s) to an interval subtype of
				the datetime type. It takes either one string operand
				or six numeric operands. In the first case, the string
				is parsed for interval values, like <code class="literal">1 year</code>
				or <code class="literal">2 months</code>, etc., and sets the specific
				datetime part values. In the second case, the six numeric
				operands are the values for the datetime parts, in the order
				of years, months, days, hours, minutes and seconds.
			</p></div><div class="sect2" id="ISNULLFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.40. isnull() <a href="#ISNULLFUNC" class="id_link">#</a></h3></div></div></div><p>
				Returns numeric 1 if the operand is NULL, 0 otherwise.
				It takes one operand of any type.
			</p></div><div class="sect2" id="LANDFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.41. land() <a href="#LANDFUNC" class="id_link">#</a></h3></div></div></div><p>
				Boolean logic AND. Operator <code class="literal">&amp;&amp;</code> is a
				shortcut for this function. It takes two or more numeric
				operands that are treated as boolean logic values. The
				function is executed until the result is fully determined,
				i.e. it stops at the first false value.
			</p></div><div class="sect2" id="LEFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.42. le() <a href="#LEFUNC" class="id_link">#</a></h3></div></div></div><p>
				Less-or-equal. It takes two operands of the same type,
				which can be either numeric, string or datetime operands.
				The operator <code class="literal">&lt;=</code> is the shortcut for
				this function.
			</p></div><div class="sect2" id="LEFTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.43. left() <a href="#LEFTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Returns the leftmost N characters of a string.
				It takes two operands, the first operand is the string,
				the second is the numeric that is handled as an integer
				and used to determine the returned string length.
			</p></div><div class="sect2" id="LNFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.44. ln() <a href="#LNFUNC" class="id_link">#</a></h3></div></div></div><p>
				Alias for <code class="literal">log()</code>.
			</p></div><div class="sect2" id="LNOTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.45. lnot() <a href="#LNOTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Boolean logic NOT. Prefix operator <code class="literal">!</code> is
				the shortcut for this function. It returns the negated
				boolean value of its operand. It takes one numeric operand.
			</p></div><div class="sect2" id="LOGFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.46. log() <a href="#LOGFUNC" class="id_link">#</a></h3></div></div></div><p>
				Natural logarithm. It takes one nueric operand.
			</p></div><div class="sect2" id="LOG10FUNC"><div class="titlepage"><div><div><h3 class="title">3.6.47. log10() <a href="#LOG10FUNC" class="id_link">#</a></h3></div></div></div><p>
				Base-10 logarithm. It takes one nueric operand.
			</p></div><div class="sect2" id="LOG2FUNC"><div class="titlepage"><div><div><h3 class="title">3.6.48. log2() <a href="#LOG2FUNC" class="id_link">#</a></h3></div></div></div><p>
				Base-2 logarithm. It takes one nueric operand.
			</p></div><div class="sect2" id="LORFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.49. lor() <a href="#LORFUNC" class="id_link">#</a></h3></div></div></div><p>
				Boolean logic OR. Operator <code class="literal">||</code> is a shortcut for
				this function. It takes two or more numeric operands that
				are treated as boolean logic values, with 0 being false and
				true for anything else. The function is executed until the result is
				determined fully, i.e. it stops at the first true value.
			</p></div><div class="sect2" id="LOWERFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.50. lower() <a href="#LOWERFUNC" class="id_link">#</a></h3></div></div></div><p>
				Lowercase conversion. It takes one string operand.
			</p></div><div class="sect2" id="LTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.51. lt() <a href="#LTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Less-than. It takes two operands of the same type,
				which can be either numeric, string or datetime operands.
				The operator <code class="literal">&lt;</code> is the shortcut for this
				function.
			</p></div><div class="sect2" id="MIDFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.52. mid() <a href="#MIDFUNC" class="id_link">#</a></h3></div></div></div><p>
				Return characters from the middle of the string.
				It takes three operands, the first operand is the string,
				the second and third are numeric values that are handled
				as an integers. The second operand is the offset to start
				from and the third operand is the length of the result
				string in UTF-8 characters. The offset is 1-based just like
				in BASIC, with offset value 0 being identical to 1.
				Negative offsets count from the right end of the string,
				i.e. <code class="literal">mid(s,-n,n)</code> is equivalent to
				<code class="literal">right(s,n)</code>.
			</p></div><div class="sect2" id="MODFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.53. mod() <a href="#MODFUNC" class="id_link">#</a></h3></div></div></div><p>
				An alias of <code class="literal">remainder()</code>.
				It takes two numeric operands.
			</p></div><div class="sect2" id="MONTHFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.54. month() <a href="#MONTHFUNC" class="id_link">#</a></h3></div></div></div><p>
				Returns the month value of a datetime. It takes one datetime operand.
			</p></div><div class="sect2" id="MULFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.55. mul() <a href="#MULFUNC" class="id_link">#</a></h3></div></div></div><p>
				Multiplication. Operator <code class="literal">*</code> is a shortcut for
				this function. It takes two or more numeric operands.
			</p></div><div class="sect2" id="NEFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.56. ne() <a href="#NEFUNC" class="id_link">#</a></h3></div></div></div><p>
				Not equal. It takes two operands of the same type,
				which can be either numeric, string or datetime operands.
				The operator <code class="literal">!=</code> and <code class="literal">&lt;&gt;</code>
				are shortcuts for it.
			</p></div><div class="sect2" id="NOTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.57. not() <a href="#NOTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Bitwise NOT. Prefix operator <code class="literal">~</code> is
				the shortcut for this function. It returns the bit-by-bit
				negated value of its operand. It takes one numeric operand.
			</p></div><div class="sect2" id="NOWFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.58. now() <a href="#NOWFUNC" class="id_link">#</a></h3></div></div></div><p>
				Returns the current timestamp. It is run only once
				during running the report and the same value is used
				everywhere where this function is used. Practically,
				it is the time of generating the report.
				It takes zero operands.
			</p></div><div class="sect2" id="NULLFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.59. null() <a href="#NULLFUNC" class="id_link">#</a></h3></div></div></div><p>
				Generate NULL value using the type of its operand.
				It takes one operand of any type.
			</p></div><div class="sect2" id="NULLDTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.60. nulldt() <a href="#NULLDTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Generate NULL of the datetime type. It takes no operands.
			</p></div><div class="sect2" id="NULLNFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.61. nulln() <a href="#NULLNFUNC" class="id_link">#</a></h3></div></div></div><p>
				Generate NULL of the numeric type. It takes no operands.
			</p></div><div class="sect2" id="NULLSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.62. nulls() <a href="#NULLSFUNC" class="id_link">#</a></h3></div></div></div><p>
				Generate NULL of the string type. It takes no operands.
			</p></div><div class="sect2" id="ORFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.63. or() <a href="#ORFUNC" class="id_link">#</a></h3></div></div></div><p>
				Bitwise OR. Operator <code class="literal">|</code> is a shortcut for
				this function. It takes two or more numeric operands.
			</p></div><div class="sect2" id="POWFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.64. pow() <a href="#POWFUNC" class="id_link">#</a></h3></div></div></div><p>
				This function raises the first operand to the power of its
				second operand. It takes two numeric operands.
				Operator <code class="literal">^</code> is the shortcut for
				this function.
			</p></div><div class="sect2" id="PREVVALFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.65. prevval() <a href="#PREVVALFUNC" class="id_link">#</a></h3></div></div></div><p>
				This function accepts one subexpression and
				returns the subexpression's previous value, i.e.
				the value generated for the previous query row.
				If there is no previous value row, the result
				of this function is an error.
			</p><p>
				This function allows showing carried over values
				e.g. in page headers.
			</p></div><div class="sect2" id="PRINTFFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.66. printf() <a href="#PRINTFFUNC" class="id_link">#</a></h3></div></div></div><p>
				This function takes one or more operands. The first
				operand is a string and used as the format string.
				Subsequent operands have to be of the expected type
				according to the format string, otherwise an error
				is returned. If everything is correct, it returns
				the formatted data as a string.
			</p></div><div class="sect2" id="PROPERFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.67. proper() <a href="#PROPERFUNC" class="id_link">#</a></h3></div></div></div><p>
				This function takes one string operand. The function
				returns the string converted lowecase, except the first
				letter of the first word, which will be uppercase.
			</p></div><div class="sect2" id="RANDOMFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.68. random() <a href="#RANDOMFUNC" class="id_link">#</a></h3></div></div></div><p>
				Generate a pseudo-random numeric value between 0 and 1.
				It takes no operands.
			</p></div><div class="sect2" id="REMAINDERFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.69. remainder() <a href="#REMAINDERFUNC" class="id_link">#</a></h3></div></div></div><p>
				The result to the value of <code class="literal">x - ny</code>
				(<code class="literal">x</code> and <code class="literal">y</code> being
				its two numeric operands), rounded according to the
				report rounding mode set via <code class="literal">ocrpt_set_rounding_mode()</code>,
				where <code class="literal">n</code> is the integer quotient of
				<code class="literal">x</code> divided by <code class="literal">y</code>,
				<code class="literal">n</code> is rounded toward to the nearest integer.
				It takes two numeric operands.
			</p></div><div class="sect2" id="RIGHTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.70. right() <a href="#RIGHTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Returns the rightmost N characters of a string.
				It takes two operands, the first operand is the string,
				the second is the numeric that is handled as an integer
				and used to determine the returned string length.
			</p></div><div class="sect2" id="RINTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.71. rint() <a href="#RINTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Rounds its operand using the rounding mode set via
				<code class="literal">ocrpt_set_rounding_mode()</code>.
				It takes one numeric operand.
			</p></div><div class="sect2" id="ROUNDFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.72. round() <a href="#ROUNDFUNC" class="id_link">#</a></h3></div></div></div><p>
				Rounds its operand to the nearest representable integer,
				rounding halfway cases away from zero.
				It takes one numeric operand.
			</p></div><div class="sect2" id="ROWNUMFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.73. rownum() <a href="#ROWNUMFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes either zero operands or one string operand.
				If zero operands are passed, it returns the current
				row number of the dataset. If one string operand is
				passed, then it returns the current row number in
				the named query of the dataset. See the follower
				queries.
			</p></div><div class="sect2" id="SECFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.74. sec() <a href="#SECFUNC" class="id_link">#</a></h3></div></div></div><p>
				Secant. It takes one numeric operand.
			</p></div><div class="sect2" id="SETTIMEINSECSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.75. settimeinsecs() <a href="#SETTIMEINSECSFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes two operands, the first operand is a datetime,
				the second is numeric. This function returns a datetime
				where the first operand's time part is changed to
				<code class="literal">N</code> seconds
				after 00:00:00, with <code class="literal">N</code> being the
				second operand.
			</p></div><div class="sect2" id="SHLFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.76. shl() <a href="#SHLFUNC" class="id_link">#</a></h3></div></div></div><p>
				Bitwise shift left. Shifts the first operand left with the
				number of bits set indicated the second operand. The operand
				<code class="literal">&lt;&lt;</code> is the shortcut for this
				function. It takes two numeric operands.
			</p></div><div class="sect2" id="SHRFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.77. shr() <a href="#SHRFUNC" class="id_link">#</a></h3></div></div></div><p>
				Bitwise shift right. Shifts the first operand right with the
				number of bits indicated by the second operand. The operand
				<code class="literal">&gt;&gt;</code> is the shortcut for this
				function. It takes two numeric operands.
			</p></div><div class="sect2" id="SINFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.78. sin() <a href="#SINFUNC" class="id_link">#</a></h3></div></div></div><p>
				Sine. It takes one numeric operand.
			</p></div><div class="sect2" id="SQRFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.79. sqr() <a href="#SQRFUNC" class="id_link">#</a></h3></div></div></div><p>
				Square. It takes one numeric operand.
			</p></div><div class="sect2" id="SQRTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.80. sqrt() <a href="#SQRTFUNC" class="id_link">#</a></h3></div></div></div><p>
				Square root. It takes one numeric operand.
			</p></div><div class="sect2" id="STDWIYFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.81. stdwiy() <a href="#STDWIYFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand. This function returns
				the  ISO-8601 week number of the operand as a decimal
				number, range 01 to 53, where week 1 is the first week
				that has at least 4 days in the new year.
			</p></div><div class="sect2" id="STODFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.82. stod() <a href="#STODFUNC" class="id_link">#</a></h3></div></div></div><p>
				Alias for <code class="literal">stodt()</code>.
			</p></div><div class="sect2" id="STODTFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.83. stodt() <a href="#STODTFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one string operand. This function parses
				the string and tries to convert it to a datetime value.
				It is smart enough to recognize locale specific formats
				and standard ISO-8601 formats. Handles whole datetime,
				date-only and time-only values in the string.
			</p></div><div class="sect2" id="STODTSQLFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.84. stodtsql() <a href="#STODTSQLFUNC" class="id_link">#</a></h3></div></div></div><p>
				Alias for <code class="literal">stodt()</code>.
			</p></div><div class="sect2" id="STRFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.85. str() <a href="#STRFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes three numeric operands. The first operand
				is converted to a string with the specified integer and
				decimal numeric digits, according to the second and third
				operands.
			</p></div><div class="sect2" id="STRLENFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.86. strlen() <a href="#STRLENFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one string operand. The function returns
				the number of (UTF-8) characters in the string.
			</p></div><div class="sect2" id="SUBFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.87. sub() <a href="#SUBFUNC" class="id_link">#</a></h3></div></div></div><p>
				Subtraction. Operator <code class="literal">-</code> is a shortcut for
				this function. It takes two or more numeric operands.
			</p></div><div class="sect2" id="TANFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.88. tan() <a href="#TANFUNC" class="id_link">#</a></h3></div></div></div><p>
				Tangent. It takes one numeric operand.
			</p></div><div class="sect2" id="TIMEOFFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.89. timeof() <a href="#TIMEOFFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand.
				It returns time part of the datetime operand.
			</p></div><div class="sect2" id="TRANSLATEFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.90. translate() <a href="#TRANSLATEFUNC" class="id_link">#</a></h3></div></div></div><p>
				Translates its operand according to the translation
				and locale settings using <code class="literal">dgettext()</code>
				from Gettext. It takes one string operand.
			</p></div><div class="sect2" id="TRANSLATE2FUNC"><div class="titlepage"><div><div><h3 class="title">3.6.91. translate2() <a href="#TRANSLATE2FUNC" class="id_link">#</a></h3></div></div></div><p>
				Translates its operands according to the translation
				and locale settings using <code class="literal">dngettext()</code>
				from Gettext. It takes three operands.
				The first two operands are strings, for the singular
				and plural strings. The third operand is the number
				that determines which translation form is used.
			</p></div><div class="sect2" id="TRUNCFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.92. trunc() <a href="#TRUNCFUNC" class="id_link">#</a></h3></div></div></div><p>
				Rounds its operand to the next representable integer toward
				zero. It takes one numeric operand.
			</p></div><div class="sect2" id="TSTODFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.93. tstod() <a href="#TSTODFUNC" class="id_link">#</a></h3></div></div></div><p>
				Alias for <code class="literal">stodt()</code>.
			</p></div><div class="sect2" id="UMINUSFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.94. uminus() <a href="#UMINUSFUNC" class="id_link">#</a></h3></div></div></div><p>
				Unary minus. Changes the sign of its numeric operand
				from positive to negative, or vice versa. Operator unary
				<code class="literal">-</code> is the shortcut of this function.
				It takes one numeric operand.
			</p></div><div class="sect2" id="UPPERFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.95. upper() <a href="#UPPERFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one string operand. This function converts
				the string to uppercase.
			</p></div><div class="sect2" id="VALFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.96. val() <a href="#VALFUNC" class="id_link">#</a></h3></div></div></div><p>
				Numeric value. If a string operand is given, it returns
				the converted numeric value. The value of a numeric operand
				is passed through as is.
				It takes one numeric or string operand.
			</p></div><div class="sect2" id="WIYFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.97. wiy() <a href="#WIYFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand. This function returns
				the week number of the operand as a decimal number,
				range 00 to 53, starting with the first Sunday as
				the first day of week 01.
			</p></div><div class="sect2" id="WIY1FUNC"><div class="titlepage"><div><div><h3 class="title">3.6.98. wiy1() <a href="#WIY1FUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand. This function returns
				the week number of the operand as a decimal number,
				range 00 to 53, starting with the first Monday as
				the first day of week 01.
			</p></div><div class="sect2" id="WIYOFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.99. wiyo() <a href="#WIYOFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes two operands, one datetime and one numeric.
				This function returns the week number of the first
				operand as a decimal number, range 00 to 53, starting
				with the specified day number as the first day.
				(0 = Sunday, 1 = Monday, 2 = Tuesday, ...)
			</p></div><div class="sect2" id="XORFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.100. xor() <a href="#XORFUNC" class="id_link">#</a></h3></div></div></div><p>
				Bitwise exclusive OR. It takes two or more numeric operands.
			</p></div><div class="sect2" id="YEARFUNC"><div class="titlepage"><div><div><h3 class="title">3.6.101. year() <a href="#YEARFUNC" class="id_link">#</a></h3></div></div></div><p>
				It takes one datetime operand. This function returns
				the year value of the operand as a numeric value.
			</p></div></div></div><div class="chapter" id="BREAKS"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Report breaks</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#GROUPINGDATA">4.1. Grouping data</a></span></dt><dt><span class="sect1"><a href="#REPORTBREAKS">4.2. Report breaks in OpenCReports</a></span></dt><dd><dl><dt><span class="sect2"><a href="#BREAKEXAMPLE">4.2.1. Example</a></span></dt></dl></dd></dl></div><div class="sect1" id="GROUPINGDATA"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.1. Grouping data <a href="#GROUPINGDATA" class="id_link">#</a></h2></div></div></div><p>
			<code class="literal">OpenCReports</code>, being a report generator,
			works on tabular data: the data consists of ordered (named)
			columns and ordered or unordered rows.
		</p><p>
			It is often necessary to group data by certain properties.
			Imagine a list of employees of a company, grouped by their
			departments, pay grade, or location of employment. A report
			may show the list of the employees with visual separation
			according to any of these properties.
		</p><p>
			Multiple groupings may be prioritized (nested):
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
						by department
					</p></li><li class="listitem"><p>
						by pay grade
					</p></li></ol></div><p>
			With the above, in each department, subgrouping would separate
			employees according to the pay grade in that department.
		</p><p>
			For this to work, the rows of data must be fed to
			the report generator in a certain order. For example,
			in SQL the ordering can be done by:
			</p><pre class="programlisting">SELECT ...
ORDER BY department,paygrade,employee;</pre><p>
		</p><p>
			This grouping of data is called a <span class="emphasis"><em>break</em></span>
			in a report generator.
		</p></div><div class="sect1" id="REPORTBREAKS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.2. Report breaks in OpenCReports <a href="#REPORTBREAKS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#BREAKEXAMPLE">4.2.1. Example</a></span></dt></dl></div><p>
			<a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> can reference data via the
			column names of a row. Arbitrary expressions may be used
			to watch for changes in the value of the expression data
			breaks. Breaks occurs on the boundary of changes in the
			expression value.
		</p><p>
			Prioritization (nesting) of breaks is done according their order
			of declaration. See the <a class="xref" href="#BREAKSNODE" title="2.13. Breaks">Breaks</a> and
			<a class="xref" href="#BREAKNODE" title="2.14. Break">Break node</a> nodes.
		</p><p>
			Visual separation is optionally helped with break headers
			and footers. See <a class="xref" href="#BREAKHEADERNODE" title="2.14.2.1. BreakHeader">BreakHeader</a> and
			<a class="xref" href="#BREAKFOOTERNODE" title="2.14.2.2. BreakFooter">BreakFooter</a>.
		</p><div class="sect2" id="BREAKEXAMPLE"><div class="titlepage"><div><div><h3 class="title">4.2.1. Example <a href="#BREAKEXAMPLE" class="id_link">#</a></h3></div></div></div><p>
				This XML part below shows a complete example of
				nested breaks based on the above mentioned real life
				example.
				</p><pre class="programlisting">&lt;Report&gt;

    &lt;Breaks&gt;

        &lt;Break&gt;

            &lt;BreakHeader&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;field value="query1.department" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakHeader&gt;

            &lt;BreakFooter&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal&gt;End of &lt;/literal&gt;
                        &lt;field value="query1.department" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakFooter&gt;

            &lt;BreakFields&gt;
                &lt;BreakField value="query1.department" /&gt;
            &lt;/BreakFields&gt;

        &lt;/Break&gt;

        &lt;Break&gt;

            &lt;BreakHeader&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal width="30" /&gt;
                        &lt;field value="query1.paygrade" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakHeader&gt;

            &lt;BreakFooter&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal width="30" /&gt;
                        &lt;literal&gt;End of &lt;/literal&gt;
                        &lt;field value="query1.paygrade" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/BreakFooter&gt;

            &lt;BreakFields&gt;
                &lt;BreakField value="query1.paygrade" /&gt;
            &lt;/BreakFields&gt;

        &lt;/Break&gt;

    &lt;/Breaks&gt;

    &lt;Detail&gt;

        &lt;FieldHeaders&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal width="60" /&gt;
                    &lt;literal&gt;Employee name&lt;/literal&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/FieldHeaders&gt;

        &lt;FieldDetails&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal width="60" /&gt;
                    &lt;field value="query1.employee" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/FieldDetails&gt;

    &lt;Detail&gt;

&lt;/Report&gt;</pre><p>
			</p><p>
				Assuming that <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a> is set to
				<code class="literal">points</code>, the indentation would be
				30 and 60 points for certain elements (see the empty
				<code class="literal">&lt;literal&gt;</code>s) and the result
				would look like this:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
							Before the first row on every page, the contents
							of <code class="literal">&lt;FieldHeaders&gt;</code> is
							printed.
						</p></li><li class="listitem"><p>
							Before the first row, the contents of
							<code class="literal">&lt;BreakHeader&gt;</code>
							is printed for every break declared in
							the <code class="literal">&lt;Report&gt;</code> in
							the order of their declaration.
						</p></li><li class="listitem"><p>
							The contents of
							<code class="literal">&lt;FieldDetails&gt;</code>
							is printed for the current row. Repeat until
							a value change is observed between
                            adjacent rows for a break's expression.
							In this case, the employees are printed
							in one block that are in the current paygrade
							category and working at the current department.
						</p></li><li class="listitem"><p>
							When a value change happened between
							adjacent rows for a break's expression,
							then this break and every break declared after
							it triggers. For every triggering breaks,
							their <code class="literal">&lt;BreakFooter&gt;</code>
							is printed in the reverse order of their
							declaration. This is done using the
							<span class="emphasis"><em>previous row</em></span>, so if any data
							used from the row or derived from it (e.g. a
							variable) and is to be displayed in the footer,
							it will be valid for the break period that just
							ended.
						</p></li><li class="listitem"><p>
							Before the new row, the contents of
							<code class="literal">&lt;BreakHeader&gt;</code>
							is printed for every break that just triggered.
							For example, the department's name is not
							printed if only the paygrade category changed
							in the same department from the one row to
							the next.
						</p></li><li class="listitem"><p>
							Repeat from step 3 until there are no more
							data rows.
						</p></li></ol></div><p>
			</p></div></div></div><div class="chapter" id="VARIABLES"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Report variables</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#USERVARINTRO">5.1. Introduction to report variables</a></span></dt><dt><span class="sect1"><a href="#EXPRVAR">5.2. Expression variables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#EXPRVARITERATIVE">5.2.1. Variables with iterative expressions</a></span></dt></dl></dd><dt><span class="sect1"><a href="#USERVARSIMPLE">5.3. Variable types for simple statistics</a></span></dt><dd><dl><dt><span class="sect2"><a href="#USERVARSUM">5.3.1. Summing a data series</a></span></dt><dt><span class="sect2"><a href="#USERVARCOUNT">5.3.2. Counting data in a series</a></span></dt><dt><span class="sect2"><a href="#USERVARAVG">5.3.3. Averaging data in a series</a></span></dt><dt><span class="sect2"><a href="#USERVARHIGHESTLOWEST">5.3.4. Highest and lowest values of a series</a></span></dt></dl></dd><dt><span class="sect1"><a href="#CUSTOMVAR">5.4. Custom variables</a></span></dt><dt><span class="sect1"><a href="#PRECALCVAR">5.5. Precalculated variables</a></span></dt><dt><span class="sect1"><a href="#USERVARRESET">5.6. Resetting a variable on break boundaries</a></span></dt></dl></div><div class="sect1" id="USERVARINTRO"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.1. Introduction to report variables <a href="#USERVARINTRO" class="id_link">#</a></h2></div></div></div><p>
			Variables are named aliases for
			<a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
		</p><p>
			In <code class="literal">OpenCReports</code>, there are a few
			variable types:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
						freeform expression variables
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						pre-defined numeric operations for
						simple statistics, like summing, counting,
						or averaging a data series, or finding the
						highest or lowest values in a data series
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						custom variables where the data type and
						the operation on the data is completely
						user-defined
					</p></li></ul></div><p>
		</p><p>
			Variables may be reset at break boundaries.
			See <a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a> and the <a class="xref" href="#RESETONBREAK" title="2.12.1.5. Reset on break">Reset on break attribute</a>.
		</p></div><div class="sect1" id="EXPRVAR"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.2. Expression variables <a href="#EXPRVAR" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#EXPRVARITERATIVE">5.2.1. Variables with iterative expressions</a></span></dt></dl></div><p>
			For basic expressions, the value of a variable is
			calculated from the aliased expression using the current
			row of data from the data source. This can be thought of
			as a kind of shortcut. A variable calculates the
			value of a long or often used expression, and the variable
			result may in turn be used in other expressions.
			This can save both typing (in the report XML) and report
			execution time during the report generation.
		</p><p>
			Here's a complete example of using a variable:
			</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="query1.field1 + query2.field2"
            type="expression" /&gt;
    &lt;/Variables&gt;

    &lt;Detail&gt;
        &lt;FieldHeaders&gt;
            &lt;literal value="'My variable'" /&gt;
        &lt;/FieldHeaders&gt;

        &lt;FieldDetails&gt;
            &lt;field value="v.var1" /&gt;
        &lt;/FieldDetails&gt;
    &lt;/Detail&gt;
&lt;/Report&gt;</pre><p>
		</p><p>
			Note, that in this simple example, there is
			no difference if the variable is used in
			the <code class="literal">&lt;field&gt;</code> or the
			<code class="literal">query1.field1 + query2.field2</code>
			expression. The efficiency of not computing
			the variable again for the same data row can be
			observed when the variable is used multiple times
			and the report processes a huge data set.
		</p><div class="sect2" id="EXPRVARITERATIVE"><div class="titlepage"><div><div><h3 class="title">5.2.1. Variables with iterative expressions <a href="#EXPRVARITERATIVE" class="id_link">#</a></h3></div></div></div><p>
				An expression may be iterative,  where the new value
				is derived from the previous value of itself.
				See <a class="xref" href="#EXPRSELF" title="3.4.3.2.7. Expression self reference">Expression self reference</a>.
			</p><p>
				Here's a complete example of using a variable:
				</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="r.self + query1.field1 + query2.field2"
            type="expression" /&gt;
    &lt;/Variables&gt;

    &lt;Detail&gt;
        &lt;FieldHeaders&gt;
            &lt;literal value="'My variable'" /&gt;
        &lt;/FieldHeaders&gt;

        &lt;FieldDetails&gt;
            &lt;field value="v.var1" /&gt;
        &lt;/FieldDetails&gt;
    &lt;/Detail&gt;
&lt;/Report&gt;</pre><p>
			</p><p>
				The trick is to use the <code class="literal">r.self</code>
				internal variable.
			</p><p>
				Please note, that the above example will likely
				not work as is, because for the first row,
				<span class="emphasis"><em>there is no previous row</em></span>.
				But there is a trick to avoid such problems,
				namely using the trinary operator (or its equivalent,
				the <code class="literal">iif()</code> function) and the
				<code class="literal">rownum()</code> to perform only safe
				computations. (Note that the <code class="literal">value=...</code>
				part below is a single line.)
				</p><pre class="programlisting">&lt;Variable&gt;
    ...
    value="rownum() == 1 ?
           query1.field1 + query2.field2 :
           r.self + query1.field1 + query2.field2"
    ...
&lt;/Variable&gt;</pre><p>
			</p><p>
				This example shows the correct operation of
				an iterative expression. For the first row,
				set a known good value. For every subsequent rows,
				the previous row value may be used for deriving
				the new value from.
			</p></div></div><div class="sect1" id="USERVARSIMPLE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.3. Variable types for simple statistics <a href="#USERVARSIMPLE" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#USERVARSUM">5.3.1. Summing a data series</a></span></dt><dt><span class="sect2"><a href="#USERVARCOUNT">5.3.2. Counting data in a series</a></span></dt><dt><span class="sect2"><a href="#USERVARAVG">5.3.3. Averaging data in a series</a></span></dt><dt><span class="sect2"><a href="#USERVARHIGHESTLOWEST">5.3.4. Highest and lowest values of a series</a></span></dt></dl></div><p>
			There are pre-defined variable types for
			performing simple statistic calculations.
			All of them (except data series counting)
			operate on numeric values.
		</p><div class="sect2" id="USERVARSUM"><div class="titlepage"><div><div><h3 class="title">5.3.1. Summing a data series <a href="#USERVARSUM" class="id_link">#</a></h3></div></div></div><p>
				Summing is done via the <code class="literal">sum</code>
				variable type. For example, the above spelled
				out example can be written as:
				</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="query1.field1 + query2.field2"
            type="sum" /&gt;
    &lt;/Variables&gt;

    &lt;Detail&gt;
        &lt;FieldHeaders&gt;
            &lt;literal value="'My variable'" /&gt;
        &lt;/FieldHeaders&gt;

        &lt;FieldDetails&gt;
            &lt;field value="v.var1" /&gt;
        &lt;/FieldDetails&gt;
    &lt;/Detail&gt;
&lt;/Report&gt;</pre><p>
			</p><p>
				The iterative nature is implicit
				for the variable's result.
			</p></div><div class="sect2" id="USERVARCOUNT"><div class="titlepage"><div><div><h3 class="title">5.3.2. Counting data in a series <a href="#USERVARCOUNT" class="id_link">#</a></h3></div></div></div><p>
				Counting is done via the <code class="literal">count</code>
				and <code class="literal">countall</code>
				variable types. The difference between the two
				is that plain <code class="literal">count</code>
				does not count NULL data, while
				<code class="literal">countall</code> does.
				It's equivalent to the difference between
				<code class="literal">COUNT(query1.field1)</code> and
				<code class="literal">COUNT(*)</code>
				<code class="literal">SQL</code>.
				(The former doesn't count NULL values, the latter does.)
				</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="query1.field1"
            type="count" /&gt;

        &lt;Variable
            name="var2"
            value="query1.field1"
            type="countall" /&gt;
    &lt;/Variables&gt;
&lt;/Report&gt;</pre><p>
			</p></div><div class="sect2" id="USERVARAVG"><div class="titlepage"><div><div><h3 class="title">5.3.3. Averaging data in a series <a href="#USERVARAVG" class="id_link">#</a></h3></div></div></div><p>
				Averaging uses two running expressions
				behind the scenes. One is the
				<code class="literal">sum</code> of
				data, the other is the <code class="literal">count</code>
				of data. The sum is divided by the count.
			</p><p>
				Here, two different calculation is possible
				again, depending on which counting mething is used,
				see above. NULL data contributes 0 to the sum,
				but the count (the denominator in the division)
				may differ. The result depends on this detail.
			</p><p>
				For this reason, <code class="literal">average</code> and
				<code class="literal">averageall</code> both exist.
				</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="query1.field1"
            type="average" /&gt;

        &lt;Variable
            name="var2"
            value="query1.field1"
            type="averageall" /&gt;
    &lt;/Variables&gt;
&lt;/Report&gt;</pre><p>
			</p></div><div class="sect2" id="USERVARHIGHESTLOWEST"><div class="titlepage"><div><div><h3 class="title">5.3.4. Highest and lowest values of a series <a href="#USERVARHIGHESTLOWEST" class="id_link">#</a></h3></div></div></div><p>
				Finding the highest and lowest values in a
				data series is done by the <code class="literal">highest</code>
				and the <code class="literal">lowest</code> variable types.
				</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="query1.field1"
            type="highest" /&gt;

        &lt;Variable
            name="var2"
            value="query1.field1"
            type="lowest" /&gt;
    &lt;/Variables&gt;
&lt;/Report&gt;</pre><p>
			</p><p>
				NULL values don't contribute to the results
				of either variable types, so in an all-NULL
				series, each variable will give a NULL result,
				i.e. empty when displayed.
			</p></div></div><div class="sect1" id="CUSTOMVAR"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.4. Custom variables <a href="#CUSTOMVAR" class="id_link">#</a></h2></div></div></div><p>
			As seen in <a class="xref" href="#EXPRVAR" title="5.2. Expression variables">Expression variables</a> above,
			variables are not mysterious. They can be
			iterative or non-iterative and their operation
			can be spelled out. On the other hand, the
			pre-defined variables for doing simple statistics
			may be limiting. Maybe we need an iteratively
			calculated value that uses a different type than
			<code class="literal">number</code>. This is where
			<code class="literal">custom</code> variables may be
			useful.
		</p><p>
			For a <code class="literal">custom</code> variable, all
			details can be freely defined:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
						the base type: <code class="literal">numeric</code>,
						<code class="literal">string</code> or
						<code class="literal">datetime</code>;
						<code class="literal">number</code> is also
						accepted as an alias for
						<code class="literal">numeric</code>
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						the base expression
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						two intermediary expressions that both may use
						the base expression's result, and the second
						intermediary may also use the first one's result
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						the result expression that may use all three
						expressions' results
					</p></li></ul></div><p>
		</p><p>
			For example, the <code class="literal">average</code> variable
			works this way behind the scenes as written below.
			</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="averagevar1"
            type="custom"
            baseexpr="query1.field1"
            intermedexpr="(rownum() == 1 ? 0 : r.self) +
                          (isnull(r.baseexpr) ?
                              0 : r.baseexpr)"
            intermed2expr="r.self +
                           (isnull(r.baseexpr) ? 0 : 1)"
            resultexpr="r.intermedexpr / r.intermed2expr"
            /&gt;
    &lt;/Variables&gt;
&lt;/Report&gt;</pre><p>
		</p></div><div class="sect1" id="PRECALCVAR"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.5. Precalculated variables <a href="#PRECALCVAR" class="id_link">#</a></h2></div></div></div><p>
			By default, variables produce results that are
			valid for the data rows they are derived from.
			Iterative variables variable produce results
			that are valid for the current row and preceding
			rows.
		</p><p>
			But usually, we are not interested in the
			<span class="emphasis"><em>running average</em></span>, only
			in the average of the whole data series.
		</p><p>
			This is where the <span class="emphasis"><em>precalculated</em></span>
			variables come in.
		</p><p>
			Setting a variable to be precalculated is done
			by the <code class="literal">precalculate="yes"</code>
			attribute. <code class="literal">delayed="yes"</code> is also
			accepted as an alias. Such a variable (or, actually,
			its value) can be displayed in e.g.
			<code class="literal">&lt;ReportHeader&gt;</code>
			which is shown upfront before any report details to
			inform the reader without looking at the last page.
			</p><pre class="programlisting">&lt;Report&gt;
    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="query1.field1"
            type="average"
            precalculate="yes" /&gt;
    &lt;/Variables&gt;

    &lt;ReportHeader&gt;
        &lt;Output&gt;
            &lt;field value="v.var1"&gt;
        &lt;/Output&gt;
    &lt;/ReportHeader&gt;
&lt;/Report&gt;</pre><p>
		</p><p>
			See also <a class="xref" href="#PRECALCVARATTR" title="2.12.1.6. Precalculate (delayed)">Precalculate attribute</a>.
		</p></div><div class="sect1" id="USERVARRESET"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.6. Resetting a variable on break boundaries <a href="#USERVARRESET" class="id_link">#</a></h2></div></div></div><p>
			It may also be useful to use a regular or precalculated
			variable that only considers data rows in break periods.
			For example printing a running average for detail rows
			in breaks, or printing the total average calculated for
			a break period in the header for that period.
		</p><p>
			For this purpose, variables may be reset on break boundaries.
			</p><pre class="programlisting">&lt;Report&gt;
    &lt;Breaks&gt;
        &lt;Break name="break1" ... &gt;
            &lt;BreaksHeader&gt;
                &lt;Output&gt;
                    &lt;field value="v.var1" /&gt;
                &lt;/Output&gt;
            &lt;/BreaksHeader&gt;
            &lt;BreaksFields&gt;
                &lt;BreaksField value="query1.field2" /&gt;
            &lt;/BreaksFields&gt;
        &lt;/Break&gt;
    &lt;/Breaks&gt;

    &lt;Variables&gt;
        &lt;Variable
            name="var1"
            value="query1.field1"
            type="average"
            precalculate="yes"
            resetonbreak="'break1'" /&gt;
    &lt;/Variables&gt;
    ...
&lt;/Report&gt;</pre><p>
		</p><p>
			To demistify such a variable, here is the
			equivalent of the above using a
			<code class="literal">custom</code> variable.
			The value returned by the <a class="xref" href="#BRROWNUMFUNC" title="3.6.7. brrownum()">Break row number function</a>
			automatically resets at every break boundary, so it
			can be used as below.
			</p><pre class="programlisting">&lt;Variables&gt;
    &lt;Variable
        name="var1"
        type="custom"
        baseexpr="query1.field1"
        intermedexpr="(brrownum('break1') == 1 ? 0 : r.self) +
                      (isnull(r.baseexpr) ?
                          0 : r.baseexpr)"
        intermed2expr="r.self +
                       (isnull(r.baseexpr) ? 0 : 1)"
        resultexpr="r.intermedexpr / r.intermed2expr"
        /&gt;
&lt;/Variables&gt;</pre><p>
		</p></div></div><div class="chapter" id="FORMATTING"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Formatting</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#FORMATTINGFUNCS">6.1. Formatting functions</a></span></dt><dt><span class="sect1"><a href="#FORMATSTRINGS">6.2. Format strings</a></span></dt><dt><span class="sect1"><a href="#LEGACYFORMATSTRINGS">6.3. Legacy format strings</a></span></dt><dd><dl><dt><span class="sect2"><a href="#LEGACYFORMATSTRINGSTRING">6.3.1. Format string for strings</a></span></dt><dt><span class="sect2"><a href="#LEGACYFORMATSTRINGNUM">6.3.2. Format string for numeric values</a></span></dt><dt><span class="sect2"><a href="#LEGACYFORMATSTRINGDATETIME">6.3.3. Format string for datetime values</a></span></dt></dl></dd><dt><span class="sect1"><a href="#NEWFORMATSTRINGS">6.4. New style format strings</a></span></dt><dd><dl><dt><span class="sect2"><a href="#NEWFORMATSTRINGSSTRING">6.4.1. New style format string for strings</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSNUM">6.4.2. New style format string for numeric data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSMONEY">6.4.3. New style format string for monetary data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSDATETIME">6.4.4. New style format string for datetime values</a></span></dt></dl></dd><dt><span class="sect1"><a href="#NEWFORMATSTRINGSGEN2">6.5. Second generation new style format strings</a></span></dt><dd><dl><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2STRING">6.5.1. 2nd gen new style format string for strings</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2NUM">6.5.2. 2nd gen new style format string for numeric data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2MONEY">6.5.3. 2nd gen new style format string for monetary data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2DATETIME">6.5.4. 2nd gen new style format string for datetime values</a></span></dt><dt><span class="sect2"><a href="#SWISSARMYKNIFE">6.5.5. The swiss army knife of formatting</a></span></dt></dl></dd></dl></div><div class="sect1" id="FORMATTINGFUNCS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.1. Formatting functions <a href="#FORMATTINGFUNCS" class="id_link">#</a></h2></div></div></div><p>
			Formatting data can be done via the
			<a class="xref" href="#FORMATFUNC" title="3.6.32. format()">format function</a>, the
			<a class="xref" href="#PRINTFFUNC" title="3.6.66. printf()">printf function</a> and the
			<a class="xref" href="#FORMATATTR" title="2.17.1.3. Format string">Text element format attribute</a>.
			After formatting, regardless of the data type
			that was formatted, the type of the result value
			is string. This string can be displayed in the
			report output or processed further as needed.
		</p></div><div class="sect1" id="FORMATSTRINGS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.2. Format strings <a href="#FORMATSTRINGS" class="id_link">#</a></h2></div></div></div><p>
			OpenCReports supports the same set of
			format strings as RLIB, with extensions.
			RLIB and OpenCReports support:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
						legacy format strings for strings,
						numbers and datetime values
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						"new style" format strings with <code class="literal">!</code>
						prefix
					</p></li></ul></div><p>
		</p><p>
			OpenCReports also supports a 2nd generation
			new style format strings with a prefix and a
			pair of brackets (<code class="literal">{}</code>) that
			embed the format strings.
		</p></div><div class="sect1" id="LEGACYFORMATSTRINGS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.3. Legacy format strings <a href="#LEGACYFORMATSTRINGS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#LEGACYFORMATSTRINGSTRING">6.3.1. Format string for strings</a></span></dt><dt><span class="sect2"><a href="#LEGACYFORMATSTRINGNUM">6.3.2. Format string for numeric values</a></span></dt><dt><span class="sect2"><a href="#LEGACYFORMATSTRINGDATETIME">6.3.3. Format string for datetime values</a></span></dt></dl></div><p>
			Legacy format strings are like in C, but not always
			identical.
		</p><div class="sect2" id="LEGACYFORMATSTRINGSTRING"><div class="titlepage"><div><div><h3 class="title">6.3.1. Format string for strings <a href="#LEGACYFORMATSTRINGSTRING" class="id_link">#</a></h3></div></div></div><p>
				To print a string, the <code class="literal">%s</code>
				format string can be used. Examples for
				<a class="xref" href="#FORMATATTR" title="2.17.1.3. Format string">Text element format attribute</a>:
				</p><pre class="programlisting">&lt;field value="query1.field1"
       format="'%s'" &gt;

field value="query1.field1"
       format="'Look, there is a %s there!'" &gt;</pre><p>
			</p><p>
				Example expressions for <a class="xref" href="#FORMATFUNC" title="3.6.32. format()">format function</a>:
				</p><pre class="programlisting">format(query1.field1, '%s')
format(query1.field1, 'Look, there is a %s there!')</pre><p>
			</p><p>
				Example expressions for <a class="xref" href="#PRINTFFUNC" title="3.6.66. printf()">printf function</a>:
				</p><pre class="programlisting">printf('%s, 'query1.field1')
format('Look, there is a %s there!', query1.field1)</pre><p>
			</p><p>
				Supplementary format strings flags are supported. See
				<a class="ulink" href="https://man7.org/linux/man-pages/man3/printf.3.html" target="_top">printf(3)</a>
			</p></div><div class="sect2" id="LEGACYFORMATSTRINGNUM"><div class="titlepage"><div><div><h3 class="title">6.3.2. Format string for numeric values <a href="#LEGACYFORMATSTRINGNUM" class="id_link">#</a></h3></div></div></div><p>
				To print a number, the <code class="literal">%d</code>
				format string can be used. As opposed to the
				C <code class="literal">printf</code> format specifier
				where <code class="literal">%d</code> is used for integers,
				this is used for printing fractions, too.
				Examples for
				<a class="xref" href="#FORMATATTR" title="2.17.1.3. Format string">Text element format attribute</a>:
				</p><pre class="programlisting">&lt;field value="query1.field1"
       format="'%.3d'" &gt;

field value="query1.field1"
       format="'You have %.2d apples.'" &gt;</pre><p>
			</p><p>
				The same format string can be used for the
				the <a class="xref" href="#FORMATFUNC" title="3.6.32. format()">format function</a> and the
				<a class="xref" href="#PRINTFFUNC" title="3.6.66. printf()">printf function</a>, just like in
				the previous examples for strings.
			</p><p>
				Supplementary format strings flags are supported. See
				<a class="ulink" href="https://man7.org/linux/man-pages/man3/printf.3.html" target="_top">printf(3)</a>
			</p></div><div class="sect2" id="LEGACYFORMATSTRINGDATETIME"><div class="titlepage"><div><div><h3 class="title">6.3.3. Format string for datetime values <a href="#LEGACYFORMATSTRINGDATETIME" class="id_link">#</a></h3></div></div></div><p>
				RLIB approximated <code class="literal">strftime()</code>
				when printing a datetime value. OpenCReports
				<span class="emphasis"><em>uses</em></span> <code class="literal">strftime()</code>.
				See <a class="ulink" href="https://man7.org/linux/man-pages/man3/strftime.3.html" target="_top">strftime(3)</a>
				for the complete set of format string flags.
			</p><p>
				When a datetime field didn't have an explicit format string,
				RLIB used the US date format to print the datetime value.
				In this case, OpenCReports uses the locale specific date format
				if the report has a locale set.
			</p></div></div><div class="sect1" id="NEWFORMATSTRINGS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.4. New style format strings <a href="#NEWFORMATSTRINGS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#NEWFORMATSTRINGSSTRING">6.4.1. New style format string for strings</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSNUM">6.4.2. New style format string for numeric data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSMONEY">6.4.3. New style format string for monetary data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSDATETIME">6.4.4. New style format string for datetime values</a></span></dt></dl></div><p>
			RLIB supported "new style" format strings that allowed
			formatting numeric data as monetary values and allowed
			to disambiguate between format strings used for different
			data types. This was needed because some format flags
			are used in both <code class="literal">printf()</code>,
			<code class="literal">strfmon()</code> and <code class="literal">strftime()</code>.
		</p><div class="sect2" id="NEWFORMATSTRINGSSTRING"><div class="titlepage"><div><div><h3 class="title">6.4.1. New style format string for strings <a href="#NEWFORMATSTRINGSSTRING" class="id_link">#</a></h3></div></div></div><p>
				This is an extension over RLIB, which didn't have
				such a notion. In OpenCReports, the new style flag
				is prefixed with <code class="literal">!&amp;</code>
				</p><pre class="programlisting">&lt;field ... format="'!&amp;%s'" ... /&gt;</pre><p>
			</p></div><div class="sect2" id="NEWFORMATSTRINGSNUM"><div class="titlepage"><div><div><h3 class="title">6.4.2. New style format string for numeric data <a href="#NEWFORMATSTRINGSNUM" class="id_link">#</a></h3></div></div></div><p>
				The new style flag is prefixed with <code class="literal">!#</code>
				</p><pre class="programlisting">&lt;field ... format="'!#%5.3d'" ... /&gt;</pre><p>
			</p></div><div class="sect2" id="NEWFORMATSTRINGSMONEY"><div class="titlepage"><div><div><h3 class="title">6.4.3. New style format string for monetary data <a href="#NEWFORMATSTRINGSMONEY" class="id_link">#</a></h3></div></div></div><p>
				The new style flag is prefixed with <code class="literal">!$</code>
				</p><pre class="programlisting">&lt;field ... format="'!$%=*#150n'" ... /&gt;</pre><p>
			</p><p>
				Formatting monetary values uses <code class="literal">strfmon()</code>.
				See
				<a class="ulink" href="https://man7.org/linux/man-pages/man3/strfmon.3.html" target="_top">strfmon(3)</a>
			</p><p>
				To print the correct currency name, the locale must be
				set for the report. Only one locale can be set, so
				a single currency name will be used for every value
				using monetary formatting.
			</p></div><div class="sect2" id="NEWFORMATSTRINGSDATETIME"><div class="titlepage"><div><div><h3 class="title">6.4.4. New style format string for datetime values <a href="#NEWFORMATSTRINGSDATETIME" class="id_link">#</a></h3></div></div></div><p>
				The new style flag is prefixed with <code class="literal">!@</code>
				Formatting a datetime value uses <code class="literal">strftime()</code>.
				</p><pre class="programlisting">&lt;field ... format="'!@%c'" ... /&gt;

&lt;field ... format="'!@%Y-%m-%d'" ... /&gt;</pre><p>
			</p></div></div><div class="sect1" id="NEWFORMATSTRINGSGEN2"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.5. Second generation new style format strings <a href="#NEWFORMATSTRINGSGEN2" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2STRING">6.5.1. 2nd gen new style format string for strings</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2NUM">6.5.2. 2nd gen new style format string for numeric data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2MONEY">6.5.3. 2nd gen new style format string for monetary data</a></span></dt><dt><span class="sect2"><a href="#NEWFORMATSTRINGSGEN2DATETIME">6.5.4. 2nd gen new style format string for datetime values</a></span></dt><dt><span class="sect2"><a href="#SWISSARMYKNIFE">6.5.5. The swiss army knife of formatting</a></span></dt></dl></div><p>
			This format string style builds upon the original
			new style format strings, with the addition of brackets
			that embed the underlying format strings.
		</p><div class="sect2" id="NEWFORMATSTRINGSGEN2STRING"><div class="titlepage"><div><div><h3 class="title">6.5.1. 2nd gen new style format string for strings <a href="#NEWFORMATSTRINGSGEN2STRING" class="id_link">#</a></h3></div></div></div><p>
				The format string format is <code class="literal">!&amp;{...}</code>
				</p><pre class="programlisting">&lt;field ... format="'!&amp;{%s}'" ... /&gt;</pre><p>
			</p></div><div class="sect2" id="NEWFORMATSTRINGSGEN2NUM"><div class="titlepage"><div><div><h3 class="title">6.5.2. 2nd gen new style format string for numeric data <a href="#NEWFORMATSTRINGSGEN2NUM" class="id_link">#</a></h3></div></div></div><p>
				The format string format is <code class="literal">!#{...}</code>
				</p><pre class="programlisting">&lt;field ... format="'!#{%5.3d}'" ... /&gt;</pre><p>
			</p></div><div class="sect2" id="NEWFORMATSTRINGSGEN2MONEY"><div class="titlepage"><div><div><h3 class="title">6.5.3. 2nd gen new style format string for monetary data <a href="#NEWFORMATSTRINGSGEN2MONEY" class="id_link">#</a></h3></div></div></div><p>
				The format string format is <code class="literal">!${...}</code>
				</p><pre class="programlisting">&lt;field ... format="'!${%=*#150n}'" ... /&gt;</pre><p>
			</p><p>
				Formatting monetary values uses <code class="literal">strfmon()</code>.
				See
				<a class="ulink" href="https://man7.org/linux/man-pages/man3/strfmon.3.html" target="_top">strfmon(3)</a>
			</p><p>
				To print the correct currency name, the locale must be
				set for the report. Only one locale can be set, so
				a single currency name will be used for every value
				using monetary formatting.
			</p></div><div class="sect2" id="NEWFORMATSTRINGSGEN2DATETIME"><div class="titlepage"><div><div><h3 class="title">6.5.4. 2nd gen new style format string for datetime values <a href="#NEWFORMATSTRINGSGEN2DATETIME" class="id_link">#</a></h3></div></div></div><p>
				The format string format is <code class="literal">!@{...}</code>
				Formatting a datetime value uses <code class="literal">strftime()</code>.
				</p><pre class="programlisting">&lt;field ... format="'!@{%c}'" ... /&gt;

&lt;field ... format="'!@{%Y-%m-%d}'" ... /&gt;</pre><p>
			</p></div><div class="sect2" id="SWISSARMYKNIFE"><div class="titlepage"><div><div><h3 class="title">6.5.5. The swiss army knife of formatting <a href="#SWISSARMYKNIFE" class="id_link">#</a></h3></div></div></div><p>
				The <a class="xref" href="#PRINTFFUNC" title="3.6.66. printf()">printf function</a> is the most versatile
				formatting function in OpenCReports. It does not exist
				in RLIB. Using the second generation format strings
				which makes them completely disambiguous, the
				<code class="literal">printf()</code> function in OpenCReports
				allows formatting every data type into a common result
				string. Example:
				</p><pre class="programlisting">printf('You had %d %s on !@{%Y-%m-%d} '
      'and %d %s on !@{%Y-%m-%d} in your pocket.',
      6, 'apples', stodt('2022-05-01'),
      2, 'oranges', stodt('2022-05-02'))</pre><p>
				The result is:
				</p><pre class="programlisting">You had 6 apples on 2022-05-01 and 2 oranges on 2022-05-02 in
your pocket.</pre><p>
			</p></div></div></div><div class="chapter" id="C-API-REFERENCE"><div class="titlepage"><div><div><h1 class="title">Chapter 7. C language API reference</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#C_HEADER">7.1. Header file</a></span></dt><dt><span class="sect1"><a href="#HIGHLEVELAPI">7.2. High level C API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#REPHNDINIT">7.2.1. Report handler initialization</a></span></dt><dt><span class="sect2"><a href="#LOADREPXML">7.2.2. Load a report XML description</a></span></dt><dt><span class="sect2"><a href="#PARSEXMLFROMBUF">7.2.3. Parse report XML description from a buffer</a></span></dt><dt><span class="sect2"><a href="#SETOUTPFMT">7.2.4. Set report output format</a></span></dt><dt><span class="sect2"><a href="#SETOUTPPARAM">7.2.5. Set report output parameter</a></span></dt><dt><span class="sect2"><a href="#RUNREPORT">7.2.6. Run the report</a></span></dt><dt><span class="sect2"><a href="#DUMPREPORT">7.2.7. Dump report result</a></span></dt><dt><span class="sect2"><a href="#GETRESULT">7.2.8. Get report result</a></span></dt><dt><span class="sect2"><a href="#GETCONTENTTYPE">7.2.9. Get report content type</a></span></dt><dt><span class="sect2"><a href="#REPHNDDESTROY">7.2.10. Report handler destruction</a></span></dt><dt><span class="sect2"><a href="#GETLIBVER">7.2.11. Get library version</a></span></dt></dl></dd><dt><span class="sect1"><a href="#LOWLEVELAPI">7.3. Low level C API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#NUMERICTUNING">7.3.1. Numeric behavior related functions</a></span></dt><dt><span class="sect2"><a href="#LOCALEFUNCS">7.3.2. Locale related functions</a></span></dt><dt><span class="sect2"><a href="#DSQFUNCS">7.3.3. Data source and query related functions</a></span></dt><dt><span class="sect2"><a href="#EXPRFUNC">7.3.4. Expression related functions</a></span></dt><dt><span class="sect2"><a href="#RESULTFUNCS">7.3.5. Column data or expression result related functions</a></span></dt><dt><span class="sect2"><a href="#USERVARRELATEDFUNCS">7.3.6. Variable related functions</a></span></dt><dt><span class="sect2"><a href="#BREAKRELATEDFUNCS">7.3.7. Break related functions</a></span></dt><dt><span class="sect2"><a href="#USERFUNCFUNCS">7.3.8. Function related functions</a></span></dt><dt><span class="sect2"><a href="#PARTANDREPORTFUNCS">7.3.9. Report part and report related functions</a></span></dt><dt><span class="sect2"><a href="#LAYOUTFUNCS">7.3.10. Layout related functions</a></span></dt><dt><span class="sect2"><a href="#CALLBACKFUNCS">7.3.11. Callback related functions</a></span></dt><dt><span class="sect2"><a href="#ENVFUNCS">7.3.12. Environment related functions</a></span></dt><dt><span class="sect2"><a href="#FILEFUNCS">7.3.13. File handling related functions</a></span></dt><dt><span class="sect2"><a href="#COLORFUNCS">7.3.14. Color related functions</a></span></dt><dt><span class="sect2"><a href="#PAPERFUNCS">7.3.15. Paper size related functions</a></span></dt><dt><span class="sect2"><a href="#MEMORYFUNCS">7.3.16. Memory handling related functions</a></span></dt><dt><span class="sect2"><a href="#LISTFUNCS">7.3.17. List related functions</a></span></dt><dt><span class="sect2"><a href="#STRINGFUNCS">7.3.18. String related functions</a></span></dt></dl></dd></dl></div><div class="sect1" id="C_HEADER"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.1. Header file <a href="#C_HEADER" class="id_link">#</a></h2></div></div></div><p>
			For using OpenCReports, this single header must be used:
			</p><pre class="programlisting">#include &lt;opencreport.h&gt;</pre><p>
		</p></div><div class="sect1" id="HIGHLEVELAPI"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.2. High level C API <a href="#HIGHLEVELAPI" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#REPHNDINIT">7.2.1. Report handler initialization</a></span></dt><dt><span class="sect2"><a href="#LOADREPXML">7.2.2. Load a report XML description</a></span></dt><dt><span class="sect2"><a href="#PARSEXMLFROMBUF">7.2.3. Parse report XML description from a buffer</a></span></dt><dt><span class="sect2"><a href="#SETOUTPFMT">7.2.4. Set report output format</a></span></dt><dt><span class="sect2"><a href="#SETOUTPPARAM">7.2.5. Set report output parameter</a></span></dt><dt><span class="sect2"><a href="#RUNREPORT">7.2.6. Run the report</a></span></dt><dt><span class="sect2"><a href="#DUMPREPORT">7.2.7. Dump report result</a></span></dt><dt><span class="sect2"><a href="#GETRESULT">7.2.8. Get report result</a></span></dt><dt><span class="sect2"><a href="#GETCONTENTTYPE">7.2.9. Get report content type</a></span></dt><dt><span class="sect2"><a href="#REPHNDDESTROY">7.2.10. Report handler destruction</a></span></dt><dt><span class="sect2"><a href="#GETLIBVER">7.2.11. Get library version</a></span></dt></dl></div><p>
			Example code using the high level C API where everything
			concerning the report (including the data source)
			is described in the report XML:
			</p><pre class="programlisting">#include &lt;opencreport.h&gt;

int main(void) {
    opencreport *o = ocrpt_init();

    if (!ocrpt_parse_xml(o, "report.xml")) {
        printf("XML parse error\n");
        ocrpt_free(o);
        return 1;
    }

    ocrpt_set_output_format(o, OCRPT_OUTPUT_PDF);
    ocrpt_execute(o);
    ocrpt_spool(o);
    ocrpt_free(o);
    return 0;
}</pre><p>
		</p><p>
			The above code will load <code class="literal">report.xml</code>,
			set the output format to PDF, runs the report and prints
			its output on <code class="literal">stdout</code>.
		</p><div class="sect2" id="REPHNDINIT"><div class="titlepage"><div><div><h3 class="title">7.2.1. Report handler initialization <a href="#REPHNDINIT" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">opencreport *
ocrpt_init(void);</pre><p>
			</p></div><div class="sect2" id="LOADREPXML"><div class="titlepage"><div><div><h3 class="title">7.2.2. Load a report XML description <a href="#LOADREPXML" class="id_link">#</a></h3></div></div></div><p>
				This function loads the specified XML file
				into the report handler. It returns
				<code class="literal">true</code> for success,
				<code class="literal">false</code> for failure.
				</p><pre class="programlisting">bool
ocrpt_parse_xml(opencreport *o,
                const char *filename);</pre><p>
			</p></div><div class="sect2" id="PARSEXMLFROMBUF"><div class="titlepage"><div><div><h3 class="title">7.2.3. Parse report XML description from a buffer <a href="#PARSEXMLFROMBUF" class="id_link">#</a></h3></div></div></div><p>
				This function parses the buffer as if it contained
				XML contents and loads the details into the report handler.
				It returns <code class="literal">true</code> for success,
				<code class="literal">false</code> for failure.
				</p><pre class="programlisting">bool
ocrpt_parse_xml_from_buffer(opencreport *o,
                            const char *buffer,
                            size_t size);</pre><p>
			</p></div><div class="sect2" id="SETOUTPFMT"><div class="titlepage"><div><div><h3 class="title">7.2.4. Set report output format <a href="#SETOUTPFMT" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">enum ocrpt_format_type {
    OCRPT_OUTPUT_UNSET,
    OCRPT_OUTPUT_PDF,
    OCRPT_OUTPUT_HTML,
    OCRPT_OUTPUT_TXT,
    OCRPT_OUTPUT_CSV,
    OCRPT_OUTPUT_XML
};
typedef enum ocrpt_format_type ocrpt_format_type;

void
ocrpt_set_output_format(opencreport *o,
                        ocrpt_format_type format);</pre><p>
			</p></div><div class="sect2" id="SETOUTPPARAM"><div class="titlepage"><div><div><h3 class="title">7.2.5. Set report output parameter <a href="#SETOUTPPARAM" class="id_link">#</a></h3></div></div></div><p>
				Set output parameters for the report.
				</p><pre class="programlisting">void
ocrpt_set_output_parameter(opencreport *o,
                           const char *param,
                           const char *value);</pre><p>
			</p><p>
				Possible parameters for the HTML output driver:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">document_root</code> sets
							the document root for trimming path prefix
							from image paths.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">meta</code> extends
							the default
							<code class="literal">&lt;meta charset="utf-8"&gt;</code>.
                            <code class="literal">literal</code> (see
							The passed-in string value may contain
							the whole <code class="literal">&lt;meta ...&gt;</code>,
							in which case the inner parameters are
							used only. The <code class="literal">charset</code>
							specification is ignored. Only the rest is used.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">suppress_head</code> suppresses the default
							<code class="literal">&lt;head&gt; ... &lt;/head&gt;</code> section.
							Possible values to enable suppressing the
							default <code class="literal">&lt;head&gt; ... &lt;/head&gt;</code>
							are <code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
							Be aware, that the default section contains
							importand CSS stylesheet settings that are
							needed for the correct layout.
						</p></li></ul></div><p>
			</p><p>
				Possible parameters for the CSV output driver:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">csv_filename</code> sets the file
							name for <code class="literal">Content-Disposition</code>
							in the HTTP metadata returned by
							<code class="literal">ocrpt_get_content_type()</code>.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">csv_as_text</code> sets the MIME type
							for <code class="literal">Content-Type</code>
							in the HTTP metadata returned by
							<code class="literal">ocrpt_get_content_type()</code>
							to <code class="literal">text/plain</code> when enabled.
							By default it's <code class="literal">text/csv</code>.
							Possible values to enable it are
							<code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">csv_delimiter</code> (also aliased as
							<code class="literal">csv_delimeter</code> according to
							the historical typo in RLIB) sets the CSV field
							delimiter to the first character of the string.
							By default it's a comma.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">no_quotes</code> will create a CSV
							output with values unquoted.
							Possible values to enable it are
							<code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
							It takes precedence over
							<code class="literal">only_quote_strings</code>
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">only_quote_strings</code>
							will create a CSV output with only string
							values quoted.
							Possible values to enable it are
							<code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
						</p></li></ul></div><p>
			</p><p>
				Note that some languages (e.g. German, Swedish
				and Hungarian) use comma as the decimal separator
				instead of decimal point. For these languages,
				either set <code class="literal">csv_delimiter</code> or
				set neither <code class="literal">no_quotes</code>, nor
				<code class="literal">only_quote_strings</code>
			</p><p>
				Possible parameters for the XML output driver:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">xml_rlib_compat</code> sets the
							flag to create an RLIB compatible XML output.
							Possible values to enable it are
							<code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
						</p><p>
							When enabled, the toplevel element
							will be <code class="literal">&lt;rlib&gt;</code>
							and <code class="literal">&lt;Report&gt;</code>s
							inside <code class="literal">&lt;pd&gt;</code>
							won't be embedded in a
							<code class="literal">report</code> element.
						</p></li></ul></div><p>
			</p></div><div class="sect2" id="RUNREPORT"><div class="titlepage"><div><div><h3 class="title">7.2.6. Run the report <a href="#RUNREPORT" class="id_link">#</a></h3></div></div></div><p>
				This function executes the report, constructs
				the result in memory. It returns <code class="literal">true</code>
				for success, <code class="literal">false</code> for failure.
				It is a failure if the output format is unset.
				</p><pre class="programlisting">bool
ocrpt_execute(opencreport *o);</pre><p>
			</p></div><div class="sect2" id="DUMPREPORT"><div class="titlepage"><div><div><h3 class="title">7.2.7. Dump report result <a href="#DUMPREPORT" class="id_link">#</a></h3></div></div></div><p>
				Dump the report output on the program's
				standard output channel.
				</p><pre class="programlisting">void
ocrpt_spool(opencreport *o);</pre><p>
			</p></div><div class="sect2" id="GETRESULT"><div class="titlepage"><div><div><h3 class="title">7.2.8. Get report result <a href="#GETRESULT" class="id_link">#</a></h3></div></div></div><p>
				Get the report output. The application
				then can save it as a file.
				</p><pre class="programlisting">const char *
ocrpt_get_output(opencreport *o, size_t *length);</pre><p>
			</p></div><div class="sect2" id="GETCONTENTTYPE"><div class="titlepage"><div><div><h3 class="title">7.2.9. Get report content type <a href="#GETCONTENTTYPE" class="id_link">#</a></h3></div></div></div><p>
				Get the report content type for web publishing.
				The content type depends on the output type
				the report was executed with.
				It returns an array of
				<code class="literal">ocrpt_string *</code> pointers
				for potentially multiple HTTP header lines.
				The last pointer in the array is
				<code class="literal">NULL</code>.
				</p><pre class="programlisting">const ocrpt_string **
ocrpt_get_content_type(opencreport *o);</pre><p>
			</p></div><div class="sect2" id="REPHNDDESTROY"><div class="titlepage"><div><div><h3 class="title">7.2.10. Report handler destruction <a href="#REPHNDDESTROY" class="id_link">#</a></h3></div></div></div><p>
				Calling this function frees up the report handler
				structure and everything created for it, even
				the details that were created by the low level API.
				</p><pre class="programlisting">void
ocrpt_free(opencreport *o);</pre><p>
			</p></div><div class="sect2" id="GETLIBVER"><div class="titlepage"><div><div><h3 class="title">7.2.11. Get library version <a href="#GETLIBVER" class="id_link">#</a></h3></div></div></div><p>
				This function reports the OpenCReports
				library version.
				</p><pre class="programlisting">const char *
ocrpt_version(void);</pre><p>
			</p></div></div><div class="sect1" id="LOWLEVELAPI"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.3. Low level C API <a href="#LOWLEVELAPI" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#NUMERICTUNING">7.3.1. Numeric behavior related functions</a></span></dt><dt><span class="sect2"><a href="#LOCALEFUNCS">7.3.2. Locale related functions</a></span></dt><dt><span class="sect2"><a href="#DSQFUNCS">7.3.3. Data source and query related functions</a></span></dt><dt><span class="sect2"><a href="#EXPRFUNC">7.3.4. Expression related functions</a></span></dt><dt><span class="sect2"><a href="#RESULTFUNCS">7.3.5. Column data or expression result related functions</a></span></dt><dt><span class="sect2"><a href="#USERVARRELATEDFUNCS">7.3.6. Variable related functions</a></span></dt><dt><span class="sect2"><a href="#BREAKRELATEDFUNCS">7.3.7. Break related functions</a></span></dt><dt><span class="sect2"><a href="#USERFUNCFUNCS">7.3.8. Function related functions</a></span></dt><dt><span class="sect2"><a href="#PARTANDREPORTFUNCS">7.3.9. Report part and report related functions</a></span></dt><dt><span class="sect2"><a href="#LAYOUTFUNCS">7.3.10. Layout related functions</a></span></dt><dt><span class="sect2"><a href="#CALLBACKFUNCS">7.3.11. Callback related functions</a></span></dt><dt><span class="sect2"><a href="#ENVFUNCS">7.3.12. Environment related functions</a></span></dt><dt><span class="sect2"><a href="#FILEFUNCS">7.3.13. File handling related functions</a></span></dt><dt><span class="sect2"><a href="#COLORFUNCS">7.3.14. Color related functions</a></span></dt><dt><span class="sect2"><a href="#PAPERFUNCS">7.3.15. Paper size related functions</a></span></dt><dt><span class="sect2"><a href="#MEMORYFUNCS">7.3.16. Memory handling related functions</a></span></dt><dt><span class="sect2"><a href="#LISTFUNCS">7.3.17. List related functions</a></span></dt><dt><span class="sect2"><a href="#STRINGFUNCS">7.3.18. String related functions</a></span></dt></dl></div><p>
			The <a class="xref" href="#HIGHLEVELAPI" title="7.2. High level C API">High level C API</a> is also part of the
			low level API. The functions described below allow
			creating a report using program code, or simply
			fine tuning the report behavior by mostly using the
			<a class="xref" href="#HIGHLEVELAPI" title="7.2. High level C API">High level C API</a>.
		</p><div class="sect2" id="NUMERICTUNING"><div class="titlepage"><div><div><h3 class="title">7.3.1. Numeric behavior related functions <a href="#NUMERICTUNING" class="id_link">#</a></h3></div></div></div><div class="sect3" id="SETNUMPREC"><div class="titlepage"><div><div><h4 class="title">7.3.1.1. <code class="literal">Set numeric precision</code> <a href="#SETNUMPREC" class="id_link">#</a></h4></div></div></div><p>
					The default is 256 bits of floating point precision.
					The expression string must evaluate to a numeric
					value, the integer part will be used to set
					the number of precision bits for numeric calculations.
					</p><pre class="programlisting">void
ocrpt_set_numeric_precision_bits(opencreport *o,
                                 const char *expr_string);</pre><p>
				</p></div><div class="sect3" id="SETROUNDINGMODE"><div class="titlepage"><div><div><h4 class="title">7.3.1.2. Set rounding mode <a href="#SETROUNDINGMODE" class="id_link">#</a></h4></div></div></div><p>
					Set the rounding mode. The expression string must
					evaluate to a string value with values
					<code class="literal">nearest</code>,
					<code class="literal">to_minus_inf</code>,
					<code class="literal">to_inf</code>,
					<code class="literal">to_zero</code>,
					<code class="literal">away_from_zero</code> and
					<code class="literal">faithful</code>.
					The default is <code class="literal">nearest</code>.
					</p><pre class="programlisting">void
ocrpt_set_rounding_mode(opencreport *o,
                        const char *expr_string);</pre><p>
				</p></div></div><div class="sect2" id="LOCALEFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.2. Locale related functions <a href="#LOCALEFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="SETUPXLATE"><div class="titlepage"><div><div><h4 class="title">7.3.2.1. Set up translation <a href="#SETUPXLATE" class="id_link">#</a></h4></div></div></div><p>
					Setting up the translation needs two parameters:
					the so called <span class="emphasis"><em>translation domain</em></span>
					and the toplevel directory for the translations.
					It relies on GNU Gettext.
					</p><pre class="programlisting">void
ocrpt_bindtextdomain(opencreport *o,
                     const char *domainname,
                     const char *dirname);</pre><p>
				</p></div><div class="sect3" id="SETUPXLATE2"><div class="titlepage"><div><div><h4 class="title">7.3.2.2. Set up translation (delayed variant) <a href="#SETUPXLATE2" class="id_link">#</a></h4></div></div></div><p>
					Setting up the translation needs two parameters:
					the so called <span class="emphasis"><em>translation domain</em></span>
					and the toplevel directory for the translations.
					It relies on GNU Gettext. This function allows
					setting the translation from a supplemental query.
					The passed in expressions strings must evaluate
					to string values, with potential fallbacks to
					plain strings in case of parse errors or if the
					expressions may be interpreted as query columns
					but no such column names exist in any query.
					</p><pre class="programlisting">void
ocrpt_bindtextdomain_from_expr(opencreport *o,
                               const char *domain_expr,
                               const char *dir_expr);</pre><p>
				</p></div><div class="sect3" id="SETLOCALE"><div class="titlepage"><div><div><h4 class="title">7.3.2.3. Set report locale <a href="#SETLOCALE" class="id_link">#</a></h4></div></div></div><p>
					Setting the locale for the report does not affect
					the main program or other threads. Locale setting
					includes the language, the country. The UTF-8 suffix
					is necessary. E.g.: <code class="literal">en_GB.UTF-8</code> or
					<code class="literal">de_DE.UTF-8</code>
					</p><pre class="programlisting">void
ocrpt_set_locale(opencreport *o,
                 const char *locale);</pre><p>
				</p></div><div class="sect3" id="SETLOCALE2"><div class="titlepage"><div><div><h4 class="title">7.3.2.4. Set report locale (delayed variant) <a href="#SETLOCALE2" class="id_link">#</a></h4></div></div></div><p>
					This function allows setting the locale
					from a supplementary query of the report.
					It is used by the report XML parser code
					and it's a lower priority setting than the
					previous function: the application executing
					the report may need to be run a different locale.
					The expression string must evaluate to a string
					value that's a valid locale string.
					</p><pre class="programlisting">void
ocrpt_set_locale_from_expr(opencreport *o,
                           const char *expr_string);</pre><p>
				</p></div><div class="sect3" id="PRINTMONEYINLOCALE"><div class="titlepage"><div><div><h4 class="title">7.3.2.5. Print monetary data in the report locale <a href="#PRINTMONEYINLOCALE" class="id_link">#</a></h4></div></div></div><p>
					A customized monetary printing function was implemented
					for the purposes of the report which MPFR doesn't
					provide. It is used in OpenCReports both internally
					and by unit tests.
					</p><pre class="programlisting">ssize_t
ocrpt_mpfr_strfmon(opencreport *o,
                   char *s, size_t maxsize,
                   const char *format, ...);</pre><p>
				</p></div></div><div class="sect2" id="DSQFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.3. Data source and query related functions <a href="#DSQFUNCS" class="id_link">#</a></h3></div></div></div><p>
				The following <code class="literal">enum</code> and
				<code class="literal">struct</code> types are used by
				OpenCReports for datasources and queries.
				</p><pre class="programlisting">enum ocrpt_result_type {
    OCRPT_RESULT_ERROR,
    OCRPT_RESULT_STRING,
    OCRPT_RESULT_NUMBER,
    OCRPT_RESULT_DATETIME
};

struct ocrpt_datasource;
typedef struct ocrpt_datasource ocrpt_datasource;

struct ocrpt_query;
typedef struct ocrpt_query ocrpt_query;

struct ocrpt_query_result;
typedef struct ocrpt_query_result ocrpt_query_result;

struct ocrpt_input {
    void (*describe)(ocrpt_query *,
                     ocrpt_query_result **,
                     int32_t *);
    void (*rewind)(ocrpt_query *);
    bool (*next)(ocrpt_query *);
    bool (*populate_result)(ocrpt_query *);
    bool (*isdone)(ocrpt_query *);
    void (*free)(ocrpt_query *);
    bool (*set_encoding)(ocrpt_datasource *,
                         const char *);
    void (*close)(const ocrpt_datasource *);
};
typedef struct ocrpt_input ocrpt_input;</pre><p>
			</p><p>
				Data sources in this context are "mini drivers".
				Data source handling is implemented via
				<code class="literal">ocrpt_input</code> functions.
			</p><p>
				Queries are data providers over data sources. They are
				the actual sources of data using a specific data source.
				Multiple queries may use the same data source.
			</p><div class="sect3" id="ADDARRAYDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.1. Add an array datasource <a href="#ADDARRAYDS" class="id_link">#</a></h4></div></div></div><p>
					Add an array datasource to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_add_array(opencreport *o,
                           const char *source_name);</pre><p>
				</p></div><div class="sect3" id="TESTDSFORARRAY"><div class="titlepage"><div><div><h4 class="title">7.3.3.2. Test whether a datasource is array based <a href="#TESTDSFORARRAY" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_datasource_is_array(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="ADDARRAYQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.3. Add an array query <a href="#ADDARRAYQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add an "array query" to the report handler.
					This adds the array pointer and parameters, so
					the array datasource input driver can use it.
					The provided <code class="literal">array</code> array pointer
					contains <code class="literal">(rows + 1) * cols</code> number of
					<code class="literal">char *</code> pointers, with the first row
					being the column (field) names. The
					<code class="literal">types</code> array contains
					<code class="literal">cols</code> number of
					<code class="literal">enum ocrpt_result_type</code> elements to
					indicate the column data type.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_add_array(ocrpt_datasource *source,
                      const char *name,
                      const char **array,
                      int32_t rows, int32_t cols,
                      const int32_t *types,
                      int32_t types_cols);</pre><p>
				</p><p>
					If the <code class="literal">types</code> pointer is
					<code class="literal">NULL</code>, the column values are treated
					as strings. This is how RLIB operated.
				</p></div><div class="sect3" id="ADDCSVDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.4. Add a CSV datasource <a href="#ADDCSVDS" class="id_link">#</a></h4></div></div></div><p>
					Add a CSV datasource to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_add_csv(opencreport *o,
                         const char *source_name);</pre><p>
				</p></div><div class="sect3" id="TESTDSFORCSV"><div class="titlepage"><div><div><h4 class="title">7.3.3.5. Test whether a datasource is CSV based <a href="#TESTDSFORCSV" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_datasource_is_csv(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="ADDCSVQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.6. Add a CSV query <a href="#ADDCSVQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add a "CSV query" to the report handler.
					This specifies the file name, so
					the CSV datasource input driver can load it.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_add_csv(ocrpt_datasource *source,
                    const char *name,
                    const char *filename,
                    const int32_t *types,
                    int32_t types_cols);</pre><p>
				</p><p>
					The <code class="literal">types</code> array pointer is optional.
					If it is <code class="literal">NULL</code>, the column values are
					treated as strings. This is how RLIB operated.
				</p></div><div class="sect3" id="ADDJSONDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.7. Add a JSON datasource <a href="#ADDJSONDS" class="id_link">#</a></h4></div></div></div><p>
					Add a JSON datasource to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_add_json(opencreport *o,
                          const char *source_name);</pre><p>
				</p></div><div class="sect3" id="TESTDSFORJSON"><div class="titlepage"><div><div><h4 class="title">7.3.3.8. Test whether a datasource is JSON based <a href="#TESTDSFORJSON" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_datasource_is_json(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="ADDJSONQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.9. Add a JSON query <a href="#ADDJSONQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add a "JSON query" to the report handler.
					This specifies the file name, so
					the JSON datasource input driver can load it.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_add_json(ocrpt_datasource *source,
                     const char *name,
                     const char *filename,
                     const int32_t *types,
                     int32_t types_cols);</pre><p>
				</p><p>
					The JSON file format defined in <a class="xref" href="#JSONDS" title="2.4.5. JSON file datasource">JSON file datasource</a>
					contains the way to describe the column data types,
					which is optional in a JSON file.
					The <code class="literal">types</code> array pointer may
					optionally supplement (or override) the column types.
					It is only meaningful if the JSON file itself doesn't
					contain the type description for the columns. If it is
					<code class="literal">NULL</code> (and the JSON file doesn't
					contain type specifiers), the column values are
					treated as strings. RLIB didn't have JSON input.
				</p></div><div class="sect3" id="ADDXMLDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.10. Add an XML datasource <a href="#ADDXMLDS" class="id_link">#</a></h4></div></div></div><p>
					Add an XML datasource to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_add_xml(opencreport *o,
                         const char *source_name);</pre><p>
				</p></div><div class="sect3" id="TESTDSFORXML"><div class="titlepage"><div><div><h4 class="title">7.3.3.11. Test whether a datasource is XML based <a href="#TESTDSFORXML" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_datasource_is_xml(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="ADDXMLQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.12. Add an XML query <a href="#ADDXMLQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add an "XML query" to the report handler.
					This specifies the file name, so
					the XML datasource input driver can load it.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_add_xml(ocrpt_datasource *source,
                    const char *name,
                    const char *filename,
                    const int32_t *types,
                    int32_t types_cols);</pre><p>
				</p><p>
					The XML file format defined in <a class="xref" href="#XMLDS" title="2.4.6. XML file datasource">XML file datasource</a>
					contains the way to describe the column data types,
					which is optional in an XML file.
					The <code class="literal">types</code> array pointer may
					optionally supplement (or override) the column types.
					It is only meaningful if the XML file itself doesn't
					contain the type description for the columns. If it is
					<code class="literal">NULL</code> (and the XML file doesn't
					contain type specifiers), the column values are
					treated as strings. This is how RLIB operated.
					The OpenCReports XML input file format is RLIB
					compatible without the type specification part.
				</p></div><div class="sect3" id="ADDPGDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.13. Add a PostgreSQL datasource <a href="#ADDPGDS" class="id_link">#</a></h4></div></div></div><p>
					Add a PostgreSQL datasource to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_add_postgresql(opencreport *o,
                                const char *source_name,
                                const char *host,
                                const char *port,
                                const char *dbname,
                                const char *user,
                                const char *password);

ocrpt_datasource *
ocrpt_datasource_add_postgresql2(opencreport *o,
                                 const char *source_name,
                                 const char *conninfo);</pre><p>
				</p><p>
					For the parameters, see <a class="xref" href="#POSTGRESQLDS" title="2.4.2. PostgreSQL database connection">PostgreSQL database connection</a>.
				</p></div><div class="sect3" id="TESTDSFORPG"><div class="titlepage"><div><div><h4 class="title">7.3.3.14. Test whether a datasource is PostgreSQL based <a href="#TESTDSFORPG" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_datasource_is_postgresql(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="ADDPGQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.15. Add a PostgreSQL query <a href="#ADDPGQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add a SQL query using the PostgreSQL datasource
					to the report handler.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_add_postgresql(ocrpt_datasource *source,
                           const char *name,
                           const char *querystr);</pre><p>
				</p></div><div class="sect3" id="ADDMARIADS"><div class="titlepage"><div><div><h4 class="title">7.3.3.16. Add a MariaDB datasource <a href="#ADDMARIADS" class="id_link">#</a></h4></div></div></div><p>
					Add a MariaDB datasource to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_add_mariadb(opencreport *o,
                             const char *source_name,
                             const char *host,
                             const char *port,
                             const char *dbname,
                             const char *user,
                             const char *password,
                             const char *unix_socket);

ocrpt_datasource *
ocrpt_datasource_add_mariadb2(opencreport *o,
                              const char *source_name,
                              const char *optionfile,
                              const char *group);</pre><p>
				</p><p>
					For the parameters, see <a class="xref" href="#MARIADBDS" title="2.4.1. MariaDB (MySQL) database connection">MariaDB database connection</a>.
				</p></div><div class="sect3" id="TESTDSFORMARIA"><div class="titlepage"><div><div><h4 class="title">7.3.3.17. Test whether a datasource is MariaDB based <a href="#TESTDSFORMARIA" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_datasource_is_mariadb(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="ADDMARIAQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.18. Add a MariaDB query <a href="#ADDMARIAQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add an SQL query using the MariaDB datasource
					to the report handler.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_add_mariadb(ocrpt_datasource *source,
                        const char *name,
                        const char *querystr);</pre><p>
				</p></div><div class="sect3" id="ADDODBCDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.19. Add an ODBC datasource <a href="#ADDODBCDS" class="id_link">#</a></h4></div></div></div><p>
					Add an ODBC datasource to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_add_odbc(opencreport *o,
                          const char *source_name,
                          const char *dbname,
                          const char *user,
                          const char *password);

ocrpt_datasource *
ocrpt_datasource_add_odbc2(opencreport *o,
                           const char *source_name,
                           const char *conninfo);</pre><p>
				</p><p>
					For the parameters, see <a class="xref" href="#ODBCDS" title="2.4.3. ODBC database connection">ODBC database connection</a>.
				</p></div><div class="sect3" id="TESTDSFORODBC"><div class="titlepage"><div><div><h4 class="title">7.3.3.20. Test whether a datasource is ODBC based <a href="#TESTDSFORODBC" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_datasource_is_odbc(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="ADDODBCQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.21. Add an ODBC query <a href="#ADDODBCQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add an SQL query using the ODBC datasource
					to the report handler.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_add_odbc(ocrpt_datasource *source,
                     const char *name,
                     const char *querystr);</pre><p>
				</p></div><div class="sect3" id="FINDDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.22. Find a datasource <a href="#FINDDS" class="id_link">#</a></h4></div></div></div><p>
					Find the data source using its name.
					It returns NULL if the named data source
					is not found.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_datasource_get(opencreport *o,
                     const char *source_name);</pre><p>
				</p></div><div class="sect3" id="ADDCUSTOMDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.23. <code class="literal">Add a custom datasource</code> <a href="#ADDCUSTOMDS" class="id_link">#</a></h4></div></div></div><p>
					Add a custom data source to the report handler.
					</p><pre class="programlisting">ocrpt_datasource *
ocrpt_add_datasource(opencreport *o,
                     const char *source_name,
                     const ocrpt_input *input);</pre><p>
				</p></div><div class="sect3" id="SETDSENCODING"><div class="titlepage"><div><div><h4 class="title">7.3.3.24. <code class="literal">Set the encoding of a datasource</code> <a href="#SETDSENCODING" class="id_link">#</a></h4></div></div></div><p>
					Set the encoding of a datasource in case
					if it's not already UTF-8, so data provided by
					it is automatically converted.
					</p><pre class="programlisting">void
ocrpt_datasource_set_encoding(ocrpt_datasource *source,
                              const char *encoding);</pre><p>
				</p></div><div class="sect3" id="FREEDS"><div class="titlepage"><div><div><h4 class="title">7.3.3.25. <code class="literal">Free a datasource</code> <a href="#FREEDS" class="id_link">#</a></h4></div></div></div><p>
					Free a datasource from the opencreport structure
					it was added to. It's not needed to be called,
					all datasources are automatically free with
					<code class="literal">ocrpt_free()</code>
					</p><pre class="programlisting">void
ocrpt_datasource_free(ocrpt_datasource *source);</pre><p>
				</p></div><div class="sect3" id="FINDQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.26. <code class="literal">Find a query</code> <a href="#FINDQUERY" class="id_link">#</a></h4></div></div></div><p>
					Find a query using its name.
					</p><pre class="programlisting">ocrpt_query *
ocrpt_query_get(opencreport *o,
                const char *name);</pre><p>
				</p></div><div class="sect3" id="GETCURRENTROWOFQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.27. <code class="literal">Get the current data row from a query</code> <a href="#GETCURRENTROWOFQUERY" class="id_link">#</a></h4></div></div></div><p>
					Create (first call) or get the <code class="literal">ocrpt_query_result</code>
					array from a query. Output parameter <code class="literal">cols</code>
					returns the number of columns in the result array. It must
					be re-run after ocrpt_navigate_next() since the previously
					returned pointer becomes invalid.
					</p><pre class="programlisting">ocrpt_query_result *
ocrpt_query_get_result(ocrpt_query *q,
                       int32_t *cols);</pre><p>
				</p></div><div class="sect3" id="GETCOLNAME"><div class="titlepage"><div><div><h4 class="title">7.3.3.28. <code class="literal">Get column name</code> <a href="#GETCOLNAME" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_query_result *</code> result
					from <code class="literal">ocrpt_query_get_result()</code>,
					the column names can be discovered from a query.
					</p><pre class="programlisting">const char *
ocrpt_query_result_column_name(ocrpt_query_result *qr,
                               int32_t col);</pre><p>
				</p></div><div class="sect3" id="GETCOLDATA"><div class="titlepage"><div><div><h4 class="title">7.3.3.29. <code class="literal">Get column data</code> <a href="#GETCOLDATA" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_query_result *</code>
					result from
					<code class="literal">ocrpt_query_get_result()</code>, get a
					pointer to the column data in its internal (hidden)
					representation.
					</p><pre class="programlisting">ocrpt_result *
ocrpt_query_result_column_result(ocrpt_query_result *qr,
                                 int32_t col);</pre><p>
				</p></div><div class="sect3" id="ADDFOLLOWERQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.30. <code class="literal">Add a follower query</code> <a href="#ADDFOLLOWERQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add a <code class="literal">follower</code> query to the
					<code class="literal">leader</code> query. The leader is the primary
					query and the follower will run in parallel with it until
					the leader runs out of rows. In case the leader has more
					rows than the follower, then for rows in the leader where
					there are no follower rows, the follower fields are set to NULL.
					</p><pre class="programlisting">bool
ocrpt_query_add_follower(ocrpt_query *leader,
                         ocrpt_query *follower);</pre><p>
				</p></div><div class="sect3" id="ADDN1FOLLOWERQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.31. <code class="literal">Add an N:1 follower query</code> <a href="#ADDN1FOLLOWERQUERY" class="id_link">#</a></h4></div></div></div><p>
					Add an N:1 <code class="literal">follower</code> query to the
					<code class="literal">leader</code> query. The leader is the primary
					query and rows from the follower will be matched using the
					<code class="literal">match</code> expression. If there are multiple
					rows in the follower matching the leader row, then the leader
					row will be listed that many times. For rows in the leader
					where there are no matching rows in the follower, the follower
					fields are set to NULL. It is similar to <code class="literal">LEFT OUTER
					JOIN</code> in SQL databases. For creating an
					<code class="literal">ocrpt_expr</code> expression pointer, see the
					next section.
					</p><pre class="programlisting">bool
ocrpt_query_add_follower_n_to_1(ocrpt_query *leader,
                                ocrpt_query *follower,
                                ocrpt_expr *match);</pre><p>
				</p></div><div class="sect3" id="FREEQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.32. <code class="literal">Free a query</code> <a href="#FREEQUERY" class="id_link">#</a></h4></div></div></div><p>
					Free a query and remove it from the report handler.
					It's optional. <code class="literal">ocrpt_free()</code> frees
					the queries added to the <code class="literal">opencreport</code>
					structure.
					</p><pre class="programlisting">void
ocrpt_query_free(ocrpt_query *q);</pre><p>
				</p></div><div class="sect3" id="STARTMAINQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.3.33. <code class="literal">Start the main query</code> <a href="#STARTMAINQUERY" class="id_link">#</a></h4></div></div></div><p>
					Start query (or query set) navigation.
					<code class="literal">q</code> should be the primary query
					of the report.
					</p><pre class="programlisting">void
ocrpt_query_navigate_start(ocrpt_query *q);</pre><p>
				</p></div><div class="sect3" id="GONEXTROW"><div class="titlepage"><div><div><h4 class="title">7.3.3.34. <code class="literal">Navigate to the next query row</code> <a href="#GONEXTROW" class="id_link">#</a></h4></div></div></div><p>
					Navigate the query (or query set) to the next row. Returns
					<code class="literal">false</code> if there was no more rows.
					in which case the <code class="literal">ocrpt_query_result</code>
					arrays for all queries in the query set (returned by
					previous <code class="literal">ocrpt_query_get_result()</code>
					calls contain invalid data.
					</p><pre class="programlisting">bool
ocrpt_query_navigate_next(ocrpt_query *q);</pre><p>
				</p></div><div class="sect3" id="USEPREVNEXTROW"><div class="titlepage"><div><div><h4 class="title">7.3.3.35. <code class="literal">Navigate use previous/next row</code> <a href="#USEPREVNEXTROW" class="id_link">#</a></h4></div></div></div><p>
					These functions expose an implementation
					detail of the data traversal in OpenCReports.
					There is a 3-row data cache in which there is
					always the current row. One past row is kept
					so e.g. break boundaries can be detected and
					there is one row read-ahead to detect the
					end-of-data condition early. These functions
					allow to switch back and forth in the 3-row
					data cache, making the previous or next row the
					"current" one momentarily. The query must always
					be the primary query of the report. Used by
					unit tests that don't use
					<code class="literal">ocrpt_execute()</code>.
					</p><pre class="programlisting">void
ocrpt_query_navigate_use_prev_row(ocrpt_query *q);

void
ocrpt_query_navigate_use_next_row(ocrpt_query *q);</pre><p>
				</p></div><div class="sect3" id="ARRAYDISCOVERYFUNC"><div class="titlepage"><div><div><h4 class="title">7.3.3.36. <code class="literal">API specific array discovery function</code> <a href="#ARRAYDISCOVERYFUNC" class="id_link">#</a></h4></div></div></div><p>
					For array data sources and queries, OpenCReports
					needs a way to to find the data array and the
					supplementary type identifier array.
					These are language specific. The below ones
					are the C specific ones. The override function
					is also provided to set a new discovery function.
					The discovery function <span class="emphasis"><em>should</em></span>
					return the dimensions for both the 2D
					<code class="literal">array</code> and the 1D
					<code class="literal">coltypes</code> arrays.
					</p><pre class="programlisting">typedef void
(*ocrpt_query_discover_func)(const char *,
                             void **,
                             int32_t *,
                             int32_t *,
                             const char *,
                             void **,
                             int32_t *);

void
ocrpt_query_set_discover_func(ocrpt_query_discover_func func);

extern ocrpt_query_discover_func ocrpt_query_discover_array;

void
ocrpt_query_discover_array_c(const char *arrayname,
                             void **array,
                             int32_t *rows,
                             int32_t *cols,
                             const char *typesname,
                             void **types,
                             int32_t *types_cols);</pre><p>
				</p><p>
					Note that the C specific generic discovery function
					does not and cannot return the array dimensions,
					since there is no official API related to
					<code class="literal">dlsym()</code> that would return
					the size associated with a symbol.
					It's up to the application writers to come up
					with a smarter (application specific) discovery
					function that also returns the array dimensions.
					With such a smart discovery function, one can specify
					the array and the column types array name without
					the related dimensions, i.e. the <code class="literal">rows</code>
					and <code class="literal">cols</code> specifiers in
					<a class="xref" href="#ARRAYQUERIES" title="2.5.3. Queries for array based datasources">Array queries</a> and
					<a class="xref" href="#FILEQUERIES" title="2.5.2. Queries for file based datasources">File based queries</a>.
				</p></div></div><div class="sect2" id="EXPRFUNC"><div class="titlepage"><div><div><h3 class="title">7.3.4. Expression related functions <a href="#EXPRFUNC" class="id_link">#</a></h3></div></div></div><p>
				Expressions in OpenCReports is explained in the
				<a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> chapter.
			</p><div class="sect3" id="PARSEEXPR"><div class="titlepage"><div><div><h4 class="title">7.3.4.1. Parse an expression string <a href="#PARSEEXPR" class="id_link">#</a></h4></div></div></div><p>
					This function parses an expression string and
					creates an expression tree. It returns a pointer
					to the <code class="literal">ocrpt_expr</code> structure.
				</p><p>
					If an error occurs, it returns NULL and optionally
					returns the error message in <code class="literal">err</code>
					pointer if it's not <code class="literal">NULL</code>.
				</p><p>
					</p><pre class="programlisting">ocrpt_expr *
ocrpt_expr_parse(opencreport *o,
                 const char *expr_string,
                 char **err);</pre><p>
				</p><p>
					The returned pointer must be freed with
					<code class="literal">ocrpt_expr_free()</code>.
				</p></div><div class="sect3" id="PARSEREPORTEXPR"><div class="titlepage"><div><div><h4 class="title">7.3.4.2. Parse an expression string and bind it to a report <a href="#PARSEREPORTEXPR" class="id_link">#</a></h4></div></div></div><p>
					This function parses an expression string,
					creates an expression tree and binds it to
					a report. It returns a pointer
					to the <code class="literal">ocrpt_expr</code> structure.
				</p><p>
					If an error occurs, it returns NULL and optionally
					returns the error message in <code class="literal">err</code>
					pointer if it's not <code class="literal">NULL</code>.
				</p><p>
					</p><pre class="programlisting">ocrpt_expr *
ocrpt_report_expr_parse(ocrpt_report *r,
                        const char *expr_string,
                        char **err);</pre><p>
				</p><p>
					The returned pointer is automatically freed by
					<code class="literal">ocrpt_free()</code>
				</p></div><div class="sect3" id="FREEEXPR"><div class="titlepage"><div><div><h4 class="title">7.3.4.3. Free an expression parse tree <a href="#FREEEXPR" class="id_link">#</a></h4></div></div></div><p>
					Free an expression parse tree. If it was bound
					to the passed-in <code class="literal">ocrpt_report</code>,
					this association is also deleted. Alternatively,
					the expression doesn't need to be freed if it was
					bound to a report when it was parsed, as it will be
					automatically freed when freeing either the report,
					or the global <code class="literal">opencreport</code> structure.
					</p><pre class="programlisting">void
ocrpt_expr_free(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="RESOLVEEXPR"><div class="titlepage"><div><div><h4 class="title">7.3.4.4. Resolve expression references <a href="#RESOLVEEXPR" class="id_link">#</a></h4></div></div></div><p>
					This function resolves variable (identifier)
					references in the expression. This is needed
					to bind query columns to expressions that
					use them.
					</p><pre class="programlisting">void
ocrpt_expr_resolve(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="OPTIMIZEEXPR"><div class="titlepage"><div><div><h4 class="title">7.3.4.5. Optimize an expression <a href="#OPTIMIZEEXPR" class="id_link">#</a></h4></div></div></div><p>
					This function optimizes an expression so
					it may needs fewer computation steps during
					report execution.
					</p><pre class="programlisting">void
ocrpt_expr_optimize(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="EVALEXPR"><div class="titlepage"><div><div><h4 class="title">7.3.4.6. Evaluate an expression <a href="#EVALEXPR" class="id_link">#</a></h4></div></div></div><p>
					This function evaluates the expression.
					It returns the expression's
					<code class="literal">ocrpt_result</code> result structure.
					The result must not be freed with
					<code class="literal">ocrpt_result_free()</code>.
					It will be done by <code class="literal">ocrpt_expr_free()</code>
				</p><p>
					For expressions with query column references,
					this function must be called after
					<code class="literal">ocrpt_query_navigate_next</code>
					otherwise the result is not valid.
					</p><pre class="programlisting">ocrpt_result *
ocrpt_expr_eval(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="GETEXPRRESULTWNOEVAL"><div class="titlepage"><div><div><h4 class="title">7.3.4.7. Get expression result without evaluation <a href="#GETEXPRRESULTWNOEVAL" class="id_link">#</a></h4></div></div></div><p>
					This function returns the expression result
					if it was already evaluated.
					The result <span class="emphasis"><em>must not</em></span> be freed with
					<code class="literal">ocrpt_result_free()</code>.
					It will be done by <code class="literal">ocrpt_expr_free()</code>.
					Used by unit tests.
					</p><pre class="programlisting">ocrpt_result *
ocrpt_expr_get_result(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="PRINTEXPR"><div class="titlepage"><div><div><h4 class="title">7.3.4.8. Print an expression tree <a href="#PRINTEXPR" class="id_link">#</a></h4></div></div></div><p>
					Print an expression tree in its processed form on the
					standard output. Used by unit tests.
					</p><pre class="programlisting">void
ocrpt_expr_print(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="PRINTEXPRWRESULT"><div class="titlepage"><div><div><h4 class="title">7.3.4.9. Print an expression tree with subexpressions and their results <a href="#PRINTEXPRWRESULT" class="id_link">#</a></h4></div></div></div><p>
					Print an expression tree with subexpressions
					and their results in its processed form on the
					standard output. Used by unit tests.
					</p><pre class="programlisting">void
ocrpt_expr_result_deep_print(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="EXPRNODESNUM"><div class="titlepage"><div><div><h4 class="title">7.3.4.10. Count the number of expression nodes <a href="#EXPRNODESNUM" class="id_link">#</a></h4></div></div></div><p>
					This function returns the number of expression nodes.
					Used by unit tests to validate optimizazion.
					</p><pre class="programlisting">int32_t
ocrpt_expr_nodes(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="INITEXPRTYPE"><div class="titlepage"><div><div><h4 class="title">7.3.4.11. Initialize expression result type <a href="#INITEXPRTYPE" class="id_link">#</a></h4></div></div></div><p>
					OpenCReports keeps track of the last three query
					rows and computes three result values for expressions
					for internal reasons. These functions initialize
					the type for either the current result or all results
					of the expression.
					</p><pre class="programlisting">enum ocrpt_result_type {
    OCRPT_RESULT_ERROR,
    OCRPT_RESULT_STRING,
    OCRPT_RESULT_NUMBER,
    OCRPT_RESULT_DATETIME
};

bool ocrpt_expr_init_result(ocrpt_expr *e,
                            enum ocrpt_result_type type);

void ocrpt_expr_init_results(ocrpt_expr *e,
                             enum ocrpt_result_type type);</pre><p>
				</p></div><div class="sect3" id="SETERROR"><div class="titlepage"><div><div><h4 class="title">7.3.4.12. Set an error string as expression result <a href="#SETERROR" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_result *
ocrpt_expr_make_error_result(ocrpt_expr *e,
                             const char *format, ...);</pre><p>
				</p></div><div class="sect3" id="SETSTARTFLAG"><div class="titlepage"><div><div><h4 class="title">7.3.4.13. Set start value flag for an iterative expression <a href="#SETSTARTFLAG" class="id_link">#</a></h4></div></div></div><p>
					Set whether the iterative expression's first
					value is computed from its base expression
					or from its result expression.
					</p><pre class="programlisting">void
ocrpt_expr_set_iterative_start_value(ocrpt_expr *e,
                                     bool start_with_init);</pre><p>
				</p></div><div class="sect3" id="GETEXPRCURVAL"><div class="titlepage"><div><div><h4 class="title">7.3.4.14. Get current value of an expression in base type <a href="#GETEXPRCURVAL" class="id_link">#</a></h4></div></div></div><p>
					Get the current value of an expression in a C base
					type. Used by parsing report description XML files
					and unit tests.
					</p><pre class="programlisting">const char *
ocrpt_expr_get_string(ocrpt_expr *e);

long
ocrpt_expr_get_long(ocrpt_expr *e);

double
ocrpt_expr_get_double(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="SETEXPRCURVAL"><div class="titlepage"><div><div><h4 class="title">7.3.4.15. Set current value of an expression in a base type <a href="#SETEXPRCURVAL" class="id_link">#</a></h4></div></div></div><p>
					Used by unit tests.
					</p><pre class="programlisting">void
ocrpt_expr_set_string(ocrpt_expr *e,
                            const char *s);

void
ocrpt_expr_set_long(ocrpt_expr *e,
                          long l);

void
ocrpt_expr_set_double(ocrpt_expr *e,
                            double d);</pre><p>
				</p></div><div class="sect3" id="SETNTHEXPRVALUE"><div class="titlepage"><div><div><h4 class="title">7.3.4.16. Set nth value of an expression in a base type <a href="#SETNTHEXPRVALUE" class="id_link">#</a></h4></div></div></div><p>
					Expressions use <code class="literal">OCRPT_EXPR_RESULTS</code>
					number of values. With these functions, any of them
					can be set. Used by unit tests.
					</p><pre class="programlisting">void
ocrpt_expr_set_nth_result_string(ocrpt_expr *e,
                                       int which,
                                       const char *s);

void
ocrpt_expr_set_nth_result_long(ocrpt_expr *e,
                                     int which,
                                     long l);

void
ocrpt_expr_set_nth_result_double(ocrpt_expr *e,
                                       int which,
                                       double d);</pre><p>
				</p></div><div class="sect3" id="CMPEXPRVALUES"><div class="titlepage"><div><div><h4 class="title">7.3.4.17. Compare the current of an expression with its previous value <a href="#CMPEXPRVALUES" class="id_link">#</a></h4></div></div></div><p>
					Compare the current value of an expression with its
					previous value and return <code class="literal">true</code>
					if they are equal. It's used to implement
					<a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a>.
					</p><pre class="programlisting">bool
ocrpt_expr_cmp_results(ocrpt_expr *e);</pre><p>
				</p></div><div class="sect3" id="SETEXPRDELAYED"><div class="titlepage"><div><div><h4 class="title">7.3.4.18. Set delayed flag of an expression <a href="#SETEXPRDELAYED" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_expr_set_delayed(ocrpt_expr *e,
                       bool delayed);</pre><p>
				</p></div><div class="sect3" id="SETEXPRFIELDEXPRREF"><div class="titlepage"><div><div><h4 class="title">7.3.4.19. Set field expression reference for an expression <a href="#SETEXPRFIELDEXPRREF" class="id_link">#</a></h4></div></div></div><p>
					If <code class="literal">e</code> contains <code class="literal">r.value</code>,
					the expression <code class="literal">rvalue</code> will be used to
					resolve this reference.
					</p><pre class="programlisting">void
ocrpt_expr_set_field_expr(ocrpt_expr *e,
                          ocrpt_expr *rvalue);</pre><p>
				</p></div></div><div class="sect2" id="RESULTFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.5. Column data or expression result related functions <a href="#RESULTFUNCS" class="id_link">#</a></h3></div></div></div><p>
				The internal type <code class="literal">ocrpt_result</code> holds
				values either for query columns or expression results.
			</p><div class="sect3" id="CREATEEXPRRESULT"><div class="titlepage"><div><div><h4 class="title">7.3.5.1. Create an expression result <a href="#CREATEEXPRRESULT" class="id_link">#</a></h4></div></div></div><p>
					The returned pointer must be freed with
					<code class="literal">ocrpt_result_free()</code>.
					</p><pre class="programlisting">ocrpt_result *
ocrpt_result_new(opencreport *o);</pre><p>
				</p></div><div class="sect3" id="GETEXPRRESULTTYPE"><div class="titlepage"><div><div><h4 class="title">7.3.5.2. Get expression result type <a href="#GETEXPRRESULTTYPE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">enum ocrpt_result_type
ocrpt_result_get_type(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="COPYEXPRRESULT"><div class="titlepage"><div><div><h4 class="title">7.3.5.3. Copy an expression result <a href="#COPYEXPRRESULT" class="id_link">#</a></h4></div></div></div><p>
					Copy expression result from source to
					destination. Both results must have been
					created for the same
					<code class="literal">opencreport</code> structure,
					either explicitly with <code class="literal">ocrpt_result_new()</code>
					or implicitly with an expression parsed for
					this <code class="literal">opencreport</code> structure
					or a report structure owned by it.
					</p><pre class="programlisting">void
ocrpt_result_copy(ocrpt_result *dst,
                  ocrpt_result *src);</pre><p>
				</p></div><div class="sect3" id="PRINTEXPRRESULT"><div class="titlepage"><div><div><h4 class="title">7.3.5.4. Print an expression result <a href="#PRINTEXPRRESULT" class="id_link">#</a></h4></div></div></div><p>
					Used by unit tests.
					</p><pre class="programlisting">void
ocrpt_result_print(ocrpt_result *r);</pre><p>
				</p></div><div class="sect3" id="FREEEXPRRESULT"><div class="titlepage"><div><div><h4 class="title">7.3.5.5. Free an expression result <a href="#FREEEXPRRESULT" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_result_free(ocrpt_result *r);</pre><p>
				</p></div><div class="sect3" id="RESULTISNULL"><div class="titlepage"><div><div><h4 class="title">7.3.5.6. Detect whether a column result is NULL <a href="#RESULTISNULL" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					detect whether the column value is NULL.
					</p><pre class="programlisting">bool
ocrpt_result_isnull(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="RESULTISNUMERIC"><div class="titlepage"><div><div><h4 class="title">7.3.5.7. Detect whether a column result is numeric <a href="#RESULTISNUMERIC" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					detect whether the column value is numeric.
					</p><pre class="programlisting">bool
ocrpt_result_isnumber(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="GETRESULTNUMERICVALUE"><div class="titlepage"><div><div><h4 class="title">7.3.5.8. Get the numeric value of a column result <a href="#GETRESULTNUMERICVALUE" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					get the numeric column value. It returns  NULL
					if the column is:
					</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
								not a numeric result
							</p></li><li class="listitem" style="list-style-type: disc"><p>
								NULL
							</p></li></ul></div><p>
					</p><pre class="programlisting">mpfr_ptr
ocrpt_result_get_number(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="RESULTISSTRING"><div class="titlepage"><div><div><h4 class="title">7.3.5.9. Detect whether a column result is string <a href="#RESULTISSTRING" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					detect whether the column value is string.
					</p><pre class="programlisting">bool
ocrpt_result_isstring(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="GETRESULTSTRINGVALUE"><div class="titlepage"><div><div><h4 class="title">7.3.5.10. Get the string value of a column result <a href="#GETRESULTSTRINGVALUE" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					get the string column value. It returns  NULL
					if the column is
					</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
								not a string result
							</p></li><li class="listitem" style="list-style-type: disc"><p>
								NULL
							</p></li></ul></div><p>
					</p><pre class="programlisting">ocrpt_string *
ocrpt_result_get_string(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="RESULTISDATETIME"><div class="titlepage"><div><div><h4 class="title">7.3.5.11. Detect whether a column result is datetime <a href="#RESULTISDATETIME" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					detect whether the column value is datetime.
					</p><pre class="programlisting">bool
ocrpt_result_isdatetime(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="GETRESULTDATETIMEVALUE"><div class="titlepage"><div><div><h4 class="title">7.3.5.12. Get the datetime value of a column result <a href="#GETRESULTDATETIMEVALUE" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					get the datetime column value. It returns  NULL
					if the column is
					</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
								not a datetime result
							</p></li><li class="listitem" style="list-style-type: disc"><p>
								NULL
							</p></li></ul></div><p>
					</p><pre class="programlisting">const struct tm *
ocrpt_result_get_datetime(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="RESULTISINTERVAL"><div class="titlepage"><div><div><h4 class="title">7.3.5.13. Detect whether a datetime column result is interval <a href="#RESULTISINTERVAL" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					detect whether the datetime column value is interval.
					</p><pre class="programlisting">bool
ocrpt_result_datetime_is_interval(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="RESULTHASVALIDDATE"><div class="titlepage"><div><div><h4 class="title">7.3.5.14. Detect whether a datetime column result has valid date <a href="#RESULTHASVALIDDATE" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					detect whether the datetime column value has valid date.
					</p><pre class="programlisting">bool
ocrpt_result_datetime_is_date_valid(ocrpt_result *result);</pre><p>
				</p></div><div class="sect3" id="RESULTHASVALIDTIME"><div class="titlepage"><div><div><h4 class="title">7.3.5.15. Detect whether a datetime column result has valid time <a href="#RESULTHASVALIDTIME" class="id_link">#</a></h4></div></div></div><p>
					Using the <code class="literal">ocrpt_result *</code>
					result from a query column or an expression,
					detect whether the datetime column value has valid time.
					</p><pre class="programlisting">bool
ocrpt_result_datetime_is_time_valid(ocrpt_result *result);</pre><p>
				</p></div></div><div class="sect2" id="USERVARRELATEDFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.6. Variable related functions <a href="#USERVARRELATEDFUNCS" class="id_link">#</a></h3></div></div></div><p>
				Variables can be created for a report using
				the API.
			</p><div class="sect3" id="CREATEBASICUSERVAR"><div class="titlepage"><div><div><h4 class="title">7.3.6.1. Create a basic variable <a href="#CREATEBASICUSERVAR" class="id_link">#</a></h4></div></div></div><p>
					Using this function, any variable type except
					<code class="literal">OCRPT_VARIABLE_CUSTOM</code>
					may be created. For a custom variable,
					see the next function.
					</p><pre class="programlisting">enum ocrpt_var_type {
    OCRPT_VARIABLE_EXPRESSION,
    OCRPT_VARIABLE_COUNT,
    OCRPT_VARIABLE_COUNTALL,
    OCRPT_VARIABLE_SUM,
    OCRPT_VARIABLE_AVERAGE,
    OCRPT_VARIABLE_AVERAGEALL,
    OCRPT_VARIABLE_LOWEST,
    OCRPT_VARIABLE_HIGHEST,
    OCRPT_VARIABLE_CUSTOM
};
typedef enum ocrpt_var_type ocrpt_var_type;

ocrpt_var *
ocrpt_variable_new(ocrpt_report *r,
                   ocrpt_var_type type,
                   const char *name,
                   const char *expr,
                   const char *reset_on_break_name);</pre><p>
				</p></div><div class="sect3" id="CREATECUSTOMUSERVAR"><div class="titlepage"><div><div><h4 class="title">7.3.6.2. Create a custom variable <a href="#CREATECUSTOMUSERVAR" class="id_link">#</a></h4></div></div></div><p>
					Create a custom variable of the specified type
					with the specified subexpressions.
					</p><pre class="programlisting">ocrpt_var *
ocrpt_variable_new_full(ocrpt_report *r,
                        enum ocrpt_result_type type,
                        const char *name,
                        const char *baseexpr,
                        const char *intermedexpr,
                        const char *intermed2expr,
                        const char *resultexpr,
                        const char *reset_on_break_name);</pre><p>
				</p></div><div class="sect3" id="USERVARGETSUBEXPRS"><div class="titlepage"><div><div><h4 class="title">7.3.6.3. Get subexpressions of a variable <a href="#USERVARGETSUBEXPRS" class="id_link">#</a></h4></div></div></div><p>
					Get subexpressions of a previously created
					basic or custom variable.
					</p><pre class="programlisting">ocrpt_expr *
ocrpt_variable_baseexpr(ocrpt_var *v);

ocrpt_expr *
ocrpt_variable_intermedexpr(ocrpt_var *v);

ocrpt_expr *
ocrpt_variable_intermed2expr(ocrpt_var *v);

ocrpt_expr *
ocrpt_variable_resultexpr(ocrpt_var *v);</pre><p>
				</p></div><div class="sect3" id="USERVARSETPRECALC"><div class="titlepage"><div><div><h4 class="title">7.3.6.4. Set precalculate flag for a variable <a href="#USERVARSETPRECALC" class="id_link">#</a></h4></div></div></div><p>
					The expression must evaluate to a
					numeric (boolean) value.
					</p><pre class="programlisting">void
ocrpt_variable_set_precalculate(ocrpt_var *var, 
                                const char *expr_string);</pre><p>
				</p></div><div class="sect3" id="USERVARRESOLVE"><div class="titlepage"><div><div><h4 class="title">7.3.6.5. Resolve a variable <a href="#USERVARRESOLVE" class="id_link">#</a></h4></div></div></div><p>
					Resolve subexpressions of a variable
					so it can be evaluated correctly.
					</p><pre class="programlisting">void
ocrpt_variable_resolve(ocrpt_var *v);</pre><p>
				</p></div><div class="sect3" id="USERVAREVAL"><div class="titlepage"><div><div><h4 class="title">7.3.6.6. Evaluate a variable <a href="#USERVAREVAL" class="id_link">#</a></h4></div></div></div><p>
					After evaluation, the result is in the
					expression returned by
					<code class="literal">ocrpt_variable_resultexpr()</code>.
					</p><pre class="programlisting">void
ocrpt_variable_evaluate(ocrpt_var *v);</pre><p>
				</p></div></div><div class="sect2" id="BREAKRELATEDFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.7. Break related functions <a href="#BREAKRELATEDFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="CREATEBREAK"><div class="titlepage"><div><div><h4 class="title">7.3.7.1. Create a break <a href="#CREATEBREAK" class="id_link">#</a></h4></div></div></div><p>
					Create a break. No need to free it,
					<code class="literal">ocrpt_free()</code> does it.
					</p><pre class="programlisting">ocrpt_break *
ocrpt_break_new(ocrpt_report *r,
                const char *name);</pre><p>
				</p></div><div class="sect3" id="BREAKATTFUNCS"><div class="titlepage"><div><div><h4 class="title">7.3.7.2. Set attribute flag expressions for a break <a href="#BREAKATTFUNCS" class="id_link">#</a></h4></div></div></div><p>
					Set break attributes from expression strings
					for <code class="literal">headernewpage</code> and
					<code class="literal">suppressblank</code>.
					There is a 3rd flag accepted in the report
					XML DTD called <code class="literal">newpage</code>
					which is not represented (ignored) in the API,
					because it's also ignored in RLIB and is only
					handled for RLIB compatibility.
					</p><pre class="programlisting">void
ocrpt_break_set_headernewpage(ocrpt_break *br,
                              const char *headernewpage);

void
ocrpt_break_set_suppressblank(ocrpt_break *br,
                              const char *suppressblank);</pre><p>
				</p><p>
					<code class="literal">headernewpage="yes"</code> instructs the
					layout to render <code class="literal">&lt;BreakHeader&gt;</code>
					on a new page.
				</p><p>
					<code class="literal">suppressblank="yes"</code> instructs the
					layout to suppress <code class="literal">&lt;BreakHeader&gt;</code>
					if any of the <code class="literal">&lt;BreakField&gt;</code>s
					are <code class="literal">NULL</code> value or an empty string,
					if the break field is of the string type.
				</p></div><div class="sect3" id="BREAKGETBYNAME"><div class="titlepage"><div><div><h4 class="title">7.3.7.3. Get break using its name <a href="#BREAKGETBYNAME" class="id_link">#</a></h4></div></div></div><p>
					Get the pointer to the break using its name.
					</p><pre class="programlisting">ocrpt_break *
ocrpt_break_get(ocrpt_report *r,
                const char *name);</pre><p>
				</p></div><div class="sect3" id="BREAKGETNAME"><div class="titlepage"><div><div><h4 class="title">7.3.7.4. Get the name of a break <a href="#BREAKGETNAME" class="id_link">#</a></h4></div></div></div><p>
					Get the name of the break using its structure
					pointer.
					</p><pre class="programlisting">const char *
ocrpt_break_get_name(ocrpt_break *br);</pre><p>
				</p></div><div class="sect3" id="BREAKADDBREAKFIELD"><div class="titlepage"><div><div><h4 class="title">7.3.7.5. Add a watched expression to a break <a href="#BREAKADDBREAKFIELD" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_break_add_breakfield(ocrpt_break *br,
                           ocrpt_expr *bf);</pre><p>
				</p></div><div class="sect3" id="ITERATEBREAKS"><div class="titlepage"><div><div><h4 class="title">7.3.7.6. Iterate over breaks of a report <a href="#ITERATEBREAKS" class="id_link">#</a></h4></div></div></div><p>
					Iterate over breaks of a report. The first call
					needs the iterator list pointer to be set to NULL.
					</p><pre class="programlisting">ocrpt_break *
ocrpt_break_get_next(ocrpt_report *r,
                     ocrpt_list **list);</pre><p>
				</p></div><div class="sect3" id="BREAKRESOLVEANDOPT"><div class="titlepage"><div><div><h4 class="title">7.3.7.7. Resolve and optimize break fields <a href="#BREAKRESOLVEANDOPT" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_break_resolve_fields(ocrpt_break *br);</pre><p>
				</p></div><div class="sect3" id="BREAKCHECKTRIGGER"><div class="titlepage"><div><div><h4 class="title">7.3.7.8. Check whether the break triggers <a href="#BREAKCHECKTRIGGER" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_break_check_fields(ocrpt_break *br);</pre><p>
				</p></div><div class="sect3" id="BREAKCHECKBLANK"><div class="titlepage"><div><div><h4 class="title">7.3.7.9. Check whether break field values are blank <a href="#BREAKCHECKBLANK" class="id_link">#</a></h4></div></div></div><p>
					The second parameter <code class="literal">evaluate</code>
					allows skipping evaluating the breakfield values.
					(This is an optimization in case it's executed after
					<code class="literal">ocrpt_break_check_fields()</code> which
					already evaluated the breakfields.)
					</p><pre class="programlisting">bool
ocrpt_break_check_blank(ocrpt_break *br,
                        bool evaluate);</pre><p>
				</p></div><div class="sect3" id="BREAKRESETVARS"><div class="titlepage"><div><div><h4 class="title">7.3.7.10. Reset variables for the break <a href="#BREAKRESETVARS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_break_reset_vars(ocrpt_break *br);</pre><p>
				</p></div></div><div class="sect2" id="USERFUNCFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.8. Function related functions <a href="#USERFUNCFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="ADDUSERFUNC"><div class="titlepage"><div><div><h4 class="title">7.3.8.1. Add a user defined function <a href="#ADDUSERFUNC" class="id_link">#</a></h4></div></div></div><p>
					Add a user defined function by specifying
					the name, the function pointer that contains
					the implementation, the number of operands
					(0 or greater for fixed number or operands,
					-1 is varying number of operands) and
					the function mathematical properties
					that help optimizing it.
					</p><pre class="programlisting">bool
ocrpt_function_add(opencreport *o,
                   const char *fname,
                   ocrpt_function_call func,
                   void *user_data,
                   int32_t n_ops,
                   bool commutative,
                   bool associative,
                   bool left_associative,
                   bool dont_optimize);</pre><p>
				</p><p>
					Adding a user defined function with
					a name of a pre-existing function will
					override it.
				</p><p>
					OpenCReports functions are called with the
					parameters as declared below.
					</p><pre class="programlisting">#define OCRPT_FUNCTION_PARAMS \
    ocrpt_expr *e, void *user_data</pre><p>
				</p><p>
					OpenCReports functions may be declared
					with these convenience symbols below.
					</p><pre class="programlisting">#define OCRPT_FUNCTION(name) \
    void name(OCRPT_FUNCTION_PARAMS)

#define OCRPT_STATIC_FUNCTION(name) \
    static void name(OCRPT_FUNCTION_PARAMS)</pre><p>
				</p><p>
					The above function
					(<code class="literal">ocrpt_function_add()</code>)
					is called with a function pointer which has
					this type:
					</p><pre class="programlisting">typedef void
(*ocrpt_function_call)(OCRPT_FUNCTION_PARAMS);</pre><p>
				</p></div><div class="sect3" id="FINDFUNC"><div class="titlepage"><div><div><h4 class="title">7.3.8.2. Find a named function <a href="#FINDFUNC" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">const ocrpt_function *
ocrpt_function_get(opencreport *o,
                   const char *fname);</pre><p>
				</p></div><div class="sect3" id="EXPRGETOPS"><div class="titlepage"><div><div><h4 class="title">7.3.8.3. Get number of operands for an expression (function) <a href="#EXPRGETOPS" class="id_link">#</a></h4></div></div></div><p>
					In an expression tree, functions
					are represented as subexpressions with
					operands. This call may be used by OpenCReports
					functions to inspect whether the number of
					operands is in the expected range.
					</p><pre class="programlisting">int32_t
ocrpt_expr_get_num_operands(ocrpt_expr *e);
</pre><p>
				</p></div><div class="sect3" id="EXPROPGETVALUE"><div class="titlepage"><div><div><h4 class="title">7.3.8.4. Get current value of a function operand <a href="#EXPROPGETVALUE" class="id_link">#</a></h4></div></div></div><p>
					This function is used by OpenCReports functions
					internally to compute the result from its
					operands.
					</p><pre class="programlisting">ocrpt_result *
ocrpt_expr_operand_get_result(ocrpt_expr *e,
                              int32_t opnum);</pre><p>
				</p></div></div><div class="sect2" id="PARTANDREPORTFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.9. Report part and report related functions <a href="#PARTANDREPORTFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="CREATEPART"><div class="titlepage"><div><div><h4 class="title">7.3.9.1. Create a report part <a href="#CREATEPART" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_part *
ocrpt_part_new(opencreport *o);</pre><p>
				</p></div><div class="sect3" id="CREATEPARTROW"><div class="titlepage"><div><div><h4 class="title">7.3.9.2. Create a row in a report part <a href="#CREATEPARTROW" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_part_row *
ocrpt_part_new_row(ocrpt_part *p);</pre><p>
				</p></div><div class="sect3" id="CREATEPARTCOL"><div class="titlepage"><div><div><h4 class="title">7.3.9.3. Create a column in report part row <a href="#CREATEPARTCOL" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_part_column *
ocrpt_part_row_new_column(ocrpt_part_row *pr);</pre><p>
				</p></div><div class="sect3" id="CREATEPARTREPORT"><div class="titlepage"><div><div><h4 class="title">7.3.9.4. Create a new report in a part column <a href="#CREATEPARTREPORT" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_report *
ocrpt_part_column_new_report(ocrpt_part_column *pd);</pre><p>
				</p></div><div class="sect3" id="REPORTITERATORS"><div class="titlepage"><div><div><h4 class="title">7.3.9.5. Report part related iterators <a href="#REPORTITERATORS" class="id_link">#</a></h4></div></div></div><p>
					Iterators for getting report parts, part rows,
					columns in rows and reports in columns.
					Every iterator function must be called
					the first time with the list pointer set to NULL.
					</p><pre class="programlisting">ocrpt_part *
ocrpt_part_get_next(opencreport *o,
                    ocrpt_list **list);

ocrpt_part_row *
ocrpt_part_row_get_next(ocrpt_part *p,
                        ocrpt_list **list);

ocrpt_part_column *
ocrpt_part_column_get_next(ocrpt_part_row *pr,
                           ocrpt_list **list);

ocrpt_report *
ocrpt_report_get_next(ocrpt_part_column *pd,
                      ocrpt_list **list);</pre><p>
				</p></div><div class="sect3" id="REPORTSETMAINQUERY"><div class="titlepage"><div><div><h4 class="title">7.3.9.6. Set the main query for a report <a href="#REPORTSETMAINQUERY" class="id_link">#</a></h4></div></div></div><p>
					Set the main query for a report either by
					the query structure pointer, or from expression.
					The expression must resolve to a string value,
					with fallback to a plain string.
					</p><pre class="programlisting">void
ocrpt_report_set_main_query(ocrpt_report *r,
                            const ocrpt_query *query);

void
ocrpt_report_set_main_query_from_expr(ocrpt_report *r,
                                    const char *expr_string);</pre><p>
				</p><p>
					See <a class="xref" href="#REPORTQUERYNAME" title="2.9.1.13. Query">Report query name</a>.
					Unlike with the XML description, where the first
					globally declared query is used for the report
					if its main query is not set, the default via
					the low level API is unset.
				</p></div><div class="sect3" id="REPORTGETCURRENTROWNUM"><div class="titlepage"><div><div><h4 class="title">7.3.9.7. Get the current row number of the main query <a href="#REPORTGETCURRENTROWNUM" class="id_link">#</a></h4></div></div></div><p>
					The row number starts from 1.
					</p><pre class="programlisting">long
ocrpt_report_get_query_rownum(ocrpt_report *r);</pre><p>
				</p></div><div class="sect3" id="REPORTRESOLVEVARS"><div class="titlepage"><div><div><h4 class="title">7.3.9.8. Resolve all report variables <a href="#REPORTRESOLVEVARS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_report_resolve_variables(ocrpt_report *r);</pre><p>
				</p></div><div class="sect3" id="REPORTEVALVARS"><div class="titlepage"><div><div><h4 class="title">7.3.9.9. Evaluate all report variables <a href="#REPORTEVALVARS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_report_evaluate_variables(ocrpt_report *r);</pre><p>
				</p></div><div class="sect3" id="REPORTRESOLVEBREAKS"><div class="titlepage"><div><div><h4 class="title">7.3.9.10. Resolve all report breaks <a href="#REPORTRESOLVEBREAKS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_report_resolve_breaks(ocrpt_report *r);</pre><p>
				</p></div><div class="sect3" id="REPORTRESOLVEEXPRS"><div class="titlepage"><div><div><h4 class="title">7.3.9.11. Resolve all report expressions <a href="#REPORTRESOLVEEXPRS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_report_resolve_expressions(ocrpt_report *r);</pre><p>
				</p></div><div class="sect3" id="REPORTEVALEXPRS"><div class="titlepage"><div><div><h4 class="title">7.3.9.12. Evaluate all report expressions <a href="#REPORTEVALEXPRS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_report_evaluate_expressions(ocrpt_report *r);</pre><p>
				</p></div></div><div class="sect2" id="LAYOUTFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.10. Layout related functions <a href="#LAYOUTFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="LAYOUTGLOBALOPTS"><div class="titlepage"><div><div><h4 class="title">7.3.10.1. Global layout options <a href="#LAYOUTGLOBALOPTS" class="id_link">#</a></h4></div></div></div><div class="sect4" id="LAYOUTSIZEUNIT"><div class="titlepage"><div><div><h5 class="title">7.3.10.1.1. Set "size unit" option <a href="#LAYOUTSIZEUNIT" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
						The expression string must evaluate to
						a string value, where <code class="literal">points</code>
						will set the layout rendering to use
						<span class="emphasis"><em>points</em></span> for size units.
						Any other value will make the layout rendering
						use the convoluted RLIB compatible size units,
						mostly based on font sizes.
						</p><pre class="programlisting">void
ocrpt_set_size_unit(opencreport *o,
                    const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LAYOUTNQSND"><div class="titlepage"><div><div><h5 class="title">7.3.10.1.2. Set "no query show NoData" option <a href="#LAYOUTNQSND" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#NOQUERYSHOWNODATA" title="2.2.2. No query show NoData">No query show NoData attribute</a>.
						The expression string should evaluate to
						a boolean value.
						</p><pre class="programlisting">void
ocrpt_set_noquery_show_nodata(opencreport *o,
                              const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LAYOUTRHAL"><div class="titlepage"><div><div><h5 class="title">7.3.10.1.3. Set "report height after last" option <a href="#LAYOUTRHAL" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#REPORTHEIGHTAFTERLAST" title="2.2.3. Report height after last">Report height after last attribute</a>.
						The expression string should evaluate to
						a boolean value.
						</p><pre class="programlisting">void
ocrpt_set_report_height_after_last(opencreport *o,
                                   const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="FOLLOWERMATCHSINGLE"><div class="titlepage"><div><div><h5 class="title">7.3.10.1.4. Set "follower match single" option <a href="#FOLLOWERMATCHSINGLE" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#XMLFOLLOWERMATCHSINGLE" title="2.2.4. Follower match single">Follower match single attribute</a>.
						The expression string should evaluate to
						a boolean value.
						</p><pre class="programlisting">void
ocrpt_set_follower_match_single(opencreport *o,
                                const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="FOLLOWERMATCHSINGLEDIRECT"><div class="titlepage"><div><div><h5 class="title">7.3.10.1.5. Set "follower match single" option directly <a href="#FOLLOWERMATCHSINGLEDIRECT" class="id_link">#</a></h5></div></div></div><p>
						See above and <a class="xref" href="#XMLFOLLOWERMATCHSINGLE" title="2.2.4. Follower match single">Follower match single attribute</a>.
						The  difference is that the modified behaviour
						is set directly and immediately. Used by unit tests.
						</p><pre class="programlisting">void
ocrpt_set_follower_match_single_direct(opencreport *o,
                                       bool value);</pre><p>
					</p></div></div><div class="sect3" id="PARTOPTS"><div class="titlepage"><div><div><h4 class="title">7.3.10.2. Report part options <a href="#PARTOPTS" class="id_link">#</a></h4></div></div></div><div class="sect4" id="SETPARTITER"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.1. Set part iterations <a href="#SETPARTITER" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTITER" title="2.6.1.9. Iterations">Part iterations attribute</a>.
						The expression string must evaluate to
						a numeric value.
						</p><pre class="programlisting">void
ocrpt_part_set_iterations(ocrpt_part *p,
                          const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="SETPARTFONTNAME"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.2. Set part font name <a href="#SETPARTFONTNAME" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTFONTNAME" title="2.6.1.1. Font name">Part font name</a>.
						</p><pre class="programlisting">void
ocrpt_part_set_font_name(ocrpt_part *p,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="SETPARTFONTSIZE"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.3. Set part font size <a href="#SETPARTFONTSIZE" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTFONTSIZE" title="2.6.1.2. Font size">Part font size</a>.
						</p><pre class="programlisting">void
ocrpt_part_set_font_size(ocrpt_part *p,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="SETPARTPAPERTYPE"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.4. Set part paper type <a href="#SETPARTPAPERTYPE" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PAPERTYPE" title="2.6.1.8. Paper type">Paper type</a>.
						</p><pre class="programlisting">void
ocrpt_part_set_paper_by_name(ocrpt_part *p,
                             const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="SETPARTORIENTATION"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.5. Set part paper's orientation <a href="#SETPARTORIENTATION" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTPAGEORIENTATION" title="2.6.1.6. Orientation">Part page orientation</a>.
						The expression string must evaluate to a string
						value, with possible options of
						<code class="literal">portrait</code> and
						<code class="literal">landscape</code>. By default,
						the part uses <code class="literal">portrait</code>
						orientation.
						</p><pre class="programlisting">void
ocrpt_part_set_orientation(ocrpt_part *p,
                           const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTSETMARGINS"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.6. Set part margins <a href="#PARTSETMARGINS" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#MARGINSETTINGS" title="2.6.1.7. Margin settings">Margin settings</a>.
						The margin values must be passed in via strings
						as they can be expressions.
						</p><pre class="programlisting">void
ocrpt_part_set_top_margin(ocrpt_part *p,
                          const char *expr_string);

void
ocrpt_part_set_bottom_margin(ocrpt_part *p,
                             const char *expr_string);

void
ocrpt_part_set_left_margin(ocrpt_part *p,
                           const char *expr_string);

void
ocrpt_part_set_right_margin(ocrpt_part *p,
                            const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTSETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.7. Set part suppression <a href="#PARTSETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTSUPPRESS" title="2.6.1.10. Suppress">Part suppress attribute</a>.
						The expression string must evaluate to
						a numeric (boolean) value.
						</p><pre class="programlisting">void
ocrpt_part_set_suppress(ocrpt_part *p,
                        const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTSETPHSFP"><div class="titlepage"><div><div><h5 class="title">7.3.10.2.8. Set part's page header suppressed on the first page <a href="#PARTSETPHSFP" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#SUPPRESSPAGEHEADERFIRSTPAGE" title="2.6.1.11. Suppress page header on the first page">Suppress page header on the first page</a>.
						The expression string must evaluate to
						a numeric (boolean) value.
						</p><pre class="programlisting">void
ocrpt_part_set_suppress_pageheader_firstpage(ocrpt_part *p,
                                             const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="PARTROWOPTS"><div class="titlepage"><div><div><h4 class="title">7.3.10.3. Part row options <a href="#PARTROWOPTS" class="id_link">#</a></h4></div></div></div><div class="sect4" id="PARTROWSETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.3.1. Set part row suppression <a href="#PARTROWSETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTROWSUPPRESS" title="2.7.1.3. Suppress">Part row suppress attribute</a>.
						The expression string must evaluate to
						a numeric (boolean) value.
						</p><pre class="programlisting">void
ocrpt_part_row_set_suppress(ocrpt_part_row *pr,
                            const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTROWSETNEWPAGE"><div class="titlepage"><div><div><h5 class="title">7.3.10.3.2. Set part row new page <a href="#PARTROWSETNEWPAGE" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTROWNEWPAGE" title="2.7.1.2. New page">Part row new page attribute</a>.
						The expression string must evaluate to
						a numeric (boolean) value.
						</p><pre class="programlisting">void
ocrpt_part_row_set_newpage(ocrpt_part_row *pr,
                           const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTROWSETLAYOUT"><div class="titlepage"><div><div><h5 class="title">7.3.10.3.3. Set part row layout mode <a href="#PARTROWSETLAYOUT" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTROWLAYOUT" title="2.7.1.1. Layout">Part row layout attribute</a>.
						The expression string must evaluate
						to a string value, with possible options
						<code class="literal">flow</code> and
						<code class="literal">fixed</code>. This setting
						is ignored, it's only accepted for RLIB
						compatibility.
						</p><pre class="programlisting">void
ocrpt_part_row_set_layout(ocrpt_part_row *pr,
                          const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="PARTCOLOPTS"><div class="titlepage"><div><div><h4 class="title">7.3.10.4. Part column options <a href="#PARTCOLOPTS" class="id_link">#</a></h4></div></div></div><div class="sect4" id="PARTCOLSETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.4.1. Set part column suppression <a href="#PARTCOLSETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTCOLSUPPRESS" title="2.8.1.7. Suppress">Part column suppress attribute</a>.
						The expression must evaluate to a numeric
						(boolean) value.
						</p><pre class="programlisting">void
ocrpt_part_column_set_suppress(ocrpt_part_column *pd,
                               const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTCOLSETWIDTH"><div class="titlepage"><div><div><h5 class="title">7.3.10.4.2. Set part column width <a href="#PARTCOLSETWIDTH" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTCOLWIDTH" title="2.8.1.1. Width">Part column width attribute</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_part_column_set_width(ocrpt_part_column *pd,
                            const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTCOLSETHEIGHT"><div class="titlepage"><div><div><h5 class="title">7.3.10.4.3. Set part column height <a href="#PARTCOLSETHEIGHT" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PARTCOLHEIGHT" title="2.8.1.2. Height">Part column height attribute</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_part_column_set_height(ocrpt_part_column *pd,
                             const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTCOLSETBORDERWIDTH"><div class="titlepage"><div><div><h5 class="title">7.3.10.4.4. Set part column border width <a href="#PARTCOLSETBORDERWIDTH" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PDBORDERWIDTH" title="2.8.1.3. Border width">Part column border width</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_part_column_set_border_width(ocrpt_part_column *pd,
                                   const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTCOLSETBORDERCOLOR"><div class="titlepage"><div><div><h5 class="title">7.3.10.4.5. Set part column border color <a href="#PARTCOLSETBORDERCOLOR" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#PDBORDERCOLOR" title="2.8.1.4. Border color">Part column border color</a>.
						The expression must evaluate to a string
						value with a valid color name or specification.
						</p><pre class="programlisting">void
ocrpt_part_column_set_border_color(ocrpt_part_column *pd,
                                   const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTCOLSETCOLUMNS"><div class="titlepage"><div><div><h5 class="title">7.3.10.4.6. Set part column's number of detail columns <a href="#PARTCOLSETCOLUMNS" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#DETAILCOLUMNS" title="2.8.1.5. Detail columns">Detail columns</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_part_column_set_detail_columns(ocrpt_part_column *pd,
                                     const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="PARTCOLSETPADDING"><div class="titlepage"><div><div><h5 class="title">7.3.10.4.7. Set part column's detail column padding <a href="#PARTCOLSETPADDING" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#COLUMNPADDING" title="2.8.1.6. Column padding">Column padding</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_part_column_set_column_padding(ocrpt_part_column *pd,
                                     const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="REPORTSOPTS"><div class="titlepage"><div><div><h4 class="title">7.3.10.5. Report options <a href="#REPORTSOPTS" class="id_link">#</a></h4></div></div></div><div class="sect4" id="REPORTSETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.5.1. Set report suppression <a href="#REPORTSETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#REPORTSUPPRESS" title="2.9.1.11. Suppress">Report suppress attribute</a>.
						The expression must evaluate to a numeric
						(boolean) value.
						</p><pre class="programlisting">void
ocrpt_report_set_suppress(ocrpt_report *r,
                          const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="REPORTSETITERATION"><div class="titlepage"><div><div><h5 class="title">7.3.10.5.2. Set report iterations <a href="#REPORTSETITERATION" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#REPORTITER" title="2.9.1.10. Iterations">Report iterations attribute</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_report_set_iterations(ocrpt_report *r,
                            const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="REPORTSETFONTNAME"><div class="titlepage"><div><div><h5 class="title">7.3.10.5.3. Set report font name <a href="#REPORTSETFONTNAME" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#REPORTFONTNAME" title="2.9.1.1. Font name">Report font name</a>.
						The expression must evaluate to a string
						value, with fallback to plain string:
						in case of a parsing error, the value
						string is taken as is.
						</p><pre class="programlisting">void
ocrpt_report_set_font_name(ocrpt_report *r,
                           const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="REPORTSETFONTSIZE"><div class="titlepage"><div><div><h5 class="title">7.3.10.5.4. Set report font size <a href="#REPORTSETFONTSIZE" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#REPORTFONTSIZE" title="2.9.1.2. Font size">Report font size</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_report_set_font_size(ocrpt_report *r,
                           const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="REPORTSETHEIGHT"><div class="titlepage"><div><div><h5 class="title">7.3.10.5.5. Set report height <a href="#REPORTSETHEIGHT" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#REPORTHEIGHT" title="2.9.1.9. Height">Report height</a>.
						The expression must evaluate to a numeric
						value.
						</p><pre class="programlisting">void
ocrpt_report_set_height(ocrpt_report *r,
                        const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="REPORTSETFHPRIO"><div class="titlepage"><div><div><h5 class="title">7.3.10.5.6. Set report's field header priority <a href="#REPORTSETFHPRIO" class="id_link">#</a></h5></div></div></div><p>
						See <a class="xref" href="#REPORTFHPRIORITY" title="2.9.1.14. Field header priority">Report field header priority attribute</a>.
						The expression must evaluate to a string
						value with the options of <code class="literal">high</code>
						and <code class="literal">low</code>. Default is
						<code class="literal">low</code>.
						</p><pre class="programlisting">void
ocrpt_report_set_fieldheader_priority(ocrpt_report *r,
                                      const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="PARTGETLAYOUTSECTIONS"><div class="titlepage"><div><div><h4 class="title">7.3.10.6. Get part layout sections <a href="#PARTGETLAYOUTSECTIONS" class="id_link">#</a></h4></div></div></div><p>
					Get the part's
					<code class="literal">&lt;Output&gt;</code> sections for
					<code class="literal">&lt;PageHeader&gt;</code>
					or <code class="literal">&lt;PageFooter&gt;</code>.
					</p><pre class="programlisting">ocrpt_output *
ocrpt_layout_part_page_header(ocrpt_part *p);

ocrpt_output *
ocrpt_layout_part_page_footer(ocrpt_part *p);</pre><p>
				</p></div><div class="sect3" id="PARTLAYOUTSETREPORT"><div class="titlepage"><div><div><h4 class="title">7.3.10.7. Set report for part layout sections <a href="#PARTLAYOUTSETREPORT" class="id_link">#</a></h4></div></div></div><p>
					Set the report pointer for the part's
					<code class="literal">&lt;Output&gt;</code> sections for
					<code class="literal">&lt;PageHeader&gt;</code>
					or <code class="literal">&lt;PageFooter&gt;</code>.
					</p><pre class="programlisting">void
ocrpt_layout_part_page_header_set_report(ocrpt_part *p,
                                         ocrpt_report *r);

void
ocrpt_layout_part_page_footer_set_report(ocrpt_part *p,
                                         ocrpt_report *r);</pre><p>
				</p></div><div class="sect3" id="REPORTGETLAYOUTSECTIONS"><div class="titlepage"><div><div><h4 class="title">7.3.10.8. Get report layout sections <a href="#REPORTGETLAYOUTSECTIONS" class="id_link">#</a></h4></div></div></div><p>
					Get the report's
					<code class="literal">&lt;Output&gt;</code> sections for
					<code class="literal">&lt;NoData&gt;</code>,
					<code class="literal">&lt;ReportHeader&gt;</code>,
					<code class="literal">&lt;ReportFooter&gt;</code>,
					<code class="literal">&lt;FieldHeaders&gt;</code> or
					<code class="literal">&lt;FieldDetails&gt;</code>.
					</p><pre class="programlisting">ocrpt_output *
ocrpt_layout_report_nodata(ocrpt_report *r);

ocrpt_output *
ocrpt_layout_report_header(ocrpt_report *r);

ocrpt_output *
ocrpt_layout_report_footer(ocrpt_report *r);

ocrpt_output *
ocrpt_layout_report_field_header(ocrpt_report *r);

ocrpt_output *
ocrpt_layout_report_field_details(ocrpt_report *r);</pre><p>
				</p></div><div class="sect3" id="BREAKGETLAYOUTSECTIONS"><div class="titlepage"><div><div><h4 class="title">7.3.10.9. Get break layout sections <a href="#BREAKGETLAYOUTSECTIONS" class="id_link">#</a></h4></div></div></div><p>
					Get the break's
					<code class="literal">&lt;Output&gt;</code> sections for
					<code class="literal">&lt;BreakHeader&gt;</code> or
					<code class="literal">&lt;BreakFooter&gt;</code>.
					</p><pre class="programlisting">ocrpt_output *
ocrpt_break_get_header(ocrpt_break *br);

ocrpt_output *
ocrpt_break_get_footer(ocrpt_break *br);</pre><p>
				</p></div><div class="sect3" id="OUTPUTGLOBALSECTIONS"><div class="titlepage"><div><div><h4 class="title">7.3.10.10. Set output section global settings <a href="#OUTPUTGLOBALSECTIONS" class="id_link">#</a></h4></div></div></div><p>
					Note that part (page) header and footer, and report
					header and footer sections must be constant
					expressions. Other sections may depend on data derived
					from query columns.
					See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><div class="sect4" id="OUTPUTSETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.10.1. Set output section suppression <a href="#OUTPUTSETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						Set suppression from an expression string.
						</p><pre class="programlisting">void
ocrpt_output_set_suppress(ocrpt_output *output,
                          const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="OUTPUTADDLINE"><div class="titlepage"><div><div><h4 class="title">7.3.10.11. Add a text line to an output section <a href="#OUTPUTADDLINE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_line *
ocrpt_output_add_line(ocrpt_output *output);</pre><p>
				</p></div><div class="sect3" id="OUTPUTLINESETTINGS"><div class="titlepage"><div><div><h4 class="title">7.3.10.12. Text line settings <a href="#OUTPUTLINESETTINGS" class="id_link">#</a></h4></div></div></div><p>
					Note that settings in the part (page) header and
					footer sections must be constant expressions.
					Settings in other sections may depend
					on data derived from query columns.
					See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><div class="sect4" id="LINESETFONTNAME"><div class="titlepage"><div><div><h5 class="title">7.3.10.12.1. Set line font name <a href="#LINESETFONTNAME" class="id_link">#</a></h5></div></div></div><p>
						Set the text line's font name from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_line_set_font_name(ocrpt_line *line,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LINESETFONTSIZE"><div class="titlepage"><div><div><h5 class="title">7.3.10.12.2. Set line font size <a href="#LINESETFONTSIZE" class="id_link">#</a></h5></div></div></div><p>
						Set the text line's font size from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_line_set_font_size(ocrpt_line *line,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LINESETBOLD"><div class="titlepage"><div><div><h5 class="title">7.3.10.12.3. Set line bold value <a href="#LINESETBOLD" class="id_link">#</a></h5></div></div></div><p>
						Set the text line's bold value from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_line_set_bold(ocrpt_line *line,
                    const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LINESETITALIC"><div class="titlepage"><div><div><h5 class="title">7.3.10.12.4. Set line italic value <a href="#LINESETITALIC" class="id_link">#</a></h5></div></div></div><p>
						Set the text line's italic value from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_line_set_italic(ocrpt_line *line,
                      const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LINESETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.12.5. Set line suppression <a href="#LINESETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						Set the text line's suppression value from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_line_set_suppress(ocrpt_line *line,
                        const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LINESSETTEXTCOLOR"><div class="titlepage"><div><div><h5 class="title">7.3.10.12.6. Set line text color <a href="#LINESSETTEXTCOLOR" class="id_link">#</a></h5></div></div></div><p>
						Set the text line's text color from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_line_set_color(ocrpt_line *line,
                     const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="LINESETBGCOLOR"><div class="titlepage"><div><div><h5 class="title">7.3.10.12.7. Set line background color <a href="#LINESETBGCOLOR" class="id_link">#</a></h5></div></div></div><p>
						Set the text line's background color from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_line_set_bgcolor(ocrpt_line *line,
                       const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="LINEADDTEXT"><div class="titlepage"><div><div><h4 class="title">7.3.10.13. Add a text element to a text line <a href="#LINEADDTEXT" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_text *
ocrpt_line_add_text(ocrpt_line *line);</pre><p>
				</p></div><div class="sect3" id="TEXTSETTINGS"><div class="titlepage"><div><div><h4 class="title">7.3.10.14. Text element settings <a href="#TEXTSETTINGS" class="id_link">#</a></h4></div></div></div><p>
					Note that settings in the part (page) header and
					footer sections must be constant expressions.
					Settings in other sections may depend
					on data derived from query columns.
					See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><div class="sect4" id="TEXTSETLITERAL"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.1. Set text element literal value <a href="#TEXTSETLITERAL" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's literal value from
						a string.
						</p><pre class="programlisting">void
ocrpt_text_set_value_string(ocrpt_text *text,
                            const char *string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETVALUE"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.2. Set text element value <a href="#TEXTSETVALUE" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's value from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_value_expr(ocrpt_text *text,
                          const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETDELAYED"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.3. Set text element value's delayed property <a href="#TEXTSETDELAYED" class="id_link">#</a></h5></div></div></div><p>
						Set the text element value's delayed
						property from an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_value_delayed(ocrpt_text *text,
                             const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETFORMATSTRING"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.4. Set text element format string <a href="#TEXTSETFORMATSTRING" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's format string from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_format(ocrpt_text *text,
                      const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETXLATE"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.5. Set text element translation <a href="#TEXTSETXLATE" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's translation from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_translate(ocrpt_text *text,
                         const char *expr_string);</pre><p>
					</p><p>
						OpenCReports will attempt to translate
						both the format string and the text element's
						value.
					</p></div><div class="sect4" id="TEXTSETWIDTH"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.6. Set text element field width <a href="#TEXTSETWIDTH" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's field width from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_width(ocrpt_text *text,
                     const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETALIGNMENT"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.7. Set text element alignment <a href="#TEXTSETALIGNMENT" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's alignment from
						a string or an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_alignment(ocrpt_text *text,
                         const char *expr_string);</pre><p>
					</p><p>
						String values <code class="literal">left</code>,
						<code class="literal">right</code>,
						<code class="literal">center</code> and
						<code class="literal">justified</code> are
						accepted either as is, or as an expression.
					</p></div><div class="sect4" id="TEXTSETCOLOR"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.8. Set text element text color <a href="#TEXTSETCOLOR" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's text color from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_color(ocrpt_text *text,
                     const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETBGCOLOR"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.9. Set text element background color <a href="#TEXTSETBGCOLOR" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's background color from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_bgcolor(ocrpt_text *text,
                       const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETFONTNAME"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.10. Set text element font name <a href="#TEXTSETFONTNAME" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's font name from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_font_name(ocrpt_text *text,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETFONTSIZE"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.11. Set text element font size <a href="#TEXTSETFONTSIZE" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's font size from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_font_size(ocrpt_text *text,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETBOLD"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.12. Set text element bold value <a href="#TEXTSETBOLD" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's bold value from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_bold(ocrpt_text *text,
                    const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETITALIC"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.13. Set text element italic value <a href="#TEXTSETITALIC" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's italic value from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_italic(ocrpt_text *text,
                      const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETLINK"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.14. Set text element link URL <a href="#TEXTSETLINK" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's link URL from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_text_set_link(ocrpt_text *text,
                    const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETMEMO"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.15. Set text element multiline property <a href="#TEXTSETMEMO" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's multiline property
						from an expression string. The expression
						must evaluate to a numeric (boolean) value.
						</p><pre class="programlisting">void
ocrpt_text_set_memo(ocrpt_text *text,
                    const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETMEMOWRAP"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.16. Set text element "wrap at characters" property <a href="#TEXTSETMEMOWRAP" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's "wrap at characters"
						property from an expression string.
						The expression must evaluate to a numeric
						(boolean) value. This setting is only used
						for multiline fields. When unset or set to
						<code class="literal">false</code>, multiline text
						fields wrap at word boundaries.
						</p><pre class="programlisting">void
ocrpt_text_set_memo_wrap_chars(ocrpt_text *text,
                               const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="TEXTSETMEMOLINES"><div class="titlepage"><div><div><h5 class="title">7.3.10.14.17. Set text element maximum lines <a href="#TEXTSETMEMOLINES" class="id_link">#</a></h5></div></div></div><p>
						Set the text element's maximum lines
						property from an expression string.
						The expression must evaluate to a numeric
						value. This setting is only used for multiline
						fields. When unset or set to <code class="literal">0</code>,
						the whole content of the multiline field is
						rendered. Otherwise, not more than the
						maximum lines are rendered from the multiline
						field value. The used font size, the field's width
						and word/character wrapping influence the
						number of lines the field value is rendered into.
						</p><pre class="programlisting">void
ocrpt_text_set_memo_max_lines(ocrpt_text *text,
                              const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="OUTPUTADDHLINE"><div class="titlepage"><div><div><h4 class="title">7.3.10.15. Add a horizontal line to an output section <a href="#OUTPUTADDHLINE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_hline *
ocrpt_output_add_hline(ocrpt_output *output);</pre><p>
				</p></div><div class="sect3" id="HLINESETTINGS"><div class="titlepage"><div><div><h4 class="title">7.3.10.16. Horizontal line settings <a href="#HLINESETTINGS" class="id_link">#</a></h4></div></div></div><p>
					Note that settings in the part (page) header and
					footer sections must be constant expressions.
					Settings in other sections may depend
					on data derived from query columns.
					See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><div class="sect4" id="HLINESETWIDTH"><div class="titlepage"><div><div><h5 class="title">7.3.10.16.1. Set horizontal line size (width) <a href="#HLINESETWIDTH" class="id_link">#</a></h5></div></div></div><p>
						Set the horizontal line's size (width) from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_hline_set_size(ocrpt_hline *hline,
                     const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="HLINESETINDENTATION"><div class="titlepage"><div><div><h5 class="title">7.3.10.16.2. Set horizontal line indentation <a href="#HLINESETINDENTATION" class="id_link">#</a></h5></div></div></div><p>
						Set the horizontal line's indentation value from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_hline_set_indent(ocrpt_hline *hline,
                       const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="HLINESETLENGTH"><div class="titlepage"><div><div><h5 class="title">7.3.10.16.3. Set horizontal line length <a href="#HLINESETLENGTH" class="id_link">#</a></h5></div></div></div><p>
						Set the horizontal line's length from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_hline_set_length(ocrpt_hline *hline,
                       const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="HLINESETFONTSIZE"><div class="titlepage"><div><div><h5 class="title">7.3.10.16.4. Set horizontal line font size <a href="#HLINESETFONTSIZE" class="id_link">#</a></h5></div></div></div><p>
						Set the horizontal line's font size from
						an expression string. It's used in indentation
						and length calculations if <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>
						is set to <code class="literal">rlib</code>.
						</p><pre class="programlisting">void
ocrpt_hline_set_font_size(ocrpt_hline *hline,
                          const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="HLINESETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.16.5. Set horizontal line suppression <a href="#HLINESETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						Set the horizontal line's suppression from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_hline_set_suppress(ocrpt_hline *hline,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="HLINESETCOLOR"><div class="titlepage"><div><div><h5 class="title">7.3.10.16.6. Set horizontal line color <a href="#HLINESETCOLOR" class="id_link">#</a></h5></div></div></div><p>
						Set the horizontal line's color from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_hline_set_color(ocrpt_hline *hline,
                      const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="OUTPUTADDIMAGE"><div class="titlepage"><div><div><h4 class="title">7.3.10.17. Add an image to an output section <a href="#OUTPUTADDIMAGE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_image *
ocrpt_output_add_image(ocrpt_output *output);</pre><p>
				</p></div><div class="sect3" id="TEXTADDIMAGE"><div class="titlepage"><div><div><h4 class="title">7.3.10.18. Add an image to a text line <a href="#TEXTADDIMAGE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_image *
ocrpt_line_add_image(ocrpt_line *line);</pre><p>
				</p></div><div class="sect3" id="IMAGESETTINGS"><div class="titlepage"><div><div><h4 class="title">7.3.10.19. Image settings <a href="#IMAGESETTINGS" class="id_link">#</a></h4></div></div></div><p>
					Note that settings in the part (page) header and
					footer sections must be constant expressions.
					Settings in other sections may depend
					on data derived from query columns.
					See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><div class="sect4" id="IMAGESETVALUE"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.1. Set image value <a href="#IMAGESETVALUE" class="id_link">#</a></h5></div></div></div><p>
						Set the image's value (filename) from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_image_set_value(ocrpt_image *image,
                      const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="IMAGESETSUPPRESS"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.2. Set image suppression <a href="#IMAGESETSUPPRESS" class="id_link">#</a></h5></div></div></div><p>
						Set the image's suppression from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_image_set_suppress(ocrpt_image *image,
                         const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="IMAGESETTYPE"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.3. Set image type <a href="#IMAGESETTYPE" class="id_link">#</a></h5></div></div></div><p>
						Set the image's type from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_image_set_type(ocrpt_image *image,
                     const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="IMAGESETWIDTH"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.4. Set image width <a href="#IMAGESETWIDTH" class="id_link">#</a></h5></div></div></div><p>
						Set the image's width from
						an expression string. Used when
						the image is directly added to
						an output section.
						</p><pre class="programlisting">void
ocrpt_image_set_width(ocrpt_image *image,
                      const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="IMAGESETHEIGHT"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.5. Set image height <a href="#IMAGESETHEIGHT" class="id_link">#</a></h5></div></div></div><p>
						Set the image's width from
						an expression string. Used when
						the image is directly added to
						an output section.
						</p><pre class="programlisting">void
ocrpt_image_set_height(ocrpt_image *image,
                       const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="IMAGESETALIGNMENT"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.6. Set image alignment <a href="#IMAGESETALIGNMENT" class="id_link">#</a></h5></div></div></div><p>
						Set the image's alignment from
						an expression string. Used when
						the image is added to text line.
						</p><pre class="programlisting">void
ocrpt_image_set_align(ocrpt_image *image,
                      const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="IMAGESETBGCOLOR"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.7. Set image background color <a href="#IMAGESETBGCOLOR" class="id_link">#</a></h5></div></div></div><p>
						Set the image's background color from
						an expression string.
						</p><pre class="programlisting">void
ocrpt_image_set_bgcolor(ocrpt_image *image,
                        const char *expr_string);</pre><p>
					</p></div><div class="sect4" id="IMAGESSETFIELDWIDTH"><div class="titlepage"><div><div><h5 class="title">7.3.10.19.8. Set image field width <a href="#IMAGESSETFIELDWIDTH" class="id_link">#</a></h5></div></div></div><p>
						Set the image's field width from
						an expression string. Used when
						the image is added to text line.
						</p><pre class="programlisting">void
ocrpt_image_set_text_width(ocrpt_image *image,
                           const char *expr_string);</pre><p>
					</p></div></div><div class="sect3" id="OUTPUTADDIMAGEEND"><div class="titlepage"><div><div><h4 class="title">7.3.10.20. Add an image end marker to an output section <a href="#OUTPUTADDIMAGEEND" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_output_add_image_end(ocrpt_output *output);</pre><p>
				</p></div></div><div class="sect2" id="CALLBACKFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.11. Callback related functions <a href="#CALLBACKFUNCS" class="id_link">#</a></h3></div></div></div><p>
				Certain stages of the report execution can
				notify the application about the stage
				being executed or finished.
			</p><p>
				Every "add a callback" function below return
				<code class="literal">true</code> for success,
				<code class="literal">false</code> for failure.
			</p><div class="sect3" id="ADDPARTADDEDCB"><div class="titlepage"><div><div><h4 class="title">7.3.11.1. Add a "part added" callback <a href="#ADDPARTADDEDCB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">typedef void
(*ocrpt_part_cb)(opencreport *,
                 ocrpt_part *,
                 void *data);

bool
ocrpt_add_part_added_cb(opencreport *o,
                        ocrpt_part_cb func,
                        void *data);</pre><p>
				</p></div><div class="sect3" id="ADDREPORTADDEDCB"><div class="titlepage"><div><div><h4 class="title">7.3.11.2. Add a "report added" callback <a href="#ADDREPORTADDEDCB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">typedef void
(*ocrpt_report_cb)(opencreport *,
                   ocrpt_report *,
                   void *data);

bool
ocrpt_add_report_added_cb(opencreport *o,
                          ocrpt_report_cb func,
                          void *data);</pre><p>
				</p></div><div class="sect3" id="ADDPRECALCSDONECB"><div class="titlepage"><div><div><h4 class="title">7.3.11.3. Add an "all precalculations done" callback <a href="#ADDPRECALCSDONECB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">typedef void
(*ocrpt_cb)(opencreport *,
            void *data);

bool
ocrpt_add_precalculation_done_cb(opencreport *o,
                                 ocrpt_cb func,
                                 void *data);</pre><p>
				</p></div><div class="sect3" id="ADDPARTITERCB"><div class="titlepage"><div><div><h4 class="title">7.3.11.4. Add a "part iteration" callback <a href="#ADDPARTITERCB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_part_add_iteration_cb(ocrpt_part *r,
                            ocrpt_part_cb func,
                            void *data);

bool
ocrpt_part_add_iteration_cb2(opencreport *o,
                             ocrpt_part_cb func,
                             void *data);</pre><p>
				</p><p>
					The second variant adds the callback in the
					<code class="literal">opencreport</code> structure
					context, making the callback apply to
					every report part. It's for RLIB compatibility.
				</p></div><div class="sect3" id="ADDREPORTSTARTEDCB"><div class="titlepage"><div><div><h4 class="title">7.3.11.5. Add a "report started" callback <a href="#ADDREPORTSTARTEDCB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_report_add_start_cb(ocrpt_report *r,
                          ocrpt_report_cb func,
                          void *data);

bool
ocrpt_report_add_start_cb2(opencreport *o,
                           ocrpt_report_cb func,
                           void *data);</pre><p>
				</p><p>
					The second variant adds the callback in the
					<code class="literal">opencreport</code> structure
					context, making the callback apply to
					every report. It's for RLIB compatibility.
				</p></div><div class="sect3" id="ADDREPORTDONECB"><div class="titlepage"><div><div><h4 class="title">7.3.11.6. Add a "report done" callback <a href="#ADDREPORTDONECB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_report_add_done_cb(ocrpt_report *r,
                         ocrpt_report_cb func,
                         void *data);

bool
ocrpt_report_add_done_cb2(opencreport *o,
                          ocrpt_report_cb func,
                          void *data);</pre><p>
				</p><p>
					The second variant adds the callback in the
					<code class="literal">opencreport</code> structure
					context, making the callback apply to
					every report. It's for RLIB compatibility.
				</p></div><div class="sect3" id="ADDNEWROWCB"><div class="titlepage"><div><div><h4 class="title">7.3.11.7. Add a "new row" callback <a href="#ADDNEWROWCB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_report_add_new_row_cb(ocrpt_report *r,
                            ocrpt_report_cb func,
                            void *data);

bool
ocrpt_report_add_new_row_cb2(opencreport *o,
                             ocrpt_report_cb func,
                             void *data);</pre><p>
				</p><p>
					The second variant adds the callback in the
					<code class="literal">opencreport</code> structure
					context, making the callback apply to
					every report. It's for RLIB compatibility.
				</p></div><div class="sect3" id="ADDREPORTITERDONECB"><div class="titlepage"><div><div><h4 class="title">7.3.11.8. Add a "report iteration done" callback <a href="#ADDREPORTITERDONECB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_report_add_iteration_cb(ocrpt_report *r,
                              ocrpt_report_cb func,
                              void *data);

bool
ocrpt_report_add_iteration_cb2(opencreport *o,
                               ocrpt_report_cb func,
                               void *data);</pre><p>
				</p><p>
					The second variant adds the callback in the
					<code class="literal">opencreport</code> structure
					context, making the callback apply to
					every report. It's for RLIB compatibility.
				</p></div><div class="sect3" id="ADDREPORTPRECALCDONE"><div class="titlepage"><div><div><h4 class="title">7.3.11.9. Add a "report precalculation done" callback <a href="#ADDREPORTPRECALCDONE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">bool
ocrpt_report_add_precalculation_done_cb(ocrpt_report *r,
                                        ocrpt_report_cb func,
                                        void *data);

bool
ocrpt_report_add_precalculation_done_cb2(opencreport *o,
                                         ocrpt_report_cb func,
                                         void *data);</pre><p>
				</p><p>
					The second variant adds the callback in the
					<code class="literal">opencreport</code> structure
					context, making the callback apply to
					every report. It's for RLIB compatibility.
				</p></div><div class="sect3" id="ADDBREAKTRIGGERSCB"><div class="titlepage"><div><div><h4 class="title">7.3.11.10. Add a "break triggers" callback <a href="#ADDBREAKTRIGGERSCB" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">typedef void
(*ocrpt_break_trigger_cb)(opencreport *,
                          ocrpt_report *,
                          ocrpt_break *,
                          void *);

bool
ocrpt_break_add_trigger_cb(ocrpt_break *br,
                           ocrpt_break_trigger_cb func,
                           void *data);</pre><p>
				</p></div></div><div class="sect2" id="ENVFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.12. Environment related functions <a href="#ENVFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="GETENVVARINDIRECT"><div class="titlepage"><div><div><h4 class="title">7.3.12.1. Indirect function to get an environment variable <a href="#GETENVVARINDIRECT" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">typedef ocrpt_result *
(*ocrpt_env_query_func)(opencreport *,
                        const char *);

extern ocrpt_env_query_func
ocrpt_env_get;</pre><p>
				</p></div><div class="sect3" id="SETENVQUERYFUNC"><div class="titlepage"><div><div><h4 class="title">7.3.12.2. Set the environment query function <a href="#SETENVQUERYFUNC" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_env_set_query_func(ocrpt_env_query_func func);</pre><p>
				</p></div><div class="sect3" id="CAPIENVQUERYFUNC"><div class="titlepage"><div><div><h4 class="title">7.3.12.3. C API environment query function <a href="#CAPIENVQUERYFUNC" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_result *
ocrpt_env_get_c(opencreport *o,
                const char *env);</pre><p>
				</p></div><div class="sect3" id="SETMVARFUNC"><div class="titlepage"><div><div><h4 class="title">7.3.12.4. Add an "m" domain variable <a href="#SETMVARFUNC" class="id_link">#</a></h4></div></div></div><p>
					Set an "m" domain variable.
					If such a variable <code class="literal">name</code>
					didn't exist yet, and <code class="literal">value</code>
					is not <code class="literal">NULL</code>, then
					the variable is set. If <code class="literal">value</code>
					is <code class="literal">NULL</code>, the variable is
					removed. Such an explicit variable takes
					precedence over the environment variable
					of the same name when used in expressions.
					</p><pre class="programlisting">void
ocrpt_set_mvariable(opencreport *o,
                    const char *name,
                    const char *value);</pre><p>
				</p></div></div><div class="sect2" id="FILEFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.13. File handling related functions <a href="#FILEFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="GETCANONFILE"><div class="titlepage"><div><div><h4 class="title">7.3.13.1. Return a canonical file path <a href="#GETCANONFILE" class="id_link">#</a></h4></div></div></div><p>
					The returned path contains only single
					directory separators and doesn't contains
					symlinks.
					</p><pre class="programlisting">char *
ocrpt_canonicalize_path(const char *path);</pre><p>
				</p></div><div class="sect3" id="ADDSEARCHPATH"><div class="titlepage"><div><div><h4 class="title">7.3.13.2. Add search path <a href="#ADDSEARCHPATH" class="id_link">#</a></h4></div></div></div><p>
					Add a new directory path to the list of
					search paths. It's useful to find files
					referenced with relative path.
					</p><pre class="programlisting">void
ocrpt_add_search_path(opencreport *o,
                      const char *path);</pre><p>
				</p></div><div class="sect3" id="ADDSEARCHPATH2"><div class="titlepage"><div><div><h4 class="title">7.3.13.3. Add search path (delayed variant) <a href="#ADDSEARCHPATH2" class="id_link">#</a></h4></div></div></div><p>
					Add a new directory path from an expression string
					to the list of search paths. It's useful to find
					files referenced with relative path.
					The expression must evaluate to a string value.
					It is evaluated at the beginning of the report
					execution. This function may be used explicitly
					but it's also used when parsing the
					<code class="literal">&lt;Path&gt;</code> nodes in a
					report XML description.
					</p><pre class="programlisting">void
ocrpt_add_search_path_from_expr(opencreport *o,
                                const char *expr_string);</pre><p>
				</p></div><div class="sect3" id="RESOLVESEARCHPATHS"><div class="titlepage"><div><div><h4 class="title">7.3.13.4. Resolve search paths <a href="#RESOLVESEARCHPATHS" class="id_link">#</a></h4></div></div></div><p>
					Resolve expressions added by
					<code class="literal">ocrpt_add_search_path_from_expr()</code>.
					It's used internally when executing the report.
					</p><pre class="programlisting">void
ocrpt_resolve_search_paths(opencreport *o);</pre><p>
				</p></div><div class="sect3" id="FINDFILE"><div class="titlepage"><div><div><h4 class="title">7.3.13.5. Find a file <a href="#FINDFILE" class="id_link">#</a></h4></div></div></div><p>
					Find a file and return the canonicalized path to it.
					This function takes the search paths into account.
					</p><pre class="programlisting">char *
ocrpt_find_file(opencreport *o,
                const char *filename);</pre><p>
				</p><p>
					Note that search paths added by
					<code class="literal">ocrpt_add_search_path()</code>
					and <code class="literal">ocrpt_add_search_path_from_expr()</code>
					are used in their order of appearance when searching
					for files during executing the report.
				</p></div></div><div class="sect2" id="COLORFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.14. Color related functions <a href="#COLORFUNCS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="FINDCOLOR"><div class="titlepage"><div><div><h4 class="title">7.3.14.1. Find a color by its name <a href="#FINDCOLOR" class="id_link">#</a></h4></div></div></div><p>
					The function fills in the
					<code class="literal">ocrpt_color</code> structure with
					RGB values in Cairo values (0.0 ... 1.0).
				</p><p>
					If the color name starts with
					<code class="literal">#</code> or <code class="literal">0x</code> or
					<code class="literal">0X</code> then it must be in HTML
					notation.
				</p><p>
					Otherwise, the color name is looked up in the
					color name database in a case insensitive way.
					If found, the passed-in ocrpt_color structure is
					filled with the RGB color value of that name.
				</p><p>
					If not found or the passed-in color name is NULL,
					depending on the the expected usage (foreground
					or background color), the <code class="literal">ocrpt_color</code>
					structure is filled with either white or black.
					</p><pre class="programlisting">void
ocrpt_get_color(opencreport *o,
                const char *cname,
                ocrpt_color *color,
                bool bgcolor);</pre><p>
				</p></div></div><div class="sect2" id="PAPERFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.15. Paper size related functions <a href="#PAPERFUNCS" class="id_link">#</a></h3></div></div></div><p>
				Paper size in OpenCReports is handled via
				<a class="ulink" href="http://packages.qa.debian.org/libp/libpaper.html" target="_top">libpaper</a>.
			</p><p>
				This structure is used in OpenCReports to represent
				paper name and size:
				</p><pre class="programlisting">struct ocrpt_paper {
    const char *name;
    double width;
    double height;
};
typedef struct ocrpt_paper ocrpt_paper;</pre><p>
			</p><div class="sect3" id="GETDEFSYSTEMPAPER"><div class="titlepage"><div><div><h4 class="title">7.3.15.1. Get the system default paper <a href="#GETDEFSYSTEMPAPER" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">const ocrpt_paper *
ocrpt_get_system_paper(void);</pre><p>
				</p></div><div class="sect3" id="GETPAPERBYNAME"><div class="titlepage"><div><div><h4 class="title">7.3.15.2. Get the paper specified by name <a href="#GETPAPERBYNAME" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">const ocrpt_paper *
ocrpt_get_paper_by_name(const char *paper);</pre><p>
				</p></div><div class="sect3" id="SETGLOBALPAPER"><div class="titlepage"><div><div><h4 class="title">7.3.15.3. Set the global paper <a href="#SETGLOBALPAPER" class="id_link">#</a></h4></div></div></div><p>
					Set global paper using an
					<code class="literal">ocrpt_paper</code> structure.
					The contents of the structure is copied.
					</p><pre class="programlisting">void
ocrpt_set_paper(opencreport *o,
                const ocrpt_paper *paper);</pre><p>
				</p></div><div class="sect3" id="SETGLOBALPAPERBYNAME"><div class="titlepage"><div><div><h4 class="title">7.3.15.4. Set global paper specified by name <a href="#SETGLOBALPAPERBYNAME" class="id_link">#</a></h4></div></div></div><p>
					Set paper for the report using a paper name.
					If the paper name is unknown, the system default paper is set.
					</p><pre class="programlisting">void
ocrpt_set_paper_by_name(opencreport *o,
                        const char *paper);</pre><p>
				</p></div><div class="sect3" id="GETGLOBALPAPER"><div class="titlepage"><div><div><h4 class="title">7.3.15.5. Get currently set global paper <a href="#GETGLOBALPAPER" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">const ocrpt_paper *
ocrpt_get_paper(opencreport *o);</pre><p>
				</p></div><div class="sect3" id="PAPERITERATOR"><div class="titlepage"><div><div><h4 class="title">7.3.15.6. Iterate over paper sizes <a href="#PAPERITERATOR" class="id_link">#</a></h4></div></div></div><p>
					Get the next <code class="literal">ocrpt_paper</code> structure
					in the iterator. For the first call, the iterator
					pointer must be NULL. It returns NULL when there are
					no more papers known to the system.
					</p><pre class="programlisting">const ocrpt_paper *
ocrpt_paper_next(opencreport *o,
                 void **iter);</pre><p>
				</p></div></div><div class="sect2" id="MEMORYFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.16. Memory handling related functions <a href="#MEMORYFUNCS" class="id_link">#</a></h3></div></div></div><p>
				Memory handling is done through an indirection,
				to help with bindings (that may do their own memory
				handling) override the default.
			</p><div class="sect3" id="FUNCPTRS"><div class="titlepage"><div><div><h4 class="title">7.3.16.1. Indirect function pointers <a href="#FUNCPTRS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">typedef void *
(*ocrpt_mem_malloc_t)(size_t);

typedef void *
(*ocrpt_mem_realloc_t)(void *,
                       size_t);

typedef void *
(*ocrpt_mem_reallocarray_t)(void *,
                            size_t,
                            size_t);

typedef void
(*ocrpt_mem_free_t)(const void *);

typedef char *
(*ocrpt_mem_strdup_t)(const char *);

typedef char *
(*ocrpt_mem_strndup_t)(const char *,
                       size_t);

typedef void
(*ocrpt_mem_free_size_t)(void *,
                         size_t);

extern ocrpt_mem_malloc_t ocrpt_mem_malloc0;
extern ocrpt_mem_realloc_t ocrpt_mem_realloc0;
extern ocrpt_mem_reallocarray_t ocrpt_mem_reallocarray0;
extern ocrpt_mem_free_t ocrpt_mem_free0;
extern ocrpt_mem_strdup_t ocrpt_mem_strdup0;
extern ocrpt_mem_strndup_t ocrpt_mem_strndup0;</pre><p>
				</p></div><div class="sect3" id="ALLOCMEM"><div class="titlepage"><div><div><h4 class="title">7.3.16.2. Allocate memory <a href="#ALLOCMEM" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void *
ocrpt_mem_malloc(size_t sz);</pre><p>
				</p></div><div class="sect3" id="REALLOCMEM"><div class="titlepage"><div><div><h4 class="title">7.3.16.3. Reallocate memory <a href="#REALLOCMEM" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void *
ocrpt_mem_realloc(void *ptr,
                  size_t sz);</pre><p>
				</p></div><div class="sect3" id="REALLOCARRAY"><div class="titlepage"><div><div><h4 class="title">7.3.16.4. Reallocate array of memory <a href="#REALLOCARRAY" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void *
ocrpt_mem_reallocarray(void *ptr,
                       size_t nmemb,
                       size_t sz);</pre><p>
				</p></div><div class="sect3" id="FREEMEM"><div class="titlepage"><div><div><h4 class="title">7.3.16.5. Free memory <a href="#FREEMEM" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_mem_free(const void *ptr);</pre><p>
				</p></div><div class="sect3" id="DUPLICATECSTRING"><div class="titlepage"><div><div><h4 class="title">7.3.16.6. Duplicate C string <a href="#DUPLICATECSTRING" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void *
ocrpt_mem_strdup(const char *ptr);</pre><p>
				</p></div><div class="sect3" id="DUPLICATECSTRINGLEN"><div class="titlepage"><div><div><h4 class="title">7.3.16.7. Duplicate C string up to the specified length <a href="#DUPLICATECSTRINGLEN" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void *
ocrpt_mem_strndup(const char *ptr,
                  size_t sz);</pre><p>
				</p></div><div class="sect3" id="FREECSTRING"><div class="titlepage"><div><div><h4 class="title">7.3.16.8. Free a C string <a href="#FREECSTRING" class="id_link">#</a></h4></div></div></div><p>
					It'a convenience alias for
					<code class="literal">ocrpt_mem_free()</code>.
					</p><pre class="programlisting">void
ocrpt_strfree(const char *s);</pre><p>
				</p></div><div class="sect3" id="SETALLOCPTRS"><div class="titlepage"><div><div><h4 class="title">7.3.16.9. Set indirect allocation functions <a href="#SETALLOCPTRS" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_mem_set_alloc_funcs(ocrpt_mem_malloc_t rmalloc,
                          ocrpt_mem_realloc_t rrealloc,
                          ocrpt_mem_reallocarray_t rreallocarray,
                          ocrpt_mem_free_t rfree,
                          ocrpt_mem_strdup_t rstrdup,
                          ocrpt_mem_strndup_t rstrndup);</pre><p>
				</p></div></div><div class="sect2" id="LISTFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.17. List related functions <a href="#LISTFUNCS" class="id_link">#</a></h3></div></div></div><p>
				These functions implement a single linked list.
				The list element structure is hidden:
				</p><pre class="programlisting">struct ocrpt_list;
typedef struct ocrpt_list ocrpt_list;</pre><p>
			</p><div class="sect3" id="LISTGETLENGTH"><div class="titlepage"><div><div><h4 class="title">7.3.17.1. Get the list length <a href="#LISTGETLENGTH" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">size_t
ocrpt_list_length(ocrpt_list *l);</pre><p>
				</p></div><div class="sect3" id="LISTMAKE1"><div class="titlepage"><div><div><h4 class="title">7.3.17.2. Make a list from one element <a href="#LISTMAKE1" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_list *
ocrpt_makelist1(const void *data);</pre><p>
				</p></div><div class="sect3" id="LISTMAKEMULTI"><div class="titlepage"><div><div><h4 class="title">7.3.17.3. Make a list from multiple elements <a href="#LISTMAKEMULTI" class="id_link">#</a></h4></div></div></div><p>
					This function can be used with variable
					number of arguments.
					</p><pre class="programlisting">ocrpt_list *
ocrpt_makelist(const void *data1, ...);</pre><p>
				</p></div><div class="sect3" id="LISTGETLAST"><div class="titlepage"><div><div><h4 class="title">7.3.17.4. Get the last element of a list <a href="#LISTGETLAST" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_last(const ocrpt_list *l);</pre><p>
				</p></div><div class="sect3" id="LISTGETNTH"><div class="titlepage"><div><div><h4 class="title">7.3.17.5. Get the nth element of a list <a href="#LISTGETNTH" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_nth(const ocrpt_list *l, uint32_t n);</pre><p>
				</p></div><div class="sect3" id="LISTAPPEND"><div class="titlepage"><div><div><h4 class="title">7.3.17.6. Append a new element to a list <a href="#LISTAPPEND" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_append(ocrpt_list *l,
                  const void *data);</pre><p>
				</p></div><div class="sect3" id="LISTAPPENDWEND"><div class="titlepage"><div><div><h4 class="title">7.3.17.7. Append to list using the last element <a href="#LISTAPPENDWEND" class="id_link">#</a></h4></div></div></div><p>
					This function make appending to the list work
					<span class="emphasis"><em>O(1)</em></span> instead of
					<span class="emphasis"><em>O(n)</em></span>.
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_end_append(ocrpt_list *l,
                      ocrpt_list **e,
                      const void *data);</pre><p>
				</p></div><div class="sect3" id="LISTPREPEND"><div class="titlepage"><div><div><h4 class="title">7.3.17.8. Prepend a new element to a list <a href="#LISTPREPEND" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_prepend(ocrpt_list *l,
                   const void *data);</pre><p>
				</p></div><div class="sect3" id="LISTREMOVE"><div class="titlepage"><div><div><h4 class="title">7.3.17.9. Remove a data element from a list <a href="#LISTREMOVE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_remove(ocrpt_list *l,
                  const void *data);</pre><p>
				</p></div><div class="sect3" id="LISTREMOVEWEND"><div class="titlepage"><div><div><h4 class="title">7.3.17.10. Remove a data element from a list and update the last link <a href="#LISTREMOVEWEND" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_end_remove(ocrpt_list *l,
                      ocrpt_list **endptr,
                      const void *data);</pre><p>
				</p></div><div class="sect3" id="LISTGETNEXT"><div class="titlepage"><div><div><h4 class="title">7.3.17.11. Get next link in the list <a href="#LISTGETNEXT" class="id_link">#</a></h4></div></div></div><p>
					This can be used to iterate through a list.
					It returns <code class="literal">NULL</code> if the
					passed-in link is the last list in the list
					or it's an empty list.
					</p><pre class="programlisting">ocrpt_list *
ocrpt_list_next(ocrpt_list *l);</pre><p>
				</p></div><div class="sect3" id="LISTGETDATA"><div class="titlepage"><div><div><h4 class="title">7.3.17.12. Get the data element from a list <a href="#LISTGETDATA" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void *
ocrpt_list_get_data(ocrpt_list *l);</pre><p>
				</p></div><div class="sect3" id="LISTFREE"><div class="titlepage"><div><div><h4 class="title">7.3.17.13. Free a list <a href="#LISTFREE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_list_free(ocrpt_list *l);</pre><p>
				</p></div><div class="sect3" id="LISTDEEPFREE"><div class="titlepage"><div><div><h4 class="title">7.3.17.14. Free a list and its data elements <a href="#LISTDEEPFREE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_list_free_deep(ocrpt_list *l,
                     ocrpt_mem_free_t freefunc);</pre><p>
				</p></div></div><div class="sect2" id="STRINGFUNCS"><div class="titlepage"><div><div><h3 class="title">7.3.18. String related functions <a href="#STRINGFUNCS" class="id_link">#</a></h3></div></div></div><p>
				For memory safety and higher performance, a wrapper
				structure is used over C functions.
				</p><pre class="programlisting">struct ocrpt_string {
    char *str;
    size_t allocated_len;
    size_t len;
};
typedef struct ocrpt_string ocrpt_string;</pre><p>
			</p><div class="sect3" id="STRINGCREATE"><div class="titlepage"><div><div><h4 class="title">7.3.18.1. Create a new string <a href="#STRINGCREATE" class="id_link">#</a></h4></div></div></div><p>
					Create a new string from a C string.
					The ownership of the input string may be
					taken over, or the original string's contents
					are copied.
					</p><pre class="programlisting">ocrpt_string *
ocrpt_mem_string_new(const char *str,
                     bool copy);</pre><p>
				</p></div><div class="sect3" id="STRINGCREATELEN"><div class="titlepage"><div><div><h4 class="title">7.3.18.2. Create a new string with specified allocated length <a href="#STRINGCREATELEN" class="id_link">#</a></h4></div></div></div><p>
					Create a new string with specified allocated length
					so future growth can be done without reallocation.
					The input string is always copied.
					</p><pre class="programlisting">ocrpt_string *
ocrpt_mem_string_new_with_len(const char *str,
                              size_t len);</pre><p>
				</p></div><div class="sect3" id="STRINGCREATEVNPRINTF"><div class="titlepage"><div><div><h4 class="title">7.3.18.3. Create a string from a formatted string with maximum length <a href="#STRINGCREATEVNPRINTF" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_string *
ocrpt_mem_string_new_vnprintf(size_t len,
                              const char *format,
                              va_list va);</pre><p>
				</p></div><div class="sect3" id="STRINGCREATEPRINTF"><div class="titlepage"><div><div><h4 class="title">7.3.18.4. Create a string from a formatted string <a href="#STRINGCREATEPRINTF" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">ocrpt_string *
ocrpt_mem_string_new_printf(const char *format, ...);</pre><p>
				</p></div><div class="sect3" id="STRINGRESIZE"><div class="titlepage"><div><div><h4 class="title">7.3.18.5. Resize a string <a href="#STRINGRESIZE" class="id_link">#</a></h4></div></div></div><p>
					Resize the string to the specified allocated
					length.
					</p><pre class="programlisting">ocrpt_string *
ocrpt_mem_string_resize(ocrpt_string *string,
                        size_t len);</pre><p>
				</p></div><div class="sect3" id="STRINGFREE"><div class="titlepage"><div><div><h4 class="title">7.3.18.6. Free a string <a href="#STRINGFREE" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">char *
ocrpt_mem_string_free(ocrpt_string *string,
                      bool free_str);</pre><p>
				</p></div><div class="sect3" id="STRINGAPPENDCSTRING"><div class="titlepage"><div><div><h4 class="title">7.3.18.7. Append a C string of the specified length to a string <a href="#STRINGAPPENDCSTRING" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_mem_string_append_len(ocrpt_string *string,
                            const char *str,
                            const size_t len);</pre><p>
				</p></div><div class="sect3" id="STRINGAPPENDBINARY"><div class="titlepage"><div><div><h4 class="title">7.3.18.8. Append a binary string of the specified length to a string <a href="#STRINGAPPENDBINARY" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_mem_string_append_len_binary(ocrpt_string *string,
                                   const char *str,
                                   const size_t len);</pre><p>
				</p></div><div class="sect3" id="STRINGAPPENDCSTRINGWLEN"><div class="titlepage"><div><div><h4 class="title">7.3.18.9. Append a C string of unspecified length to a string <a href="#STRINGAPPENDCSTRINGWLEN" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_mem_string_append(ocrpt_string *string,
                        const char *str);</pre><p>
				</p></div><div class="sect3" id="STRINGAPPENDCHAR"><div class="titlepage"><div><div><h4 class="title">7.3.18.10. Append a byte to a string <a href="#STRINGAPPENDCHAR" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_mem_string_append_c(ocrpt_string *string,
                          const char c);</pre><p>
				</p></div><div class="sect3" id="STRINGAPPENDPRINTF"><div class="titlepage"><div><div><h4 class="title">7.3.18.11. Append a formatted string to a string <a href="#STRINGAPPENDPRINTF" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">void
ocrpt_mem_string_append_printf(ocrpt_string *string,
                               const char *format, ...);</pre><p>
				</p></div></div></div></div><div class="chapter" id="PHP-API-REFERENCE"><div class="titlepage"><div><div><h1 class="title">Chapter 8. PHP language API reference</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#PHPMODULE">8.1. The OpenCReports PHP module</a></span></dt><dt><span class="sect1"><a href="#MAINCLASS">8.2. The OpenCReport class</a></span></dt><dt><span class="sect1"><a href="#PHPHIGHLEVELAPI">8.3. High level PHP API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#MAINCLASSCONSTR">8.3.1. Constructor</a></span></dt><dt><span class="sect2"><a href="#PHPLOADXML">8.3.2. Load a report XML description</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETOUTPUTFORMAT">8.3.3. Set report output format</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETOUTPUTPARAM">8.3.4. Set report output parameter</a></span></dt><dt><span class="sect2"><a href="#PHPRUNREPORT">8.3.5. Run the report</a></span></dt><dt><span class="sect2"><a href="#PHPDUMPREPORT">8.3.6. Dump report result</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETRESULT">8.3.7. Get report result</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETCONTENTTYPE">8.3.8. Get report content type</a></span></dt><dt><span class="sect2"><a href="#PHPGETLIBVER">8.3.9. Get library version</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPLOWLEVELAPI">8.4. Low level PHP API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPNUMERICTUNING">8.4.1. Numeric behavior related methods</a></span></dt><dt><span class="sect2"><a href="#PHPLOCALEMETHODS">8.4.2. Locale related methods</a></span></dt><dt><span class="sect2"><a href="#PHPDSMETHODS">8.4.3. Data source and query related methods</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRFUNC">8.4.4. Expression related methods</a></span></dt><dt><span class="sect2"><a href="#PHPLAYOUTMETHODS">8.4.5. Layout part related methods</a></span></dt><dt><span class="sect2"><a href="#PHPCALLBACKMETHODS">8.4.6. Callback related methods</a></span></dt><dt><span class="sect2"><a href="#PHPENVMETHODS">8.4.7. Environment related methods</a></span></dt><dt><span class="sect2"><a href="#PHPSETMVARMETHOD">8.4.8. Add "m" domain variable</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTMETHODS">8.4.9. Result related methods</a></span></dt><dt><span class="sect2"><a href="#PHPPATHMETHODS">8.4.10. Path related methods</a></span></dt><dt><span class="sect2"><a href="#PHPCOLORMETHODS">8.4.11. Color related methods</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPDSCLASS">8.5. The OpenCReport\Datasource class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPDSFREE">8.5.1. Free a datasource</a></span></dt><dt><span class="sect2"><a href="#PHPDSQUERYADD">8.5.2. Add a query to the datasource</a></span></dt><dt><span class="sect2"><a href="#PHPDSSETENCODING">8.5.3. Set datasource encoding</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPQUERYCLASS">8.6. The OpenCReport\Query class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPQUERYGETRESULT">8.6.1. Get result for a query's current row</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYNAVSTART">8.6.2. Start navigation for a query</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYNAVNEXT">8.6.3. Navigate to the next row</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYNAVUSEPREVNEXTROW">8.6.4. Navigate use previous/next row</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYADDFOLLOWER">8.6.5. Add a query follower</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYADDN1FOLLOWER">8.6.6. Add an N:1 query follower</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYFREE">8.6.7. Free a query</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPQUERYRESULTCLASS">8.7. The OpenCReport\QueryResult class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPQUERYRESULTCOLUMNS">8.7.1. Get number of columns for a query result</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYRESULTCOLNAME">8.7.2. Get the nth column name for a query result</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYRESULTCOLRESULT">8.7.3. Get the nth column result for a query result</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPEXPRCLASS">8.8. The OpenCReport\Expr class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPEXPRFREE">8.8.1. Free an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRPRINT">8.8.2. Print an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRNODES">8.8.3. Get the number of expression tree nodes</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRRESOLVE">8.8.4. Resolve an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPROPTIMIZE">8.8.5. Optimize an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPREVAL">8.8.6. Evaluate an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETRESULT">8.8.7. Get the result of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETSTRINGVALUE">8.8.8. Set expression result to a string value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETLONGVALUE">8.8.9. Set expression result to a long value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETDOUBLEVALUE">8.8.10. Set expression result to a double value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNUMBERVALUEFROMSTRING">8.8.11. Set expression result to a numeric value from string</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETNUMOPS">8.8.12. Get number of operands of a expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPROPGETRESULT">8.8.13. Get nth operands' result of a expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRCMPRESULTS">8.8.14. Compare the expression's current and previous results</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRINITRESULTS">8.8.15. Initialize expression results</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETSTRINGVALUE">8.8.16. Get string value of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETLONGVALUE">8.8.17. Get long value of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETDOUBLEVALUE">8.8.18. Get double value of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETNUMBERVALUEASSTRING">8.8.19. Get numeric value of an expression as a string</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNTHSTRINGVALUE">8.8.20. Set nth result of an expression to a string value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNTHLONGVALUE">8.8.21. Set nth result of an expression to a long value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNTHDOUBLEVALUE">8.8.22. Set nth result of an expression to a double value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETITERATIVESTARTFLAG">8.8.23. Set iterative start flag of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETDELAYED">8.8.24. Set expression to delayed</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPRESULTCLASS">8.9. The OpenCReport\Result class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPRESULTFREE">8.9.1. Free a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTCOPY">8.9.2. Copy a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTPRINT">8.9.3. Print a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTGETTYPE">8.9.4. Get result object value type</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTISNULL">8.9.5. Detect whether result object value is NULL</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTISSTRING">8.9.6. Detect whether result object value is a string</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTISNUMBER">8.9.7. Detect whether result object value is a number</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTGETSTRING">8.9.8. Get string value of a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTGETNUMBER">8.9.9. Get numeric value of a result object as a string</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPPARTCLASS">8.10. The OpenCReport\Part class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPPARTGETNEXT">8.10.1. Get the next report part</a></span></dt><dt><span class="sect2"><a href="#PHPPARTROWNEW">8.10.2. Create a new report part row</a></span></dt><dt><span class="sect2"><a href="#PHPPARTROWGETFIRST">8.10.3. Get the first report part row</a></span></dt><dt><span class="sect2"><a href="#PHPPARTADDITERATIONCB">8.10.4. Add iteration callback for the part</a></span></dt><dt><span class="sect2"><a href="#PHPPARTEQUALS">8.10.5. Check whether two parts are identical</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETITERATIONS">8.10.6. Check whether two parts are identical</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETFONTNAME">8.10.7. Set part font name</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETFONTSIZE">8.10.8. Set part font size</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETPAPER">8.10.9. Set part font size</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETORIENTATION">8.10.10. Set part orientation</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETTOPMARGIN">8.10.11. Set part top margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETBOTTOMMARGIN">8.10.12. Set part bottom margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETLEFTMARGIN">8.10.13. Set part left margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETRIGHTMARGIN">8.10.14. Set part right margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETSUPPRESS">8.10.15. Set part suppression</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETSPHF">8.10.16. Set suppression of the page header on the first page</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEHEADER">8.10.17. Get the part's page header</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEHEADERSETREPORT">8.10.18. Set the report object for the part's page header</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEFOOTER">8.10.19. Get the part's page footer</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEFOOTERSETREPORT">8.10.20. Set the report object for the part's page footer</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPPARTROWCLASS">8.11. The OpenCReport\Row class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPROWGETNEXT">8.11.1. Get the next part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWCOLNEW">8.11.2. Create a new part column for the row</a></span></dt><dt><span class="sect2"><a href="#PHPROWCOLGETFIRST">8.11.3. Get first column of a part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWSETSUPPRESS">8.11.4. Set suppression for the part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWSETNEWPAGE">8.11.5. Set new page for the part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWSETLAYOUT">8.11.6. Set layout type for the part row</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPPARTCOLCLASS">8.12. The OpenCReport\Column class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPCOLGETNEXT">8.12.1. Get next column</a></span></dt><dt><span class="sect2"><a href="#PHPCOLREPORTNEW">8.12.2. Create a new report in the column</a></span></dt><dt><span class="sect2"><a href="#PHPCOLREPORTGETFIRST">8.12.3. Get first report of a part column</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETSUPPRESS">8.12.4. Set part column suppression</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETWIDTH">8.12.5. Set part column width</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETHEIGHT">8.12.6. Set part column height</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETBORDERWIDTH">8.12.7. Set border width</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETBORDERCOLOR">8.12.8. Set border color</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETDETAILCOLS">8.12.9. Set number of detail columns</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETPADDING">8.12.10. Set column padding</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPREPORTCLASS">8.13. The OpenCReport\Report class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPREPORTGETNEXT">8.13.1. Get the next report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTVARNEW">8.13.2. Create a new report variable</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTVARNEWFULL">8.13.3. Create a new custom report variable</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEXPRPARSE">8.13.4. Parse and expression for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEXPRERROR">8.13.5. Get the error after a failed expression parsing</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTRESOLVEVARS">8.13.6. Resolve variables of the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEVALVARS">8.13.7. Evaluate variables of the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTBREAKNEW">8.13.8. Create a new report break</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTBREAKGET">8.13.9. Get a report break by its name</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTBREAKGETFIRST">8.13.10. Get the first report break</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTRESOLVEBREAKS">8.13.11. Resolve breaks of the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETQUERYROWNUM">8.13.12. Get the current row number of the main query</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDSTARTCB">8.13.13. Add a "report start" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDDONECB">8.13.14. Add a "report done" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDNEWROWCB">8.13.15. Add a "new row" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDITERATIONCB">8.13.16. Add an "iteration done" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDPRECALCDONECB">8.13.17. Add a "precalculation done" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEQUALS">8.13.18. Check whether two report objects are the same</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETMAINQUERY">8.13.19. Set the report's main query</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETMAINQUERYBYNAME">8.13.20. Set the report's main query by name</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETSUPPRESS">8.13.21. Set the report suppression</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETITERATIONS">8.13.22. Set number of iterations for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETFONTNAME">8.13.23. Set the font name for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETFONTSIZE">8.13.24. Set the font size for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETHEIGHT">8.13.25. Set the report height</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETFHPRIO">8.13.26. Set the report's field header prioroty</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETOUTPUT">8.13.27. Get output sections of the report</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPVARIABLECLASS">8.14. The OpenCReport\Variable class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPVARBASEEXPR">8.14.1. Get the base expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARINTERMEDEXPR">8.14.2. Get the first intermediary expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARINTERMED2EXPR">8.14.3. Get the second intermediary expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARRESULTEXPR">8.14.4. Get the result expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARSETPRECALC">8.14.5. Set the variable precalculated</a></span></dt><dt><span class="sect2"><a href="#PHPVARRESOLVE">8.14.6. Resolve expressions of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVAREVAL">8.14.7. Evaluate expressions of a variable</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPBREAKCLASS">8.15. The OpenCReport\Break class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPBREAKGETNEXT">8.15.1. Get next break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKBFADD">8.15.2. Add a breakfield to a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKCHECKFIELDS">8.15.3. Check breakfields</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKRESETVARS">8.15.4. Reset variables associated with a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKADDTRIGGERCB">8.15.5. Add a "trigger" callback to a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKNAME">8.15.6. Get the name of a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKOUTPUTS">8.15.7. Get output sections of a break</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPOUTPUTCLASS">8.16. The OpenCReport\Output class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPOUTPUTSETSUPPRESS">8.16.1. Set suppression of the output section</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDLINE">8.16.2. Add a (text) line</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDHLINE">8.16.3. Add a horizontal line</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDIMAGE">8.16.4. Add an image</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDIMAGEEND">8.16.5. Add an image end marker</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPLINECLASS">8.17. The OpenCReport\Line class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPLINESETFONTNAME">8.17.1. Set the font name for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETFONTSIZE">8.17.2. Set the font size for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETBOLD">8.17.3. Set the font's bold flag for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETITALIC">8.17.4. Set the font's italic flag for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETSUPPRESS">8.17.5. Set line suppression</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETCOLOR">8.17.6. Set text color for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETBGCOLOR">8.17.7. Set background color for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINEADDTEXT">8.17.8. Add a text element to the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINEADDIMAGE">8.17.9. Add an image element to the line</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPHLINECLASS">8.18. The OpenCReport\HorizontalLine class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPHLINESETSIZE">8.18.1. Set the line width</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETINDENT">8.18.2. Set the line indentation</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETLENGTH">8.18.3. Set the line length</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETFONTSIZE">8.18.4. Set the line's font size</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETSUPPRESS">8.18.5. Set the suppression flag for the line</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETCOLOR">8.18.6. Set the line color</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPIMAGECLASS">8.19. The OpenCReport\Image class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPIMAGESETVALUE">8.19.1. Set the file name of the image</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETSUPPRESS">8.19.2. Set the suppression flag for the image</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETTYPE">8.19.3. Set the image type</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETWIDTH">8.19.4. Set the image width</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETHEIGHT">8.19.5. Set the image height</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETALIGNMENT">8.19.6. Set the image alignment</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETBGCOLOR">8.19.7. Set the image background color</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETTEXTWIDTH">8.19.8. Set the image "text width"</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPTEXTCLASS">8.20. The OpenCReport\Text class</a></span></dt><dd><dl><dt><span class="sect2"><a href="#PHPTEXTSETVALUESTRING">8.20.1. Set literal value</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETVALUEEXPR">8.20.2. Set expression value</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETVALUEDELAYED">8.20.3. Set delayed flag for the field expression</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETFORMAT">8.20.4. Set the format string for the field expression</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETXLATE">8.20.5. Set the translation flag for the field expression</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETWIDTH">8.20.6. Set the field width</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETALIGN">8.20.7. Set the field alignment</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETCOLOR">8.20.8. Set the field text color</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETBGCOLOR">8.20.9. Set the field background color</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETFONTNAME">8.20.10. Set the field font name</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETFONTSIZE">8.20.11. Set the field font size</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETBOLD">8.20.12. Set the field's bold flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETITALIC">8.20.13. Set the field's italic flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETLINK">8.20.14. Set the field's link</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETMEMO">8.20.15. Set the field's memo flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETMEMOWRAP">8.20.16. Set the field's "wrap at characters" flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETMEMOMAXLINES">8.20.17. Set the field's maximum number of lines</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PHPRLIBCOMPAT">8.21. RLIB compatibility API</a></span></dt><dd><dl><dt><span class="sect2"><a href="#RLIBINIT">8.21.1. Initialize a report</a></span></dt><dt><span class="sect2"><a href="#RLIBDESTROY">8.21.2. Destroy a report</a></span></dt><dt><span class="sect2"><a href="#RLIBGETLIBVER">8.21.3. Get library version</a></span></dt><dt><span class="sect2"><a href="#RLIBADDMARIADS">8.21.4. Add a MySQL/MariaDB datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDMARIADS2">8.21.5. Add a MySQL/MariaDB datasource from an INI group</a></span></dt><dt><span class="sect2"><a href="#RLIBADDPGDS">8.21.6. Add a PostgreSQL datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDODBCDS">8.21.7. Add an ODBC datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDARRAYDS">8.21.8. Add an array datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDXMLDS">8.21.9. Add an XML datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDCSVDS">8.21.10. Add a CSV datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDQUERY">8.21.11. Add a query</a></span></dt><dt><span class="sect2"><a href="#RLIBADDFOLLOWER">8.21.12. Add a resultset follower</a></span></dt><dt><span class="sect2"><a href="#RLIBADDN1FOLLOWER">8.21.13. Add a resultset N:1 follower</a></span></dt><dt><span class="sect2"><a href="#RLIBSETDSENCODING">8.21.14. Set datasource encoding</a></span></dt><dt><span class="sect2"><a href="#RLIBLOADREPORT">8.21.15. Add a report XML</a></span></dt><dt><span class="sect2"><a href="#RLIBPARSEXMLFROMBUFFER">8.21.16. Add a report XML from buffer</a></span></dt><dt><span class="sect2"><a href="#RLIBADDSEARCHPATH">8.21.17. Add a search path</a></span></dt><dt><span class="sect2"><a href="#RLIBSETLOCALE">8.21.18. Set locale</a></span></dt><dt><span class="sect2"><a href="#RLIBSETUPXLATE">8.21.19. Setup translation</a></span></dt><dt><span class="sect2"><a href="#RLIBSETOUTPUTFORMAT">8.21.20. Set output format</a></span></dt><dt><span class="sect2"><a href="#RLIBADDUSERFUNC">8.21.21. Add a custom report function</a></span></dt><dt><span class="sect2"><a href="#RLIBSETOUTPUTENCODING">8.21.22. Set output encoding</a></span></dt><dt><span class="sect2"><a href="#RLIBADDREPORTPARAM">8.21.23. Add a report parameter</a></span></dt><dt><span class="sect2"><a href="#RLIBSETOUTPUTPARAM">8.21.24. Set an output parameter</a></span></dt><dt><span class="sect2"><a href="#RLIBREFRESHARRAY">8.21.25. Refresh array query contents</a></span></dt><dt><span class="sect2"><a href="#RLIBADDEVENTCB">8.21.26. Add an event callback</a></span></dt><dt><span class="sect2"><a href="#RLIBRUNREPORT">8.21.27. Execute the report</a></span></dt><dt><span class="sect2"><a href="#RLIBDUMPREPORT">8.21.28. Dump the report output</a></span></dt><dt><span class="sect2"><a href="#RLIBGETCONTENTTYPE">8.21.29. Get content type</a></span></dt><dt><span class="sect2"><a href="#RLIBSETRADIX">8.21.30. Set radix character</a></span></dt><dt><span class="sect2"><a href="#RLIBCOMPILEEXPR">8.21.31. Compile and evaluate an expression</a></span></dt><dt><span class="sect2"><a href="#RLIBADDGRAPHREGION">8.21.32. Add graph background region</a></span></dt><dt><span class="sect2"><a href="#RLIBCLEARREGION">8.21.33. Clear graph background region</a></span></dt><dt><span class="sect2"><a href="#RLIBSETGRAPHMINORTICK">8.21.34. Set graph minor tick</a></span></dt><dt><span class="sect2"><a href="#RLIBSETGRAPHMINORTICKLOC">8.21.35. Set graph minor tick by location</a></span></dt></dl></dd></dl></div><div class="sect1" id="PHPMODULE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.1. The OpenCReports PHP module <a href="#PHPMODULE" class="id_link">#</a></h2></div></div></div><p>
			<code class="literal">OpenCReports</code> comes with a PHP module,
			which must be enabled in the PHP configuration:
			</p><pre class="programlisting">extension=opencreports.so</pre><p>
		</p></div><div class="sect1" id="MAINCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.2. The OpenCReport class <a href="#MAINCLASS" class="id_link">#</a></h2></div></div></div><p>
			The main class in OpenCReports is called
			<code class="literal">OpenCReport</code>. (Note that the project
			name is used as singular.)
			</p><pre class="programlisting">class OpenCReport {
    public const RESULT_ERROR;
    public const RESULT_STRING;
    public const RESULT_NUMBER;
    public const RESULT_DATETIME;

    public const VARIABLE_EXPRESSION;
    public const VARIABLE_COUNT;
    public const VARIABLE_COUNTALL;
    public const VARIABLE_SUM;
    public const VARIABLE_AVERAGE;
    public const VARIABLE_AVERAGEALL;
    public const VARIABLE_LOWEST;
    public const VARIABLE_HIGHEST;

    public final __construct();

    public final parse_xml(string $filename): bool;
    public final parse_xml_from_buffer(string $buffer): bool;

    public const OUTPUT_PDF;
    public const OUTPUT_HTML;
    public const OUTPUT_TXT;
    public const OUTPUT_CSV;
    public const OUTPUT_XML;
    public const OUTPUT_JSON;
    public final set_output_format(long $format): void;

    public final set_output_parameter(
                     string $param,
                     string $value): void;

    public final execute(): bool;
    public final spool(): void;
    public final get_output(): string|false;
    public final get_content_type(): array|false;

    public static final version(): string;

    public final set_numeric_precision_bits(
                     string $expr_string): void;
    public final set_rounding_mode(
                     string $expr_string): void;

    public final bindtextdomain(
                     string $domainname,
                     string $dirname): void;
    public final set_locale(string $locale): void;

    public final datasource_add_array(string $source_name):
                     ?OpenCReport\Datasource;
    public final datasource_add_csv(string $source_name):
                     ?OpenCReport\Datasource;
    public final datasource_add_json(string $source_name):
                     ?OpenCReport\Datasource;
    public final datasource_add_xml(string $source_name):
                     ?OpenCReport\Datasource;
    public final datasource_add_postgresql(
                     string $source_name,
                     string $host = null,
                     string $port = null,
                     string $dbname = null,
                     string $user = null,
                     string $password = null):
                     ?OpenCReport\Datasource;
    public final datasource_add_postgresql2(
                     string $source_name,
                     string $connection_info = null):
                     ?OpenCReport\Datasource;
    public final datasource_add_mariadb(
                     string $source_name,
                     string $host = null,
                     string $port = null,
                     string $dbname = null,
                     string $user = null,
                     string $password = null,
                     string $unix_socket = null):
                     ?OpenCReport\Datasource;
    public final datasource_add_mariadb2(
                     string $source_name,
                     string $option_file = null,
                     string $group = null):
                     ?OpenCReport\Datasource;
    public final datasource_add_odbc(
                     string $source_name,
                     string $dbname = null,
                     ?string $user,
                     ?string $password):
                     ?OpenCReport\Datasource;
    public final datasource_add_odbc2(
                     string $source_name,
                     string $connection_info = null):
                     ?OpenCReport\Datasource;

    public final datasource_get(string $source_name):
                     ?OpenCReport\Datasource;
    public final query_get(string $query_name):
                     ?OpenCReport\Query;

    public static final query_refresh(): void;

    public final expr_parse(string $expr_string):
                     ?OpenCReport\Expr;
    public final expr_error(): ?string;

    public final part_new(): OpenCReport\Part;
    public final part_get_next(): OpenCReport\Part;

    public final function_add(
                     string $expr_func_name,
                     string $zend_func_name,
                     long $n_ops,
                     bool $commutative,
                     bool $associative,
                     bool $left_associative,
                     bool $dont_optimize): bool;

    public final add_precalculation_done_cb(
                     string $callback): void;
    public final add_part_added_cb(
                     string $callback): void;
    public final add_report_added_cb(
                     string $callback): void;

    public final env_get(string $var_name):
                     OpenCReport\Result;

    public final result_new():
                     OpenCReport\Result;

    public final set_mvariable(
                     string $name,
                     ?string $value = null): void;

    public final add_search_path(
                     string $path): void;
    public static final canonicalize_path(
                     string $path): string;
    public final find_file(string $path): $string;

    public static final get_color(
                     string $color_name,
                     ?bool $bgcolor = false): array;

    public final set_paper(string $paper): void;

    public final set_size_unit(string $expr_string):
                     void;
    public final set_noquery_show_nodata(
                     string $expr_string): void;
    public final set_report_height_after_last(
                     string $expr_string): void;
    public final set_follower_match_single(
                     string $expr_string): void;
    public final set_follower_match_single_direct(
                     bool $value): void;
}</pre><p>
		</p></div><div class="sect1" id="PHPHIGHLEVELAPI"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.3. High level PHP API <a href="#PHPHIGHLEVELAPI" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#MAINCLASSCONSTR">8.3.1. Constructor</a></span></dt><dt><span class="sect2"><a href="#PHPLOADXML">8.3.2. Load a report XML description</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETOUTPUTFORMAT">8.3.3. Set report output format</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETOUTPUTPARAM">8.3.4. Set report output parameter</a></span></dt><dt><span class="sect2"><a href="#PHPRUNREPORT">8.3.5. Run the report</a></span></dt><dt><span class="sect2"><a href="#PHPDUMPREPORT">8.3.6. Dump report result</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETRESULT">8.3.7. Get report result</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETCONTENTTYPE">8.3.8. Get report content type</a></span></dt><dt><span class="sect2"><a href="#PHPGETLIBVER">8.3.9. Get library version</a></span></dt></dl></div><p>
			Here is an example code using the high level
			PHP API where everything concerning the report
			(including the data source) is described in
			the report XML:
			</p><pre class="programlisting">&lt;?php
$o = new OpenCReport();

if (!$o-&gt;parse_xml(o, "report.xml")) {
    printf("XML parse error\n");
    exit(1);
}

$o-&gt;set_output_format(o, OpenCReport::OUTPUT_PDF);
$o-&gt;execute();
$-&gt;spool();</pre><p>
		</p><p>
			This code will load <code class="literal">report.xml</code>,
			set the output format to PDF, runs the report and dumps
			the result on <code class="literal">stdout</code>, which ends up
			in your browser if the PHP code is run behind a webserver.
		</p><p>
			Most of the class methods are direct wrappers
			of the corresponding C API functions.
		</p><div class="sect2" id="MAINCLASSCONSTR"><div class="titlepage"><div><div><h3 class="title">8.3.1. Constructor <a href="#MAINCLASSCONSTR" class="id_link">#</a></h3></div></div></div><p>
				The class constructor creates an
				<code class="literal">OpenCReport</code> object.
				</p><pre class="programlisting">public final
OpenCReport::__construct();</pre><p>
			</p></div><div class="sect2" id="PHPLOADXML"><div class="titlepage"><div><div><h3 class="title">8.3.2. Load a report XML description <a href="#PHPLOADXML" class="id_link">#</a></h3></div></div></div><p>
				These methods load the report description
				either from the specified XML file or
				from the XML content provided in the string.
				They return
				<code class="literal">true</code> for success,
				<code class="literal">false</code> for failure.
				</p><pre class="programlisting">public final
OpenCReport::parse_xml(string $filename): bool;

public final
OpenCReport::parse_xml_from_buffer(string $buffer): bool;
</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETOUTPUTFORMAT"><div class="titlepage"><div><div><h3 class="title">8.3.3. Set report output format <a href="#PHPREPORTSETOUTPUTFORMAT" class="id_link">#</a></h3></div></div></div><p>
				Default is <code class="literal">public const OpenCReport::OUTPUT_PDF</code>.
				</p><pre class="programlisting">public const OpenCReport::OUTPUT_PDF;
public const OpenCReport::OUTPUT_HTML;
public const OpenCReport::OUTPUT_TXT;
public const OpenCReport::OUTPUT_CSV;
public const OpenCReport::OUTPUT_XML;
public const OpenCReport::OUTPUT_JSON;

public final
OpenCReport::set_output_format(int $format): void;</pre><p>
			</p><p>
				Note that these constants are not to be overridden
				in subclasses. With PHP 8.1 and newer, the
				<code class="literal">final</code> flag is added so overriding
				these constants will throw an exception.
			</p></div><div class="sect2" id="PHPREPORTSETOUTPUTPARAM"><div class="titlepage"><div><div><h3 class="title">8.3.4. Set report output parameter <a href="#PHPREPORTSETOUTPUTPARAM" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport::set_output_parameter(
                     string $param,
                     string $value): void;</pre><p>
			</p><p>
				Possible parameters for the HTML output driver:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">document_root</code> sets
							the document root for trimming path prefix
							from image paths.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">meta</code> extends
							the default
							<code class="literal">&lt;meta charset="utf-8"&gt;</code>.
                            <code class="literal">literal</code> (see
							The passed-in string value may contain
							the whole <code class="literal">&lt;meta ...&gt;</code>,
							in which case the inner parameters are
							used only. The <code class="literal">charset</code>
							specification is ignored. Only the rest is used.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">suppress_head</code> suppresses the default
							<code class="literal">&lt;head&gt; ... &lt;/head&gt;</code> section.
							Possible values to enable suppressing the
							default <code class="literal">&lt;head&gt; ... &lt;/head&gt;</code>
							are <code class="literal">yes</code>,
							<code class="literal">true</code> and
							<code class="literal">on</code>.
							Anything else disables it.
							Be aware, that the default section contains
							importand CSS stylesheet settings that are
							needed for the correct layout.
						</p></li></ul></div><p>
			</p><p>
				Possible parameters for the CSV output driver:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">csv_filename</code> sets the file
							name for <code class="literal">Content-Disposition</code>
							in the HTTP metadata returned by
							<code class="literal">ocrpt_get_content_type()</code>.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">csv_as_text</code> sets the MIME type
							for <code class="literal">Content-Type</code>
							in the HTTP metadata returned by
							<code class="literal">ocrpt_get_content_type()</code>.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">csv_delimiter</code> (also aliased as
							<code class="literal">csv_delimeter</code> according to
							the historical typo in RLIB) sets the CSV field
							delimiter to the first character of the string.
							By default it's a comma.
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">no_quotes</code> will create a CSV
							output with values unquoted.
							Possible values to enable it are
							<code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
							It takes precedence over
							<code class="literal">only_quote_strings</code>
						</p></li><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">only_quote_strings</code>
							will create a CSV output with only string
							values quoted.
							Possible values to enable it are
							<code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
						</p></li></ul></div><p>
			</p><p>
				Note that some languages (e.g German, Swedish
				and Hungarian) use comma as the decimal separator
				instead of decimal point. For these languages,
				either set <code class="literal">csv_delimiter</code> or
				set neither <code class="literal">no_quotes</code>, nor
				<code class="literal">only_quote_strings</code>
			</p><p>
				Possible parameters for the XML output driver:
				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
							<code class="literal">xml_rlib_compat</code> sets the
							flag to create an RLIB compatible XML output.
							Possible values to enable it are
							<code class="literal">yes</code>,
							<code class="literal">true</code>,
							<code class="literal">on</code> or any positive non-zero
							number. Anything else disables it.
						</p><p>
							When enabled, the toplevel element
							will be <code class="literal">&lt;rlib&gt;</code>
							and <code class="literal">&lt;Report&gt;</code>s
							inside <code class="literal">&lt;pd&gt;</code>
							won't be embedded in a
							<code class="literal">report</code> element.
						</p></li></ul></div><p>
			</p></div><div class="sect2" id="PHPRUNREPORT"><div class="titlepage"><div><div><h3 class="title">8.3.5. Run the report <a href="#PHPRUNREPORT" class="id_link">#</a></h3></div></div></div><p>
				This method executes the report, constructs
				the result in memory. It returns <code class="literal">true</code>
				for success, <code class="literal">false</code> for failure.
				It is a failure if the output format is unset.
				</p><pre class="programlisting">public final
OpenCReport::execute(): bool;</pre><p>
			</p></div><div class="sect2" id="PHPDUMPREPORT"><div class="titlepage"><div><div><h3 class="title">8.3.6. Dump report result <a href="#PHPDUMPREPORT" class="id_link">#</a></h3></div></div></div><p>
				Dump the report output on the program's
				standard output channel.
				</p><pre class="programlisting">public final
OpenCReport::spool(): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTGETRESULT"><div class="titlepage"><div><div><h3 class="title">8.3.7. Get report result <a href="#PHPREPORTGETRESULT" class="id_link">#</a></h3></div></div></div><p>
				Get the report output. The application
				then can save it as a file.
				This method returns the output in a
				<code class="literal">string</code> if report execution
				succeeded, otherwise it returns
				<code class="literal">false</code>.
				</p><pre class="programlisting">public final
OpenCReport::get_output(): string|false;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTGETCONTENTTYPE"><div class="titlepage"><div><div><h3 class="title">8.3.8. Get report content type <a href="#PHPREPORTGETCONTENTTYPE" class="id_link">#</a></h3></div></div></div><p>
				Get the report content type. The application
				then can add it as HTTP header line(s)
				to the request. This method returns an
				array of strings with
				<code class="literal">Content-Type:</code>,
				<code class="literal">Content-Length:</code> and
				other header lines if report execution succeeded.
				Otherwise it returns <code class="literal">false</code>.
				</p><pre class="programlisting">public final
OpenCReport::get_content_type(): array|false;</pre><p>
			</p></div><div class="sect2" id="PHPGETLIBVER"><div class="titlepage"><div><div><h3 class="title">8.3.9. Get library version <a href="#PHPGETLIBVER" class="id_link">#</a></h3></div></div></div><p>
				This method reports the OpenCReports
				library version.
				</p><pre class="programlisting">public final static
OpenCReport::version(): string;</pre><p>
			</p></div></div><div class="sect1" id="PHPLOWLEVELAPI"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.4. Low level PHP API <a href="#PHPLOWLEVELAPI" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPNUMERICTUNING">8.4.1. Numeric behavior related methods</a></span></dt><dt><span class="sect2"><a href="#PHPLOCALEMETHODS">8.4.2. Locale related methods</a></span></dt><dt><span class="sect2"><a href="#PHPDSMETHODS">8.4.3. Data source and query related methods</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRFUNC">8.4.4. Expression related methods</a></span></dt><dt><span class="sect2"><a href="#PHPLAYOUTMETHODS">8.4.5. Layout part related methods</a></span></dt><dt><span class="sect2"><a href="#PHPCALLBACKMETHODS">8.4.6. Callback related methods</a></span></dt><dt><span class="sect2"><a href="#PHPENVMETHODS">8.4.7. Environment related methods</a></span></dt><dt><span class="sect2"><a href="#PHPSETMVARMETHOD">8.4.8. Add "m" domain variable</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTMETHODS">8.4.9. Result related methods</a></span></dt><dt><span class="sect2"><a href="#PHPPATHMETHODS">8.4.10. Path related methods</a></span></dt><dt><span class="sect2"><a href="#PHPCOLORMETHODS">8.4.11. Color related methods</a></span></dt></dl></div><p>
			The <a class="xref" href="#PHPHIGHLEVELAPI" title="8.3. High level PHP API">High level PHP API</a> is also part of the
			low level API. The class methods described below allow
			creating a report using program code, or simply
			fine tuning the report behavior by mostly using the
			<a class="xref" href="#PHPHIGHLEVELAPI" title="8.3. High level PHP API">High level PHP API</a>.
		</p><p>
			Note that whenever the method argument is
			<code class="literal">string $expr_string</code>,
			such arguments are treated as
			<a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> and are only
			parsed when calling the method. Evaluation
			of the expressions is delayed to report
			execution time.
		</p><p>
			Also note that for class methods that return
			objects, the parent object must not be
			<code class="literal">unset()</code> before using
			such a derived object. These derived objects
			are merely wrappers over C pointers in
			their parent objects' C representation.
			Such a "use after free" is a sure way to
			crash the PHP process.
		</p><div class="sect2" id="PHPNUMERICTUNING"><div class="titlepage"><div><div><h3 class="title">8.4.1. Numeric behavior related methods <a href="#PHPNUMERICTUNING" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PHPSETNUMPREC"><div class="titlepage"><div><div><h4 class="title">8.4.1.1. <code class="literal">Set numeric precision</code> <a href="#PHPSETNUMPREC" class="id_link">#</a></h4></div></div></div><p>
					The default is 256 bits of floating point precision.
				</p><pre class="programlisting">public final
OpenCReport::set_numeric_precision_bits(
                     string $expr_string): void;</pre><p>
				</p></div><div class="sect3" id="PHPSETROUNDINGMODE"><div class="titlepage"><div><div><h4 class="title">8.4.1.2. Set rounding mode <a href="#PHPSETROUNDINGMODE" class="id_link">#</a></h4></div></div></div><p>
					The rounding modes may be
					<code class="literal">nearest</code>,
					<code class="literal">to_minus_inf</code>,
					<code class="literal">to_inf</code>,
					<code class="literal">to_zero</code>,
					<code class="literal">away_from_zero</code> and
					<code class="literal">faithful</code>.
					The default is <code class="literal">nearest</code>.
					</p><pre class="programlisting">final public
OpenCReport::set_rounding_mode(
                     string $expr_string): void;</pre><p>
				</p></div></div><div class="sect2" id="PHPLOCALEMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.2. Locale related methods <a href="#PHPLOCALEMETHODS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PHPSETUPXLATE"><div class="titlepage"><div><div><h4 class="title">8.4.2.1. Set up translation <a href="#PHPSETUPXLATE" class="id_link">#</a></h4></div></div></div><p>
					Setting up the translation needs two parameters:
					the so called <span class="emphasis"><em>translation domain</em></span>
					and the toplevel directory for the translations.
					It relies on GNU Gettext.
					</p><pre class="programlisting">public final 
OpenCReport::bindtextdomain(
                     string $domainname,
                     string $dirname): void;</pre><p>
				</p></div><div class="sect3" id="PHPSETLOCALE"><div class="titlepage"><div><div><h4 class="title">8.4.2.2. Set report locale <a href="#PHPSETLOCALE" class="id_link">#</a></h4></div></div></div><p>
					Setting the locale for the report does not affect
					the main program or other threads. Locale setting
					includes the language, the country. The UTF-8 suffix
					is necessary. E.g.: <code class="literal">en_GB.UTF-8</code> or
					<code class="literal">de_DE.UTF-8</code>
					</p><pre class="programlisting">public final
OpenCReport::set_locale(string $locale): void;</pre><p>
				</p></div></div><div class="sect2" id="PHPDSMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.3. Data source and query related methods <a href="#PHPDSMETHODS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PHPADDARRAYDS"><div class="titlepage"><div><div><h4 class="title">8.4.3.1. Add an array datasource <a href="#PHPADDARRAYDS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>
					</p><pre class="programlisting">public final
OpenCReport::datasource_add_array(string $source_name):
                     ?OpenCReport\Datasource;</pre><p>
				</p></div><div class="sect3" id="PHPADDCSVDS"><div class="titlepage"><div><div><h4 class="title">8.4.3.2. Add a CSV datasource <a href="#PHPADDCSVDS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>
					</p><pre class="programlisting">public final
OpenCReport::datasource_add_csv(string $source_name):
                     ?OpenCReport\Datasource;</pre><p>
				</p></div><div class="sect3" id="PHPADDJSONDS"><div class="titlepage"><div><div><h4 class="title">8.4.3.3. Add a JSON datasource <a href="#PHPADDJSONDS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>.
					</p><pre class="programlisting">public final
OpenCReport::datasource_add_json(string $source_name):
                     ?OpenCReport\Datasource;</pre><p>
				</p></div><div class="sect3" id="PHPADDXMLDS"><div class="titlepage"><div><div><h4 class="title">8.4.3.4. Add an XML datasource <a href="#PHPADDXMLDS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>.
					</p><pre class="programlisting">public final
OpenCReport::datasource_add_xml(string $source_name):
                     ?OpenCReport\Datasource;</pre><p>
				</p></div><div class="sect3" id="PHPADDPGDS"><div class="titlepage"><div><div><h4 class="title">8.4.3.5. Add an PostgreSQL datasource <a href="#PHPADDPGDS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>.
					</p><pre class="programlisting">public final
OpenCReport::datasource_add_postgresql(
                     string $source_name,
                     string $host = null,
                     string $port = null,
                     string $dbname = null,
                     string $user = null,
                     string $password = null):
                     ?OpenCReport\Datasource;

public final
OpenCReport::datasource_add_postgresql2(
                     string $source_name,
                     string $connection_info = null):
                     ?OpenCReport\Datasource;</pre><p>
				</p></div><div class="sect3" id="PHPADDMARIADS"><div class="titlepage"><div><div><h4 class="title">8.4.3.6. Add a MariaDB datasource <a href="#PHPADDMARIADS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>.
					</p><pre class="programlisting">public final
OpenCReport::datasource_add_mariadb(
                     string $source_name,
                     string $host = null,
                     string $port = null,
                     string $dbname = null,
                     string $user = null,
                     string $password = null,
                     string $unix_socket = null):
                     ?OpenCReport\Datasource;

public final
OpenCReport::datasource_add_mariadb2(
                     string $source_name,
                     string $option_file = null,
                     string $group = null):
                     ?OpenCReport\Datasource;</pre><p>
				</p></div><div class="sect3" id="PHPADDODBCDS"><div class="titlepage"><div><div><h4 class="title">8.4.3.7. Add an ODBC datasource <a href="#PHPADDODBCDS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>.
					</p><pre class="programlisting">public final
OpenCReport::datasource_add_odbc(
                     string $source_name,
                     string $dbname = null,
                     ?string $user,
                     ?string $password):
                     ?OpenCReport\Datasource;

public final
OpenCReport::datasource_add_odbc2(
                     string $source_name,
                     string $connection_info = null):
                     ?OpenCReport\Datasource;</pre><p>
				</p><p>
					For the parameters, see <a class="xref" href="#ODBCDS" title="2.4.3. ODBC database connection">ODBC database connection</a>.
				</p></div><div class="sect3" id="PHPGETDS"><div class="titlepage"><div><div><h4 class="title">8.4.3.8. Get a named datasource <a href="#PHPGETDS" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Datasource</code>
					class methods, see <a class="xref" href="#PHPDSCLASS" title="8.5. The OpenCReport\Datasource class">The OpenCReport\Datasource class</a>.
					</p><pre class="programlisting">public final
OpenCReport:: datasource_get(string $source_name):
                     ?OpenCReport\Datasource;</pre><p>
				</p></div><div class="sect3" id="PHPGETQUERY"><div class="titlepage"><div><div><h4 class="title">8.4.3.9. Get a named query <a href="#PHPGETQUERY" class="id_link">#</a></h4></div></div></div><p>
					For the <code class="literal">OpenCReport\Query</code>
					class methods, see <a class="xref" href="#PHPQUERYCLASS" title="8.6. The OpenCReport\Query class">The OpenCReport\Query class</a>.
					</p><pre class="programlisting">public final
OpenCReport::query_get(string $query_name):
                     ?OpenCReport\Query;</pre><p>
				</p></div><div class="sect3" id="PHPREFRESHQUERY"><div class="titlepage"><div><div><h4 class="title">8.4.3.10. Refresh the internal representation of array queries <a href="#PHPREFRESHQUERY" class="id_link">#</a></h4></div></div></div><p>
					When adding an array query, the PHP array
					is internally transformed into a C array
					representation, decoupling it from the source data.
					The PHP array may be modified during
					executing the report, e.g. in an event callback.
					This method makes the internal representation
					reflect the new data.
					</p><pre class="programlisting">public static final
query_refresh(): void;</pre><p>
				</p><p>
					There are some limitations what may be
					done to the source PHP array, though.
					</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
								Changes to the first row of data
								(the column names) are ignored.
							</p></li><li class="listitem" style="list-style-type: disc"><p>
								The number of rows and columns
								in the data must not change.
							</p></li></ul></div><p>
				</p></div></div><div class="sect2" id="PHPEXPRFUNC"><div class="titlepage"><div><div><h3 class="title">8.4.4. Expression related methods <a href="#PHPEXPRFUNC" class="id_link">#</a></h3></div></div></div><p>
				Expressions in OpenCReports is explained in the
				<a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> chapter.
			</p><div class="sect3" id="PHPPARSEEXPR"><div class="titlepage"><div><div><h4 class="title">8.4.4.1. Parse an expression <a href="#PHPPARSEEXPR" class="id_link">#</a></h4></div></div></div><p>
					The expression string may not reference
					report specific identifiers.
					</p><pre class="programlisting">public final
OpenCReport::expr_parse(string $expr_string):
                     ?OpenCReport\Expr;</pre><p>
				</p><p>
					If the expression is in any way invalid,
					<code class="literal">OpenCReport::expr_parse()</code>
					returns <code class="literal">null</code>. The error
					is returned by:
					</p><pre class="programlisting">public final
OpenCReport::expr_error(): ?string;</pre><p>
				</p></div><div class="sect3" id="PHPADDUSERFUNC"><div class="titlepage"><div><div><h4 class="title">8.4.4.2. Add a custom report function <a href="#PHPADDUSERFUNC" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">public final
OpenCReport::function_add(
                     string $expr_func_name,
                     string $zend_func_name,
                     long $n_ops,
                     bool $commutative,
                     bool $associative,
                     bool $left_associative,
                     bool $dont_optimize): bool;</pre><p>
				</p><p>
					After this function returns with
					success, subsequently parsed expressions
					may use the function named as the
					value of <code class="literal">$expr_func_name</code>.
					During evaluation of the function, the
					PHP function named as the value of
					<code class="literal">$zend_func_name</code> is called.
					The expressions that use the new function
					may call it with either the number of arguments
					given in <code class="literal">$n_ops</code>, or
					if the value is <code class="literal">-1</code>,
					any number of arguments.
				</p><p>
					The remaining <code class="literal">bool</code>
					arguments indicate the named properties
					of the function that the expression optimizer
					considers.
				</p><p>
					The declaration of the PHP function named
					as the value of <code class="literal">$zend_func_name</code>
					must follow this:
					</p><pre class="programlisting">function my_function(OpenCReport\Expr $e)</pre><p>
				</p><p>
					The function implementation may return
					any PHP base type (<code class="literal">string</code>,
					<code class="literal">long</code>, <code class="literal">double</code>
					or <code class="literal">bool</code>) or it may not return
					a value at all (i.e. <code class="literal">void</code>).
					In the latter case, the function must set the
					return value in the passed-in
					<code class="literal">$e</code> object.
				</p><p>
					For class methods of
					<code class="literal">OpenCReport\Expr</code>,
					please see <a class="xref" href="#PHPEXPRCLASS" title="8.8. The OpenCReport\Expr class">The OpenCReport\Expr class</a>.
				</p></div></div><div class="sect2" id="PHPLAYOUTMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.5. Layout part related methods <a href="#PHPLAYOUTMETHODS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PHPADDPART"><div class="titlepage"><div><div><h4 class="title">8.4.5.1. Add a new report (layout) part <a href="#PHPADDPART" class="id_link">#</a></h4></div></div></div><p>
					For class methods of
					<code class="literal">OpenCReport\Part</code>,
					see <a class="xref" href="#PHPPARTCLASS" title="8.10. The OpenCReport\Part class">The OpenCReport\Part class</a>.
					</p><pre class="programlisting">public final
OpenCReport::part_new(): OpenCReport\Part;</pre><p>
				</p></div><div class="sect3" id="PHPGETFIRSTPART"><div class="titlepage"><div><div><h4 class="title">8.4.5.2. Get first (layout) part <a href="#PHPGETFIRSTPART" class="id_link">#</a></h4></div></div></div><p>
					This function returns an object
					of the <code class="literal">OpenCReport\Part</code>
					class. The object is internally marked
					as an "iterator object", so
					<code class="literal">OpenCReport\Part::get_next()</code>
					may be called on it again to iterate
					through every report part of the
					parent <code class="literal">OpenCReport</code> object.
					</p><pre class="programlisting">public final
OpenCReport::part_get_first(): OpenCReport\Part;</pre><p>
				</p></div><div class="sect3" id="PHPPARTSETPAPERTYPE"><div class="titlepage"><div><div><h4 class="title">8.4.5.3. Set paper type <a href="#PHPPARTSETPAPERTYPE" class="id_link">#</a></h4></div></div></div><p>
					Set the paper type using the paper name,
					i.e. <code class="literal">'letter'</code>,
					<code class="literal">'A4'</code>, etc.
					</p><pre class="programlisting">public final
OpenCReport::set_paper(string $paper): void;</pre><p>
				</p></div><div class="sect3" id="PHPPARTSETSIZEUNIT"><div class="titlepage"><div><div><h4 class="title">8.4.5.4. Set size unit <a href="#PHPPARTSETSIZEUNIT" class="id_link">#</a></h4></div></div></div><p>
					Set the size unit.
					See <a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
					Possible settings are
					<code class="literal">points</code> and <code class="literal">rlib</code>.
					Default is <code class="literal">rlib</code>
					for RLIB compatibility.
					</p><pre class="programlisting">public final
OpenCReport::set_size_unit(string $expr_string): void;</pre><p>
				</p></div><div class="sect3" id="PHPPARTSETNQSND"><div class="titlepage"><div><div><h4 class="title">8.4.5.5. Set "no query show NoData" property <a href="#PHPPARTSETNQSND" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">public final
OpenCReport::set_noquery_show_nodata(
                     string $expr_string): void;</pre><p>
				</p></div><div class="sect3" id="PHPPARTSETRHAL"><div class="titlepage"><div><div><h4 class="title">8.4.5.6. Set "report height after last" property <a href="#PHPPARTSETRHAL" class="id_link">#</a></h4></div></div></div><p>
					</p><pre class="programlisting">public final
OpenCReport::set_report_height_after_last(
                     string $expr_string): void;</pre><p>
				</p></div><div class="sect3" id="PHPPARTSETFMS"><div class="titlepage"><div><div><h4 class="title">8.4.5.7. Set "follower match single" property <a href="#PHPPARTSETFMS" class="id_link">#</a></h4></div></div></div><p>
					See <a class="xref" href="#XMLFOLLOWERMATCHSINGLE" title="2.2.4. Follower match single">Follower match single attribute</a>.
					</p><pre class="programlisting">public final
OpenCReport::set_follower_match_single(
                     string $expr_string): void;
public final
OpenCReport::set_follower_match_single_direct(
                     bool $value): void;</pre><p>
				</p></div></div><div class="sect2" id="PHPCALLBACKMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.6. Callback related methods <a href="#PHPCALLBACKMETHODS" class="id_link">#</a></h3></div></div></div><p>
				These methods add a callback function
				that are called at certain points
				during executing the report.
				</p><pre class="programlisting">public final
OpenCReport::add_precalculation_done_cb(
                     string $callback): void;

public final
OpenCReport::add_part_added_cb(
                     string $callback): void;

public final
OpenCReport::add_report_added_cb(
                     string $callback): void;</pre><p>
			</p><p>
				The "precalculation done" callback
				is called after the first phase of the
				report is finished. The interface of
				the callback function must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o)</pre><p>
			</p><p>
				The "part added" callback is called when
				either <code class="literal">OpenCReport::part_new()</code>
				is called, or a report XML description is parsed
				via either <code class="literal">OpenCReport::parse_xml()</code>
				or <code class="literal">OpenCReport::parse_xml_from_buffer()</code>
				and a <code class="literal">&lt;Part&gt;</code> node is being parsed.
				The interface of the callback function must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o,
            OpenCReport\Part $p)</pre><p>
			</p><p>
				The "report added" callback is called when
				either <code class="literal">OpenCReport\Column::report_new()</code>
				is called, or a report XML description is parsed
				via either <code class="literal">OpenCReport::parse_xml()</code>
				or <code class="literal">OpenCReport::parse_xml_from_buffer()</code>
				and a <code class="literal">&lt;Report&gt;</code> node is being parsed.
				The interface of the callback function must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o,
            OpenCReport\Report $r)</pre><p>
			</p></div><div class="sect2" id="PHPENVMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.7. Environment related methods <a href="#PHPENVMETHODS" class="id_link">#</a></h3></div></div></div><p>
				In PHP, the "environment" includes both
				global variables and actual environment
				variables. If a global variable name exists
				in the PHP environment, its value is returned
				as <code class="literal">OpenCReport\Result</code>.
				If such a PHP global variable doesn't exist,
				the variable from operating (e.g. UNIX)
				environment is used and its value is returned
				if it exists. Otherwise <code class="literal">NULL</code>
				is returned.
				</p><pre class="programlisting">public final
OpenCReport::env_get(string $var_name):
                     OpenCReport\Result;</pre><p>
			</p></div><div class="sect2" id="PHPSETMVARMETHOD"><div class="titlepage"><div><div><h3 class="title">8.4.8. Add "m" domain variable <a href="#PHPSETMVARMETHOD" class="id_link">#</a></h3></div></div></div><p>
				Add an "m" domain variable.
				If such a variable <code class="literal">name</code>
				didn't exist yet, and <code class="literal">value</code>
				is not <code class="literal">NULL</code>, then
				the variable is set. If <code class="literal">value</code>
				is <code class="literal">NULL</code> or omitted, the
				variable is removed. Such an explicit variable
				takes precedence over the PHP global variable
				or the environment variable of the same name when
				used in expressions.
				</p><pre class="programlisting">public final
OpenCReport::set_mvariable(
                     string $name,
                     string $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.9. Result related methods <a href="#PHPRESULTMETHODS" class="id_link">#</a></h3></div></div></div><p>
				This method creates an uninitialized
				<code class="literal">OpenCReport\Result</code>
				with no value. See <a class="xref" href="#PHPRESULTCLASS" title="8.9. The OpenCReport\Result class">The OpenCReport\Result class</a>
				to set the value.
				</p><pre class="programlisting">public final
OpenCReport::result_new(): OpenCReport\Result;</pre><p>
			</p></div><div class="sect2" id="PHPPATHMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.10. Path related methods <a href="#PHPPATHMETHODS" class="id_link">#</a></h3></div></div></div><div class="sect3" id="PHPADDSEARCHPATH"><div class="titlepage"><div><div><h4 class="title">8.4.10.1. Add a search path <a href="#PHPADDSEARCHPATH" class="id_link">#</a></h4></div></div></div><p>
						</p><pre class="programlisting">public final
OpenCReport::add_search_path(string $path): void;</pre><p>
					</p></div><div class="sect3" id="PHPGETCANONFILE"><div class="titlepage"><div><div><h4 class="title">8.4.10.2. Canonicalize path <a href="#PHPGETCANONFILE" class="id_link">#</a></h4></div></div></div><p>
						This method returns (a possibly modified)
						path that will create a canonical
						absolute path that doesn't contain
						<code class="literal">.</code> and <code class="literal">..</code>
						references, symlinks are replaced with
						the actual target directory, etc.
						</p><pre class="programlisting">public static final
OpenCReport::canonicalize_path(string $path): string;</pre><p>
					</p></div><div class="sect3" id="PHPFINDFILE"><div class="titlepage"><div><div><h4 class="title">8.4.10.3. Find a file <a href="#PHPFINDFILE" class="id_link">#</a></h4></div></div></div><p>
						Find a (possibly relative) file using
						the search paths and return the canonical
						absolute path if found.
						</p><pre class="programlisting">public final
OpenCReport::find_file(string $path): $string;</pre><p>
					</p></div></div><div class="sect2" id="PHPCOLORMETHODS"><div class="titlepage"><div><div><h3 class="title">8.4.11. Color related methods <a href="#PHPCOLORMETHODS" class="id_link">#</a></h3></div></div></div><p>
				Get an array with <code class="literal">double</code>
				components for the color name or color
				specification.
				</p><pre class="programlisting">public static
OpenCReport::final get_color(
                     string $color_name,
                     ?bool $bgcolor = false): array;</pre><p>
			</p></div></div><div class="sect1" id="PHPDSCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.5. The OpenCReport\Datasource class <a href="#PHPDSCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPDSFREE">8.5.1. Free a datasource</a></span></dt><dt><span class="sect2"><a href="#PHPDSQUERYADD">8.5.2. Add a query to the datasource</a></span></dt><dt><span class="sect2"><a href="#PHPDSSETENCODING">8.5.3. Set datasource encoding</a></span></dt></dl></div><p>
			This class has no constructor, so such an object
			cannot be created or used on its own. A datasource
			only is only useful as part of a report. The
			<code class="literal">OpenCReport::datasource_add_*</code>
			methods return an object of this class.
			</p><pre class="programlisting">class OpenCReport\Datasource {
    public final free(): void;

    public final query_add(string $name,
                           string $array_or_file_or_sql,
                           ?string $coltypes = null):
                           OpenCReport\Query;

    public final set_encoding(string $encoding): void;
}</pre><p>
		</p><div class="sect2" id="PHPDSFREE"><div class="titlepage"><div><div><h3 class="title">8.5.1. Free a datasource <a href="#PHPDSFREE" class="id_link">#</a></h3></div></div></div><p>
				The datasource is freed for the
				parent <code class="literal">OpenCReport</code>
				object.
				</p><pre class="programlisting">public final
OpenCReport\Datasource::free(): void;</pre><p>
			</p></div><div class="sect2" id="PHPDSQUERYADD"><div class="titlepage"><div><div><h3 class="title">8.5.2. Add a query to the datasource <a href="#PHPDSQUERYADD" class="id_link">#</a></h3></div></div></div><p>
				Add a query to the parent
				<code class="literal">OpenCReport</code> object
				associated with the
				<code class="literal">OpenCReport\Datasource</code>.
				</p><pre class="programlisting">public final
OpenCReport\Datasource::query_add(string $name,
                           string $array_or_file_or_sql,
                           ?string $coltypes = null):
                           OpenCReport\Query;</pre><p>
			</p><p>
				<code class="literal">$name</code> is the query name
				that <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a> may use
				as the identifier domain.
			</p><p>
				<code class="literal">$array_or_file_or_sql</code>
				contains the array name (for an array datasource),
				the file name (for a file based datasource,
				like JSON, CSV or XML), or the SQL query statement
				for SQL based datasources (like MariaDB, PostgreSQL
				or ODBC).
			</p><p>
				Passing <code class="literal">$coltypes</code> is
				optional and is only valid for array or
				file based datasources. File based datasources
				may or may not include column type specification.
				Array datasources don't. The <code class="literal">$coltypes</code>
				array contains long values
				<code class="literal">OpenCReport::RESULT_*</code>.
				See <a class="xref" href="#MAINCLASS" title="8.2. The OpenCReport class">The OpenCReport class</a>. It helps
				the engine to add automatic data conversion
				for query column data.
				SQL based datasources provide the data type
				for query columns.
			</p></div><div class="sect2" id="PHPDSSETENCODING"><div class="titlepage"><div><div><h3 class="title">8.5.3. Set datasource encoding <a href="#PHPDSSETENCODING" class="id_link">#</a></h3></div></div></div><p>
				Set encoding for the datasource.
				By default, UTF-8 is expected.
				</p><pre class="programlisting">public final
OpenCReport\Datasource::set_encoding(string $encoding): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPQUERYCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.6. The OpenCReport\Query class <a href="#PHPQUERYCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPQUERYGETRESULT">8.6.1. Get result for a query's current row</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYNAVSTART">8.6.2. Start navigation for a query</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYNAVNEXT">8.6.3. Navigate to the next row</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYNAVUSEPREVNEXTROW">8.6.4. Navigate use previous/next row</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYADDFOLLOWER">8.6.5. Add a query follower</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYADDN1FOLLOWER">8.6.6. Add an N:1 query follower</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYFREE">8.6.7. Free a query</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Query {
    public final get_result():
                     OpenCReport\QueryResult;

    public final navigate_start(): void;
    public final navigate_next(): bool;

    public final navigate_use_prev_row(): void;
    public final navigate_use_next_row(): void;

    public final add_follower(
                     OpenCReport\Query $follower):
                     bool;
    public final add_follower_n_to_1(
                     OpenCReport\Query $follower,
                     OpenCReport\Expr $match):
                     bool;

    public final free(): void;
}</pre><p>
		</p><div class="sect2" id="PHPQUERYGETRESULT"><div class="titlepage"><div><div><h3 class="title">8.6.1. Get result for a query's current row <a href="#PHPQUERYGETRESULT" class="id_link">#</a></h3></div></div></div><p>
				The result is <code class="literal">OpenCReport\QueryResult</code>.
				See <a class="xref" href="#PHPQUERYRESULTCLASS" title="8.7. The OpenCReport\QueryResult class">Section 8.7</a>.
				</p><pre class="programlisting">public final
OpenCReport\Query::get_result():
                     OpenCReport\QueryResult;</pre><p>
			</p></div><div class="sect2" id="PHPQUERYNAVSTART"><div class="titlepage"><div><div><h3 class="title">8.6.2. Start navigation for a query <a href="#PHPQUERYNAVSTART" class="id_link">#</a></h3></div></div></div><p>
				Reset query (and all its followers) to go
				before the first row.
				</p><pre class="programlisting">public final
OpenCReport\Query::navigate_start(): void;</pre><p>
			</p></div><div class="sect2" id="PHPQUERYNAVNEXT"><div class="titlepage"><div><div><h3 class="title">8.6.3. Navigate to the next row <a href="#PHPQUERYNAVNEXT" class="id_link">#</a></h3></div></div></div><p>
				Navigate the query to the next row and return
				if the new row is valid. The current row of
				the query's follower queries are also moved
				to the next valid row.
				</p><pre class="programlisting">public final
OpenCReport\Query::navigate_next(): bool;</pre><p>
			</p><p>
				Usually queries do not have a uniform
				way to report the total number of rows,
				although some datasource types may have
				such a facility. Instead, they can report
				that the dataset has ended.
			</p></div><div class="sect2" id="PHPQUERYNAVUSEPREVNEXTROW"><div class="titlepage"><div><div><h3 class="title">8.6.4. Navigate use previous/next row <a href="#PHPQUERYNAVUSEPREVNEXTROW" class="id_link">#</a></h3></div></div></div><p>
				These functions expose an implementation
				detail of the data traversal in OpenCReports.
				There is a 3-row data cache in which there is
				always the current row. One past row is kept
				so e.g. break boundaries can be detected and
				there is one row read-ahead to detect the
				end-of-data condition early. These functions
				allow to switch back and forth in the 3-row
				data cache, making the previous or next row the
				"current" one momentarily. The query must always
				be the primary query of the report. Used by
				unit tests that don't use
				<code class="literal">ocrpt_execute()</code>.
				</p><pre class="programlisting">public final
OpenCReport\Query::navigate_use_prev_row(): bool;

public final
OpenCReport\Query::navigate_use_next_row(): bool;</pre><p>
			</p><p>
				Usually queries do not have a uniform
				way to report the total number of rows,
				although some datasource types may have
				such a facility. Instead, they can report
				that the dataset has ended.
			</p></div><div class="sect2" id="PHPQUERYADDFOLLOWER"><div class="titlepage"><div><div><h3 class="title">8.6.5. Add a query follower <a href="#PHPQUERYADDFOLLOWER" class="id_link">#</a></h3></div></div></div><p>
				Add a query as an 1:1 follower to the main
				query object. The method returns whether
				the call succeeded.
				</p><pre class="programlisting">public final
OpenCReport\Query::add_follower(
                     OpenCReport\Query $follower):
                     bool;</pre><p>
			</p><p>
				Adding a circular reference between queries
				would fail.
			</p></div><div class="sect2" id="PHPQUERYADDN1FOLLOWER"><div class="titlepage"><div><div><h3 class="title">8.6.6. Add an N:1 query follower <a href="#PHPQUERYADDN1FOLLOWER" class="id_link">#</a></h3></div></div></div><p>
				Add a query and the matching expression
				as a follower to the main query object.
				The method returns whether the call
				succeeded.
				</p><pre class="programlisting">public final
OpenCReport\Query::add_follower_n_to_1(
                     OpenCReport\Query $follower,
                     OpenCReport\Expr $match):
                     bool;</pre><p>
			</p><p>
				Adding a circular reference between queries
				would fail.
			</p><p>
				The call takes over ownership of the
				match object and it must not be
				explicitly freed.
			</p></div><div class="sect2" id="PHPQUERYFREE"><div class="titlepage"><div><div><h3 class="title">8.6.7. Free a query <a href="#PHPQUERYFREE" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Query::free(): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPQUERYRESULTCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.7. The OpenCReport\QueryResult class <a href="#PHPQUERYRESULTCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPQUERYRESULTCOLUMNS">8.7.1. Get number of columns for a query result</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYRESULTCOLNAME">8.7.2. Get the nth column name for a query result</a></span></dt><dt><span class="sect2"><a href="#PHPQUERYRESULTCOLRESULT">8.7.3. Get the nth column result for a query result</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\QueryResult {
    public final columns(): long;

    public final column_name(long $index): ?string;

    public final column_result(long $index):
                     ?OpenCReport\Result;
}</pre><p>
		</p><div class="sect2" id="PHPQUERYRESULTCOLUMNS"><div class="titlepage"><div><div><h3 class="title">8.7.1. Get number of columns for a query result <a href="#PHPQUERYRESULTCOLUMNS" class="id_link">#</a></h3></div></div></div><p>
				This method returns the number of columns
				for the query result.
				</p><pre class="programlisting">public final
OpenCReport\QueryResult::columns(): long;</pre><p>
			</p></div><div class="sect2" id="PHPQUERYRESULTCOLNAME"><div class="titlepage"><div><div><h3 class="title">8.7.2. Get the nth column name for a query result <a href="#PHPQUERYRESULTCOLNAME" class="id_link">#</a></h3></div></div></div><p>
				This method returns the column name
				for the query result at <code class="literal">$index</code>.
				It returns <code class="literal">NULL</code> for invalid indices.
				</p><pre class="programlisting">public final
OpenCReport\QueryResult::column_name(long $index):
                     ?string;</pre><p>
			</p></div><div class="sect2" id="PHPQUERYRESULTCOLRESULT"><div class="titlepage"><div><div><h3 class="title">8.7.3. Get the nth column result for a query result <a href="#PHPQUERYRESULTCOLRESULT" class="id_link">#</a></h3></div></div></div><p>
				This method returns the column result
				for the query result at <code class="literal">$index</code>.
				It returns <code class="literal">NULL</code> for invalid indices.
				</p><pre class="programlisting">public final
OpenCReport\QueryResult::column_result(long $index):
                     ?OpenCReport\Result;</pre><p>
			</p></div></div><div class="sect1" id="PHPEXPRCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.8. The OpenCReport\Expr class <a href="#PHPEXPRCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPEXPRFREE">8.8.1. Free an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRPRINT">8.8.2. Print an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRNODES">8.8.3. Get the number of expression tree nodes</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRRESOLVE">8.8.4. Resolve an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPROPTIMIZE">8.8.5. Optimize an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPREVAL">8.8.6. Evaluate an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETRESULT">8.8.7. Get the result of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETSTRINGVALUE">8.8.8. Set expression result to a string value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETLONGVALUE">8.8.9. Set expression result to a long value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETDOUBLEVALUE">8.8.10. Set expression result to a double value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNUMBERVALUEFROMSTRING">8.8.11. Set expression result to a numeric value from string</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETNUMOPS">8.8.12. Get number of operands of a expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPROPGETRESULT">8.8.13. Get nth operands' result of a expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRCMPRESULTS">8.8.14. Compare the expression's current and previous results</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRINITRESULTS">8.8.15. Initialize expression results</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETSTRINGVALUE">8.8.16. Get string value of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETLONGVALUE">8.8.17. Get long value of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETDOUBLEVALUE">8.8.18. Get double value of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRGETNUMBERVALUEASSTRING">8.8.19. Get numeric value of an expression as a string</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNTHSTRINGVALUE">8.8.20. Set nth result of an expression to a string value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNTHLONGVALUE">8.8.21. Set nth result of an expression to a long value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETNTHDOUBLEVALUE">8.8.22. Set nth result of an expression to a double value</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETITERATIVESTARTFLAG">8.8.23. Set iterative start flag of an expression</a></span></dt><dt><span class="sect2"><a href="#PHPEXPRSETDELAYED">8.8.24. Set expression to delayed</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Expr {
    public final free(): void;

    public final print(): void;

    public final nodes(): long;

    public final resolve(): void;
    public final optimize(): void;
    public final eval():
                     ?OpenCReport\Result;

    public final get_result():
                     ?OpenCReport\Result;
    public final set_string(
                     string $value): void;
    public final set_long(
                     long $value): void;
    public final set_double(
                     double $value): void;
    public final set_number(
                     string $value): void;

    public final get_num_operands(): long;

    public final operand_get_result(
                     long $opidx):
                     ?OpenCReport\Result;

    public final cmp_results(): bool;

    public final init_results(long $result_type):
                     void;
    public final get_string(): ?string;
    public final get_long(): long;
    public final get_double(): double;
    public final get_number(): ?string;

    public final set_nth_result_string(
                     long $which,
                     string $value): void;

    public final set_nth_result_long(
                     long $which,
                     long $value): void;

    public final set_nth_result_double(
                     long $which,
                     double $value): void;

    public final set_iterative_start_value(
                     bool $value): void;

    public final set_delayed(
                     bool $value): void;
}</pre><p>
		</p><div class="sect2" id="PHPEXPRFREE"><div class="titlepage"><div><div><h3 class="title">8.8.1. Free an expression <a href="#PHPEXPRFREE" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::free(): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRPRINT"><div class="titlepage"><div><div><h3 class="title">8.8.2. Print an expression <a href="#PHPEXPRPRINT" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::print(): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRNODES"><div class="titlepage"><div><div><h3 class="title">8.8.3. Get the number of expression tree nodes <a href="#PHPEXPRNODES" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests to compare the expression
				tree before and after optimization.
				</p><pre class="programlisting">public final
OpenCReport\Expr::nodes(): long;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRRESOLVE"><div class="titlepage"><div><div><h3 class="title">8.8.4. Resolve an expression <a href="#PHPEXPRRESOLVE" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Expr::resolve(): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPROPTIMIZE"><div class="titlepage"><div><div><h3 class="title">8.8.5. Optimize an expression <a href="#PHPEXPROPTIMIZE" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Expr::optimize(): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPREVAL"><div class="titlepage"><div><div><h3 class="title">8.8.6. Evaluate an expression <a href="#PHPEXPREVAL" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Expr::eval():
						 ?OpenCReport\Result;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRGETRESULT"><div class="titlepage"><div><div><h3 class="title">8.8.7. Get the result of an expression <a href="#PHPEXPRGETRESULT" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Expr::get_result():
						 ?OpenCReport\Result;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETSTRINGVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.8. Set expression result to a string value <a href="#PHPEXPRSETSTRINGVALUE" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_string(
						 string $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETLONGVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.9. Set expression result to a long value <a href="#PHPEXPRSETLONGVALUE" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_long(
						 long $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETDOUBLEVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.10. Set expression result to a double value <a href="#PHPEXPRSETDOUBLEVALUE" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_double(
						 double $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETNUMBERVALUEFROMSTRING"><div class="titlepage"><div><div><h3 class="title">8.8.11. Set expression result to a numeric value from string <a href="#PHPEXPRSETNUMBERVALUEFROMSTRING" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				This allows using
				<a class="ulink" href="https://www.php.net/manual/en/book.bc.php" target="_top">BC Math</a>
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_number_from_string(
						 string $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRGETNUMOPS"><div class="titlepage"><div><div><h3 class="title">8.8.12. Get number of operands of a expression <a href="#PHPEXPRGETNUMOPS" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Expr::get_num_operands(): long;</pre><p>
			</p></div><div class="sect2" id="PHPEXPROPGETRESULT"><div class="titlepage"><div><div><h3 class="title">8.8.13. Get nth operands' result of a expression <a href="#PHPEXPROPGETRESULT" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Expr::operand_get_result(
						 long $opidx):
						 ?OpenCReport\Result;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRCMPRESULTS"><div class="titlepage"><div><div><h3 class="title">8.8.14. Compare the expression's current and previous results <a href="#PHPEXPRCMPRESULTS" class="id_link">#</a></h3></div></div></div><p>
				Used internally by the report executor
				and unit tests. Useful for implementing
				a custom report executor with breaks.
				</p><pre class="programlisting">public final
OpenCReport\Expr::cmp_results(): bool;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRINITRESULTS"><div class="titlepage"><div><div><h3 class="title">8.8.15. Initialize expression results <a href="#PHPEXPRINITRESULTS" class="id_link">#</a></h3></div></div></div><p>
				Used internally by the report executor
				and unit tests. Useful for implementing
				a custom report executor.
				</p><pre class="programlisting">public final
OpenCReport\Expr::init_results(long $result_type):
						 void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRGETSTRINGVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.16. Get string value of an expression <a href="#PHPEXPRGETSTRINGVALUE" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::get_string(): ?string;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRGETLONGVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.17. Get long value of an expression <a href="#PHPEXPRGETLONGVALUE" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::get_long(): long;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRGETDOUBLEVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.18. Get double value of an expression <a href="#PHPEXPRGETDOUBLEVALUE" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::get_double(): double;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRGETNUMBERVALUEASSTRING"><div class="titlepage"><div><div><h3 class="title">8.8.19. Get numeric value of an expression as a string <a href="#PHPEXPRGETNUMBERVALUEASSTRING" class="id_link">#</a></h3></div></div></div><p>
				Used internally by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::get_number():
                         ?string;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETNTHSTRINGVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.20. Set nth result of an expression to a string value <a href="#PHPEXPRSETNTHSTRINGVALUE" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_nth_result_string(
						 long $which,
						 string $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETNTHLONGVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.21. Set nth result of an expression to a long value <a href="#PHPEXPRSETNTHLONGVALUE" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_nth_result_long(
						 long $which,
						 long $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETNTHDOUBLEVALUE"><div class="titlepage"><div><div><h3 class="title">8.8.22. Set nth result of an expression to a double value <a href="#PHPEXPRSETNTHDOUBLEVALUE" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_nth_result_double(
						 long $which,
						 double $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETITERATIVESTARTFLAG"><div class="titlepage"><div><div><h3 class="title">8.8.23. Set iterative start flag of an expression <a href="#PHPEXPRSETITERATIVESTARTFLAG" class="id_link">#</a></h3></div></div></div><p>
				Used internally by the report executor
				and by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_iterative_start_value(
						 bool $value): void;</pre><p>
			</p></div><div class="sect2" id="PHPEXPRSETDELAYED"><div class="titlepage"><div><div><h3 class="title">8.8.24. Set expression to delayed <a href="#PHPEXPRSETDELAYED" class="id_link">#</a></h3></div></div></div><p>
				A delayed expression's final value is
				precalculated, and this value is used
				in the output in every row of the report.
				</p><pre class="programlisting">public final
OpenCReport\Expr::set_delayed(
						 bool $value): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPRESULTCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.9. The OpenCReport\Result class <a href="#PHPRESULTCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPRESULTFREE">8.9.1. Free a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTCOPY">8.9.2. Copy a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTPRINT">8.9.3. Print a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTGETTYPE">8.9.4. Get result object value type</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTISNULL">8.9.5. Detect whether result object value is NULL</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTISSTRING">8.9.6. Detect whether result object value is a string</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTISNUMBER">8.9.7. Detect whether result object value is a number</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTGETSTRING">8.9.8. Get string value of a result object</a></span></dt><dt><span class="sect2"><a href="#PHPRESULTGETNUMBER">8.9.9. Get numeric value of a result object as a string</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Result {
    public final free(): void;

    public final copy(
                     OpenCReport\Result $src_result):
                     void;

    public final print(): void;

    public final get_type(): long;

    public final is_null(): bool;
    public final is_string(): bool;
    public final is_number(): bool;
    public final get_string(): ?string;
    public final get_number(?string $format): ?string;
}</pre><p>
		</p><div class="sect2" id="PHPRESULTFREE"><div class="titlepage"><div><div><h3 class="title">8.9.1. Free a result object <a href="#PHPRESULTFREE" class="id_link">#</a></h3></div></div></div><p>
				Only use it for separately created
				result objects, like via
				<code class="literal">OpenCReport::env_get()</code> and
				<code class="literal">OpenCReport::result_new()</code>.
				Not needed for freeing an expression.
				</p><pre class="programlisting">public final
OpenCReport\Result::free(): void;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTCOPY"><div class="titlepage"><div><div><h3 class="title">8.9.2. Copy a result object <a href="#PHPRESULTCOPY" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Result::copy(
                     OpenCReport\Result $src_result):
                     void;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTPRINT"><div class="titlepage"><div><div><h3 class="title">8.9.3. Print a result object <a href="#PHPRESULTPRINT" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Result::print(): void;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTGETTYPE"><div class="titlepage"><div><div><h3 class="title">8.9.4. Get result object value type <a href="#PHPRESULTGETTYPE" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Result::get_type(): long;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTISNULL"><div class="titlepage"><div><div><h3 class="title">8.9.5. Detect whether result object value is NULL <a href="#PHPRESULTISNULL" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Result::is_null(): bool;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTISSTRING"><div class="titlepage"><div><div><h3 class="title">8.9.6. Detect whether result object value is a string <a href="#PHPRESULTISSTRING" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Result::is_string(): bool;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTISNUMBER"><div class="titlepage"><div><div><h3 class="title">8.9.7. Detect whether result object value is a number <a href="#PHPRESULTISNUMBER" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Result::is_number(): bool;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTGETSTRING"><div class="titlepage"><div><div><h3 class="title">8.9.8. Get string value of a result object <a href="#PHPRESULTGETSTRING" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				</p><pre class="programlisting">public final
OpenCReport\Result::get_string(): ?string;</pre><p>
			</p></div><div class="sect2" id="PHPRESULTGETNUMBER"><div class="titlepage"><div><div><h3 class="title">8.9.9. Get numeric value of a result object as a string <a href="#PHPRESULTGETNUMBER" class="id_link">#</a></h3></div></div></div><p>
				Useful for user functions.
				The method may optionally use a format string
				to specify the number of decimal digits.
				See <a class="ulink" href="https://www.mpfr.org/mpfr-current/mpfr.html#Format-String" target="_top">MPFR format strings</a>.
				The returned value may be used with
				<a class="ulink" href="https://www.php.net/manual/en/book.bc.php" target="_top">BC Math</a>
				in PHP or (if the precision is small enough)
				converted to <code class="literal">double</code> or
				<code class="literal">long</code>.
				</p><pre class="programlisting">public final
OpenCReport\Result::get_number(?string $format): ?string;</pre><p>
			</p></div></div><div class="sect1" id="PHPPARTCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.10. The OpenCReport\Part class <a href="#PHPPARTCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPPARTGETNEXT">8.10.1. Get the next report part</a></span></dt><dt><span class="sect2"><a href="#PHPPARTROWNEW">8.10.2. Create a new report part row</a></span></dt><dt><span class="sect2"><a href="#PHPPARTROWGETFIRST">8.10.3. Get the first report part row</a></span></dt><dt><span class="sect2"><a href="#PHPPARTADDITERATIONCB">8.10.4. Add iteration callback for the part</a></span></dt><dt><span class="sect2"><a href="#PHPPARTEQUALS">8.10.5. Check whether two parts are identical</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETITERATIONS">8.10.6. Check whether two parts are identical</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETFONTNAME">8.10.7. Set part font name</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETFONTSIZE">8.10.8. Set part font size</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETPAPER">8.10.9. Set part font size</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETORIENTATION">8.10.10. Set part orientation</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETTOPMARGIN">8.10.11. Set part top margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETBOTTOMMARGIN">8.10.12. Set part bottom margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETLEFTMARGIN">8.10.13. Set part left margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETRIGHTMARGIN">8.10.14. Set part right margin</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETSUPPRESS">8.10.15. Set part suppression</a></span></dt><dt><span class="sect2"><a href="#PHPPARTSETSPHF">8.10.16. Set suppression of the page header on the first page</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEHEADER">8.10.17. Get the part's page header</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEHEADERSETREPORT">8.10.18. Set the report object for the part's page header</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEFOOTER">8.10.19. Get the part's page footer</a></span></dt><dt><span class="sect2"><a href="#PHPPARTPAGEFOOTERSETREPORT">8.10.20. Set the report object for the part's page footer</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Part {
    public final get_next():
                     ?OpenCReport\Part;

    public final row_new():
                     OpenCReport\Row;

    public final row_get_first():
                     ?OpenCReport\Row;

    public final add_iteration_cb(
                     string $callback): void;

    public final equals(
                     OpenCReport\Part $part): bool;

    public final set_iterations(
                     ?string $expr_string = null): void;

    public final set_font_name(
                     ?string $expr_string = null): void;

    public final set_font_size(
                     ?string $expr_string = null): void;

    public final set_paper(
                     ?string $expr_string = null): void;

    public final set_orientation(
                     ?string $expr_string = null): void;

    public final set_top_margin(
                     ?string $expr_string = null): void;

    public final set_bottom_margin(
                     ?string $expr_string = null): void;

    public final set_left_margin(
                     ?string $expr_string = null): void;

    public final set_right_margin(
                     ?string $expr_string = null): void;

    public final set_suppress(
                     ?string $expr_string = null): void;

    public final set_suppress_pageheader_firstpage(
                     ?string $expr_string = null): void;

    public final page_header():
                     ?OpenCReport\Output;

    public final page_header_set_report(
                     OpenCReport\Report $report):
                     void;

    public final page_footer():
                     ?OpenCReport\Output;

    public final page_footer_set_report(
                     OpenCReport\Report $report):
                     void;
}</pre><p>
		</p><div class="sect2" id="PHPPARTGETNEXT"><div class="titlepage"><div><div><h3 class="title">8.10.1. Get the next report part <a href="#PHPPARTGETNEXT" class="id_link">#</a></h3></div></div></div><p>
				Get the next object in the chain of report parts.
				This method may only be used on an object created
				with <code class="literal">OpenCReport::part_get_first()</code>,
				i.e. one that was internally marked as an iterator
				object.
				</p><pre class="programlisting">public final
OpenCReport\Part::get_next():
                     ?OpenCReport\Part;</pre><p>
			</p></div><div class="sect2" id="PHPPARTROWNEW"><div class="titlepage"><div><div><h3 class="title">8.10.2. Create a new report part row <a href="#PHPPARTROWNEW" class="id_link">#</a></h3></div></div></div><p>
				For class methods of <code class="literal">OpenCReport\Row</code>,
				see <a class="xref" href="#PHPPARTROWCLASS" title="8.11. The OpenCReport\Row class">Section 8.11</a>
				</p><pre class="programlisting">public final
OpenCReport\Part::row_new():
                     OpenCReport\Row;</pre><p>
			</p></div><div class="sect2" id="PHPPARTROWGETFIRST"><div class="titlepage"><div><div><h3 class="title">8.10.3. Get the first report part row <a href="#PHPPARTROWGETFIRST" class="id_link">#</a></h3></div></div></div><p>
				Get the first part row from the part.
				The object is marked internally as an iterator.
				For class methods of <code class="literal">OpenCReport\Row</code>,
				see <a class="xref" href="#PHPPARTROWCLASS" title="8.11. The OpenCReport\Row class">Section 8.11</a>
				</p><pre class="programlisting">public final
OpenCReport\Part::row_get_first():
                     ?OpenCReport\Row;</pre><p>
			</p></div><div class="sect2" id="PHPPARTADDITERATIONCB"><div class="titlepage"><div><div><h3 class="title">8.10.4. Add iteration callback for the part <a href="#PHPPARTADDITERATIONCB" class="id_link">#</a></h3></div></div></div><p>
				Add an "iteration done" event callback
				for the part object.
				</p><pre class="programlisting">public final
OpenCReport\Part::add_iteration_cb(
                     string $callback): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTEQUALS"><div class="titlepage"><div><div><h3 class="title">8.10.5. Check whether two parts are identical <a href="#PHPPARTEQUALS" class="id_link">#</a></h3></div></div></div><p>
				Check whether two part objects refer to
				the same internal part structure of the report.
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Part::equals(
                     OpenCReport\Part $part): bool;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETITERATIONS"><div class="titlepage"><div><div><h3 class="title">8.10.6. Check whether two parts are identical <a href="#PHPPARTSETITERATIONS" class="id_link">#</a></h3></div></div></div><p>
				Set the number of iterations for the part.
				The expression must evaluate to a numeric
				(integer) value. The part and all of its
				subsections will be calculated and rendered
				this many times. Default is 1.
				</p><pre class="programlisting">public final
OpenCReport\Part::set_iterations(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETFONTNAME"><div class="titlepage"><div><div><h3 class="title">8.10.7. Set part font name <a href="#PHPPARTSETFONTNAME" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Part::set_font_name(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETFONTSIZE"><div class="titlepage"><div><div><h3 class="title">8.10.8. Set part font size <a href="#PHPPARTSETFONTSIZE" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Part::set_font_size(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETPAPER"><div class="titlepage"><div><div><h3 class="title">8.10.9. Set part font size <a href="#PHPPARTSETPAPER" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Part::set_paper(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETORIENTATION"><div class="titlepage"><div><div><h3 class="title">8.10.10. Set part orientation <a href="#PHPPARTSETORIENTATION" class="id_link">#</a></h3></div></div></div><p>
				The expression must evaluate
				to a string value. The possible
				values are <code class="literal">portrait</code>
				and <code class="literal">landscape</code>.
				Default is <code class="literal">portrait</code>.
				</p><pre class="programlisting">public final
OpenCReport\Part::set_orientation(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETTOPMARGIN"><div class="titlepage"><div><div><h3 class="title">8.10.11. Set part top margin <a href="#PHPPARTSETTOPMARGIN" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Part::set_top_margin(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETBOTTOMMARGIN"><div class="titlepage"><div><div><h3 class="title">8.10.12. Set part bottom margin <a href="#PHPPARTSETBOTTOMMARGIN" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Part::set_bottom_margin(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETLEFTMARGIN"><div class="titlepage"><div><div><h3 class="title">8.10.13. Set part left margin <a href="#PHPPARTSETLEFTMARGIN" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Part::set_left_margin(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETRIGHTMARGIN"><div class="titlepage"><div><div><h3 class="title">8.10.14. Set part right margin <a href="#PHPPARTSETRIGHTMARGIN" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Part::set_right_margin(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.10.15. Set part suppression <a href="#PHPPARTSETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				Set whether the part is suppressed, i.e.
				all its subsections are omitted from calculating
				and rendering. Default is <code class="literal">false</code>.
				</p><pre class="programlisting">public final
OpenCReport\Part::set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTSETSPHF"><div class="titlepage"><div><div><h3 class="title">8.10.16. Set suppression of the page header on the first page <a href="#PHPPARTSETSPHF" class="id_link">#</a></h3></div></div></div><p>
				Set whether the page header of the part is
				suppressed on the first page. The expression
				must evaluate to a numeric value, which is
				treated as a boolean (i.e. 0 or non-0).
				Default is <code class="literal">false</code>.
				</p><pre class="programlisting">public final
OpenCReport\Part::set_suppress_pageheader_firstpage(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTPAGEHEADER"><div class="titlepage"><div><div><h3 class="title">8.10.17. Get the part's page header <a href="#PHPPARTPAGEHEADER" class="id_link">#</a></h3></div></div></div><p>
				Get the part's page header <code class="literal">&lt;Output&gt;</code>
				section. See <a class="xref" href="#PHPOUTPUTCLASS" title="8.16. The OpenCReport\Output class">Section 8.16</a> and
				<a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
				</p><pre class="programlisting">public final
OpenCReport\Part::page_header():
                     ?OpenCReport\Output;</pre><p>
			</p></div><div class="sect2" id="PHPPARTPAGEHEADERSETREPORT"><div class="titlepage"><div><div><h3 class="title">8.10.18. Set the report object for the part's page header <a href="#PHPPARTPAGEHEADERSETREPORT" class="id_link">#</a></h3></div></div></div><p>
				Set the report object for the part's page header.
				This will add the internal association between
				the part's page header and the report, and
				expressions in the part page header may reference
				report query column identifiers and report user variables.
				Therefore it is only recommended for single-part,
				single-report reports.
				</p><pre class="programlisting">public final
OpenCReport\Part::page_header_set_report(
                     OpenCReport\Report $report):
                     void;</pre><p>
			</p></div><div class="sect2" id="PHPPARTPAGEFOOTER"><div class="titlepage"><div><div><h3 class="title">8.10.19. Get the part's page footer <a href="#PHPPARTPAGEFOOTER" class="id_link">#</a></h3></div></div></div><p>
				Get the part's page footer <code class="literal">&lt;Output&gt;</code>
				section. See <a class="xref" href="#PHPOUTPUTCLASS" title="8.16. The OpenCReport\Output class">Section 8.16</a> and
				<a class="xref" href="#OUTPUTNODE" title="2.15. Output">Output node</a>.
				</p><pre class="programlisting">public final
OpenCReport\Part::page_footer():
                     ?OpenCReport\Output;</pre><p>
			</p></div><div class="sect2" id="PHPPARTPAGEFOOTERSETREPORT"><div class="titlepage"><div><div><h3 class="title">8.10.20. Set the report object for the part's page footer <a href="#PHPPARTPAGEFOOTERSETREPORT" class="id_link">#</a></h3></div></div></div><p>
				Set the report object for the part's page footer.
				This will add the internal association between
				the part's page footer and the report, and
				expressions in the part page footer may reference
				report query column identifiers and report user variables.
				Therefore it is only recommended for single-part,
				single-report reports.
				</p><pre class="programlisting">public final
OpenCReport\Part::page_footer_set_report(
                     OpenCReport\Report $report):
                     void;</pre><p>
			</p></div></div><div class="sect1" id="PHPPARTROWCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.11. The OpenCReport\Row class <a href="#PHPPARTROWCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPROWGETNEXT">8.11.1. Get the next part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWCOLNEW">8.11.2. Create a new part column for the row</a></span></dt><dt><span class="sect2"><a href="#PHPROWCOLGETFIRST">8.11.3. Get first column of a part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWSETSUPPRESS">8.11.4. Set suppression for the part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWSETNEWPAGE">8.11.5. Set new page for the part row</a></span></dt><dt><span class="sect2"><a href="#PHPROWSETLAYOUT">8.11.6. Set layout type for the part row</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Row {
    public final get_next():
                     ?OpenCReport\Row;

    public final column_new():
                     OpenCReport\Column;

    public final column_get_first():
                     ?OpenCReport\Column;

    public final set_suppress(
                     ?string $expr_string = null): void;

    public final set_newpage(
                     ?string $expr_string = null): void;

    public final set_layout(
                     ?string $expr_string = null): void;
}</pre><p>
		</p><div class="sect2" id="PHPROWGETNEXT"><div class="titlepage"><div><div><h3 class="title">8.11.1. Get the next part row <a href="#PHPROWGETNEXT" class="id_link">#</a></h3></div></div></div><p>
				Get the next object in the chain of part rows.
				This method may only be used on an object created
				with <code class="literal">OpenCReport\Part::row_get_first()</code>,
				i.e. one that was internally marked as an iterator
				object.
				</p><pre class="programlisting">public final
OpenCReport\Row::get_next():
                     ?OpenCReport\Row;</pre><p>
			</p></div><div class="sect2" id="PHPROWCOLNEW"><div class="titlepage"><div><div><h3 class="title">8.11.2. Create a new part column for the row <a href="#PHPROWCOLNEW" class="id_link">#</a></h3></div></div></div><p>
				For class methods of <code class="literal">OpenCReport\Column</code>,
				see <a class="xref" href="#PHPPARTCOLCLASS" title="8.12. The OpenCReport\Column class">Section 8.12</a>.
				</p><pre class="programlisting">public final
OpenCReport\Row::column_new():
                     OpenCReport\Column;</pre><p>
			</p></div><div class="sect2" id="PHPROWCOLGETFIRST"><div class="titlepage"><div><div><h3 class="title">8.11.3. Get first column of a part row <a href="#PHPROWCOLGETFIRST" class="id_link">#</a></h3></div></div></div><p>
				Get the first column from the part row.
				The object is marked internally as an iterator.
				For class methods of <code class="literal">OpenCReport\Column</code>,
				see <a class="xref" href="#PHPPARTCOLCLASS" title="8.12. The OpenCReport\Column class">Section 8.12</a>
				</p><pre class="programlisting">public final
OpenCReport\Row::column_get_first():
                     ?OpenCReport\Column;</pre><p>
			</p></div><div class="sect2" id="PHPROWSETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.11.4. Set suppression for the part row <a href="#PHPROWSETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Row:set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPROWSETNEWPAGE"><div class="titlepage"><div><div><h3 class="title">8.11.5. Set new page for the part row <a href="#PHPROWSETNEWPAGE" class="id_link">#</a></h3></div></div></div><p>
				When set to <code class="literal">yes</code>,
				the part row will start on a new page.
				</p><pre class="programlisting">public final
OpenCReport\Row:set_newpage(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPROWSETLAYOUT"><div class="titlepage"><div><div><h3 class="title">8.11.6. Set layout type for the part row <a href="#PHPROWSETLAYOUT" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Row::set_layout(
                     ?string $expr_string = null): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPPARTCOLCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.12. The OpenCReport\Column class <a href="#PHPPARTCOLCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPCOLGETNEXT">8.12.1. Get next column</a></span></dt><dt><span class="sect2"><a href="#PHPCOLREPORTNEW">8.12.2. Create a new report in the column</a></span></dt><dt><span class="sect2"><a href="#PHPCOLREPORTGETFIRST">8.12.3. Get first report of a part column</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETSUPPRESS">8.12.4. Set part column suppression</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETWIDTH">8.12.5. Set part column width</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETHEIGHT">8.12.6. Set part column height</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETBORDERWIDTH">8.12.7. Set border width</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETBORDERCOLOR">8.12.8. Set border color</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETDETAILCOLS">8.12.9. Set number of detail columns</a></span></dt><dt><span class="sect2"><a href="#PHPCOLSETPADDING">8.12.10. Set column padding</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Column {
    public final get_next():
                     ?OpenCReport\Column;

    public final report_new():
                     OpenCReport\Report;

    public final report_get_first():
                     ?OpenCReport\Report;

    public final set_suppress(
                     ?string $expr_string = null): void;

    public final set_width(
                     ?string $expr_string = null): void;

    public final set_width(
                     ?string $expr_string = null): void;

    public final set_border_width(
                     ?string $expr_string = null): void;

    public final set_border_color(
                     ?string $expr_string = null): void;

    public final set_detail_columns(
                     ?string $expr_string = null): void;

    public final set_column_padding(
                     ?string $expr_string = null): void;
}</pre><p>
		</p><div class="sect2" id="PHPCOLGETNEXT"><div class="titlepage"><div><div><h3 class="title">8.12.1. Get next column <a href="#PHPCOLGETNEXT" class="id_link">#</a></h3></div></div></div><p>
				Get the next object in the chain of part columns.
				This method may only be used on an object created
				with <code class="literal">OpenCReport\Row::column_get_first()</code>,
				i.e. one that was internally marked as an iterator
				object.
				</p><pre class="programlisting">public final
OpenCReport\Column::get_next():
                     ?OpenCReport\Column;</pre><p>
			</p></div><div class="sect2" id="PHPCOLREPORTNEW"><div class="titlepage"><div><div><h3 class="title">8.12.2. Create a new report in the column <a href="#PHPCOLREPORTNEW" class="id_link">#</a></h3></div></div></div><p>
				For class methods of <code class="literal">OpenCReport\Report</code>,
				see <a class="xref" href="#PHPREPORTCLASS" title="8.13. The OpenCReport\Report class">Section 8.13</a>.
				</p><pre class="programlisting">public final
OpenCReport\Column::report_new():
                     OpenCReport\Report;</pre><p>
			</p></div><div class="sect2" id="PHPCOLREPORTGETFIRST"><div class="titlepage"><div><div><h3 class="title">8.12.3. Get first report of a part column <a href="#PHPCOLREPORTGETFIRST" class="id_link">#</a></h3></div></div></div><p>
				Get the first report from the part column.
				The object is marked internally as an iterator.
				For class methods of <code class="literal">OpenCReport\Report</code>,
				see <a class="xref" href="#PHPREPORTCLASS" title="8.13. The OpenCReport\Report class">Section 8.13</a>
				</p><pre class="programlisting">public final
OpenCReport\Column::report_get_first():
                     ?OpenCReport\Report;</pre><p>
			</p></div><div class="sect2" id="PHPCOLSETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.12.4. Set part column suppression <a href="#PHPCOLSETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Column::set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPCOLSETWIDTH"><div class="titlepage"><div><div><h3 class="title">8.12.5. Set part column width <a href="#PHPCOLSETWIDTH" class="id_link">#</a></h3></div></div></div><p>
				Set the width of the whole part column.
				If an inner report is wider than the column
				width, it's rendering is truncated.
				</p><pre class="programlisting">public final
OpenCReport\Column::set_width(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPCOLSETHEIGHT"><div class="titlepage"><div><div><h3 class="title">8.12.6. Set part column height <a href="#PHPCOLSETHEIGHT" class="id_link">#</a></h3></div></div></div><p>
				Set the part column height. During report
				execution, the column height is calculated
				for rendering. Inner reports and the height of
				their lines that would be rendered are added.
				New lines of a report that would exceed the
				part column height are not rendered and the report
				is rendered partially. The data shown in rendered
				lines are identical in both cases, whether or not
				the pre-set height is set. When the set column height
				is reached, further inner reports are not rendered.
				Default is unset, i.e. every inner report is
				fully rendered.
				</p><pre class="programlisting">public final
OpenCReport\Column::set_height(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPCOLSETBORDERWIDTH"><div class="titlepage"><div><div><h3 class="title">8.12.7. Set border width <a href="#PHPCOLSETBORDERWIDTH" class="id_link">#</a></h3></div></div></div><p>
				Set the border width around the part column.
				The width is in points (1/72 inches).
				Default is 0, i.e. a border is not rendered
				around the part column.
				</p><pre class="programlisting">public final
OpenCReport\Column::set_border_width(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPCOLSETBORDERCOLOR"><div class="titlepage"><div><div><h3 class="title">8.12.8. Set border color <a href="#PHPCOLSETBORDERCOLOR" class="id_link">#</a></h3></div></div></div><p>
				Set the border color around the part column.
				Only used if the border width is set.
				</p><pre class="programlisting">public final
OpenCReport\Column::set_border_color(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPCOLSETDETAILCOLS"><div class="titlepage"><div><div><h3 class="title">8.12.9. Set number of detail columns <a href="#PHPCOLSETDETAILCOLS" class="id_link">#</a></h3></div></div></div><p>
				Set the number of detail columns in
				the part column. Inner reports inside the
				part column may be narrow and visually wasteful
				with empty areas on the page. In this case,
				when a page break would occur, a column break
				would occur instead. Only reaching the last
				column would result in a page break.
				</p><pre class="programlisting">public final
OpenCReport\Column::set_detail_columns(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPCOLSETPADDING"><div class="titlepage"><div><div><h3 class="title">8.12.10. Set column padding <a href="#PHPCOLSETPADDING" class="id_link">#</a></h3></div></div></div><p>
				Set the padding between detail columns.
				It is used if the number of detail
				columns is greater than 1.
				</p><pre class="programlisting">public final
OpenCReport\Column::set_column_padding(
                     ?string $expr_string = null): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPREPORTCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.13. The OpenCReport\Report class <a href="#PHPREPORTCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPREPORTGETNEXT">8.13.1. Get the next report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTVARNEW">8.13.2. Create a new report variable</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTVARNEWFULL">8.13.3. Create a new custom report variable</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEXPRPARSE">8.13.4. Parse and expression for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEXPRERROR">8.13.5. Get the error after a failed expression parsing</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTRESOLVEVARS">8.13.6. Resolve variables of the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEVALVARS">8.13.7. Evaluate variables of the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTBREAKNEW">8.13.8. Create a new report break</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTBREAKGET">8.13.9. Get a report break by its name</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTBREAKGETFIRST">8.13.10. Get the first report break</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTRESOLVEBREAKS">8.13.11. Resolve breaks of the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETQUERYROWNUM">8.13.12. Get the current row number of the main query</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDSTARTCB">8.13.13. Add a "report start" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDDONECB">8.13.14. Add a "report done" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDNEWROWCB">8.13.15. Add a "new row" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDITERATIONCB">8.13.16. Add an "iteration done" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTADDPRECALCDONECB">8.13.17. Add a "precalculation done" callback</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTEQUALS">8.13.18. Check whether two report objects are the same</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETMAINQUERY">8.13.19. Set the report's main query</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETMAINQUERYBYNAME">8.13.20. Set the report's main query by name</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETSUPPRESS">8.13.21. Set the report suppression</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETITERATIONS">8.13.22. Set number of iterations for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETFONTNAME">8.13.23. Set the font name for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETFONTSIZE">8.13.24. Set the font size for the report</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETHEIGHT">8.13.25. Set the report height</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTSETFHPRIO">8.13.26. Set the report's field header prioroty</a></span></dt><dt><span class="sect2"><a href="#PHPREPORTGETOUTPUT">8.13.27. Get output sections of the report</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Report {
    public final get_next():
                     ?OpenCReport\Report;

    public final variable_new(
                     long $variable_type,
                     string $name,
                     string $expr,
                     ?string $reset_on_break_name = null):
                     OpenCReport\Variable;

    public final variable_new_full(
                     long $result_type,
                     string $name,
                     ?string $baseexpr = null,
                     ?string $intermedexpr = null,
                     ?string $intermed2expr = null,
                     ?string $resultexpr = null,
                     ?string $reset_on_break_name = null):
                     OpenCReport\Variable;

    public final expr_parse(
                     string $expr_string):
                     ?OpenCReport\Expr;

    public final expr_error(): ?string;

    public final resolve_variables(): void;

    public final evaluate_variables(): void;

    public final break_new(
                     ?string $name):
                     OpenCReport\Break;

    public final break_get(
                     string $break_name):
                     OpenCReport\Break;

    public final break_get_first():
                     ?OpenCReport\Break;

    public final resolve_breaks(): void;

    public final get_query_rownum(): long;

    public final add_start_cb(
                     string $callback): void;

    public final add_done_cb(
                     string $callback): void;

    public final add_new_row_cb(
                     string $callback): void;

    public final add_iteration_cb(
                     string $callback): void;

    public final add_precalculation_done_cb(
                     string $callback): void;

    public final equals(
                     OpenCReport\Report $report):
                     bool;

    public final set_main_query(
                     OpenCReport\Query $query): void;

    public final set_main_query_by_name(
                     string $query_name): void;

    public final set_suppress(
                     ?string $expr_string = null): void;

    public final set_iterations(
                     ?string $expr_string = null): void;

    public final set_font_name(
                     ?string $expr_string = null): void;

    public final set_font_size(
                     ?string $expr_string = null): void;

    public final set_height(
                     ?string $expr_string = null): void;

    public final set_fieldheader_priority(
                     ?string $expr_string = null): void;

    public final nodata(): OpenCReport\Output;
    public final header(): OpenCReport\Output;
    public final footer(): OpenCReport\Output;
    public final field_header(): OpenCReport\Output;
    public final field_details(): OpenCReport\Output;
}</pre><p>
		</p><div class="sect2" id="PHPREPORTGETNEXT"><div class="titlepage"><div><div><h3 class="title">8.13.1. Get the next report <a href="#PHPREPORTGETNEXT" class="id_link">#</a></h3></div></div></div><p>
				Get the next object in the chain of reports.
				This method may only be used on an object created
				with <code class="literal">OpenCReport\Column::report_get_first()</code>,
				i.e. one that was internally marked as an iterator
				object.
				</p><pre class="programlisting">public final
OpenCReport\Report::get_next():
                     ?OpenCReport\Report;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTVARNEW"><div class="titlepage"><div><div><h3 class="title">8.13.2. Create a new report variable <a href="#PHPREPORTVARNEW" class="id_link">#</a></h3></div></div></div><p>
				Create a new variable of the specified type and
				name, using the expression to produce the value.
				Optionally a break name (see <a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a>)
				may be specified, where, upon a break change,
				the variable is reset. See <a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a>.
				For class methods of
				<code class="literal">OpenCReport\Variable</code>,
				see <a class="xref" href="#PHPVARIABLECLASS" title="8.14. The OpenCReport\Variable class">Section 8.14</a>.
				</p><pre class="programlisting">public const OpenCReport\Report::VARIABLE_EXPRESSION;
public const OpenCReport\Report::VARIABLE_COUNT;
public const OpenCReport\Report::VARIABLE_COUNTALL;
public const OpenCReport\Report::VARIABLE_SUM;
public const OpenCReport\Report::VARIABLE_AVERAGE;
public const OpenCReport\Report::VARIABLE_AVERAGEALL;
public const OpenCReport\Report::VARIABLE_LOWEST;
public const OpenCReport\Report::VARIABLE_HIGHEST;

public final
OpenCReport\Report::variable_new(
                     long $variable_type,
                     string $name,
                     string $expr,
                     ?string $reset_on_break_name = null):
                     OpenCReport\Variable;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTVARNEWFULL"><div class="titlepage"><div><div><h3 class="title">8.13.3. Create a new custom report variable <a href="#PHPREPORTVARNEWFULL" class="id_link">#</a></h3></div></div></div><p>
				Create a new custom variable of the specified name,
				with total control over the base expression,
				intermediary expression(s) and the result expression.
				Optionally a break name (see <a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a>)
				may be specified, where, upon a break change,
				the variable is reset. See <a class="xref" href="#VARIABLES" title="Chapter 5. Report variables">Report variables</a>.
				For class methods of
				<code class="literal">OpenCReport\Variable</code>,
				see <a class="xref" href="#PHPVARIABLECLASS" title="8.14. The OpenCReport\Variable class">Section 8.14</a>.
				</p><pre class="programlisting">public final
OpenCReport\Report::variable_new_full(
                     long $result_type,
                     string $name,
                     ?string $baseexpr = null,
                     ?string $intermedexpr = null,
                     ?string $intermed2expr = null,
                     ?string $resultexpr = null,
                     ?string $reset_on_break_name = null):
                     OpenCReport\Variable;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTEXPRPARSE"><div class="titlepage"><div><div><h3 class="title">8.13.4. Parse and expression for the report <a href="#PHPREPORTEXPRPARSE" class="id_link">#</a></h3></div></div></div><p>
				Parse and expression for the report.
				If the expression fails to parse, the
				method returns <code class="literal">NULL</code>
				and the error is found in
				<code class="literal">OpenCReport\Report::expr_parse()</code>.
				</p><pre class="programlisting">public final
OpenCReport\Report::expr_parse(
                     string $expr_string):
                     ?OpenCReport\Expr;</pre><p>
			</p><p>
				The main difference between
				<code class="literal">OpenCReport::expr_parse()</code>
				(see <a class="xref" href="#PHPPARSEEXPR" title="8.4.4.1. Parse an expression">Section 8.4.4.1</a>)
				and this method is that the former may not
				reference a report variable identifier.
				Since the expression for the former method is not
				associated with a report, report variable identifiers
				in the expression may not be resolved.
				The same applies to any function that is related
				to report internal details, e.g. the
				<code class="literal">brrownum()</code> function
				(see <a class="xref" href="#BRROWNUMFUNC" title="3.6.7. brrownum()">Break row number function</a>:
				the expression is not associated with a report with
				breaks, the break name will not be found.
			</p></div><div class="sect2" id="PHPREPORTEXPRERROR"><div class="titlepage"><div><div><h3 class="title">8.13.5. Get the error after a failed expression parsing <a href="#PHPREPORTEXPRERROR" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">public final
OpenCReport\Report::expr_error(): ?string;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTRESOLVEVARS"><div class="titlepage"><div><div><h3 class="title">8.13.6. Resolve variables of the report <a href="#PHPREPORTRESOLVEVARS" class="id_link">#</a></h3></div></div></div><p>
				Resolve all variables of the report.
				This method may be useful to implement
				a custom report executor. The equivalent
				C function is used internally. This method is
				used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Report::resolve_variables(): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTEVALVARS"><div class="titlepage"><div><div><h3 class="title">8.13.7. Evaluate variables of the report <a href="#PHPREPORTEVALVARS" class="id_link">#</a></h3></div></div></div><p>
				This method may be useful to implement
				a custom report executor. The equivalent
				C function is used internally. This method is
				used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Report::evaluate_variables(): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTBREAKNEW"><div class="titlepage"><div><div><h3 class="title">8.13.8. Create a new report break <a href="#PHPREPORTBREAKNEW" class="id_link">#</a></h3></div></div></div><p>
				Create a new report break. A break
				is the basis for grouping data.
				See <a class="xref" href="#BREAKS" title="Chapter 4. Report breaks">Report breaks</a>.
				For the class methods of
				<code class="literal">OpenCReport\Break</code>,
				see <a class="xref" href="#PHPBREAKCLASS" title="8.15. The OpenCReport\Break class">Section 8.15</a>.
				</p><pre class="programlisting">public final
OpenCReport\Report::break_new(
                     ?string $name):
                     OpenCReport\Break;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTBREAKGET"><div class="titlepage"><div><div><h3 class="title">8.13.9. Get a report break by its name <a href="#PHPREPORTBREAKGET" class="id_link">#</a></h3></div></div></div><p>
				Get a previously created break
				using its name. The object that's created
				this way is <span class="emphasis"><em>not</em></span> marked
				as an iterator, so
				<code class="literal">OpenCReport\Break::get_next()</code>
				may not be used on it.
				</p><pre class="programlisting">public final
OpenCReport\Report::break_get(
                     string $break_name):
                     OpenCReport\Break;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTBREAKGETFIRST"><div class="titlepage"><div><div><h3 class="title">8.13.10. Get the first report break <a href="#PHPREPORTBREAKGETFIRST" class="id_link">#</a></h3></div></div></div><p>
				Get the first break object in the
				chain of breaks of the report.
				The object is marked internally
				as an iterator, so
				<code class="literal">OpenCReport\Break::get_next()</code>
				may be used on it.
				</p><pre class="programlisting">public final
OpenCReport\Report::break_get_first():
                     ?OpenCReport\Break;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTRESOLVEBREAKS"><div class="titlepage"><div><div><h3 class="title">8.13.11. Resolve breaks of the report <a href="#PHPREPORTRESOLVEBREAKS" class="id_link">#</a></h3></div></div></div><p>
				Resolve all breaks of the report.
				It may be useful to create a custom
				report executor. The equivalent C
				function is used internally. Used by
				unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Report::resolve_breaks(): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTGETQUERYROWNUM"><div class="titlepage"><div><div><h3 class="title">8.13.12. Get the current row number of the main query <a href="#PHPREPORTGETQUERYROWNUM" class="id_link">#</a></h3></div></div></div><p>
				Get the current row number of the report's main query.
				Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Report::get_query_rownum(): long;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTADDSTARTCB"><div class="titlepage"><div><div><h3 class="title">8.13.13. Add a "report start" callback <a href="#PHPREPORTADDSTARTCB" class="id_link">#</a></h3></div></div></div><p>
				Add a "report start" callback to the report.
				The callback is called when the report starts
				during report execution.
				</p><pre class="programlisting">public final
OpenCReport\Report::add_start_cb(
                     string $callback): void;</pre><p>
			</p><p>
				The callback function interface must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o, OpenCReport\Report $r): void;
</pre><p>
			</p></div><div class="sect2" id="PHPREPORTADDDONECB"><div class="titlepage"><div><div><h3 class="title">8.13.14. Add a "report done" callback <a href="#PHPREPORTADDDONECB" class="id_link">#</a></h3></div></div></div><p>
				Add a "report done" callback to the report.
				The callback is called when the report is done
				during report execution.
				</p><pre class="programlisting">public final
OpenCReport\Report::add_done_cb(
                     string $callback): void;</pre><p>
			</p><p>
				The callback function interface must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o, OpenCReport\Report $r): void;
</pre><p>
			</p></div><div class="sect2" id="PHPREPORTADDNEWROWCB"><div class="titlepage"><div><div><h3 class="title">8.13.15. Add a "new row" callback <a href="#PHPREPORTADDNEWROWCB" class="id_link">#</a></h3></div></div></div><p>
				Add a "new row" callback to the report.
				The callback is called for every data row
				for the report during report execution.
				</p><pre class="programlisting">public final
OpenCReport\Report::add_new_row_cb(
                     string $callback): void;</pre><p>
			</p><p>
				The callback function interface must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o, OpenCReport\Report $r): void;
</pre><p>
			</p></div><div class="sect2" id="PHPREPORTADDITERATIONCB"><div class="titlepage"><div><div><h3 class="title">8.13.16. Add an "iteration done" callback <a href="#PHPREPORTADDITERATIONCB" class="id_link">#</a></h3></div></div></div><p>
				Add an "iteration done" callback to the report.
				The callback is called after every iteration
				for the report during report execution.
				</p><pre class="programlisting">public final
OpenCReport\Report::add_iteration_cb(
                     string $callback): void;</pre><p>
			</p><p>
				The callback function interface must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o, OpenCReport\Report $r): void;
</pre><p>
			</p></div><div class="sect2" id="PHPREPORTADDPRECALCDONECB"><div class="titlepage"><div><div><h3 class="title">8.13.17. Add a "precalculation done" callback <a href="#PHPREPORTADDPRECALCDONECB" class="id_link">#</a></h3></div></div></div><p>
				Add a "precalculation done" callback to the report.
				The callback is called after precalculation is done
				for the report during report execution.
				</p><pre class="programlisting">public final
OpenCReport\Report::add_precalculation_done_cb(
                     string $callback): void;</pre><p>
			</p><p>
				The callback function interface must follow this:
				</p><pre class="programlisting">function
my_callback(OpenCReport $o, OpenCReport\Report $r): void;
</pre><p>
			</p></div><div class="sect2" id="PHPREPORTEQUALS"><div class="titlepage"><div><div><h3 class="title">8.13.18. Check whether two report objects are the same <a href="#PHPREPORTEQUALS" class="id_link">#</a></h3></div></div></div><p>
				Check whether the main object's internal C
				representation is the same as the passed-in
				object's internal representation.
				</p><pre class="programlisting">public final
OpenCReport\Report::equals(
                     OpenCReport\Report $report):
                     bool;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETMAINQUERY"><div class="titlepage"><div><div><h3 class="title">8.13.19. Set the report's main query <a href="#PHPREPORTSETMAINQUERY" class="id_link">#</a></h3></div></div></div><p>
				Set the report's main query to
				the passed-in <code class="literal">OpenCReport\Query</code>.
				</p><pre class="programlisting">public final
OpenCReport\Report::set_main_query(
                     OpenCReport\Query $query): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETMAINQUERYBYNAME"><div class="titlepage"><div><div><h3 class="title">8.13.20. Set the report's main query by name <a href="#PHPREPORTSETMAINQUERYBYNAME" class="id_link">#</a></h3></div></div></div><p>
				Set the report's main query using
				the query name.
				</p><pre class="programlisting">public final
OpenCReport\Report::set_main_query_by_name(
                     string $query_name): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.13.21. Set the report suppression <a href="#PHPREPORTSETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				Set the report's suppression.
				The expression must evaluate too a
				numeric value. It's zero or non-zero
				value will decide whether the report
				is suppressed, i.e. not calculated and
				not rendered in the output.
				</p><pre class="programlisting">public final
OpenCReport\Report::public final set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETITERATIONS"><div class="titlepage"><div><div><h3 class="title">8.13.22. Set number of iterations for the report <a href="#PHPREPORTSETITERATIONS" class="id_link">#</a></h3></div></div></div><p>
				Set the number of iterations for the report.
				The report will be calculated and rendered
				this many times. Default is 1.
				</p><pre class="programlisting">public final
OpenCReport\Report::set_iterations(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETFONTNAME"><div class="titlepage"><div><div><h3 class="title">8.13.23. Set the font name for the report <a href="#PHPREPORTSETFONTNAME" class="id_link">#</a></h3></div></div></div><p>
				Set the font name for the report.
				The report font name will be used
				for any child elements that don't specify
				the font name themselves.
				</p><pre class="programlisting">public final
OpenCReport\Report::set_font_name(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETFONTSIZE"><div class="titlepage"><div><div><h3 class="title">8.13.24. Set the font size for the report <a href="#PHPREPORTSETFONTSIZE" class="id_link">#</a></h3></div></div></div><p>
				Set the font size for the report.
				The report font size will be used
				for any child elements that don't specify
				the font size themselves.
				</p><pre class="programlisting">public final
OpenCReport\Report::set_font_size(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETHEIGHT"><div class="titlepage"><div><div><h3 class="title">8.13.25. Set the report height <a href="#PHPREPORTSETHEIGHT" class="id_link">#</a></h3></div></div></div><p>
				Set the report height. During report
				execution, the report height is calculated
				for rendering. Height of lines that would be
				rendered are added. New lines that would
				exceed the report height are not rendered.
				The data shown in rendered lines are identical
				in both cased, whether or not the report height
				is set. Default is unset, i.e. every line
				is rendered and the number of lines determine
				the report height,
				</p><pre class="programlisting">public final
OpenCReport\Report::set_height(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTSETFHPRIO"><div class="titlepage"><div><div><h3 class="title">8.13.26. Set the report's field header prioroty <a href="#PHPREPORTSETFHPRIO" class="id_link">#</a></h3></div></div></div><p>
				Set the report's field header priority.
				See <a class="xref" href="#REPORTFHPRIORITY" title="2.9.1.14. Field header priority">Report field header priority attribute</a> for explanation.
				</p><pre class="programlisting">public final
OpenCReport\Report::set_fieldheader_priority(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPREPORTGETOUTPUT"><div class="titlepage"><div><div><h3 class="title">8.13.27. Get output sections of the report <a href="#PHPREPORTGETOUTPUT" class="id_link">#</a></h3></div></div></div><p>
				Get the output sections of the report.
				See <a class="xref" href="#NODATANODE" title="2.9.2.8. Alternate output for no data">NoData node</a>,
				<a class="xref" href="#REPHEADER" title="2.9.2.3. Report header">Section 2.9.2.3</a>,
				<a class="xref" href="#REPFOOTER" title="2.9.2.4. Report footer">Section 2.9.2.4</a> and
				<a class="xref" href="#DETAILNODE" title="2.9.2.7. Detail">Detail node</a>.
				For class methods of <code class="literal"></code>,
				see <a class="xref" href="#PHPOUTPUTCLASS" title="8.16. The OpenCReport\Output class">Section 8.16</a>.
				</p><pre class="programlisting">public final
OpenCReport\Report::nodata(): OpenCReport\Output;

public final
OpenCReport\Report::header(): OpenCReport\Output;

public final
OpenCReport\Report::footer(): OpenCReport\Output;

public final
OpenCReport\Report::field_header(): OpenCReport\Output;

public final
OpenCReport\Report::field_details(): OpenCReport\Output;</pre><p>
			</p></div></div><div class="sect1" id="PHPVARIABLECLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.14. The OpenCReport\Variable class <a href="#PHPVARIABLECLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPVARBASEEXPR">8.14.1. Get the base expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARINTERMEDEXPR">8.14.2. Get the first intermediary expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARINTERMED2EXPR">8.14.3. Get the second intermediary expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARRESULTEXPR">8.14.4. Get the result expression of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVARSETPRECALC">8.14.5. Set the variable precalculated</a></span></dt><dt><span class="sect2"><a href="#PHPVARRESOLVE">8.14.6. Resolve expressions of a variable</a></span></dt><dt><span class="sect2"><a href="#PHPVAREVAL">8.14.7. Evaluate expressions of a variable</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Variable {
    public final baseexpr():
                     ?OpenCReport\Expr;

    public final intermedexpr():
                     ?OpenCReport\Expr;

    public final intermed2expr():
                     ?OpenCReport\Expr;

    public final resultexpr():
                     ?OpenCReport\Expr;

    public final set_precalculate(
                     ?string $expr_string = null):
                     void;

    public final resolve(): void;
    public final eval(): void;
}</pre><p>
		</p><div class="sect2" id="PHPVARBASEEXPR"><div class="titlepage"><div><div><h3 class="title">8.14.1. Get the base expression of a variable <a href="#PHPVARBASEEXPR" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				For class methods of <code class="literal">OpenCReport\Expr</code>,
				see <a class="xref" href="#PHPEXPRCLASS" title="8.8. The OpenCReport\Expr class">The OpenCReport\Expr class</a>
				</p><pre class="programlisting">public final
OpenCReport\Variable::baseexpr():
                     ?OpenCReport\Expr;</pre><p>
			</p></div><div class="sect2" id="PHPVARINTERMEDEXPR"><div class="titlepage"><div><div><h3 class="title">8.14.2. Get the first intermediary expression of a variable <a href="#PHPVARINTERMEDEXPR" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				For class methods of <code class="literal">OpenCReport\Expr</code>,
				see <a class="xref" href="#PHPEXPRCLASS" title="8.8. The OpenCReport\Expr class">The OpenCReport\Expr class</a>
				</p><pre class="programlisting">public final
OpenCReport\Variable::intermedexpr():
                     ?OpenCReport\Expr;</pre><p>
			</p></div><div class="sect2" id="PHPVARINTERMED2EXPR"><div class="titlepage"><div><div><h3 class="title">8.14.3. Get the second intermediary expression of a variable <a href="#PHPVARINTERMED2EXPR" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				For class methods of <code class="literal">OpenCReport\Expr</code>,
				see <a class="xref" href="#PHPEXPRCLASS" title="8.8. The OpenCReport\Expr class">The OpenCReport\Expr class</a>
				</p><pre class="programlisting">public final
OpenCReport\Variable::intermed2expr():
                     ?OpenCReport\Expr;</pre><p>
			</p></div><div class="sect2" id="PHPVARRESULTEXPR"><div class="titlepage"><div><div><h3 class="title">8.14.4. Get the result expression of a variable <a href="#PHPVARRESULTEXPR" class="id_link">#</a></h3></div></div></div><p>
				Used by unit tests.
				For class methods of <code class="literal">OpenCReport\Expr</code>,
				see <a class="xref" href="#PHPEXPRCLASS" title="8.8. The OpenCReport\Expr class">The OpenCReport\Expr class</a>
				</p><pre class="programlisting">public final
OpenCReport\Variable::resultexpr():
                     ?OpenCReport\Expr;</pre><p>
			</p></div><div class="sect2" id="PHPVARSETPRECALC"><div class="titlepage"><div><div><h3 class="title">8.14.5. Set the variable precalculated <a href="#PHPVARSETPRECALC" class="id_link">#</a></h3></div></div></div><p>
				Set the variable precalculated.
				A precalculated variable's value (or set of values)
				is calculated during the precalculation phase
				of report execution. When the report is being
				rendered, the precalculated values are used.
				This allows using an end value in a header,
				e.g. a report header may contain a summary of
				bottom line values. Similarly, break headers
				may show values that would otherwise be shown
				only in break footer sections for variables
				that are reset on a break.
				</p><pre class="programlisting">public final
OpenCReport\Variable::set_precalculate(
                     ?string $expr_string = null):
                     void;</pre><p>
			</p></div><div class="sect2" id="PHPVARRESOLVE"><div class="titlepage"><div><div><h3 class="title">8.14.6. Resolve expressions of a variable <a href="#PHPVARRESOLVE" class="id_link">#</a></h3></div></div></div><p>
				Resolve the base, intermediary and result expressions
				of a single variable. Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Variable::resolve(): void;</pre><p>
			</p></div><div class="sect2" id="PHPVAREVAL"><div class="titlepage"><div><div><h3 class="title">8.14.7. Evaluate expressions of a variable <a href="#PHPVAREVAL" class="id_link">#</a></h3></div></div></div><p>
				Evaluate the base, intermediary and result expressions
				of a single variable. Used by unit tests.
				</p><pre class="programlisting">public final
OpenCReport\Variable::eval(): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPBREAKCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.15. The OpenCReport\Break class <a href="#PHPBREAKCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPBREAKGETNEXT">8.15.1. Get next break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKBFADD">8.15.2. Add a breakfield to a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKCHECKFIELDS">8.15.3. Check breakfields</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKRESETVARS">8.15.4. Reset variables associated with a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKADDTRIGGERCB">8.15.5. Add a "trigger" callback to a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKNAME">8.15.6. Get the name of a break</a></span></dt><dt><span class="sect2"><a href="#PHPBREAKOUTPUTS">8.15.7. Get output sections of a break</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Break {
    public final get_next():
                     ?OpenCReport\Break;

    public final breakfield_add(
                     OpenCReport\Expr $breakfield_expr):
                     void;

    public final check_fields(): bool;

    public final reset_vars(): void;

    public final add_trigger_cb(
                     ?string $callback):
                     void;

    public final name(): string;

    public final header(): OpenCReport\Output;
    public final footer(): OpenCReport\Output;
}</pre><p>
		</p><div class="sect2" id="PHPBREAKGETNEXT"><div class="titlepage"><div><div><h3 class="title">8.15.1. Get next break <a href="#PHPBREAKGETNEXT" class="id_link">#</a></h3></div></div></div><p>
				Get the next break object from the chain of
				breaks in the report this break belongs to.
				This method may only be called on an
				object that was marked as an iterator,
				i.e. one that was created by
				<code class="literal">OpenCReport\Report::break_get_first()</code>.
				</p><pre class="programlisting">public final
OpenCReport\Break::get_next():
                     ?OpenCReport\Break;</pre><p>
			</p></div><div class="sect2" id="PHPBREAKBFADD"><div class="titlepage"><div><div><h3 class="title">8.15.2. Add a breakfield to a break <a href="#PHPBREAKBFADD" class="id_link">#</a></h3></div></div></div><p>
				Add a breakfield to a break.
				A break may consists of multiple breakfields.
				A break triggers if any of the breakfields
				change from one data line to another.
				</p><pre class="programlisting">public final
OpenCReport\Break::breakfield_add(
                     OpenCReport\Expr $breakfield_expr):
                     void;</pre><p>
			</p></div><div class="sect2" id="PHPBREAKCHECKFIELDS"><div class="titlepage"><div><div><h3 class="title">8.15.3. Check breakfields <a href="#PHPBREAKCHECKFIELDS" class="id_link">#</a></h3></div></div></div><p>
				Check breakfields of a break.
				This method returns <code class="literal">true</code> if the break
				triggers, i.e. field values for the current data row
				do not match the values for the previous data row.
				It also the triggers for the first row when there is
				no previous row.
				It is used internally by the report executor
				and also used by unit tests. It may be useful
				to implement a custom report executor.
				</p><pre class="programlisting">public final
OpenCReport\Break::check_fields(): bool;</pre><p>
			</p></div><div class="sect2" id="PHPBREAKRESETVARS"><div class="titlepage"><div><div><h3 class="title">8.15.4. Reset variables associated with a break <a href="#PHPBREAKRESETVARS" class="id_link">#</a></h3></div></div></div><p>
				Reset report variables associated with a break.
				Such variables were created with specifying the
				"reset on break" break name. These variables
				restart from their initial values.
				It is used internally by the report executor
				and also used by unit tests. It may be useful
				to implement a custom report executor.
				</p><pre class="programlisting">public final
OpenCReport\Break::reset_vars(): void;</pre><p>
			</p></div><div class="sect2" id="PHPBREAKADDTRIGGERCB"><div class="titlepage"><div><div><h3 class="title">8.15.5. Add a "trigger" callback to a break <a href="#PHPBREAKADDTRIGGERCB" class="id_link">#</a></h3></div></div></div><p>
				Add a "trigger" callback to the break.
				</p><pre class="programlisting">public final
OpenCReport\Break::add_trigger_cb(
                     ?string $callback):
                     void;</pre><p>
			</p></div><div class="sect2" id="PHPBREAKNAME"><div class="titlepage"><div><div><h3 class="title">8.15.6. Get the name of a break <a href="#PHPBREAKNAME" class="id_link">#</a></h3></div></div></div><p>
				Get the name of a break. It may be useful
				if the breaks were added via a report
				XML descriptor but variables are added
				afterwards from code.
				</p><pre class="programlisting">public final
OpenCReport\Break::name(): string;</pre><p>
			</p></div><div class="sect2" id="PHPBREAKOUTPUTS"><div class="titlepage"><div><div><h3 class="title">8.15.7. Get output sections of a break <a href="#PHPBREAKOUTPUTS" class="id_link">#</a></h3></div></div></div><p>
				Get the header and footer sections of a break.
				See also <a class="xref" href="#BREAKHEADERNODE" title="2.14.2.1. BreakHeader">BreakHeader</a> and
				<a class="xref" href="#BREAKFOOTERNODE" title="2.14.2.2. BreakFooter">BreakFooter</a>.
				For class methods of <code class="literal">OpenCReport\Output</code>,
				see <a class="xref" href="#PHPOUTPUTCLASS" title="8.16. The OpenCReport\Output class">Section 8.16</a>
				</p><pre class="programlisting">public final
OpenCReport\Break::header(): OpenCReport\Output;

public final
OpenCReport\Break::footer(): OpenCReport\Output;</pre><p>
			</p></div></div><div class="sect1" id="PHPOUTPUTCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.16. The OpenCReport\Output class <a href="#PHPOUTPUTCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPOUTPUTSETSUPPRESS">8.16.1. Set suppression of the output section</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDLINE">8.16.2. Add a (text) line</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDHLINE">8.16.3. Add a horizontal line</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDIMAGE">8.16.4. Add an image</a></span></dt><dt><span class="sect2"><a href="#PHPOUTPUTADDIMAGEEND">8.16.5. Add an image end marker</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Output {
    public final set_suppress(
                     ?string $expr_string = null): void;

    public final add_line():
                     ?OpenCReport\Line;

    public final add_hline():
                     ?OpenCReport\HorizontalLine;

    public final add_image():
                     ?OpenCReport\Image;

    public final add_image_end(): void;
}</pre><p>
		</p><div class="sect2" id="PHPOUTPUTSETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.16.1. Set suppression of the output section <a href="#PHPOUTPUTSETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				Set suppression of the output section.
				The expression must evaluate to a numeric
				value which will be treated as a boolean,
				i.e. 0 or non-0. The default is <code class="literal">false</code>,
				i.e. the section is not suppressed.
				</p><pre class="programlisting">public final
OpenCReport\Output::set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPOUTPUTADDLINE"><div class="titlepage"><div><div><h3 class="title">8.16.2. Add a (text) line <a href="#PHPOUTPUTADDLINE" class="id_link">#</a></h3></div></div></div><p>
				Add a (text) line to the output section.
				A line may have children elements, like
				<code class="literal">OpenCReport\Text</code> and
				<code class="literal">OpenCReport\Image</code>.
				(See <a class="xref" href="#PHPTEXTCLASS" title="8.20. The OpenCReport\Text class">Section 8.20</a> and <a class="xref" href="#PHPIMAGECLASS" title="8.19. The OpenCReport\Image class">Section 8.19</a>.)
				For class methods of <code class="literal">OpenCReport\Line</code>,
				see <a class="xref" href="#PHPLINECLASS" title="8.17. The OpenCReport\Line class">Section 8.17</a>.
				</p><pre class="programlisting">public final
OpenCReport\Output::add_line():
                     ?OpenCReport\Line;</pre><p>
			</p></div><div class="sect2" id="PHPOUTPUTADDHLINE"><div class="titlepage"><div><div><h3 class="title">8.16.3. Add a horizontal line <a href="#PHPOUTPUTADDHLINE" class="id_link">#</a></h3></div></div></div><p>
				Add a horizontal line (a visual separator)
				to the output section.
				For class methods of <code class="literal">OpenCReport\HorizontalLine</code>,
				see <a class="xref" href="#PHPLINECLASS" title="8.17. The OpenCReport\Line class">Section 8.17</a>.
				</p><pre class="programlisting">public final
OpenCReport\Output::add_hline():
                     ?OpenCReport\HorizontalLine;</pre><p>
			</p></div><div class="sect2" id="PHPOUTPUTADDIMAGE"><div class="titlepage"><div><div><h3 class="title">8.16.4. Add an image <a href="#PHPOUTPUTADDIMAGE" class="id_link">#</a></h3></div></div></div><p>
				Add an image to the output section.
				The image will indent every subsequent
				elements in the section, except other images.
				For class methods of <code class="literal">OpenCReport\Image</code>,
				see <a class="xref" href="#PHPLINECLASS" title="8.17. The OpenCReport\Line class">Section 8.17</a>.
				</p><pre class="programlisting">public final
OpenCReport\Output::add_image():
                     ?OpenCReport\Image;</pre><p>
			</p></div><div class="sect2" id="PHPOUTPUTADDIMAGEEND"><div class="titlepage"><div><div><h3 class="title">8.16.5. Add an image end marker <a href="#PHPOUTPUTADDIMAGEEND" class="id_link">#</a></h3></div></div></div><p>
				Add an image end marker to the output section.
				Subsequent elements in the section won't be indented
				and will be drawn vertically below the previous image.
				</p><pre class="programlisting">public final
OpenCReport\Output::add_image_end(): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPLINECLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.17. The OpenCReport\Line class <a href="#PHPLINECLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPLINESETFONTNAME">8.17.1. Set the font name for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETFONTSIZE">8.17.2. Set the font size for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETBOLD">8.17.3. Set the font's bold flag for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETITALIC">8.17.4. Set the font's italic flag for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETSUPPRESS">8.17.5. Set line suppression</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETCOLOR">8.17.6. Set text color for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINESETBGCOLOR">8.17.7. Set background color for the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINEADDTEXT">8.17.8. Add a text element to the line</a></span></dt><dt><span class="sect2"><a href="#PHPLINEADDIMAGE">8.17.9. Add an image element to the line</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Line {
    public final set_font_name(
                     ?string $expr_string = null): void;

    public final set_font_size(
                     ?string $expr_string = null): void;

    public final set_bold(
                     ?string $expr_string = null): void;

    public final set_italic(
                     ?string $expr_string = null): void;

    public final set_suppress(
                     ?string $expr_string = null): void;

    public final set_color(
                     ?string $expr_string = null): void;

    public final set_bgcolor(
                     ?string $expr_string = null): void;

    public final add_text():
                     ?OpenCReport\Text;

    public final add_image():
                     ?OpenCReport\Image;
}</pre><p>
		</p><div class="sect2" id="PHPLINESETFONTNAME"><div class="titlepage"><div><div><h3 class="title">8.17.1. Set the font name for the line <a href="#PHPLINESETFONTNAME" class="id_link">#</a></h3></div></div></div><p>
				Set the font name for the line.
				This font will be used for child text elements
				that don't set the font name themselves.
				</p><pre class="programlisting">public final
OpenCReport\Line::set_font_name(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPLINESETFONTSIZE"><div class="titlepage"><div><div><h3 class="title">8.17.2. Set the font size for the line <a href="#PHPLINESETFONTSIZE" class="id_link">#</a></h3></div></div></div><p>
				Set the font size for the line.
				This font size will be used for child text elements
				that don't set the font size themselves.
				</p><pre class="programlisting">public final
OpenCReport\Line::set_font_size(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPLINESETBOLD"><div class="titlepage"><div><div><h3 class="title">8.17.3. Set the font's bold flag for the line <a href="#PHPLINESETBOLD" class="id_link">#</a></h3></div></div></div><p>
				Set the font's bold flag for the line.
				The expression must evaluate to a numeric
				value that is treated as a boolean, i.e. 0 or non-0.
				Default is <code class="literal">false</code>.
				This bold flag value will be used for child text elements
				that don't set it themselves.
				</p><pre class="programlisting">public final
OpenCReport\Line::set_bold(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPLINESETITALIC"><div class="titlepage"><div><div><h3 class="title">8.17.4. Set the font's italic flag for the line <a href="#PHPLINESETITALIC" class="id_link">#</a></h3></div></div></div><p>
				Set the font's italic flag for the line.
				The expression must evaluate to a numeric
				value that is treated as a boolean, i.e. 0 or non-0.
				Default is <code class="literal">false</code>.
				This italic flag value will be used for child text elements
				that don't set it themselves.
				</p><pre class="programlisting">public final
OpenCReport\Line::set_italic(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPLINESETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.17.5. Set line suppression <a href="#PHPLINESETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				Set the suppression flag for the line.
				The expression must evaluate to a numeric
				value that is treated as a boolean, i.e. 0 or non-0.
				Default is <code class="literal">false</code>,
				i.e. not suppressed. When set to a non-0 value
				(i.e. <code class="literal">true</code>), the whole line
				with all its child elements (text or image) will
				be suppressed, i.e. not rendered.
				</p><pre class="programlisting">public final
OpenCReport\Line::set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPLINESETCOLOR"><div class="titlepage"><div><div><h3 class="title">8.17.6. Set text color for the line <a href="#PHPLINESETCOLOR" class="id_link">#</a></h3></div></div></div><p>
				Set text color for the line.
				See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				This text color will be used for child elements
				that don't set the text color themselves.
				</p><pre class="programlisting">public final
OpenCReport\Line::set_color(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPLINESETBGCOLOR"><div class="titlepage"><div><div><h3 class="title">8.17.7. Set background color for the line <a href="#PHPLINESETBGCOLOR" class="id_link">#</a></h3></div></div></div><p>
				Set background color for the line.
				See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				This background color will be used for child elements
				that don't set the background color themselves.
				</p><pre class="programlisting">public final
OpenCReport\Line::set_bgcolor(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPLINEADDTEXT"><div class="titlepage"><div><div><h3 class="title">8.17.8. Add a text element to the line <a href="#PHPLINEADDTEXT" class="id_link">#</a></h3></div></div></div><p>
				Add a child text element to the line.
				For class methods  of <code class="literal">OpenCReport\Text</code>,
				see <a class="xref" href="#PHPTEXTCLASS" title="8.20. The OpenCReport\Text class">Section 8.20</a>.
				</p><pre class="programlisting">public final
OpenCReport\Line::add_text():
                     ?OpenCReport\Text;</pre><p>
			</p></div><div class="sect2" id="PHPLINEADDIMAGE"><div class="titlepage"><div><div><h3 class="title">8.17.9. Add an image element to the line <a href="#PHPLINEADDIMAGE" class="id_link">#</a></h3></div></div></div><p>
				Add a child image element to the line.
				For class methods  of <code class="literal">OpenCReport\Image</code>,
				see <a class="xref" href="#PHPIMAGECLASS" title="8.19. The OpenCReport\Image class">Section 8.19</a>.
				</p><pre class="programlisting">public final
OpenCReport\Line::add_image():
                     ?OpenCReport\Image;</pre><p>
			</p></div></div><div class="sect1" id="PHPHLINECLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.18. The OpenCReport\HorizontalLine class <a href="#PHPHLINECLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPHLINESETSIZE">8.18.1. Set the line width</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETINDENT">8.18.2. Set the line indentation</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETLENGTH">8.18.3. Set the line length</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETFONTSIZE">8.18.4. Set the line's font size</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETSUPPRESS">8.18.5. Set the suppression flag for the line</a></span></dt><dt><span class="sect2"><a href="#PHPHLINESETCOLOR">8.18.6. Set the line color</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\HorizontalLine {
    public final set_size(
                     ?string $expr_string = null): void;

    public final set_indent(
                     ?string $expr_string = null): void;

    public final set_length(
                     ?string $expr_string = null): void;

    public final set_font_size(
                     ?string $expr_string = null): void;

    public final set_suppress(
                     ?string $expr_string = null): void;

    public final set_color(
                     ?string $expr_string = null): void;
}</pre><p>
		</p><div class="sect2" id="PHPHLINESETSIZE"><div class="titlepage"><div><div><h3 class="title">8.18.1. Set the line width <a href="#PHPHLINESETSIZE" class="id_link">#</a></h3></div></div></div><p>
				Set the line width in points.
				Also see <a class="xref" href="#HLINEWIDTH" title="2.18.1.1. Line width">Section 2.18.1.1</a>
				</p><pre class="programlisting">public final
OpenCReport\HorizontalLine::set_size(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPHLINESETINDENT"><div class="titlepage"><div><div><h3 class="title">8.18.2. Set the line indentation <a href="#PHPHLINESETINDENT" class="id_link">#</a></h3></div></div></div><p>
				Set the line indentation, i.e. starting point
				to the right of the left side of the report.
				Also see <a class="xref" href="#HLINEINDENT" title="2.18.1.2. Indentation">Section 2.18.1.2</a>
				</p><pre class="programlisting">public final
OpenCReport\HorizontalLine::set_indent(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPHLINESETLENGTH"><div class="titlepage"><div><div><h3 class="title">8.18.3. Set the line length <a href="#PHPHLINESETLENGTH" class="id_link">#</a></h3></div></div></div><p>
				Set the line length.
				See <a class="xref" href="#HLINELENGTH" title="2.18.1.3. Length">HorizontalLine length</a> and
				<a class="xref" href="#SIZEUNIT" title="2.2.1. Size unit attribute">Size unit attribute</a>.
				</p><pre class="programlisting">public final
OpenCReport\HorizontalLine::set_length(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPHLINESETFONTSIZE"><div class="titlepage"><div><div><h3 class="title">8.18.4. Set the line's font size <a href="#PHPHLINESETFONTSIZE" class="id_link">#</a></h3></div></div></div><p>
				Set the line's font size. This font size
				is used in calculating the line length.
				See <a class="xref" href="#HLINEFONTSIZE" title="2.18.1.4. Font size">HorizontalLine font size</a>
				</p><pre class="programlisting">public final
OpenCReport\HorizontalLine::set_font_size(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPHLINESETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.18.5. Set the suppression flag for the line <a href="#PHPHLINESETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				Set the suppression flag for the line.
				The expression must evaluate to a numeric
				value that is treated as a boolean, i.e. 0 or non-0.
				When set to <code class="literal">true</code>, the line
				is not rendered. Default is <code class="literal">false</code>.
				</p><pre class="programlisting">public final
OpenCReport\HorizontalLine::set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPHLINESETCOLOR"><div class="titlepage"><div><div><h3 class="title">8.18.6. Set the line color <a href="#PHPHLINESETCOLOR" class="id_link">#</a></h3></div></div></div><p>
				Set the line color.
				See <a class="xref" href="#COLORSPEC" title="2.21. Color specification">Color specification</a>.
				</p><pre class="programlisting">public final
OpenCReport\HorizontalLine::set_color(
                     ?string $expr_string = null): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPIMAGECLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.19. The OpenCReport\Image class <a href="#PHPIMAGECLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPIMAGESETVALUE">8.19.1. Set the file name of the image</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETSUPPRESS">8.19.2. Set the suppression flag for the image</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETTYPE">8.19.3. Set the image type</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETWIDTH">8.19.4. Set the image width</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETHEIGHT">8.19.5. Set the image height</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETALIGNMENT">8.19.6. Set the image alignment</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETBGCOLOR">8.19.7. Set the image background color</a></span></dt><dt><span class="sect2"><a href="#PHPIMAGESETTEXTWIDTH">8.19.8. Set the image "text width"</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Image {
    public final set_value(
                     ?string $expr_string = null): void;

    public final set_suppress(
                     ?string $expr_string = null): void;

    public final set_type(
                     ?string $expr_string = null): void;

    public final set_width(
                     ?string $expr_string = null): void;

    public final set_height(
                     ?string $expr_string = null): void;

    public final set_alignment(
                     ?string $expr_string = null): void;

    public final set_bgcolor(
                     ?string $expr_string = null): void;

    public final set_text_width(
                     ?string $expr_string = null): void;
}</pre><p>
		</p><div class="sect2" id="PHPIMAGESETVALUE"><div class="titlepage"><div><div><h3 class="title">8.19.1. Set the file name of the image <a href="#PHPIMAGESETVALUE" class="id_link">#</a></h3></div></div></div><p>
				Set the file name of the image.
				The file name may be and absolute path,
				relative to the work directory of the application,
				or relative to any of the paths added with
				<code class="literal">OpenCReport::add_search_path()</code>.
				(See <a class="xref" href="#PHPADDSEARCHPATH" title="8.4.10.1. Add a search path">Section 8.4.10.1</a>.)
				</p><pre class="programlisting">public final
OpenCReport\Image::set_value(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPIMAGESETSUPPRESS"><div class="titlepage"><div><div><h3 class="title">8.19.2. Set the suppression flag for the image <a href="#PHPIMAGESETSUPPRESS" class="id_link">#</a></h3></div></div></div><p>
				Set the suppression flag for the image.
				The expression must evaluate to a numeric
				value that is treated as a boolean, i.e. 0 or non-0.
				Default is <code class="literal">false</code>.
				</p><pre class="programlisting">public final
OpenCReport\Image::set_suppress(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPIMAGESETTYPE"><div class="titlepage"><div><div><h3 class="title">8.19.3. Set the image type <a href="#PHPIMAGESETTYPE" class="id_link">#</a></h3></div></div></div><p>
				Set the image file type.
				Usually it's auto-detected and not needed.
				</p><pre class="programlisting">public final
OpenCReport\Image::set_type(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPIMAGESETWIDTH"><div class="titlepage"><div><div><h3 class="title">8.19.4. Set the image width <a href="#PHPIMAGESETWIDTH" class="id_link">#</a></h3></div></div></div><p>
				Set the image width. This setting
				is used when the image element is
				a direct child of an output section.
				See <a class="xref" href="#IMAGEWIDTH" title="2.19.1.4. Width">Section 2.19.1.4</a>.
				</p><pre class="programlisting">public final
OpenCReport\Image::set_width(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPIMAGESETHEIGHT"><div class="titlepage"><div><div><h3 class="title">8.19.5. Set the image height <a href="#PHPIMAGESETHEIGHT" class="id_link">#</a></h3></div></div></div><p>
				Set the image height. This setting
				is used when the image element is
				a direct child of an output section.
				See <a class="xref" href="#IMAGEWIDTH" title="2.19.1.4. Width">Section 2.19.1.4</a>.
				</p><pre class="programlisting">public final
OpenCReport\Image::set_height(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPIMAGESETALIGNMENT"><div class="titlepage"><div><div><h3 class="title">8.19.6. Set the image alignment <a href="#PHPIMAGESETALIGNMENT" class="id_link">#</a></h3></div></div></div><p>
				Set the image alignment. This setting
				is used when the image element is
				a child of a text line.
				See <a class="xref" href="#IMAGEALIGN" title="2.19.1.8. Alignment">Section 2.19.1.8</a>.
				</p><pre class="programlisting">public final
OpenCReport\Image::set_alignment(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPIMAGESETBGCOLOR"><div class="titlepage"><div><div><h3 class="title">8.19.7. Set the image background color <a href="#PHPIMAGESETBGCOLOR" class="id_link">#</a></h3></div></div></div><p>
				Set the image background color. This setting
				is used when the image element is
				a child of a text line.
				See <a class="xref" href="#IMAGEBGCOLOR" title="2.19.1.7. Background color">Section 2.19.1.7</a>.
				</p><pre class="programlisting">public final
OpenCReport\Image::set_bgcolor(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPIMAGESETTEXTWIDTH"><div class="titlepage"><div><div><h3 class="title">8.19.8. Set the image "text width" <a href="#PHPIMAGESETTEXTWIDTH" class="id_link">#</a></h3></div></div></div><p>
				Set the image "text width". This setting
				is used when the image element is
				a child of a text line.
				See <a class="xref" href="#IMAGETEXTWIDTH" title="2.19.1.6. Text width">Section 2.19.1.6</a>.
				</p><pre class="programlisting">public final
OpenCReport\Image::set_text_width(
                     ?string $expr_string = null): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPTEXTCLASS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.20. The OpenCReport\Text class <a href="#PHPTEXTCLASS" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#PHPTEXTSETVALUESTRING">8.20.1. Set literal value</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETVALUEEXPR">8.20.2. Set expression value</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETVALUEDELAYED">8.20.3. Set delayed flag for the field expression</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETFORMAT">8.20.4. Set the format string for the field expression</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETXLATE">8.20.5. Set the translation flag for the field expression</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETWIDTH">8.20.6. Set the field width</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETALIGN">8.20.7. Set the field alignment</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETCOLOR">8.20.8. Set the field text color</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETBGCOLOR">8.20.9. Set the field background color</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETFONTNAME">8.20.10. Set the field font name</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETFONTSIZE">8.20.11. Set the field font size</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETBOLD">8.20.12. Set the field's bold flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETITALIC">8.20.13. Set the field's italic flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETLINK">8.20.14. Set the field's link</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETMEMO">8.20.15. Set the field's memo flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETMEMOWRAP">8.20.16. Set the field's "wrap at characters" flag</a></span></dt><dt><span class="sect2"><a href="#PHPTEXTSETMEMOMAXLINES">8.20.17. Set the field's maximum number of lines</a></span></dt></dl></div><p>
			</p><pre class="programlisting">class OpenCReport\Text {
    public final set_value_string(
                     ?string $expr_string = null): void;

    public final set_value_expr(
                     ?string $expr_string = null): void;

    public final set_value_delayed(
                     ?string $expr_string = null): void;

    public final set_format(
                     ?string $expr_string = null): void;

    public final set_translate(
                     ?string $expr_string = null): void;

    public final set_width(
                     ?string $expr_string = null): void;

    public final set_alignment(
                     ?string $expr_string = null): void;

    public final set_color(
                     ?string $expr_string = null): void;

    public final set_bgcolor(
                     ?string $expr_string = null): void;

    public final set_font_name(
                     ?string $expr_string = null): void;

    public final set_font_size(
                     ?string $expr_string = null): void;

    public final set_bold(
                     ?string $expr_string = null): void;

    public final set_italic(
                     ?string $expr_string = null): void;

    public final set_link(
                     ?string $expr_string = null): void;

    public final set_memo(
                     ?string $expr_string = null): void;

    public final set_memo_wrap_chars(
                     ?string $expr_string = null): void;

    public final set_memo_max_lines(
                     ?string $expr_string = null): void;
}</pre><p>
		</p><div class="sect2" id="PHPTEXTSETVALUESTRING"><div class="titlepage"><div><div><h3 class="title">8.20.1. Set literal value <a href="#PHPTEXTSETVALUESTRING" class="id_link">#</a></h3></div></div></div><p>
				Set the literal value for the text element.
				</p><pre class="programlisting">public final
OpenCReport\Text::set_value_string(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETVALUEEXPR"><div class="titlepage"><div><div><h3 class="title">8.20.2. Set expression value <a href="#PHPTEXTSETVALUEEXPR" class="id_link">#</a></h3></div></div></div><p>
				Set the expression value for the text element.
				And expression may depend on data row values.
				See <a class="xref" href="#EXPRESSIONS" title="Chapter 3. Expressions in OpenCReports">Expressions</a>.
				</p><pre class="programlisting">public final
OpenCReport\Text::set_value_expr(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETVALUEDELAYED"><div class="titlepage"><div><div><h3 class="title">8.20.3. Set delayed flag for the field expression <a href="#PHPTEXTSETVALUEDELAYED" class="id_link">#</a></h3></div></div></div><p>
				Set delayed flag for the field expression.
				When set to <code class="literal">true</code>, the field
				expression's last value is calculated during
				the precalculation phase of executing the report
				and this precalculated value is used during
				rendering the report.
				</p><pre class="programlisting">public final
OpenCReport\Text::set_value_delayed(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETFORMAT"><div class="titlepage"><div><div><h3 class="title">8.20.4. Set the format string for the field expression <a href="#PHPTEXTSETFORMAT" class="id_link">#</a></h3></div></div></div><p>
				Set the format string for the field expression.
				This format string will be used instead of
				the default formats for specific types.
				See <a class="xref" href="#FORMATTING" title="Chapter 6. Formatting">Formatting data</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_format(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETXLATE"><div class="titlepage"><div><div><h3 class="title">8.20.5. Set the translation flag for the field expression <a href="#PHPTEXTSETXLATE" class="id_link">#</a></h3></div></div></div><p>
				Set the translation flag for the field expression.
				When set to <code class="literal">true</code>, the field
				value will be translated according to the locale
				and translation settings.
				See <a class="xref" href="#PHPLOCALEMETHODS" title="8.4.2. Locale related methods">Section 8.4.2</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_translate(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETWIDTH"><div class="titlepage"><div><div><h3 class="title">8.20.6. Set the field width <a href="#PHPTEXTSETWIDTH" class="id_link">#</a></h3></div></div></div><p>
				Set the field width.
				See <a class="xref" href="#TEXTELEMWIDTH" title="2.17.1.4. Width">Text element width</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_width(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETALIGN"><div class="titlepage"><div><div><h3 class="title">8.20.7. Set the field alignment <a href="#PHPTEXTSETALIGN" class="id_link">#</a></h3></div></div></div><p>
				Set the field alignment.
				See <a class="xref" href="#TEXTELEMALIGN" title="2.17.1.5. Alignment">Text element alignment</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_alignment(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETCOLOR"><div class="titlepage"><div><div><h3 class="title">8.20.8. Set the field text color <a href="#PHPTEXTSETCOLOR" class="id_link">#</a></h3></div></div></div><p>
				Set the field text color.
				See <a class="xref" href="#TEXTCOLOR" title="2.17.1.6. Text color">Section 2.17.1.6</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_color(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETBGCOLOR"><div class="titlepage"><div><div><h3 class="title">8.20.9. Set the field background color <a href="#PHPTEXTSETBGCOLOR" class="id_link">#</a></h3></div></div></div><p>
				Set the field background color.
				See <a class="xref" href="#TEXTBGCOLOR" title="2.17.1.7. Background color">Section 2.17.1.7</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_bgcolor(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETFONTNAME"><div class="titlepage"><div><div><h3 class="title">8.20.10. Set the field font name <a href="#PHPTEXTSETFONTNAME" class="id_link">#</a></h3></div></div></div><p>
				Set the field font name.
				See <a class="xref" href="#TEXTELEMFONTNAME" title="2.17.1.8. Font name">Text element font name</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_font_name(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETFONTSIZE"><div class="titlepage"><div><div><h3 class="title">8.20.11. Set the field font size <a href="#PHPTEXTSETFONTSIZE" class="id_link">#</a></h3></div></div></div><p>
				Set the field font size.
				See <a class="xref" href="#TEXTELEMFONTSIZE" title="2.17.1.9. Font size">Text element font size</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_font_size(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETBOLD"><div class="titlepage"><div><div><h3 class="title">8.20.12. Set the field's bold flag <a href="#PHPTEXTSETBOLD" class="id_link">#</a></h3></div></div></div><p>
				Set the field's bold flag.
				See <a class="xref" href="#TEXTBOLD" title="2.17.1.10. Bold font">Section 2.17.1.10</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_bold(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETITALIC"><div class="titlepage"><div><div><h3 class="title">8.20.13. Set the field's italic flag <a href="#PHPTEXTSETITALIC" class="id_link">#</a></h3></div></div></div><p>
				Set the field's italic flag.
				See <a class="xref" href="#TEXTITALIC" title="2.17.1.11. Italic font">Section 2.17.1.11</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_italic(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETLINK"><div class="titlepage"><div><div><h3 class="title">8.20.14. Set the field's link <a href="#PHPTEXTSETLINK" class="id_link">#</a></h3></div></div></div><p>
				Set the field's link URL.
				When set, the text field becomes a link
				with the specified URL.
				See <a class="xref" href="#WEBLINK" title="2.17.1.12. Web link">Section 2.17.1.12</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_link(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETMEMO"><div class="titlepage"><div><div><h3 class="title">8.20.15. Set the field's memo flag <a href="#PHPTEXTSETMEMO" class="id_link">#</a></h3></div></div></div><p>
				Set the field's memo (multi-line text) flag.
				When set to <code class="literal">true</code>,
				the text field becomes a multi-line field.
				See <a class="xref" href="#MEMO" title="2.17.1.13. Multi-line (memo) field">Section 2.17.1.13</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_memo(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETMEMOWRAP"><div class="titlepage"><div><div><h3 class="title">8.20.16. Set the field's "wrap at characters" flag <a href="#PHPTEXTSETMEMOWRAP" class="id_link">#</a></h3></div></div></div><p>
				Set the field's "wrap at characters" flag.
				Only used when the memo flag is set to
				<code class="literal">true</code>.
				Default is <code class="literal">false</code>, the text
				is wrapped at word boundaries.
				When set to <code class="literal">true</code>, text is
				wrapped at character boundaries with hyphenation.
				See <a class="xref" href="#MEMOWRAP" title="2.17.1.14. Multi-line field wrapping">Section 2.17.1.14</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_memo_wrap_chars(
                     ?string $expr_string = null): void;</pre><p>
			</p></div><div class="sect2" id="PHPTEXTSETMEMOMAXLINES"><div class="titlepage"><div><div><h3 class="title">8.20.17. Set the field's maximum number of lines <a href="#PHPTEXTSETMEMOMAXLINES" class="id_link">#</a></h3></div></div></div><p>
				Set the field's maximum number of lines.
				Only used when the memo flag is set to
				<code class="literal">true</code>. The text field's value
				is only rendered up to the set number of lines.
				Default is unset, the text is rendered fully.
				See <a class="xref" href="#MEMOROWLIMIT" title="2.17.1.15. Multi-line field row limit">Section 2.17.1.15</a>
				</p><pre class="programlisting">public final
OpenCReport\Text::set_memo_max_lines(
                     ?string $expr_string = null): void;</pre><p>
			</p></div></div><div class="sect1" id="PHPRLIBCOMPAT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.21. RLIB compatibility API <a href="#PHPRLIBCOMPAT" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#RLIBINIT">8.21.1. Initialize a report</a></span></dt><dt><span class="sect2"><a href="#RLIBDESTROY">8.21.2. Destroy a report</a></span></dt><dt><span class="sect2"><a href="#RLIBGETLIBVER">8.21.3. Get library version</a></span></dt><dt><span class="sect2"><a href="#RLIBADDMARIADS">8.21.4. Add a MySQL/MariaDB datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDMARIADS2">8.21.5. Add a MySQL/MariaDB datasource from an INI group</a></span></dt><dt><span class="sect2"><a href="#RLIBADDPGDS">8.21.6. Add a PostgreSQL datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDODBCDS">8.21.7. Add an ODBC datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDARRAYDS">8.21.8. Add an array datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDXMLDS">8.21.9. Add an XML datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDCSVDS">8.21.10. Add a CSV datasource</a></span></dt><dt><span class="sect2"><a href="#RLIBADDQUERY">8.21.11. Add a query</a></span></dt><dt><span class="sect2"><a href="#RLIBADDFOLLOWER">8.21.12. Add a resultset follower</a></span></dt><dt><span class="sect2"><a href="#RLIBADDN1FOLLOWER">8.21.13. Add a resultset N:1 follower</a></span></dt><dt><span class="sect2"><a href="#RLIBSETDSENCODING">8.21.14. Set datasource encoding</a></span></dt><dt><span class="sect2"><a href="#RLIBLOADREPORT">8.21.15. Add a report XML</a></span></dt><dt><span class="sect2"><a href="#RLIBPARSEXMLFROMBUFFER">8.21.16. Add a report XML from buffer</a></span></dt><dt><span class="sect2"><a href="#RLIBADDSEARCHPATH">8.21.17. Add a search path</a></span></dt><dt><span class="sect2"><a href="#RLIBSETLOCALE">8.21.18. Set locale</a></span></dt><dt><span class="sect2"><a href="#RLIBSETUPXLATE">8.21.19. Setup translation</a></span></dt><dt><span class="sect2"><a href="#RLIBSETOUTPUTFORMAT">8.21.20. Set output format</a></span></dt><dt><span class="sect2"><a href="#RLIBADDUSERFUNC">8.21.21. Add a custom report function</a></span></dt><dt><span class="sect2"><a href="#RLIBSETOUTPUTENCODING">8.21.22. Set output encoding</a></span></dt><dt><span class="sect2"><a href="#RLIBADDREPORTPARAM">8.21.23. Add a report parameter</a></span></dt><dt><span class="sect2"><a href="#RLIBSETOUTPUTPARAM">8.21.24. Set an output parameter</a></span></dt><dt><span class="sect2"><a href="#RLIBREFRESHARRAY">8.21.25. Refresh array query contents</a></span></dt><dt><span class="sect2"><a href="#RLIBADDEVENTCB">8.21.26. Add an event callback</a></span></dt><dt><span class="sect2"><a href="#RLIBRUNREPORT">8.21.27. Execute the report</a></span></dt><dt><span class="sect2"><a href="#RLIBDUMPREPORT">8.21.28. Dump the report output</a></span></dt><dt><span class="sect2"><a href="#RLIBGETCONTENTTYPE">8.21.29. Get content type</a></span></dt><dt><span class="sect2"><a href="#RLIBSETRADIX">8.21.30. Set radix character</a></span></dt><dt><span class="sect2"><a href="#RLIBCOMPILEEXPR">8.21.31. Compile and evaluate an expression</a></span></dt><dt><span class="sect2"><a href="#RLIBADDGRAPHREGION">8.21.32. Add graph background region</a></span></dt><dt><span class="sect2"><a href="#RLIBCLEARREGION">8.21.33. Clear graph background region</a></span></dt><dt><span class="sect2"><a href="#RLIBSETGRAPHMINORTICK">8.21.34. Set graph minor tick</a></span></dt><dt><span class="sect2"><a href="#RLIBSETGRAPHMINORTICKLOC">8.21.35. Set graph minor tick by location</a></span></dt></dl></div><p>
			These functions mimic the behaviour
			of the RLIB PHP API but their declaration
			differ in a way that the RLIB compatibility
			API in OpenCReports create and use
			<code class="literal">OpenCReport</code> objects,
			making the OpenCReports methods and
			RLIB compatibility functions inter-operable.
		</p><div class="sect2" id="RLIBINIT"><div class="titlepage"><div><div><h3 class="title">8.21.1. Initialize a report <a href="#RLIBINIT" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">function
rlib_init(): ?OpenCReport;</pre><p>
			</p></div><div class="sect2" id="RLIBDESTROY"><div class="titlepage"><div><div><h3 class="title">8.21.2. Destroy a report <a href="#RLIBDESTROY" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">function
rlib_free(OpenCReport $r): void;</pre><p>
			</p></div><div class="sect2" id="RLIBGETLIBVER"><div class="titlepage"><div><div><h3 class="title">8.21.3. Get library version <a href="#RLIBGETLIBVER" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">function
rlib_version(void): string;</pre><p>
			</p></div><div class="sect2" id="RLIBADDMARIADS"><div class="titlepage"><div><div><h3 class="title">8.21.4. Add a MySQL/MariaDB datasource <a href="#RLIBADDMARIADS" class="id_link">#</a></h3></div></div></div><p>
				This function is mostly equivalent to
				<code class="literal">OpenCReport::datasource_add_mariadb()</code>
				except that this function does not have a
				<code class="literal">port</code> parameter and it
				doesn't handle the port the way RLIB handled
				it as an afterthought, i.e. the value of
				<code class="literal">$host</code> could have a
				<code class="literal">:port</code> suffix. Only
				the default port will be used, which may be
				set in the MySQL or MariaDB configuration.
				</p><pre class="programlisting">function
rlib_add_datasource_mysql(
                     OpenCReport $r,
                     string $source_name,
                     string $host,
                     string $user,
                     string $password,
                     string $dbname):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDMARIADS2"><div class="titlepage"><div><div><h3 class="title">8.21.5. Add a MySQL/MariaDB datasource from an INI group <a href="#RLIBADDMARIADS2" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::datasource_add_mariadb2()</code>.
				</p><pre class="programlisting">function
rlib_add_datasource_mysql_from_group(
                     OpenCReport $r,
                     string $source_name,
                     string $group,
                     ?string $option_file = null):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDPGDS"><div class="titlepage"><div><div><h3 class="title">8.21.6. Add a PostgreSQL datasource <a href="#RLIBADDPGDS" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::datasource_add_postgresql2()</code>.
				</p><pre class="programlisting">function
rlib_add_datasource_postgres(
                     OpenCReport $r,
                     string $source_name,
                     ?string $connection_info = null):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDODBCDS"><div class="titlepage"><div><div><h3 class="title">8.21.7. Add an ODBC datasource <a href="#RLIBADDODBCDS" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::datasource_add_odbc()</code>.
				</p><pre class="programlisting">function
rlib_add_datasource_odbc(
                     OpenCReport $r,
                     string $source_name,
                     string $dbname,
                     ?string $user, = null,
                     ?string $password = null):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDARRAYDS"><div class="titlepage"><div><div><h3 class="title">8.21.8. Add an array datasource <a href="#RLIBADDARRAYDS" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::datasource_add_array()</code>.
				</p><pre class="programlisting">function
rlib_add_datasource_array(
                     OpenCReport $r,
                     string $source_name):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDXMLDS"><div class="titlepage"><div><div><h3 class="title">8.21.9. Add an XML datasource <a href="#RLIBADDXMLDS" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::datasource_add_xml()</code>.
				</p><pre class="programlisting">function
rlib_add_datasource_xml(
                     OpenCReport $r,
                     string $source_name):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDCSVDS"><div class="titlepage"><div><div><h3 class="title">8.21.10. Add a CSV datasource <a href="#RLIBADDCSVDS" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::datasource_add_csv()</code>.
				</p><pre class="programlisting">function
rlib_add_datasource_csv(
                     OpenCReport $r,
                     string $source_name):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDQUERY"><div class="titlepage"><div><div><h3 class="title">8.21.11. Add a query <a href="#RLIBADDQUERY" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport\Datasource::query_add()</code>
				with a different order of parameters.
				The query name is the last parameter.
				</p><pre class="programlisting">function
rlib_add_query_as(
                     OpenCReport $r,
                     string $source_name,
                     string $array_or_file_or_sql,
                     string $name):
                     OpenCReport\Datasource;</pre><p>
			</p></div><div class="sect2" id="RLIBADDFOLLOWER"><div class="titlepage"><div><div><h3 class="title">8.21.12. Add a resultset follower <a href="#RLIBADDFOLLOWER" class="id_link">#</a></h3></div></div></div><p>
				This function is about equivalent to
				<code class="literal">OpenCReport\Query::add_follower()</code>.
				The <code class="literal">$leader</code> and
				<code class="literal">$follower</code> are query
				names.
				</p><pre class="programlisting">function
rlib_add_resultset_follower(
                     OpenCReport $r,
                     string $leader,
                     string $follower): bool;</pre><p>
			</p></div><div class="sect2" id="RLIBADDN1FOLLOWER"><div class="titlepage"><div><div><h3 class="title">8.21.13. Add a resultset N:1 follower <a href="#RLIBADDN1FOLLOWER" class="id_link">#</a></h3></div></div></div><p>
				This function is about equivalent to
				<code class="literal">OpenCReport\Query::add_follower_n_to_1()</code>.
				The former allows an arbitrary match expression,
				while the RLIB compatibility function
				will use the <code class="literal">$leader_field = $follower_field</code>
				expression. Similarly to the above
				function, <code class="literal">$leader</code> and
				<code class="literal">$follower</code> are query
				names.
				</p><pre class="programlisting">function
rlib_add_resultset_follower_n_to_1(
                     OpenCReport $r,
                     string $leader,
                     string $leader_field,
                     string $follower,
                     string $follower_field): bool;</pre><p>
			</p></div><div class="sect2" id="RLIBSETDSENCODING"><div class="titlepage"><div><div><h3 class="title">8.21.14. Set datasource encoding <a href="#RLIBSETDSENCODING" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport\Datasource::set_encoding()</code>.
				See <a class="xref" href="#PHPDSSETENCODING" title="8.5.3. Set datasource encoding">Section 8.5.3</a>
				</p><pre class="programlisting">function
rlib_set_datasource_encoding(
                     OpenCReport $r,
                     string $name,
                     string $encoding): void;</pre><p>
			</p></div><div class="sect2" id="RLIBLOADREPORT"><div class="titlepage"><div><div><h3 class="title">8.21.15. Add a report XML <a href="#RLIBLOADREPORT" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::parse_xml()</code>.
				</p><pre class="programlisting">function
rlib_add_report(
                     OpenCReport $r,
                     string $filename): bool;</pre><p>
			</p></div><div class="sect2" id="RLIBPARSEXMLFROMBUFFER"><div class="titlepage"><div><div><h3 class="title">8.21.16. Add a report XML from buffer <a href="#RLIBPARSEXMLFROMBUFFER" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::parse_xml_from_buffer()</code>.
				</p><pre class="programlisting">function
rlib_add_report_from_buffer(
                     OpenCReport $r,
                     string $buffer): bool;</pre><p>
			</p></div><div class="sect2" id="RLIBADDSEARCHPATH"><div class="titlepage"><div><div><h3 class="title">8.21.17. Add a search path <a href="#RLIBADDSEARCHPATH" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::add_search_path()</code>.
				</p><pre class="programlisting">function
rlib_add_search_path(
                     OpenCReport $r,
                     string $path): bool;</pre><p>
			</p></div><div class="sect2" id="RLIBSETLOCALE"><div class="titlepage"><div><div><h3 class="title">8.21.18. Set locale <a href="#RLIBSETLOCALE" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::set_locale()</code>.
				</p><pre class="programlisting">function
rlib_set_locale(
                     OpenCReport $r,
                     string $locale): void;</pre><p>
			</p></div><div class="sect2" id="RLIBSETUPXLATE"><div class="titlepage"><div><div><h3 class="title">8.21.19. Setup translation <a href="#RLIBSETUPXLATE" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<code class="literal">OpenCReport::bindtextdomain()</code>.
				</p><pre class="programlisting">function
rlib_bindtextdomain(
                     OpenCReport $r,
                     string $domain,
                     string $dirname): void;</pre><p>
			</p></div><div class="sect2" id="RLIBSETOUTPUTFORMAT"><div class="titlepage"><div><div><h3 class="title">8.21.20. Set output format <a href="#RLIBSETOUTPUTFORMAT" class="id_link">#</a></h3></div></div></div><p>
				This function is about equivalent to
				<code class="literal">OpenCReport::set_output_format()</code>
				but accepts textual format names (like
				<code class="literal">pdf</code> instead of the
				numeric constants like <code class="literal">OpenCReport::OUTPUT_PDF</code>
				</p><pre class="programlisting">function
rlib_set_output_format_from_text(
                     OpenCReport $r,
                     string $format): void;</pre><p>
			</p></div><div class="sect2" id="RLIBADDUSERFUNC"><div class="titlepage"><div><div><h3 class="title">8.21.21. Add a custom report function <a href="#RLIBADDUSERFUNC" class="id_link">#</a></h3></div></div></div><p>
				This function is the RLIB compatible
				variant of <code class="literal">OpenCReport::function_add()</code>.
				Unlike the OpenCReports API, the function
				added by this function does not have
				the control knobs to optimize it properly.
				After this function returns, subsequently
				parsed expressions may use a function
				name passed in with <code class="literal">$name</code>.
				The PHP function name is in <code class="literal">$function</code>
				</p><pre class="programlisting">function
rlib_add_function(
                     OpenCReport $r,
                     string $name,
                     string $function,
                     long $params): void;</pre><p>
			</p><p>
				The interface of the PHP function must follow the
				below prototype. It must contain the exact number
				of arguments passed in via <code class="literal">$params</code>,
				i.e. it may not pass <code class="literal">-1</code> to indicate
				variadic arguments.
				</p><pre class="programlisting">function my_function($arg1, $arg2, ...)</pre><p>
			</p><p>
				The function implementation may return
				any PHP base type (<code class="literal">string</code>,
				<code class="literal">long</code>, <code class="literal">double</code>
				or <code class="literal">bool</code>).
			</p></div><div class="sect2" id="RLIBSETOUTPUTENCODING"><div class="titlepage"><div><div><h3 class="title">8.21.22. Set output encoding <a href="#RLIBSETOUTPUTENCODING" class="id_link">#</a></h3></div></div></div><p>
				This function silently does nothing.
				For PDF, it's not relevant. Other
				(CURRENTLY NOT IMPLEMENTED) output formats
				will all use UTF-8.
				</p><pre class="programlisting">function
rlib_set_output_encoding(
                     OpenCReport $r,
                     string $encoding): void;</pre><p>
			</p></div><div class="sect2" id="RLIBADDREPORTPARAM"><div class="titlepage"><div><div><h3 class="title">8.21.23. Add a report parameter <a href="#RLIBADDREPORTPARAM" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to
				<a class="xref" href="#PHPSETMVARMETHOD" title="8.4.8. Add &quot;m&quot; domain variable">OpenCReport::set_mvariable()</a>.
				</p><pre class="programlisting">function
rlib_add_parameter(
                     OpenCReport $r,
                     string $param,
                     ?string $value = null): void;</pre><p>
			</p></div><div class="sect2" id="RLIBSETOUTPUTPARAM"><div class="titlepage"><div><div><h3 class="title">8.21.24. Set an output parameter <a href="#RLIBSETOUTPUTPARAM" class="id_link">#</a></h3></div></div></div><p>
				Set output parameters for the report.
				For accepted parameters, see
				<a class="xref" href="#PHPREPORTSETOUTPUTPARAM" title="8.3.4. Set report output parameter">Section 8.3.4</a>
				</p><pre class="programlisting">function
rlib_set_output_parameter(
                     OpenCReport $r,
                     string $param,
                     string $value): void;</pre><p>
			</p></div><div class="sect2" id="RLIBREFRESHARRAY"><div class="titlepage"><div><div><h3 class="title">8.21.25. Refresh array query contents <a href="#RLIBREFRESHARRAY" class="id_link">#</a></h3></div></div></div><p>
				This function is equivalent to executing
				<a class="xref" href="#PHPREFRESHQUERY" title="8.4.3.10. Refresh the internal representation of array queries">OpenCReport::query_refresh()</a>.
				The same limitations apply.
				</p><pre class="programlisting">function
rlib_query_refresh(?OpenCReport $r = null): void;</pre><p>
			</p><p>
				OpenCReports allows calling this function
				with no parameters or a <code class="literal">NULL</code>
				parameter.
			</p></div><div class="sect2" id="RLIBADDEVENTCB"><div class="titlepage"><div><div><h3 class="title">8.21.26. Add an event callback <a href="#RLIBADDEVENTCB" class="id_link">#</a></h3></div></div></div><p>
				This function adds a callback for
				the specified <code class="literal">$signal</code>
				in an RLIB compatible way. The signal
				name may be <code class="literal">row_change</code>,
				<code class="literal">report_done</code>,
				<code class="literal">report_start</code>,
				<code class="literal">report_iteration</code>,
				<code class="literal">part_iteration</code> or
				<code class="literal">precalculation_done</code>.
				</p><pre class="programlisting">function
rlib_signal_connect(
                     OpenCReport $r,
                     string $signal,
                     string $function): void;</pre><p>
			</p><p>
				The PHP function prototype must follow this:
				</p><pre class="programlisting">function my_callback()</pre><p>
			</p><p>
				This function is different from the
				methods that add specific callback
				types for parts, reports, breaks, etc.
				in that the callback is added to the toplevel
				<code class="literal">OpenCReport</code> object context,
				meaning that a <code class="literal">report_start</code>
				callback will be called for every report
				in case there are multiple reports in the same
				context. Similarly, the same
				<code class="literal">part_iteration</code> callback
				will be called for every part in a multi-part
				report.
			</p><p>
				Since there is no way to know which part or
				which report triggers the callback, it is recommended
				to use <code class="literal">rlib_signal_connect()</code>
				for single-part single-report reports. For
				more special purposes, the callback creation
				class methods are recommended.
			</p></div><div class="sect2" id="RLIBRUNREPORT"><div class="titlepage"><div><div><h3 class="title">8.21.27. Execute the report <a href="#RLIBRUNREPORT" class="id_link">#</a></h3></div></div></div><p>
				It is equivalent to <code class="literal">OpenCReport::execute()</code>
				</p><pre class="programlisting">function
rlib_execute(OpenCReport $r): bool;</pre><p>
			</p></div><div class="sect2" id="RLIBDUMPREPORT"><div class="titlepage"><div><div><h3 class="title">8.21.28. Dump the report output <a href="#RLIBDUMPREPORT" class="id_link">#</a></h3></div></div></div><p>
				It is equivalent to <code class="literal">OpenCReport::spool()</code>
				</p><pre class="programlisting">function
rlib_spool(OpenCReport $r): ?string;</pre><p>
			</p></div><div class="sect2" id="RLIBGETCONTENTTYPE"><div class="titlepage"><div><div><h3 class="title">8.21.29. Get content type <a href="#RLIBGETCONTENTTYPE" class="id_link">#</a></h3></div></div></div><p>
				It is equivalent to <code class="literal">OpenCReport::get_content_type()</code>
				</p><pre class="programlisting">function
rlib_get_content_type(OpenCReport $r): ?string;</pre><p>
			</p></div><div class="sect2" id="RLIBSETRADIX"><div class="titlepage"><div><div><h3 class="title">8.21.30. Set radix character <a href="#RLIBSETRADIX" class="id_link">#</a></h3></div></div></div><p>
				This function silently does nothing.
				Formatting numbers correctly follow the
				locale information regarding the decimal
				separator.
				</p><pre class="programlisting">function
rlib_set_radix_character(OpenCReport $r): void;</pre><p>
			</p></div><div class="sect2" id="RLIBCOMPILEEXPR"><div class="titlepage"><div><div><h3 class="title">8.21.31. Compile and evaluate an expression <a href="#RLIBCOMPILEEXPR" class="id_link">#</a></h3></div></div></div><p>
				</p><pre class="programlisting">function
rlib_compile_infix(string $expr_string):
                     string|double|null;</pre><p>
			</p><p>
				Since only the expression string is passed
				but not the <code class="literal">$r</code> resource
				in RLIB, the compatibility implementation
				of this function is equivalent to the
				sequence of creating an internal
				<code class="literal">OpenCReport</code> object,
				parsing, optimizing and evaluating the
				expression, converting its result to
				a PHP base type, then destroying the
				internal object. For this reason, the
				expression may not reference any query
				columns or report variables.
			</p></div><div class="sect2" id="RLIBADDGRAPHREGION"><div class="titlepage"><div><div><h3 class="title">8.21.32. Add graph background region <a href="#RLIBADDGRAPHREGION" class="id_link">#</a></h3></div></div></div><p>
				This function silently does nothing.
				GRAPHING IS NOT IMPLEMENTED YET.
				</p><pre class="programlisting">function
rlib_graph_add_bg_region(
                     OpenCReport $r,
                     string $graph,
                     string $region,
                     string $color,
                     double $start,
                     double $end): void;</pre><p>
			</p></div><div class="sect2" id="RLIBCLEARREGION"><div class="titlepage"><div><div><h3 class="title">8.21.33. Clear graph background region <a href="#RLIBCLEARREGION" class="id_link">#</a></h3></div></div></div><p>
				This function silently does nothing.
				GRAPHING IS NOT IMPLEMENTED YET.
				</p><pre class="programlisting">function
rlib_graph_clear_bg_region(
                     OpenCReport $r,
                     string $graph): void;</pre><p>
			</p></div><div class="sect2" id="RLIBSETGRAPHMINORTICK"><div class="titlepage"><div><div><h3 class="title">8.21.34. Set graph minor tick <a href="#RLIBSETGRAPHMINORTICK" class="id_link">#</a></h3></div></div></div><p>
				This function silently does nothing.
				GRAPHING IS NOT IMPLEMENTED YET.
				</p><pre class="programlisting">function
rlib_graph_set_x_minor_tick(
                     OpenCReport $r,
                     string $graph,
                     string $x): void;</pre><p>
			</p></div><div class="sect2" id="RLIBSETGRAPHMINORTICKLOC"><div class="titlepage"><div><div><h3 class="title">8.21.35. Set graph minor tick by location <a href="#RLIBSETGRAPHMINORTICKLOC" class="id_link">#</a></h3></div></div></div><p>
				This function silently does nothing.
				GRAPHING IS NOT IMPLEMENTED YET.
				</p><pre class="programlisting">function
rlib_graph_set_x_minor_tick_by_location(
                     OpenCReport $r,
                     string $graph,
                     double $location): void;</pre><p>
			</p></div></div></div><div class="chapter" id="EXAMPLES"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Examples</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="#EXAMPLE1">9.1. Simple report example</a></span></dt><dd><dl><dt><span class="sect2"><a href="#EXAMPLE1DATA">9.1.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1CODEC">9.1.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1CODEPHP">9.1.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1CODEPHPRLIB">9.1.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1XML">9.1.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1PDF">9.1.6. Report PDF result</a></span></dt></dl></dd><dt><span class="sect1"><a href="#EXAMPLE2">9.2. Simple report example with data access in code</a></span></dt><dd><dl><dt><span class="sect2"><a href="#EXAMPLE2DATA">9.2.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2CODEC">9.2.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2CODEPHP">9.2.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2CODEPHPRLIB">9.2.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2XML">9.2.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2PDF">9.2.6. Report PDF result</a></span></dt></dl></dd><dt><span class="sect1"><a href="#EXAMPLE3">9.3. Colors, images, horizontal lines and fonts</a></span></dt><dd><dl><dt><span class="sect2"><a href="#EXAMPLE3DATA">9.3.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3CODEC">9.3.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3CODEPHP">9.3.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3CODEPHPRLIB">9.3.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3XML">9.3.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3PDF">9.3.6. Report PDF result</a></span></dt></dl></dd><dt><span class="sect1"><a href="#EXAMPLE4">9.4. Report variables and breaks</a></span></dt><dd><dl><dt><span class="sect2"><a href="#EXAMPLE4DATA">9.4.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4CODEC">9.4.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4CODEPHP">9.4.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4CODEPHPRLIB">9.4.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4XML">9.4.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4PDF">9.4.6. Report PDF result</a></span></dt></dl></dd></dl></div><div class="sect1" id="EXAMPLE1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.1. Simple report example <a href="#EXAMPLE1" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#EXAMPLE1DATA">9.1.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1CODEC">9.1.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1CODEPHP">9.1.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1CODEPHPRLIB">9.1.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1XML">9.1.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE1PDF">9.1.6. Report PDF result</a></span></dt></dl></div><p>
			This example below uses a PostgreSQL query
			to generate a report in PDF output format,
			with many settings used as default:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" style="list-style-type: disc"><p>
						Courier font
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						12 points font size
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						automatically calculated field width
						where it's not specified (note the
						header and footer fields)
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						black font color
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						white background
					</p></li><li class="listitem" style="list-style-type: disc"><p>
						default paper size
					</p><p>
						Note that this particular default setting
						depends on your location, or rather, the
						computer's country settings. For example,
						the U.S. uses the Letter page size as default.
						On the other hand, most of Europe uses the A4
						page size.
					</p></li></ul></div><p>
			and so on.
		</p><div class="sect2" id="EXAMPLE1DATA"><div class="titlepage"><div><div><h3 class="title">9.1.1. Data <a href="#EXAMPLE1DATA" class="id_link">#</a></h3></div></div></div><p>
				Data is created as follows in a database called
				<code class="literal">ocrpttest</code> using the user
				<code class="literal">ocrpt</code>
				</p><pre class="programlisting">create table flintstones (id serial, name text, property text, age int, adult bool);
insert into flintstones (name, property, age, adult)
values
('Fred Flintstone','strong',31,true),
('Wilma Flintstone','charming',28,true),
('Pebbles Flintstone','young',0.5,false);</pre><p>
			</p><p>
				The data looks like this when queried:
				</p><pre class="programlisting">ocrpttest=&gt; select * from flintstones;
 id |        name        | property | age | adult 
----+--------------------+----------+-----+-------
  1 | Fred Flintstone    | strong   |  31 | t
  2 | Wilma Flintstone   | charming |  28 | t
  3 | Pebbles Flintstone | young    |   1 | f
(3 rows)</pre><p>
			</p></div><div class="sect2" id="EXAMPLE1CODEC"><div class="titlepage"><div><div><h3 class="title">9.1.2. C program code <a href="#EXAMPLE1CODEC" class="id_link">#</a></h3></div></div></div><p>
				The program code uses a minimalistic approach,
				putting everything into the report XML instead.
				</p><pre class="programlisting">#include &lt;stdio.h&gt;
#include &lt;opencreport.h&gt;

int main(int argc, char **argv) {
    opencreport *o = ocrpt_init();

    if (!ocrpt_parse_xml(o, "example1.xml")) {
        printf("XML parse error\n");
        ocrpt_free(o);
        return 0;
    }

    ocrpt_set_output_format(o, OCRPT_OUTPUT_PDF);
    ocrpt_execute(o);
    ocrpt_spool(o);
    ocrpt_free(o);

    return 0;
}</pre><p>
			</p></div><div class="sect2" id="EXAMPLE1CODEPHP"><div class="titlepage"><div><div><h3 class="title">9.1.3. PHP program code <a href="#EXAMPLE1CODEPHP" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP.
				</p><pre class="programlisting">&lt;?php
$o = new OpenCReport();

if (!$o-&gt;parse_xml("example1.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

$o-&gt;execute();
$o-&gt;spool();</pre><p>
			</p></div><div class="sect2" id="EXAMPLE1CODEPHPRLIB"><div class="titlepage"><div><div><h3 class="title">9.1.4. RLIB compatible PHP program code <a href="#EXAMPLE1CODEPHPRLIB" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP,
				using the RLIB compatibility functions.
				</p><pre class="programlisting">&lt;?php
$r = rlib_init();

if (!rlib_add_report($r, "example1.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

rlib_execute($r);
rlib_spool($r);</pre><p>
			</p></div><div class="sect2" id="EXAMPLE1XML"><div class="titlepage"><div><div><h3 class="title">9.1.5. Report description <a href="#EXAMPLE1XML" class="id_link">#</a></h3></div></div></div><p>
				The program code uses this file contents
				from <code class="literal">example1.xml</code>.
				</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE OpenCReport SYSTEM "opencreport.dtd"&gt;
&lt;OpenCReport&gt;
    &lt;Datasources&gt;
        &lt;Datasource name="pgsql" type="postgresql" dbname="ocrpttest" user="ocrpt" /&gt;
    &lt;/Datasources&gt;

    &lt;Queries&gt;
        &lt;Query name="q" datasource="pgsql"&gt;select * from flintstones;&lt;/Query&gt;
    &lt;/Queries&gt;

    &lt;Report query="q"&gt;
        &lt;PageHeader&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal width="20"&gt;The Flintstones&lt;/literal&gt;
                    &lt;field value="printf('Page %d / %d', r.pageno, r.totpages)" align="right" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/PageHeader&gt;

        &lt;PageFooter&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal&gt;The Flintstones&lt;/literal&gt;
                    &lt;field value="printf('Page %d / %d', r.pageno, r.totpages)" align="right" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/PageFooter&gt;

        &lt;Detail&gt;
            &lt;FieldHeaders&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal width="4" align="'right'"&gt;ID&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="20"&gt;Name&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="8" align="'center'"&gt;Property&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="6"&gt;Age&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="5" align="'center'"&gt;Adult&lt;/literal&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/FieldHeaders&gt;

            &lt;FieldDetails&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;field width="4" align="right" value="id" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field width="20" value="name" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field width="8" align="'center'" value="property" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field width="6" align="'right'" value="age" format="'%.2d'" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field value="adult ? 'yes' : 'no'" width="5" align="'center'"/&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/FieldDetails&gt;
        &lt;/Detail&gt;
    &lt;/Report&gt;
&lt;/OpenCReport&gt;</pre><p>
			</p></div><div class="sect2" id="EXAMPLE1PDF"><div class="titlepage"><div><div><h3 class="title">9.1.6. Report PDF result <a href="#EXAMPLE1PDF" class="id_link">#</a></h3></div></div></div><p>
				<span class="inlinemediaobject"><img src="images/example1.png" align="middle" /></span>
			</p></div></div><div class="sect1" id="EXAMPLE2"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.2. Simple report example with data access in code <a href="#EXAMPLE2" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#EXAMPLE2DATA">9.2.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2CODEC">9.2.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2CODEPHP">9.2.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2CODEPHPRLIB">9.2.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2XML">9.2.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE2PDF">9.2.6. Report PDF result</a></span></dt></dl></div><p>
			This example below is mostly the same as the
			previous one, with one exception: the database
			access is done from program code instead of
			putting it into the report XML description file.
		</p><div class="sect2" id="EXAMPLE2DATA"><div class="titlepage"><div><div><h3 class="title">9.2.1. Data <a href="#EXAMPLE2DATA" class="id_link">#</a></h3></div></div></div><p>
				As the same data is used as in the previous example,
				it's not duplicated here.
			</p></div><div class="sect2" id="EXAMPLE2CODEC"><div class="titlepage"><div><div><h3 class="title">9.2.2. C program code <a href="#EXAMPLE2CODEC" class="id_link">#</a></h3></div></div></div><p>
				The program code adds the datasource and
				the query before loading the report XML
				description. The order of these are not
				important, as the <code class="literal">ocrpt_execute()</code>
				call performs matching expressions with
				query column names internally.
				</p><pre class="programlisting">#include &lt;stdio.h&gt;
#include &lt;opencreport.h&gt;

int main(int argc, char **argv) {
    opencreport *o = ocrpt_init();
    ocrpt_datasource *ds = ocrpt_datasource_add_postgresql(o, "pgsql", NULL, NULL, "ocrpttest", "ocrpt", NULL);

    ocrpt_query_add_postgresql(ds, "q", "select * from flintstones;");

    if (!ocrpt_parse_xml(o, "example2.xml")) {
        printf("XML parse error\n");
        ocrpt_free(o);
        return 0;
    }

    ocrpt_set_output_format(o, OCRPT_OUTPUT_PDF);
    ocrpt_execute(o);
    ocrpt_spool(o);
    ocrpt_free(o);

    return 0;
}</pre><p>
			</p></div><div class="sect2" id="EXAMPLE2CODEPHP"><div class="titlepage"><div><div><h3 class="title">9.2.3. PHP program code <a href="#EXAMPLE2CODEPHP" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP.
				</p><pre class="programlisting">&lt;?php
$o = new OpenCReport();
$ds = $o-&gt;datasource_add_postgresql("pgsql", NULL, NULL, "ocrpttest", "ocrpt", NULL);

$ds-&gt;query_add("q", "select * from flintstones;");

if (!$o-&gt;parse_xml("example2.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

$o-&gt;execute();
$o-&gt;spool();</pre><p>
			</p></div><div class="sect2" id="EXAMPLE2CODEPHPRLIB"><div class="titlepage"><div><div><h3 class="title">9.2.4. RLIB compatible PHP program code <a href="#EXAMPLE2CODEPHPRLIB" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP,
				using the RLIB compatibility functions.
				</p><pre class="programlisting">&lt;?php
$r = rlib_init();

rlib_add_datasource_postgres($r, "pgsql", "dbname=ocrpttest user=ocrpt");
rlib_add_query_as($r, "pgsql", "select * from flintstones;", "q");

if (!rlib_add_report($r, "example2.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

rlib_execute($r);
rlib_spool($r);</pre><p>
			</p></div><div class="sect2" id="EXAMPLE2XML"><div class="titlepage"><div><div><h3 class="title">9.2.5. Report description <a href="#EXAMPLE2XML" class="id_link">#</a></h3></div></div></div><p>
				The program code uses this file contents
				from <code class="literal">example2.xml</code>.
				Note that the <code class="literal">&lt;Datasources&gt;</code>
				and <code class="literal">&lt;Queries&gt;</code> nodes
				that describe the database access and the query
				in the previous example are missing here.
				The equivalent code was added to the different
				program codes above.
				</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE OpenCReport SYSTEM "opencreport.dtd"&gt;
&lt;OpenCReport&gt;
    &lt;Report query="q"&gt;
        &lt;PageHeader&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal width="20"&gt;The Flintstones&lt;/literal&gt;
                    &lt;field value="printf('Page %d / %d', r.pageno, r.totpages)" align="right" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/PageHeader&gt;

        &lt;PageFooter&gt;
            &lt;Output&gt;
                &lt;Line&gt;
                    &lt;literal&gt;The Flintstones&lt;/literal&gt;
                    &lt;field value="printf('Page %d / %d', r.pageno, r.totpages)" align="right" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/PageFooter&gt;

        &lt;Detail&gt;
            &lt;FieldHeaders&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;literal width="4" align="'right'"&gt;ID&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="20"&gt;Name&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="8" align="'center'"&gt;Property&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="6"&gt;Age&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="5" align="'center'"&gt;Adult&lt;/literal&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/FieldHeaders&gt;

            &lt;FieldDetails&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;field width="4" align="right" value="id" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field width="20" value="name" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field width="8" align="'center'" value="property" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field width="6" align="'right'" value="age" format="'%.2d'" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field value="adult ? 'yes' : 'no'" width="5" align="'center'"/&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/FieldDetails&gt;
        &lt;/Detail&gt;
    &lt;/Report&gt;
&lt;/OpenCReport&gt;</pre><p>
			</p></div><div class="sect2" id="EXAMPLE2PDF"><div class="titlepage"><div><div><h3 class="title">9.2.6. Report PDF result <a href="#EXAMPLE2PDF" class="id_link">#</a></h3></div></div></div><p>
				The result is identical to the previous example,
				it's not duplicated here.
			</p></div></div><div class="sect1" id="EXAMPLE3"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.3. Colors, images, horizontal lines and fonts <a href="#EXAMPLE3" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#EXAMPLE3DATA">9.3.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3CODEC">9.3.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3CODEPHP">9.3.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3CODEPHPRLIB">9.3.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3XML">9.3.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE3PDF">9.3.6. Report PDF result</a></span></dt></dl></div><p>
			This example below shows that reports may be more
			exciting, with colors and images and other visual
			elements and settings.
		</p><div class="sect2" id="EXAMPLE3DATA"><div class="titlepage"><div><div><h3 class="title">9.3.1. Data <a href="#EXAMPLE3DATA" class="id_link">#</a></h3></div></div></div><p>
				Data is created as follows in the same database
				as the first example.
				</p><pre class="programlisting">create table flintstones2
(id serial primary key, name text, filename text);

insert into flintstones2 (name, filename)
values
('Fred Flintstone', 'FredFlintstone.png'),
('Wilma Flintstone', 'WilmaFlintstone.png'),
('Pebbles Flintstone', 'PebblesFlintstone.png'),
('Barney Rubble', 'BarneyRubble.png'),
('Betty Rubble', 'BettyRubble.png'),
('Bamm-Bamm Rubble', 'BammBammRubble.png'),
('The Great Gazoo', 'TheGreatGazoo.png');</pre><p>
			</p><p>
				The data looks like this when queried:
				</p><pre class="programlisting">ocrpttest=&gt; select * from flintstones2;
 id |        name        |       filename        
----+--------------------+-----------------------
  1 | Fred Flintstone    | FredFlintstone.png
  2 | Wilma Flintstone   | WilmaFlintstone.png
  3 | Pebbles Flintstone | PebblesFlintstone.png
  4 | Barney Rubble      | BarneyRubble.png
  5 | Betty Rubble       | BettyRubble.png
  6 | Bamm-Bamm Rubble   | BammBammRubble.png
  7 | The Great Gazoo    | TheGreatGazoo.png
(7 rows)</pre><p>
			</p></div><div class="sect2" id="EXAMPLE3CODEC"><div class="titlepage"><div><div><h3 class="title">9.3.2. C program code <a href="#EXAMPLE3CODEC" class="id_link">#</a></h3></div></div></div><p>
				The program code is almost identical to the
				second example with the database connection
				and the query added to program code, but
				it loads a different report XML description.
				</p><pre class="programlisting">#include &lt;stdio.h&gt;
#include &lt;opencreport.h&gt;

int main(int argc, char **argv) {
    opencreport *o = ocrpt_init();
    ocrpt_datasource *ds = ocrpt_datasource_add_postgresql(o, "pgsql", NULL, NULL, "ocrpttest", "ocrpt", NULL);

    ocrpt_query_add_postgresql(ds, "q", "select * from flintstones2;");

    if (!ocrpt_parse_xml(o, "example3.xml")) {
        printf("XML parse error\n");
        ocrpt_free(o);
        return 0;
    }

    ocrpt_set_output_format(o, OCRPT_OUTPUT_PDF);
    ocrpt_execute(o);
    ocrpt_spool(o);
    ocrpt_free(o);

    return 0;
}</pre><p>
			</p></div><div class="sect2" id="EXAMPLE3CODEPHP"><div class="titlepage"><div><div><h3 class="title">9.3.3. PHP program code <a href="#EXAMPLE3CODEPHP" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP.
				</p><pre class="programlisting">&lt;?php
$o = new OpenCReport();
$ds = $o-&gt;datasource_add_postgresql("pgsql", NULL, NULL, "ocrpttest", "ocrpt", NULL);

$ds-&gt;query_add("q", "select * from flintstones2;");

if (!$o-&gt;parse_xml("example3.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

$o-&gt;execute();
$o-&gt;spool();</pre><p>
			</p></div><div class="sect2" id="EXAMPLE3CODEPHPRLIB"><div class="titlepage"><div><div><h3 class="title">9.3.4. RLIB compatible PHP program code <a href="#EXAMPLE3CODEPHPRLIB" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP,
				using the RLIB compatibility functions.
				</p><pre class="programlisting">&lt;?php
$r = rlib_init();

rlib_add_datasource_postgres($r, "pgsql", "dbname=ocrpttest user=ocrpt");
rlib_add_query_as($r, "pgsql", "select * from flintstones2;", "q");

if (!rlib_add_report($r, "example3.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

rlib_execute($r);
rlib_spool($r);</pre><p>
			</p></div><div class="sect2" id="EXAMPLE3XML"><div class="titlepage"><div><div><h3 class="title">9.3.5. Report description <a href="#EXAMPLE3XML" class="id_link">#</a></h3></div></div></div><p>
				The program code uses this file contents
				from <code class="literal">example3.xml</code>.
			</p><p>
				Note the new settings:
				<code class="literal">fontName="..."</code>,
				<code class="literal">fontSize="..."</code>,
				<code class="literal">bold="..."</code>,
				<code class="literal">italic="..."</code>,
				<code class="literal">color="..."</code>,
				<code class="literal">bgcolor="..."</code>
				and others.
			</p><p>
				Also note that the <code class="literal">value="..."</code>
				setting indicates the file names that are used with
				<code class="literal">&lt;Image&gt;</code> elements in the
				report XML description. These files must be
				present in the report application work directory,
				or can be found in <a class="xref" href="#SEARCHPATHS" title="2.3. Paths">Search paths</a>
				added either in the report XML description or via
				programming code.
				</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE OpenCReport SYSTEM "opencreport.dtd"&gt;
&lt;OpenCReport&gt;
    &lt;Report query="q"&gt;
        &lt;PageHeader&gt;
            &lt;Output&gt;
                &lt;Image width="227" height="92" value="'A_Flintstones_logo.png'" /&gt;
                &lt;Line&gt;
                    &lt;field fontName="'Arial'" fontSize="20" value="printf('Page %d / %d', r.pageno, r.totpages)" align="right" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/PageHeader&gt;

        &lt;PageFooter&gt;
            &lt;Output&gt;
                &lt;Image width="227" height="92" value="'A_Flintstones_logo.png'" /&gt;
                &lt;Line&gt;
                    &lt;field fontName="'Times New Roman'" fontSize="20" value="printf('Page %d / %d', r.pageno, r.totpages)" align="right" /&gt;
                &lt;/Line&gt;
            &lt;/Output&gt;
        &lt;/PageFooter&gt;

        &lt;Detail&gt;
            &lt;FieldHeaders&gt;
                &lt;Output&gt;
                    &lt;HorizontalLine size="2" color="'black'" /&gt;
                    &lt;HorizontalLine size="2" color="'green'" /&gt;
                    &lt;Line bgcolor="'green'" bold="yes" fontSize="18"&gt;
                        &lt;literal fontName="'Petaluma Script'" width="7" align="'center'"&gt;Picture&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal fontName="'Carlito'" italic="yes"&gt;Name&lt;/literal&gt;
                    &lt;/Line&gt;
                    &lt;HorizontalLine size="2" color="'green'" /&gt;
                    &lt;HorizontalLine size="2" color="'black'" /&gt;
                    &lt;HorizontalLine size="2" color="'white'" /&gt;
                &lt;/Output&gt;
            &lt;/FieldHeaders&gt;

            &lt;FieldDetails&gt;
                &lt;Output&gt;
                    &lt;Line fontSize="18"&gt;
                        &lt;Image textWidth="7" bgcolor="'yellow'" align="'center'" value="filename" /&gt;
                        &lt;literal width="1" bgcolor="'yellow'" /&gt;
                        &lt;field color="'red'" bgcolor="'yellow'" value="name" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/FieldDetails&gt;
        &lt;/Detail&gt;
    &lt;/Report&gt;
&lt;/OpenCReport&gt;</pre><p>
			</p></div><div class="sect2" id="EXAMPLE3PDF"><div class="titlepage"><div><div><h3 class="title">9.3.6. Report PDF result <a href="#EXAMPLE3PDF" class="id_link">#</a></h3></div></div></div><p>
				<span class="inlinemediaobject"><img src="images/example3.png" align="middle" /></span>
			</p></div></div><div class="sect1" id="EXAMPLE4"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.4. Report variables and breaks <a href="#EXAMPLE4" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="#EXAMPLE4DATA">9.4.1. Data</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4CODEC">9.4.2. C program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4CODEPHP">9.4.3. PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4CODEPHPRLIB">9.4.4. RLIB compatible PHP program code</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4XML">9.4.5. Report description</a></span></dt><dt><span class="sect2"><a href="#EXAMPLE4PDF">9.4.6. Report PDF result</a></span></dt></dl></div><p>
			This example below exercises report variables and breaks.
			Breaks use changes in a data series, like a different
			last name. For more information, see <a class="xref" href="#BREAKSNODE" title="2.13. Breaks">Breaks</a>.
		</p><div class="sect2" id="EXAMPLE4DATA"><div class="titlepage"><div><div><h3 class="title">9.4.1. Data <a href="#EXAMPLE4DATA" class="id_link">#</a></h3></div></div></div><p>
				Data is created as follows in the same database
				using the same user as the first example.
				</p><pre class="programlisting">create table flintstones3 (id serial, firstname text, lastname text, age int);

insert into flintstones3 (firstname, lastname, age)
values
('Fred', 'Flintstone', 31),
('Wilma', 'Flintstone', 28),
('Pebbles', 'Flintstone', 2),
('Barney', 'Rubble', 28),
('Betty', 'Rubble', 27),
('Bamm-Bamm', 'Rubble', 2),
('The Great', 'Gazoo', 600);</pre><p>
			</p><p>
				The data looks like this when queried:
				</p><pre class="programlisting">ocrpttest=&gt; select * from flintstones3;
 id | firstname |  lastname  | age 
----+-----------+------------+-----
  1 | Fred      | Flintstone |  31
  2 | Wilma     | Flintstone |  28
  3 | Pebbles   | Flintstone |   2
  4 | Barney    | Rubble     |  28
  5 | Betty     | Rubble     |  27
  6 | Bamm-Bamm | Rubble     |   2
  7 | The Great | Gazoo      | 600
(7 rows)</pre><p>
			</p></div><div class="sect2" id="EXAMPLE4CODEC"><div class="titlepage"><div><div><h3 class="title">9.4.2. C program code <a href="#EXAMPLE4CODEC" class="id_link">#</a></h3></div></div></div><p>
				The program code is identical to the second and
				third examples, except that it uses a different
				report XML description.
				</p><pre class="programlisting">#include &lt;stdio.h&gt;
#include &lt;opencreport.h&gt;

int main(int argc, char **argv) {
    opencreport *o = ocrpt_init();
    ocrpt_datasource *ds = ocrpt_datasource_add_postgresql(o, "pgsql", NULL, NULL, "ocrpttest", "ocrpt", NULL);

    ocrpt_query_add_postgresql(ds, "q", "select * from flintstones2;");

    if (!ocrpt_parse_xml(o, "example4.xml")) {
        printf("XML parse error\n");
        ocrpt_free(o);
        return 0;
    }

    ocrpt_set_output_format(o, OCRPT_OUTPUT_PDF);
    ocrpt_execute(o);
    ocrpt_spool(o);
    ocrpt_free(o);

    return 0;
}</pre><p>
			</p></div><div class="sect2" id="EXAMPLE4CODEPHP"><div class="titlepage"><div><div><h3 class="title">9.4.3. PHP program code <a href="#EXAMPLE4CODEPHP" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP.
				</p><pre class="programlisting">&lt;?php
$o = new OpenCReport();
$ds = $o-&gt;datasource_add_postgresql("pgsql", NULL, NULL, "ocrpttest", "ocrpt", NULL);

$ds-&gt;query_add("q", "select * from flintstones2;");

if (!$o-&gt;parse_xml("example4.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

$o-&gt;execute();
$o-&gt;spool();</pre><p>
			</p></div><div class="sect2" id="EXAMPLE4CODEPHPRLIB"><div class="titlepage"><div><div><h3 class="title">9.4.4. RLIB compatible PHP program code <a href="#EXAMPLE4CODEPHPRLIB" class="id_link">#</a></h3></div></div></div><p>
				Here's the equivalent program code in PHP,
				using the RLIB compatibility functions.
				</p><pre class="programlisting">&lt;?php
$r = rlib_init();

rlib_add_datasource_postgres($r, "pgsql", "dbname=ocrpttest user=ocrpt");
rlib_add_query_as($r, "pgsql", "select * from flintstones2;", "q");

if (!rlib_add_report($r, "example4.xml")) {
    echo "XML parse error" . PHP_EOL;
    exit(0);
}

rlib_execute($r);
rlib_spool($r);</pre><p>
			</p></div><div class="sect2" id="EXAMPLE4XML"><div class="titlepage"><div><div><h3 class="title">9.4.5. Report description <a href="#EXAMPLE4XML" class="id_link">#</a></h3></div></div></div><p>
				The program code uses this file contents
				from <code class="literal">example4.xml</code>.
				</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE OpenCReport SYSTEM "opencreport.dtd"&gt;
&lt;OpenCReport&gt;
    &lt;Report query="q"&gt;
        &lt;Variables&gt;
            &lt;Variable name="var1" value="id" type="count" /&gt;
            &lt;Variable name="var2" value="age" type="average" precalculate="yes" resetonbreak="family" /&gt;
            &lt;Variable name="var3" value="age" type="average" precalculate="yes" /&gt;
            &lt;Variable name="var4" value="age" type="sum" /&gt;
            &lt;Variable name="var5" value="age" type="sum" precalculate="yes" /&gt;
        &lt;/Variables&gt;

        &lt;Breaks&gt;
            &lt;Break name="family"&gt;
                &lt;BreakFields&gt;
                    &lt;BreakField value="lastname" /&gt;
                &lt;/BreakFields&gt;
            &lt;/Break&gt;
        &lt;/Breaks&gt;

        &lt;Detail&gt;
            &lt;FieldHeaders&gt;
                &lt;Output&gt;
                    &lt;HorizontalLine size="2" color="'black'" /&gt;
                    &lt;HorizontalLine size="2" color="'white'" /&gt;
                    &lt;Line bold="yes"&gt;
                        &lt;literal width="2" align="'center'"&gt;ID&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="20"&gt;Name&lt;/literal&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="8" align="'right'"&gt;Age&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;Count&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;Avg age&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;Avg age&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;Age sum&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;Age sum&lt;/literal&gt;
                    &lt;/Line&gt;
                    &lt;Line bold="yes"&gt;
                        &lt;literal width="2"/&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="20"/&gt;
                        &lt;literal width="1"/&gt;
                        &lt;literal width="8"/&gt;
                        &lt;literal width="8"/&gt;
                        &lt;literal width="8" align="'right'"&gt;per fam&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;global&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;running&lt;/literal&gt;
                        &lt;literal width="8" align="'right'"&gt;total&lt;/literal&gt;
                    &lt;/Line&gt;
                    &lt;HorizontalLine size="2" color="'white'" /&gt;
                    &lt;HorizontalLine size="2" color="'black'" /&gt;
                    &lt;HorizontalLine size="2" color="'white'" /&gt;
                &lt;/Output&gt;
            &lt;/FieldHeaders&gt;

            &lt;FieldDetails&gt;
                &lt;Output&gt;
                    &lt;Line&gt;
                        &lt;field width="2" align="'right'" value="id" /&gt;
                        &lt;literal width="1" /&gt;
                        &lt;field width="20" value="firstname + ' ' + lastname" /&gt;
                        &lt;literal width="1"/&gt;
                        &lt;field width="8" value="age" format="'%.2d'" align="'right'" /&gt;
                        &lt;field width="8" value="v.var1" format="'%.2d'" align="'right'" /&gt;
                        &lt;field width="8" value="v.var2" format="'%.2d'" align="'right'" /&gt;
                        &lt;field width="8" value="v.var3" format="'%.2d'" align="'right'" /&gt;
                        &lt;field width="8" value="v.var4" format="'%.2d'" align="'right'" /&gt;
                        &lt;field width="8" value="v.var5" format="'%.2d'" align="'right'" /&gt;
                    &lt;/Line&gt;
                &lt;/Output&gt;
            &lt;/FieldDetails&gt;
        &lt;/Detail&gt;
    &lt;/Report&gt;
&lt;/OpenCReport&gt;</pre><p>
			</p></div><div class="sect2" id="EXAMPLE4PDF"><div class="titlepage"><div><div><h3 class="title">9.4.6. Report PDF result <a href="#EXAMPLE4PDF" class="id_link">#</a></h3></div></div></div><p>
				<span class="inlinemediaobject"><img src="images/example4.png" align="middle" /></span>
			</p></div></div></div><div class="chapter" id="LICENSE"><div class="titlepage"><div><div><h1 class="title">Chapter 10. GNU Free Documentation License</h1></div></div></div><p>
		</p><pre class="programlisting">                GNU Free Documentation License
                 Version 1.3, 3 November 2008


 Copyright (C) 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
     &lt;https://fsf.org/&gt;
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

0. PREAMBLE

The purpose of this License is to make a manual, textbook, or other
functional and useful document "free" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

This License is a kind of "copyleft", which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.


1. APPLICABILITY AND DEFINITIONS

This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The "Document", below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as "you".  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

A "Modified Version" of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

A "Secondary Section" is a named appendix or a front-matter section of
the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

The "Invariant Sections" are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

The "Cover Texts" are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

A "Transparent" copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not "Transparent" is called "Opaque".

Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML
or XML using a publicly available DTD, and standard-conforming simple
HTML, PostScript or PDF designed for human modification.  Examples of
transparent image formats include PNG, XCF and JPG.  Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the
machine-generated HTML, PostScript or PDF produced by some word
processors for output purposes only.

The "Title Page" means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, "Title Page" means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

The "publisher" means any person or entity that distributes copies of
the Document to the public.

A section "Entitled XYZ" means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as "Acknowledgements",
"Dedications", "Endorsements", or "History".)  To "Preserve the Title"
of such a section when you modify the Document means that it remains a
section "Entitled XYZ" according to this definition.

The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

2. VERBATIM COPYING

You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no
other conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

You may also lend copies, under the same conditions stated above, and
you may publicly display copies.


3. COPYING IN QUANTITY

If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.


4. MODIFICATIONS

You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

A. Use in the Title Page (and on the covers, if any) a title distinct
   from that of the Document, and from those of previous versions
   (which should, if there were any, be listed in the History section
   of the Document).  You may use the same title as a previous version
   if the original publisher of that version gives permission.
B. List on the Title Page, as authors, one or more persons or entities
   responsible for authorship of the modifications in the Modified
   Version, together with at least five of the principal authors of the
   Document (all of its principal authors, if it has fewer than five),
   unless they release you from this requirement.
C. State on the Title page the name of the publisher of the
   Modified Version, as the publisher.
D. Preserve all the copyright notices of the Document.
E. Add an appropriate copyright notice for your modifications
   adjacent to the other copyright notices.
F. Include, immediately after the copyright notices, a license notice
   giving the public permission to use the Modified Version under the
   terms of this License, in the form shown in the Addendum below.
G. Preserve in that license notice the full lists of Invariant Sections
   and required Cover Texts given in the Document's license notice.
H. Include an unaltered copy of this License.
I. Preserve the section Entitled "History", Preserve its Title, and add
   to it an item stating at least the title, year, new authors, and
   publisher of the Modified Version as given on the Title Page.  If
   there is no section Entitled "History" in the Document, create one
   stating the title, year, authors, and publisher of the Document as
   given on its Title Page, then add an item describing the Modified
   Version as stated in the previous sentence.
J. Preserve the network location, if any, given in the Document for
   public access to a Transparent copy of the Document, and likewise
   the network locations given in the Document for previous versions
   it was based on.  These may be placed in the "History" section.
   You may omit a network location for a work that was published at
   least four years before the Document itself, or if the original
   publisher of the version it refers to gives permission.
K. For any section Entitled "Acknowledgements" or "Dedications",
   Preserve the Title of the section, and preserve in the section all
   the substance and tone of each of the contributor acknowledgements
   and/or dedications given therein.
L. Preserve all the Invariant Sections of the Document,
   unaltered in their text and in their titles.  Section numbers
   or the equivalent are not considered part of the section titles.
M. Delete any section Entitled "Endorsements".  Such a section
   may not be included in the Modified Version.
N. Do not retitle any existing section to be Entitled "Endorsements"
   or to conflict in title with any Invariant Section.
O. Preserve any Warranty Disclaimers.

If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.

You may add a section Entitled "Endorsements", provided it contains
nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.


5. COMBINING DOCUMENTS

You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

In the combination, you must combine any sections Entitled "History"
in the various original documents, forming one section Entitled
"History"; likewise combine any sections Entitled "Acknowledgements",
and any sections Entitled "Dedications".  You must delete all sections
Entitled "Endorsements".


6. COLLECTIONS OF DOCUMENTS

You may make a collection consisting of the Document and other
documents released under this License, and replace the individual
copies of this License in the various documents with a single copy
that is included in the collection, provided that you follow the rules
of this License for verbatim copying of each of the documents in all
other respects.

You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.


7. AGGREGATION WITH INDEPENDENT WORKS

A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an "aggregate" if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.


8. TRANSLATION

Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

If a section in the Document is Entitled "Acknowledgements",
"Dedications", or "History", the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.


9. TERMINATION

You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.


10. FUTURE REVISIONS OF THIS LICENSE

The Free Software Foundation may publish new, revised versions of the
GNU Free Documentation License from time to time.  Such new versions
will be similar in spirit to the present version, but may differ in
detail to address new problems or concerns.  See
https://www.gnu.org/licenses/.

Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License "or any later version" applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

11. RELICENSING

"Massive Multiauthor Collaboration Site" (or "MMC Site") means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
"Massive Multiauthor Collaboration" (or "MMC") contained in the site
means any set of copyrightable works thus published on the MMC site.

"CC-BY-SA" means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

"Incorporate" means to publish or republish a Document, in whole or in
part, as part of another Document.

An MMC is "eligible for relicensing" if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole or
in part into the MMC, (1) had no cover texts or invariant sections, and
(2) were thus incorporated prior to November 1, 2008.

The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.


ADDENDUM: How to use this License for your documents

To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

    Copyright (c)  YEAR  YOUR NAME.
    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.3
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section entitled "GNU
    Free Documentation License".

If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the "with...Texts." line with this:

    with the Invariant Sections being LIST THEIR TITLES, with the
    Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.

If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.</pre><p>
	</p></div></div></body></html>