<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Variable</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="OpenCReports Manual"
HREF="book1.html"><LINK
REL="UP"
TITLE="Report XML description"
HREF="c141.html"><LINK
REL="PREVIOUS"
TITLE="Variables"
HREF="x1003.html"><LINK
REL="NEXT"
TITLE="Breaks"
HREF="x1097.html"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>OpenCReports Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1003.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Report XML description</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x1097.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="variablenode"
>Variable</A
></H1
><P
>&#13;			This node describes one
			<TT
CLASS="literal"
>&#60;Variable&#62;</TT
> node.
			It has no children nodes, only attributes.
			<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#60;Variable ... /&#62;
			</PRE
></TD
></TR
></TABLE
>
		</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="AEN1013"
>Variable attributes</A
></H2
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="AEN1015"
>Name</A
></H3
><P
>&#13;					The name of the variable. It must be
					unique in the list of variables for
					the parent <TT
CLASS="literal"
>&#60;Report&#62;</TT
> node.
					<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#60;Variable name="var1" /&#62;
					</PRE
></TD
></TR
></TABLE
>
				</P
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="AEN1020"
>Value</A
></H3
><P
>&#13;					The "value" of the variable, or rather,
					the expression from which the value is
					computed. Variables' values are computed
					for every data row produced by the report
					query. The expression may therefore reference
					field names of queries that are declared
					in the XML description or in programming code.
					<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#60;Variable value="q1.field1 + 2 * q2.field2" /&#62;
					</PRE
></TD
></TR
></TABLE
>
				</P
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="AEN1024"
>Type</A
></H3
><P
>&#13;					The type of the variable. Several variable
					types exist:
					<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#60;Variable value="q1.field" type="expression"/&#62;

&#60;Variable value="q1.field" type="count"/&#62;
&#60;Variable value="q1.field" type="countall"/&#62;

&#60;Variable value="q1.field" type="sum"/&#62;

&#60;Variable value="q1.field" type="average"/&#62;
&#60;Variable value="q1.field" type="averageall"/&#62;

&#60;Variable value="q1.field" type="highest"/&#62;
&#60;Variable value="q1.field" type="lowest"/&#62;

&#60;Variable value="q1.field" type="custom"/&#62;
					</PRE
></TD
></TR
></TABLE
>
				</P
><P
>&#13;					Default type is <TT
CLASS="literal"
>expression</TT
>,
					this is just a shortcut for the value expression
					that saves both typing and time to generate the
					report.
				</P
><P
>&#13;					The <TT
CLASS="literal"
>count</TT
> and
					<TT
CLASS="literal"
>countall</TT
> variable
					types count the the number of expression
					results for the data set. The former
					leaves out NULL values, the latter includes them.
					This is equivalent to COUNT(field) and COUNT(*)
					in SQL.
				</P
><P
>&#13;					The <TT
CLASS="literal"
>sum</TT
> variable type
					sums the non-NULL values of the expression
					results for the data set.
				</P
><P
>&#13;					The <TT
CLASS="literal"
>average</TT
> and
					<TT
CLASS="literal"
>averageall</TT
> variable types
					are combinations of <TT
CLASS="literal"
>sum</TT
>
					and either <TT
CLASS="literal"
>count</TT
> or
					<TT
CLASS="literal"
>countall</TT
>. They take the value
					computed for each data row, sums them, and
					divide by the number of values. The result
					of <TT
CLASS="literal"
>average</TT
> and
					<TT
CLASS="literal"
>averageall</TT
> may differ if
					there is NULL data in the result set.
				</P
><P
>&#13;					The <TT
CLASS="literal"
>highest</TT
> and
					<TT
CLASS="literal"
>lowest</TT
> variable types
					return the highest and the lowest values
					for the data set, respectively.
				</P
><P
>&#13;					The <TT
CLASS="literal"
>custom</TT
> variable type
					allow arbitrary user variables if the
					predefined types are not enough.
				</P
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="AEN1048"
>Attributes to define a Custom variable</A
></H3
><P
>&#13;					These attributes below define a custom variable.
					A base expression, up to two intermediary expressions
					and one result expression may be defined, together
					with the expression type.
					<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#60;Variable
    baseexpr="..."
    intermedexpr="..."
    intermed2expr="..."
    resultexpr="..."
    basetype="..."
    type="custom"/&#62;
					</PRE
></TD
></TR
></TABLE
>
				</P
><P
>&#13;					<TT
CLASS="literal"
>baseexpr</TT
>, <TT
CLASS="literal"
>intermedexpr</TT
>,
					<TT
CLASS="literal"
>intermed2expr</TT
> and <TT
CLASS="literal"
>resultexpr</TT
>
					are <A
HREF="c1159.html"
>Expressions</A
>.
				</P
><P
>&#13;					Possible values for <TT
CLASS="literal"
>basetype</TT
> are
					<TT
CLASS="literal"
>number</TT
>, <TT
CLASS="literal"
>string</TT
>
					or <TT
CLASS="literal"
>datetime</TT
>.
				</P
><P
>&#13;					It's the user's responsibility to use expressions
					valid for the base type. Failing that, the result
					value will be an apppropriate error message.
				</P
><P
>&#13;					Note that the <TT
CLASS="literal"
>baseexpr</TT
> attribute
					is an alias for <TT
CLASS="literal"
>value</TT
>.
				</P
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="AEN1067"
>Reset on break</A
></H3
><P
>&#13;					A variable may reset on break boundaries to the
					<TT
CLASS="literal"
>baseexpr</TT
> value. See
					<A
HREF="x1103.html"
>Break node</A
> and <A
HREF="c1828.html"
>Report breaks</A
>
					<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#60;Variable resetonbreak="break1" /&#62;
					</PRE
></TD
></TR
></TABLE
>
				</P
><P
>&#13;					Default is unset, i.e. no reset on a break.
				</P
></DIV
><DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="AEN1075"
>Precalculate (delayed)</A
></H3
><P
>&#13;					A variable may work two ways. One is to generate
					the current value that lead to it up to the current row.
					Say, for a variable of the <TT
CLASS="literal"
>average</TT
>
					type, the value of the variable for the 5th row
					is the average value of the base expression of the
					first 5 rows.
				</P
><P
>&#13;					The other way is to calculate the value for the last
					data row and provide that value for every data row.
					The attribute is accepted under two names:
					<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#60;Variable precalculate="yes" /&#62;
&#60;Variable delayed="yes" /&#62;
					</PRE
></TD
></TR
></TABLE
>
				</P
><P
>&#13;					Default is <TT
CLASS="literal"
>no</TT
>.
				</P
><P
>&#13;					<TT
CLASS="literal"
>precalculate="yes"</TT
> (or
					<TT
CLASS="literal"
>delayed="yes"</TT
> may be combined
					with <TT
CLASS="literal"
>resetonbreak="..."</TT
>.
					In this case, the "precalculated" value is computed
					for break periods.
				</P
><P
>&#13;					Precalculated values may be used to show values in
					<TT
CLASS="literal"
>&#60;ReportHeader&#62;</TT
>,
					<TT
CLASS="literal"
>&#60;ReportFooter&#62;</TT
>,
					<TT
CLASS="literal"
>&#60;FieldHeaders&#62;</TT
>,
					<TT
CLASS="literal"
>&#60;BreakHeader&#62;</TT
> and
					<TT
CLASS="literal"
>&#60;BreakFooter&#62;</TT
>
					but not in
					<TT
CLASS="literal"
>&#60;PageHeader&#62;</TT
> and
					<TT
CLASS="literal"
>&#60;PageFooter&#62;</TT
>.
					The reason for this is that the former headers and
					footers are in <TT
CLASS="literal"
>&#60;Report&#62;</TT
>
					scope with a query. On the other hand, the latter
					two are in <TT
CLASS="literal"
>&#60;Part&#62;</TT
> scope
					that don't know about queries.
				</P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1003.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x1097.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Variables</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c141.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Breaks</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>